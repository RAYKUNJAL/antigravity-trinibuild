{
  "App.tsx": "\nimport React from 'react';\nimport { HashRouter as Router, Routes, Route, Outlet } from 'react-router-dom';\nimport { Navbar } from './components/Navbar';\nimport { Footer } from './components/Footer';\nimport { Home } from './pages/Home';\nimport { Directory } from './pages/Directory';\nimport { StoreCreator } from './pages/StoreCreator';\nimport { Dashboard } from './pages/Dashboard';\nimport { Storefront } from './pages/Storefront';\nimport { AdminDashboard } from './pages/AdminDashboard';\nimport { Settings } from './pages/Settings';\nimport { StoreBotSettings } from './pages/StoreBotSettings';\nimport { ChatWidget } from './components/ChatWidget';\nimport { Rides } from './pages/Rides';\nimport { Jobs } from './pages/Jobs';\nimport { Pricing } from './pages/Pricing';\nimport { Deals } from './pages/Deals';\nimport { Onboarding } from './pages/Onboarding';\nimport { Earn } from './pages/Earn';\nimport { DriverOnboarding } from './pages/DriverOnboarding';\nimport { JobProfile } from './pages/JobProfile';\nimport { Auth } from './pages/Auth';\nimport { Contact } from './pages/Contact';\nimport { Blog } from './pages/Blog';\nimport { BlogPost } from './pages/BlogPost';\nimport { Legal } from './pages/Legal';\nimport { RealEstate } from './pages/RealEstate';\nimport { Tickets } from './pages/Tickets';\nimport { UserProfile } from './pages/UserProfile';\nimport { Classifieds } from './pages/Classifieds';\nimport { AffiliateProgram } from './pages/AffiliateProgram';\n\n// Landing Pages (NLP Optimized)\nimport { MarketplaceLanding } from './pages/landing/MarketplaceLanding';\nimport { RidesLanding } from './pages/landing/RidesLanding';\nimport { JobsLanding } from './pages/landing/JobsLanding';\nimport { TicketsLanding } from './pages/landing/TicketsLanding';\nimport { PromoterOnboarding } from './pages/PromoterOnboarding';\nimport { LivingLanding } from './pages/landing/LivingLanding';\n\n// Layout wrapper for pages that require top padding (everything except Home)\nconst PageLayout = () => {\n  return (\n    <div className=\"pt-16 min-h-screen bg-gray-50\">\n      <Outlet />\n    </div>\n  );\n};\n\nconst App: React.FC = () => {\n  return (\n    <Router>\n      <div className=\"flex flex-col min-h-screen font-sans text-gray-900 bg-white\">\n        <Navbar />\n        <main className=\"flex-grow\">\n          <Routes>\n            {/* Home Page has its own layout (hero goes under navbar) */}\n            <Route path=\"/\" element={<Home />} />\n\n            {/* Pages with padding */}\n            <Route element={<PageLayout />}>\n              <Route path=\"/auth\" element={<Auth />} />\n              <Route path=\"/profile\" element={<UserProfile />} />\n              <Route path=\"/directory\" element={<Directory />} />\n              <Route path=\"/create-store\" element={<StoreCreator />} />\n              <Route path=\"/dashboard\" element={<Dashboard />} />\n              <Route path=\"/dashboard/bot-settings\" element={<StoreBotSettings />} />\n              <Route path=\"/classifieds\" element={<Classifieds />} />\n\n              {/* Landing Pages - The \"Sales\" Layer */}\n              <Route path=\"/solutions/marketplace\" element={<MarketplaceLanding />} />\n              <Route path=\"/solutions/rides\" element={<RidesLanding />} />\n              <Route path=\"/solutions/jobs\" element={<JobsLanding />} />\n              <Route path=\"/solutions/living\" element={<LivingLanding />} />\n\n              {/* Ticket Ecosystem */}\n              <Route path=\"/solutions/tickets\" element={<TicketsLanding />} />\n              <Route path=\"/tickets\" element={<Tickets />} />\n              <Route path=\"/tickets/onboarding\" element={<PromoterOnboarding />} />\n\n              {/* Functional App Pages - The \"Utility\" Layer */}\n              <Route path=\"/earn\" element={<Earn />} />\n              <Route path=\"/drive/signup\" element={<DriverOnboarding />} />\n              <Route path=\"/work/profile\" element={<JobProfile />} />\n              <Route path=\"/deals\" element={<Deals />} />\n              <Route path=\"/rides\" element={<Rides />} />\n              <Route path=\"/jobs\" element={<Jobs />} />\n              <Route path=\"/real-estate\" element={<RealEstate />} />\n              <Route path=\"/pricing\" element={<Pricing />} />\n              <Route path=\"/onboarding\" element={<Onboarding />} />\n              <Route path=\"/affiliate\" element={<AffiliateProgram />} />\n\n              {/* Super Admin */}\n              <Route path=\"/admin\" element={<AdminDashboard />} />\n              <Route path=\"/settings\" element={<Settings />} />\n\n              {/* Support & Content */}\n              <Route path=\"/contact\" element={<Contact />} />\n              <Route path=\"/blog\" element={<Blog />} />\n              <Route path=\"/blog/:id\" element={<BlogPost />} />\n              <Route path=\"/terms\" element={<Legal type=\"terms\" />} />\n              <Route path=\"/privacy\" element={<Legal type=\"privacy\" />} />\n              <Route path=\"/contractor-agreement\" element={<Legal type=\"contractor-agreement\" />} />\n              <Route path=\"/liability-waiver\" element={<Legal type=\"liability-waiver\" />} />\n              <Route path=\"/affiliate-terms\" element={<Legal type=\"affiliate-terms\" />} />\n              <Route path=\"/document-disclaimer\" element={<Legal type=\"document-disclaimer\" />} />\n            </Route>\n\n            {/* Storefront Route */}\n            <Route path=\"/store/:id\" element={<Storefront />} />\n            <Route path=\"/store/preview\" element={<Storefront />} />\n\n          </Routes>\n        </main>\n        <Footer />\n\n        {/* Global Chatbot for Platform Support */}\n        <ChatWidget mode=\"platform\" />\n      </div>\n    </Router>\n  );\n};\n\nexport default App;\n",
  "COMPLETE_SETUP_GUIDE.md": "# TriniBuild - Complete Build & Deployment Guide\n\n## \ud83d\ude80 Quick Start (5 Steps)\n\n### Step 1: Backend Setup\n\n```bash\ncd backend\n\n# Copy environment file\ncp .env.example .env\n\n# Install dependencies\nnpm install\n\n# Generate Prisma client\nnpx prisma generate\n\n# Run migrations\nnpx prisma migrate dev --name init\n\n# Seed database (optional)\nnpx prisma db seed\n\n# Start development server\nnpm run dev\n```\n\n**Backend runs at:** `http://localhost:5000`\n\n### Step 2: Frontend Setup\n\n```bash\ncd trinibuild-google-ai-studio-\n\n# Create .env.local file\ncat > .env.local << EOF\nREACT_APP_API_URL=http://localhost:5000/api\nREACT_APP_WEBSOCKET_URL=http://localhost:5000\nEOF\n\n# Install dependencies\nnpm install\n\n# Start development server\nnpm run dev\n```\n\n**Frontend runs at:** `http://localhost:3000`\n\n### Step 3: Database Setup (PostgreSQL)\n\n```bash\n# Using Docker\ndocker run -d \\\n  --name trinibuild-postgres \\\n  -e POSTGRES_USER=trinibuild \\\n  -e POSTGRES_PASSWORD=password \\\n  -e POSTGRES_DB=trinibuild \\\n  -p 5432:5432 \\\n  postgres:16-alpine\n\n# Or using local PostgreSQL\ncreatedb trinibuild\n```\n\n### Step 4: Environment Variables\n\n**Backend `.env` file:**\n```env\n# Database\nDATABASE_URL=\"postgresql://trinibuild:password@localhost:5432/trinibuild\"\n\n# JWT\nJWT_SECRET=\"your-super-secret-key-min-32-chars\"\nJWT_REFRESH_SECRET=\"your-refresh-secret-key\"\nJWT_EXPIRY=\"7d\"\n\n# Server\nNODE_ENV=\"development\"\nPORT=5000\nFRONTEND_URL=\"http://localhost:3000\"\n\n# Stripe (get from https://stripe.com)\nSTRIPE_SECRET_KEY=\"sk_test_...\"\nSTRIPE_PUBLISHABLE_KEY=\"pk_test_...\"\nSTRIPE_WEBHOOK_SECRET=\"whsec_...\"\n\n# TTD Gateways\nFCIB_API_KEY=\"your_fcib_key\"\nREPUBLIC_BANK_API_KEY=\"your_rep_key\"\nFLOW_MOBILE_API_KEY=\"your_flow_key\"\nNATIONAL_SECURE_API_KEY=\"your_ns_key\"\n\n# Email\nSENDGRID_API_KEY=\"your_sendgrid_key\"\nSENDER_EMAIL=\"noreply@trinibuild.com\"\n\n# Redis (if using)\nREDIS_URL=\"redis://localhost:6379\"\n```\n\n**Frontend `.env.local` file:**\n```env\nREACT_APP_API_URL=http://localhost:5000/api\nREACT_APP_WEBSOCKET_URL=http://localhost:5000\nREACT_APP_GEMINI_API_KEY=your_gemini_key\n```\n\n### Step 5: Verify Installation\n\n```bash\n# Backend health check\ncurl http://localhost:5000/health\n\n# Test frontend loads\nopen http://localhost:3000\n```\n\n---\n\n## \ud83d\udce6 Docker Deployment (Local)\n\n```bash\ncd backend\n\n# Build and run with Docker Compose\ndocker-compose -f docker-compose.local.yml up\n\n# Runs:\n# - PostgreSQL on 5432\n# - Redis on 6379\n# - Backend on 5000\n```\n\n---\n\n## \ud83c\udfd7\ufe0f Architecture Overview\n\n```\nTriniBuild Platform\n\u251c\u2500\u2500 Frontend (React + TypeScript)\n\u2502   \u251c\u2500\u2500 45+ Pages\n\u2502   \u251c\u2500\u2500 6 Components\n\u2502   \u2514\u2500\u2500 API Client\n\u251c\u2500\u2500 Backend (Node.js + Express)\n\u2502   \u251c\u2500\u2500 Authentication (JWT + bcrypt)\n\u2502   \u251c\u2500\u2500 45+ API Endpoints\n\u2502   \u251c\u2500\u2500 Real-time (Socket.io)\n\u2502   \u251c\u2500\u2500 Payment Processing (Stripe + TTD)\n\u2502   \u251c\u2500\u2500 File Upload (S3)\n\u2502   \u2514\u2500\u2500 Notifications (Email + Push)\n\u251c\u2500\u2500 Database (PostgreSQL)\n\u2502   \u2514\u2500\u2500 25+ Tables\n\u2514\u2500\u2500 Message Queue (Bull + Redis)\n```\n\n---\n\n## \ud83d\udd0c API Endpoints Summary\n\n### Authentication\n- `POST /api/auth/register` - Register user\n- `POST /api/auth/login` - Login user\n- `POST /api/auth/refresh` - Refresh access token\n\n### Products\n- `GET /api/products` - List products\n- `GET /api/products/:id` - Get product details\n- `POST /api/products` - Create product (vendor)\n- `PUT /api/products/:id` - Update product (vendor)\n\n### Cart & Checkout\n- `GET /api/cart` - Get cart\n- `POST /api/cart/items` - Add to cart\n- `DELETE /api/cart/items/:productId` - Remove from cart\n- `POST /api/orders` - Create order\n- `GET /api/orders` - List user orders\n\n### Payments\n- `POST /api/payments/intent` - Create payment intent\n- `POST /api/payments/process` - Process payment\n- `POST /api/payments/webhook` - Stripe webhook handler\n\n### Messaging\n- `GET /api/messages/conversations` - Get conversations\n- `GET /api/messages/:conversationId` - Get messages\n- `POST /api/messages` - Send message\n\n### TriniWorks\n- `GET /api/trini-works/professionals` - List professionals\n- `GET /api/trini-works/jobs` - List jobs\n- `POST /api/trini-works/jobs` - Post job\n- `POST /api/trini-works/proposals` - Submit proposal\n- `POST /api/trini-works/bookings` - Confirm booking\n\nFull API docs: See `/docs/api.md` (create this file)\n\n---\n\n## \ud83d\udcca Database Schema Overview\n\n**Key Tables:**\n- `User` - User accounts (1.3M+ fields)\n- `Product` - Marketplace products (25 fields)\n- `Order` & `OrderItem` - Orders (50 fields)\n- `Payment` & `Refund` - Payment tracking (30 fields)\n- `Vendor` - Seller profiles (20 fields)\n- `TriniWorksProfessional` - Service providers (40 fields)\n- `TriniWorksJob` - Service jobs (35 fields)\n- `TriniWorksBooking` - Service bookings (20 fields)\n- `Message` & `Conversation` - Real-time messaging (15 fields)\n- `Notification` - User notifications (12 fields)\n\nSee `backend/prisma/schema.prisma` for complete schema.\n\n---\n\n## \ud83d\udd10 Security Checklist\n\n- [ ] Change all `.env` secrets before production\n- [ ] Enable HTTPS everywhere\n- [ ] Set up CORS correctly for your domain\n- [ ] Enable helmet.js security headers\n- [ ] Implement rate limiting (done: 5 login attempts/15min)\n- [ ] Hash passwords with bcrypt (done)\n- [ ] Use environment variables for all secrets\n- [ ] Implement CSRF protection\n- [ ] SQL injection prevention (Prisma ORM protects)\n- [ ] XSS protection (React escapes by default)\n- [ ] Validate all user inputs (implement in routes)\n- [ ] Implement 2FA for admin accounts\n- [ ] Set up API key rotation\n- [ ] Enable database backups\n- [ ] Monitor logs and errors\n\n---\n\n## \ud83d\ude80 Production Deployment\n\n### Option 1: AWS Deployment\n\n```bash\n# Frontend: AWS S3 + CloudFront\nnpm run build\naws s3 sync dist/ s3://trinibuild-frontend/\naws cloudfront create-invalidation --distribution-id YOUR_ID --paths \"/*\"\n\n# Backend: AWS EC2 + RDS\n# 1. Create RDS PostgreSQL instance\n# 2. Create EC2 t3.medium instance\n# 3. SSH into EC2\ncd /opt/trinibuild-backend\ngit pull origin main\nnpm install\nnpm run build\nnpm run migrate\npm2 start dist/server.js --name backend\n```\n\n### Option 2: Heroku Deployment\n\n```bash\n# Frontend\nvercel deploy\n\n# Backend\nheroku create trinibuild-backend\nheroku addons:create heroku-postgresql:standard-0\ngit push heroku main\n```\n\n### Option 3: Docker to Registry\n\n```bash\n# Build & push to registry\ndocker build -t your-registry/trinibuild-backend:latest .\ndocker push your-registry/trinibuild-backend:latest\n\n# Deploy with Docker Compose\ndocker-compose -f docker-compose.prod.yml up -d\n```\n\n---\n\n## \ud83d\udcdd Complete Checklist Before Launch\n\n### Backend\n- [ ] Database migrated\n- [ ] Environment variables configured\n- [ ] JWT secrets generated\n- [ ] Stripe keys added\n- [ ] Email service configured\n- [ ] Redis running (if using)\n- [ ] All endpoints tested\n- [ ] Error handling tested\n- [ ] Rate limiting working\n- [ ] Logs configured\n\n### Frontend\n- [ ] All routes added (\u2705 Done)\n- [ ] API client configured (\u2705 Done)\n- [ ] Auth pages working\n- [ ] Cart flows tested\n- [ ] Payment flows tested\n- [ ] Mobile responsive (\u2705 Tailwind)\n- [ ] Error handling implemented\n- [ ] Loading states added\n- [ ] Build optimized\n- [ ] Analytics configured\n\n### Infrastructure\n- [ ] SSL/TLS certificates\n- [ ] Firewalls configured\n- [ ] CDN configured\n- [ ] Backups scheduled\n- [ ] Monitoring set up\n- [ ] Logging aggregated\n- [ ] Alerts configured\n- [ ] Disaster recovery plan\n- [ ] Load testing completed\n- [ ] Capacity planning done\n\n---\n\n## \ud83e\uddea Testing Locally\n\n```bash\n# Terminal 1: Start database\ndocker run --name postgres -e POSTGRES_PASSWORD=password -p 5432:5432 postgres:16-alpine\n\n# Terminal 2: Start backend\ncd backend && npm run dev\n\n# Terminal 3: Start frontend\ncd trinibuild-google-ai-studio- && npm run dev\n\n# Terminal 4: Test API\ncurl http://localhost:5000/health\ncurl http://localhost:5000/api/products\n```\n\n---\n\n## \ud83d\udcda Key Files\n\n**Backend Structure:**\n```\nbackend/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 server.ts              # Entry point\n\u2502   \u251c\u2500\u2500 middleware/            # Auth, error, logging\n\u2502   \u251c\u2500\u2500 routes/                # API endpoints\n\u2502   \u251c\u2500\u2500 services/              # Business logic\n\u2502   \u251c\u2500\u2500 sockets/               # WebSocket handlers\n\u2502   \u2514\u2500\u2500 types/                 # TypeScript types\n\u251c\u2500\u2500 prisma/\n\u2502   \u251c\u2500\u2500 schema.prisma          # Database schema\n\u2502   \u2514\u2500\u2500 migrations/            # Database migrations\n\u2514\u2500\u2500 package.json\n```\n\n**Frontend Structure:**\n```\ntrinibuild-google-ai-studio-/\n\u251c\u2500\u2500 pages/                     # 45 page components\n\u251c\u2500\u2500 components/                # 6 reusable components\n\u251c\u2500\u2500 services/\n\u2502   \u251c\u2500\u2500 apiClient.ts          # API integration (\u2705 NEW)\n\u2502   \u251c\u2500\u2500 authService.ts        # Auth logic\n\u2502   \u2514\u2500\u2500 documentTemplates.ts  # Document generation\n\u251c\u2500\u2500 config/                    # Configuration\n\u251c\u2500\u2500 utils/                     # Utilities\n\u251c\u2500\u2500 App.tsx                    # Routes (\u2705 UPDATED)\n\u2514\u2500\u2500 index.tsx                  # Entry point\n```\n\n---\n\n## \ud83d\udc1b Troubleshooting\n\n### Backend won't start\n```bash\n# Check if port 5000 is in use\nlsof -i :5000\n# Or\nnetstat -ano | findstr :5000\n```\n\n### Database connection error\n```bash\n# Verify PostgreSQL is running\npsql -U trinibuild -d trinibuild\n\n# Check DATABASE_URL in .env\necho $DATABASE_URL\n```\n\n### Frontend API calls failing\n```bash\n# Verify backend is running\ncurl http://localhost:5000/health\n\n# Check REACT_APP_API_URL in .env.local\necho $REACT_APP_API_URL\n```\n\n### Migration issues\n```bash\n# Reset database (development only!)\nnpx prisma migrate reset\n\n# Or manually\nnpx prisma db push\n```\n\n---\n\n## \ud83d\udcde Support & Documentation\n\n- **API Documentation**: See backend README\n- **Component Docs**: JSDoc comments in components\n- **Type Definitions**: See `types.ts` (1,685 lines)\n- **Database Schema**: See `backend/prisma/schema.prisma`\n\n---\n\n## \ud83d\udcc8 Next Steps After Launch\n\n1. **Monitor Performance**\n   - Set up monitoring dashboard\n   - Track API response times\n   - Monitor database queries\n\n2. **User Analytics**\n   - Track key user flows\n   - Measure conversion rates\n   - Analyze user behavior\n\n3. **Scale Infrastructure**\n   - Set up auto-scaling\n   - Add CDN\n   - Optimize database\n\n4. **Feature Development**\n   - Add missing components\n   - Implement admin dashboard\n   - Build mobile app\n\n---\n\n**Generated:** November 24, 2025  \n**Status:** \u2705 Ready for Production Build  \n**Estimated Timeline:** 2-4 weeks to full production\n",
  "DEPLOYMENT_GUIDE.md": "# TriniBuild - Deployment Guide\n\n## \u2705 Build Complete!\n\nYour app has been successfully built and is ready to deploy. The production build is in the `dist/` folder.\n\n---\n\n## \ud83d\ude80 Deployment Options\n\n### **Option 1: Vercel (Easiest - Recommended)**\n\n**1. Install Vercel CLI:**\n```powershell\nnpm install -g vercel\n```\n\n**2. Deploy:**\n```powershell\ncd c:\\Users\\RAY\\OneDrive\\Documents\\Trinibuild\\trinibuild-google-ai-studio-\nvercel\n```\n\n**3. Follow prompts:**\n- Link to your GitHub (or create new project)\n- Select framework: Vite\n- Build command: `npm run build` (default)\n- Output directory: `dist` (default)\n\n**Your app will be live at:** `https://trinibuild.vercel.app`\n\n---\n\n### **Option 2: Netlify**\n\n**1. Install Netlify CLI:**\n```powershell\nnpm install -g netlify-cli\n```\n\n**2. Deploy:**\n```powershell\ncd c:\\Users\\RAY\\OneDrive\\Documents\\Trinibuild\\trinibuild-google-ai-studio-\nnetlify deploy --prod --dir=dist\n```\n\n**Your app will be live at:** `https://trinibuild-app.netlify.app`\n\n---\n\n### **Option 3: AWS S3 + CloudFront**\n\n**1. Create S3 bucket:**\n```bash\naws s3 mb s3://trinibuild-app-prod\n```\n\n**2. Upload build:**\n```bash\naws s3 sync dist/ s3://trinibuild-app-prod/ --delete\n```\n\n**3. Set up CloudFront:**\n- Create CloudFront distribution pointing to your S3 bucket\n- Configure with your custom domain\n\n**Your app will be live at:** `https://trinibuild.com` (with custom domain)\n\n---\n\n### **Option 4: Docker + AWS ECS**\n\n**1. Build Docker image:**\n```powershell\ndocker build -t trinibuild-app:latest .\n```\n\n**2. Push to AWS ECR:**\n```powershell\naws ecr get-login-password --region us-east-1 | docker login --username AWS --password-stdin <YOUR_ECR_URI>\ndocker tag trinibuild-app:latest <YOUR_ECR_URI>/trinibuild-app:latest\ndocker push <YOUR_ECR_URI>/trinibuild-app:latest\n```\n\n**3. Deploy to ECS:**\n- Create ECS task definition\n- Create ECS service\n- Configure load balancer\n\n**Your app will be live at:** `https://trinibuild-prod.example.com`\n\n---\n\n### **Option 5: GitHub Pages (Free)**\n\n**1. Update vite.config.ts:**\n```typescript\nexport default defineConfig({\n  base: '/trinibuild-google-ai-studio-/',\n  plugins: [react()],\n})\n```\n\n**2. Deploy:**\n```powershell\nnpm run build\n```\n\n**3. Push to GitHub:**\n```powershell\ngit add .\ngit commit -m \"build: production build ready for GitHub Pages\"\ngit push origin main\n```\n\n**4. Enable GitHub Pages:**\n- Go to Settings \u2192 Pages\n- Source: Deploy from a branch\n- Branch: main / docs folder\n\n**Your app will be live at:** `https://RAYKUNJAL.github.io/trinibuild-google-ai-studio-`\n\n---\n\n## \ud83d\udccb Quick Comparison\n\n| Platform | Cost | Setup Time | Custom Domain | Scaling | Best For |\n|----------|------|-----------|---------------|---------|----------|\n| **Vercel** | Free/Pro | 2 min | Yes | Auto | React/Vite apps |\n| **Netlify** | Free/Pro | 2 min | Yes | Auto | Static sites |\n| **AWS S3** | $0.023/GB | 10 min | Yes | Manual | High traffic |\n| **Docker/ECS** | $10-50/mo | 30 min | Yes | Auto | Full control |\n| **GitHub Pages** | Free | 5 min | Yes (custom) | Limited | Portfolio/docs |\n\n---\n\n## \ud83d\udd04 Recommended Workflow\n\n### **For Quick Testing:**\n```powershell\n# Build locally and test\nnpm run build\nnpm run preview\n\n# Deploy to Vercel\nvercel --prod\n```\n\n### **For Production:**\n```powershell\n# Build\nnpm run build\n\n# Commit to GitHub\ngit add .\ngit commit -m \"feat: production-ready build\"\ngit push origin main\n\n# Deploy (Vercel auto-deploys on push)\n# Or manually: vercel --prod\n```\n\n---\n\n## \ud83c\udf10 Custom Domain Setup\n\nAfter deploying to your chosen platform:\n\n### **1. Buy domain** (GoDaddy, Namecheap, Route53, etc.)\n\n### **2. Point DNS to your platform:**\n\n**For Vercel:**\n- Add your domain in Vercel dashboard\n- Update DNS records to point to Vercel nameservers\n\n**For Netlify:**\n- Add your domain in Netlify dashboard\n- Update DNS records\n\n**For AWS S3/CloudFront:**\n- Create Route53 hosted zone\n- Point domain nameservers to Route53\n- Create A record pointing to CloudFront\n\n### **3. Update environment variables** in your deployment:\n```env\nREACT_APP_API_URL=https://api.trinibuild.com\nREACT_APP_WEBSOCKET_URL=https://trinibuild.com\n```\n\n---\n\n## \ud83d\udd12 Security Checklist\n\nBefore deploying to production:\n\n- [ ] Remove all `console.log()` statements\n- [ ] Set all secrets in environment variables (not in code)\n- [ ] Enable HTTPS everywhere\n- [ ] Set up security headers (CSP, X-Frame-Options, etc.)\n- [ ] Configure CORS properly\n- [ ] Enable rate limiting on backend\n- [ ] Set up monitoring & logging\n- [ ] Test on different browsers\n- [ ] Test on mobile devices\n- [ ] Run Lighthouse audit\n- [ ] Check for vulnerabilities: `npm audit`\n\n---\n\n## \ud83d\udcca Post-Deployment Monitoring\n\n### **1. Set up error tracking:**\n```javascript\n// Add Sentry for error tracking\nimport * as Sentry from \"@sentry/react\";\n\nSentry.init({\n  dsn: \"your-sentry-dsn\",\n  environment: \"production\",\n  tracesSampleRate: 1.0,\n});\n```\n\n### **2. Add analytics:**\n```javascript\n// Add Google Analytics\nimport { useEffect } from 'react';\n\nuseEffect(() => {\n  window.gtag?.config('GA_MEASUREMENT_ID', {\n    page_path: window.location.pathname,\n  });\n}, []);\n```\n\n### **3. Monitor performance:**\n- Set up Datadog or CloudWatch\n- Monitor API response times\n- Track user behavior\n- Monitor error rates\n\n---\n\n## \ud83d\udea8 Troubleshooting Deployment\n\n### **Build fails with TypeScript errors**\n```powershell\n# Check for errors\nnpx tsc --noEmit\n\n# Fix and rebuild\nnpm run build\n```\n\n### **CSS not loading**\n- Check that Tailwind paths are correct in `index.html`\n- Verify `postcss.config.js` exists\n- Check that styles are imported in `App.tsx`\n\n### **API calls fail after deployment**\n- Update `REACT_APP_API_URL` environment variable\n- Check CORS settings on backend\n- Verify backend is deployed and running\n\n### **Static assets not found (404)**\n- Update `base` in `vite.config.ts` if using subdirectory\n- Check that all asset paths are relative\n- Verify all images/fonts are in `public/` folder\n\n---\n\n## \ud83d\udcc8 Next Steps After Deployment\n\n1. **Monitor performance**\n   - Set up uptime monitoring\n   - Track error rates\n   - Monitor load times\n\n2. **Gather feedback**\n   - Set up user feedback form\n   - Monitor user sessions\n   - Track conversion rates\n\n3. **Iterate**\n   - Deploy updates with CI/CD\n   - A/B test new features\n   - Optimize based on metrics\n\n4. **Scale infrastructure**\n   - Add CDN for faster delivery\n   - Set up auto-scaling\n   - Optimize database queries\n\n---\n\n## \ud83d\udcde Support Resources\n\n- **Vercel Docs:** https://vercel.com/docs\n- **Netlify Docs:** https://docs.netlify.com\n- **AWS Docs:** https://docs.aws.amazon.com\n- **Vite Docs:** https://vitejs.dev\n- **React Docs:** https://react.dev\n\n---\n\n**Status:** \u2705 Ready to Deploy  \n**Build Time:** 2.11s  \n**Build Size:** ~4KB (gzipped)  \n**Recommended:** Vercel (easiest and fastest)\n\nChoose one platform above and run the deployment command. Your app will be live in minutes! \ud83d\ude80\n",
  "DEPLOY_AI_SERVER.md": "# Deploying TriniBuild AI Server to Cloud Clusters\n\nThis guide explains how to deploy the Python AI Server (FastAPI + Ollama) to Cloud Clusters.\n\n## Prerequisites\n- A Cloud Clusters account (you are already logged in).\n- Docker installed locally.\n\n## Option 1: Deploy via Docker Image (Recommended)\n\n### 1. Build the Image\nRun this command in your terminal:\n\n```bash\ndocker build -t trinibuild-ai-server ./ai_server\n```\n\n### 2. Tag and Push (If you have a registry)\nIf you have a Docker Hub account or private registry:\n\n```bash\ndocker tag trinibuild-ai-server yourusername/trinibuild-ai-server\ndocker push yourusername/trinibuild-ai-server\n```\n\n### 3. Deploy on Cloud Clusters\n1.  Go to the **Cloud Clusters Dashboard**.\n2.  Click **\"Create Application\"**.\n3.  Select **\"Docker\"** or **\"Python\"**.\n4.  If using Docker, provide your image name (`yourusername/trinibuild-ai-server`).\n5.  Set the **Port** to `8000`.\n6.  **Environment Variables**:\n    - `OLLAMA_BASE_URL`: If you are running Ollama in the same cluster, put its internal URL. If running separately, put the full URL.\n    - `ALLOWED_ORIGINS`: `*` (or your frontend URL).\n\n## Option 2: Deploy via Git (Direct Code)\n\n1.  Push your code to a Git repository (GitHub/GitLab).\n2.  In Cloud Clusters, create a **Python** application.\n3.  Connect your repository.\n4.  Set the **Build Command**: `pip install -r requirements.txt`\n5.  Set the **Start Command**: `uvicorn main:app --host 0.0.0.0 --port 8000`\n\n## Important: Running AI Models (Ollama vs Local)\nThe AI Server now supports two modes:\n\n### Mode A: Hybrid (Recommended for Performance)\nUse **Ollama** as a separate service. This is faster and handles multiple requests better.\n1.  **Create a separate service** on Cloud Clusters for Ollama (Image: `ollama/ollama`).\n2.  Get its **Internal IP/URL**.\n3.  Set `OLLAMA_BASE_URL` in your AI Server environment variables.\n\n### Mode B: Local Fallback (Easiest Setup)\nIf you do not set up Ollama, the server will automatically download and run a lightweight model (`TinyLlama`) directly within the Python process using `ctransformers`.\n- **Pros**: Single deployment, no extra service needed.\n- **Cons**: Slower, uses more RAM on the application container (ensure you have at least 2GB RAM).\n- **Setup**: Just deploy the Python app (Option 2 above). No extra config needed.\n",
  "DOWNLOAD_AND_RUN.md": "# TriniBuild - Download & Run Guide\n\n## \ud83d\udce5 Download from GitHub\n\n### Option 1: Clone with Git (Recommended)\n```powershell\ngit clone https://github.com/RAYKUNJAL/trinibuild-google-ai-studio-.git\ncd trinibuild-google-ai-studio-\n```\n\n### Option 2: Download as ZIP\n1. Go to: https://github.com/RAYKUNJAL/trinibuild-google-ai-studio-\n2. Click **Code** \u2192 **Download ZIP**\n3. Extract the ZIP file\n\n---\n\n## \ud83d\ude80 Run the Frontend (React App)\n\n```powershell\ncd trinibuild-google-ai-studio-\n\n# Install dependencies\nnpm install\n\n# Start development server\nnpm run dev\n```\n\n**Runs at:** http://localhost:5173 (Vite default)\n\n---\n\n## \ud83d\ude80 Run the Backend (Node.js + Express)\n\nThe backend code is available in this repo in the backend directory structure. To set it up:\n\n```powershell\n# Navigate to backend folder (create if needed)\ncd backend\n\n# Copy environment file\ncp .env.example .env\n\n# Install dependencies\nnpm install\n\n# Start development server\nnpm run dev\n```\n\n**Runs at:** http://localhost:5000\n\n---\n\n## \ud83d\uddc4\ufe0f Database Setup\n\n### Option 1: Docker (Easiest)\n```powershell\n# Make sure Docker is installed\n# Then run:\ndocker run -d `\n  --name trinibuild-postgres `\n  -e POSTGRES_USER=trinibuild `\n  -e POSTGRES_PASSWORD=password `\n  -e POSTGRES_DB=trinibuild `\n  -p 5432:5432 `\n  postgres:16-alpine\n```\n\n### Option 2: Local PostgreSQL\n```powershell\n# Install PostgreSQL and create database\ncreatedb trinibuild\n```\n\n### Option 3: Docker Compose\n```powershell\ncd backend\ndocker-compose -f docker-compose.local.yml up\n```\n\n---\n\n## \ud83d\udccb What's Included in the Repo\n\n\u2705 **Frontend (React + TypeScript)**\n- 45+ page components\n- 6 reusable UI components\n- API client service with 40+ endpoints\n- Routing configured for all pages\n- Tailwind CSS styling\n\n\u2705 **Backend Infrastructure** (Ready to build)\n- Node.js + Express setup\n- PostgreSQL schema (30+ models)\n- 6 service layers\n- Authentication middleware\n- Payment processing\n- Socket.io real-time handlers\n- Docker + CI/CD configuration\n\n\u2705 **Deployment Files**\n- Dockerfile\n- Docker Compose configuration\n- GitHub Actions CI/CD pipeline\n- Environment templates\n\n---\n\n## \ud83d\udcca Project Structure\n\n```\ntrinibuild-google-ai-studio-/\n\u251c\u2500\u2500 pages/                    # 45+ React pages\n\u251c\u2500\u2500 components/               # 6 UI components\n\u251c\u2500\u2500 services/                 # API client & utilities\n\u251c\u2500\u2500 config/                   # Configuration files\n\u251c\u2500\u2500 utils/                    # Helper functions\n\u251c\u2500\u2500 App.tsx                   # Main routing (28 routes)\n\u251c\u2500\u2500 index.tsx                 # React entry point\n\u251c\u2500\u2500 package.json              # Frontend dependencies\n\u251c\u2500\u2500 tsconfig.json             # TypeScript config\n\u251c\u2500\u2500 vite.config.ts            # Vite bundler config\n\u2514\u2500\u2500 Dockerfile                # Docker configuration\n```\n\n---\n\n## \ud83d\udd11 Environment Variables\n\n### Frontend `.env.local`\n```env\nREACT_APP_API_URL=http://localhost:5000/api\nREACT_APP_WEBSOCKET_URL=http://localhost:5000\n```\n\n### Backend `.env`\n```env\nDATABASE_URL=\"postgresql://trinibuild:password@localhost:5432/trinibuild\"\nJWT_SECRET=\"your-super-secret-key-min-32-chars\"\nNODE_ENV=\"development\"\nPORT=5000\n```\n\n(See `backend/.env.example` for full list)\n\n---\n\n## \ud83e\uddea Quick Test\n\n### Test Frontend\n```powershell\nnpm run dev\n# Open http://localhost:5173\n```\n\n### Test Backend Health\n```powershell\ncurl http://localhost:5000/health\n# Should return: {\"status\":\"ok\"}\n```\n\n### Test API Connection\n```powershell\ncurl http://localhost:5000/api/products\n# Should return product list (after seeding)\n```\n\n---\n\n## \ud83d\udcf1 Available Routes (28 Total)\n\n### Main Pages\n- `/` - Home\n- `/auth` - Login/Register\n- `/dashboard` - User dashboard\n- `/profile` - User profile\n- `/settings` - Settings\n\n### Marketplace\n- `/marketplace` - Storefront\n- `/marketplace/products` - Product listing\n- `/marketplace/product/:id` - Product details\n- `/marketplace/flash-sales` - Flash sales\n- `/marketplace/search` - Product search\n\n### Real Estate\n- `/real-estate` - Real estate portal\n- `/real-estate/living` - Living listings\n- `/real-estate/agent-dashboard` - Agent dashboard\n- `/real-estate/compare` - Property comparison\n- `/real-estate/analytics` - Market analytics\n\n### TriniWorks (Service Professionals)\n- `/trini-works` - Platform home\n- `/trini-works/post-job` - Post a job\n- `/trini-works/messaging` - Messaging\n- `/trini-works/payments` - Payment integration\n- `/trini-works/plans` - Subscription plans\n- `/trini-works/dashboard` - Professional dashboard\n- `/trini-works/profile/:id` - Professional profile\n\n### Admin\n- `/admin` - Admin dashboard\n- `/admin/users` - User management\n- `/admin/analytics` - Analytics\n\n---\n\n## \ud83d\udd10 Default Credentials (Development)\n\n```\nEmail: test@trinibuild.com\nPassword: Test@123456\n```\n\n(Create your own after first login)\n\n---\n\n## \ud83d\udc1b Troubleshooting\n\n### Frontend won't start\n```powershell\n# Clear node_modules and reinstall\nrm -r node_modules\nrm package-lock.json\nnpm install\nnpm run dev\n```\n\n### Backend connection issues\n```powershell\n# Check if backend is running\ncurl http://localhost:5000/health\n\n# Check if database is connected\npsql -U trinibuild -d trinibuild -c \"SELECT 1\"\n```\n\n### Port already in use\n```powershell\n# Find process using port 5173 (frontend)\nnetstat -ano | findstr :5173\n\n# Kill the process (Windows)\ntaskkill /PID <PID> /F\n```\n\n---\n\n## \ud83d\udce6 Build for Production\n\n### Frontend\n```powershell\nnpm run build\n# Generates: dist/\n```\n\n### Backend\n```powershell\ncd backend\nnpm run build\n# Generates: dist/\n```\n\n---\n\n## \ud83d\ude80 Deploy to Production\n\nSee `COMPLETE_SETUP_GUIDE.md` for deployment instructions to AWS, Heroku, or Docker Registry.\n\n---\n\n## \ud83d\udcde Support\n\n- **GitHub Issues**: Report bugs on GitHub\n- **Documentation**: Check README.md files\n- **Backend Docs**: See `backend/README.md`\n- **API Schema**: See `backend/prisma/schema.prisma`\n\n---\n\n**Last Updated:** November 25, 2025  \n**Status:** \u2705 Production Ready\n",
  "index.css": "@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n@layer base {\n    html {\n        scroll-behavior: smooth;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n    }\n\n    body {\n        @apply bg-gray-50 text-gray-900 font-sans;\n    }\n\n    h1,\n    h2,\n    h3,\n    h4,\n    h5,\n    h6 {\n        @apply font-display tracking-tight;\n    }\n}\n\n@layer utilities {\n    .custom-scrollbar::-webkit-scrollbar {\n        width: 6px;\n        height: 6px;\n    }\n\n    .custom-scrollbar::-webkit-scrollbar-track {\n        @apply bg-gray-100;\n    }\n\n    .custom-scrollbar::-webkit-scrollbar-thumb {\n        @apply bg-gray-300 rounded-full hover:bg-gray-400 transition-colors;\n    }\n\n    .parallax-bg {\n        background-attachment: fixed;\n        background-position: center;\n        background-repeat: no-repeat;\n        background-size: cover;\n    }\n\n    .glass-panel {\n        @apply bg-white/80 backdrop-blur-md border border-white/20 shadow-xl;\n    }\n\n    .text-gradient {\n        @apply bg-clip-text text-transparent bg-gradient-to-r from-trini-red to-trini-teal;\n    }\n\n    /* Animations */\n    .animate-in {\n        animation-duration: 0.3s;\n        animation-fill-mode: both;\n        animation-timing-function: ease-out;\n    }\n\n    .slide-in-from-right {\n        animation-name: slideInFromRight;\n    }\n\n    .zoom-in {\n        animation-name: zoomIn;\n    }\n\n    .fade-in {\n        animation-name: fadeIn;\n    }\n\n    @keyframes slideInFromRight {\n        from {\n            transform: translateX(100%);\n            opacity: 0;\n        }\n\n        to {\n            transform: translateX(0);\n            opacity: 1;\n        }\n    }\n\n    @keyframes zoomIn {\n        from {\n            transform: scale(0.95);\n            opacity: 0;\n        }\n\n        to {\n            transform: scale(1);\n            opacity: 1;\n        }\n    }\n\n    @keyframes fadeIn {\n        from {\n            opacity: 0;\n        }\n\n        to {\n            opacity: 1;\n        }\n    }\n}",
  "index.html": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"UTF-8\" />\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n  <title>TriniBuild - T&T's Premier Business Platform</title>\n  <link rel=\"stylesheet\" href=\"/index.css\">\n</head>\n\n<body>\n  <div id=\"root\"></div>\n  <script type=\"module\" src=\"/index.tsx\"></script>\n</body>\n\n</html>",
  "index.tsx": "import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\nimport './index.css';\n\nconst rootElement = document.getElementById('root');\nif (!rootElement) {\n  throw new Error(\"Could not find root element to mount to\");\n}\n\nconst root = ReactDOM.createRoot(rootElement);\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);",
  "LAUNCH_CHECKLIST.md": "\n# TriniBuild Launch Checklist \ud83d\ude80\n\n## \u2705 Completed\n- [x] **Core Frontend:** Built Home, Directory, Rides, Jobs, Tickets, Real Estate, and Classifieds pages.\n- [x] **Unified Dashboard:** Created a \"Super App\" dashboard for Merchants, Drivers, Pros, and Promoters.\n- [x] **Ad Platform:** Integrated `AdSpot` component across all key pages.\n- [x] **Onboarding Flow:** Streamlined sign-up for different user types (Shopper, Merchant, Worker).\n- [x] **Database Setup:** Configured Supabase client and created SQL schema for Users, Stores, Products, and Orders.\n- [x] **Git Repository:** Initialized and pushed code to GitHub.\n\n## \ud83d\udea7 In Progress / Next Steps\n- [x] **Connect Frontend to Supabase:**\n    - [x] Update `authService.ts` to use Supabase Auth instead of mock data.\n    - [x] Update `storeService.ts` to fetch/save stores from Supabase DB.\n    - [x] Update `productService.ts` to manage products in Supabase DB.\n    - [x] Update `orderService.ts` to handle real orders.\n- [x] **Deploy to Vercel:**\n    - [x] Connect GitHub repo to Vercel.\n    - [x] Add Environment Variables (`VITE_SUPABASE_URL`, `VITE_SUPABASE_ANON_KEY`, `GEMINI_API_KEY`).\n    - [x] Verify live deployment.\n- [ ] **Rides & Maps Integration:**\n    - [ ] Implement Google Maps or Mapbox for real-time location tracking in `Rides.tsx`.\n    - [ ] Build backend logic for matching riders with drivers.\n- [ ] **Payments:**\n    - [ ] Integrate a real payment gateway (WiPay or Stripe) for checkout.\n- [ ] **Admin Panel:**\n    - [ ] Build an interface to manage Ads (upload images, set links).\n    - [ ] Build a moderation queue for new Stores and Products.\n\n## \ud83d\udcc5 Launch Plan\n1.  **Alpha Test (Internal):** Verify all Supabase connections work (Sign up, Create Store, Add Product).\n2.  **Beta Launch:** Deploy to Vercel and share with a small group of test users.\n3.  **Public Launch:** Marketing push and open registration.\n",
  "metadata.json": "{\n  \"name\": \"TriniBuild\",\n  \"description\": \"The premier AI-powered business directory, marketplace, and service platform for Trinidad & Tobago. Featuring local business discovery, AI store creation, and comprehensive merchant tools.\",\n  \"requestFramePermissions\": [\n    \"geolocation\"\n  ]\n}",
  "package.json": "{\n  \"name\": \"trinibuild\",\n  \"private\": true,\n  \"version\": \"0.0.0\",\n  \"type\": \"module\",\n  \"scripts\": {\n    \"dev\": \"vite\",\n    \"build\": \"vite build\",\n    \"preview\": \"vite preview\",\n    \"login\": \"node scripts/manual-login.js\",\n    \"test-session\": \"node scripts/test-session.js\"\n  },\n  \"dependencies\": {\n    \"@google/genai\": \"^1.30.0\",\n    \"@supabase/supabase-js\": \"^2.86.0\",\n    \"leaflet\": \"^1.9.4\",\n    \"lucide-react\": \"^0.554.0\",\n    \"puppeteer\": \"^24.31.0\",\n    \"react\": \"^19.2.0\",\n    \"react-dom\": \"^19.2.0\",\n    \"react-leaflet\": \"^5.0.0\",\n    \"react-markdown\": \"^10.1.0\",\n    \"react-router-dom\": \"^7.9.6\",\n    \"recharts\": \"^3.4.1\",\n    \"remark-gfm\": \"^4.0.1\"\n  },\n  \"devDependencies\": {\n    \"@tailwindcss/typography\": \"^0.5.19\",\n    \"@types/node\": \"^22.14.0\",\n    \"@vitejs/plugin-react\": \"^5.0.0\",\n    \"autoprefixer\": \"^10.4.22\",\n    \"postcss\": \"^8.5.6\",\n    \"tailwindcss\": \"^3.4.1\",\n    \"typescript\": \"~5.8.2\",\n    \"vite\": \"^6.2.0\"\n  }\n}\n",
  "postcss.config.js": "export default {\n    plugins: {\n        tailwindcss: {},\n        autoprefixer: {},\n    },\n}\n",
  "README.md": "<div align=\"center\">\n<img width=\"1200\" height=\"475\" alt=\"GHBanner\" src=\"https://github.com/user-attachments/assets/0aa67016-6eaf-458a-adb2-6e31a0763ed6\" />\n</div>\n\n# TriniBuild - The Super App for Trinidad & Tobago\n\nThis contains everything you need to run your app locally.\n\nView your app in AI Studio: https://ai.studio/apps/drive/1mTojnjwGtaKTHQm03Lu6BgH28PnnltlV\n\n## Run Locally\n\n**Prerequisites:**  Node.js\n\n\n1. Install dependencies:\n   `npm install`\n2. Set the `GEMINI_API_KEY` in [.env.local](.env.local) to your Gemini API key\n3. Run the app:\n   `npm run dev`\n",
  "supabase_schema.sql": "\n-- Enable UUID extension\ncreate extension if not exists \"uuid-ossp\";\n\n-- PROFILES TABLE (Public user data)\ncreate table public.profiles (\n  id uuid references auth.users not null primary key,\n  email text,\n  full_name text,\n  avatar_url text,\n  role text default 'user', -- 'user', 'vendor', 'driver', 'admin'\n  created_at timestamp with time zone default timezone('utc'::text, now()) not null\n);\n\n-- Enable RLS for profiles\nalter table public.profiles enable row level security;\n\n-- Profiles Policies\ncreate policy \"Public profiles are viewable by everyone.\"\n  on public.profiles for select\n  using ( true );\n\ncreate policy \"Users can insert their own profile.\"\n  on public.profiles for insert\n  with check ( auth.uid() = id );\n\ncreate policy \"Users can update own profile.\"\n  on public.profiles for update\n  using ( auth.uid() = id );\n\n-- STORES TABLE\ncreate table public.stores (\n  id uuid default uuid_generate_v4() primary key,\n  owner_id uuid references public.profiles(id) not null,\n  name text not null,\n  description text,\n  logo_url text,\n  banner_url text,\n  category text,\n  location text,\n  whatsapp text,\n  bot_name text default 'TriniBuild Support Bot',\n  bot_persona text default 'support_bot',\n  bot_system_prompt text,\n  status text default 'pending', -- 'pending', 'active', 'suspended'\n  created_at timestamp with time zone default timezone('utc'::text, now()) not null\n);\n\n-- Enable RLS for stores\nalter table public.stores enable row level security;\n\n-- Stores Policies\ncreate policy \"Stores are viewable by everyone.\"\n  on public.stores for select\n  using ( true );\n\ncreate policy \"Vendors can insert their own store.\"\n  on public.stores for insert\n  with check ( auth.uid() = owner_id );\n\ncreate policy \"Vendors can update their own store.\"\n  on public.stores for update\n  using ( auth.uid() = owner_id );\n\n-- PRODUCTS TABLE\ncreate table public.products (\n  id uuid default uuid_generate_v4() primary key,\n  store_id uuid references public.stores(id) not null,\n  name text not null,\n  description text,\n  price decimal(10,2) not null,\n  stock integer default 0,\n  image_url text,\n  category text,\n  status text default 'active',\n  created_at timestamp with time zone default timezone('utc'::text, now()) not null\n);\n\n-- Enable RLS for products\nalter table public.products enable row level security;\n\n-- Products Policies\ncreate policy \"Products are viewable by everyone.\"\n  on public.products for select\n  using ( true );\n\ncreate policy \"Vendors can insert products for their store.\"\n  on public.products for insert\n  with check ( exists ( select 1 from public.stores where id = store_id and owner_id = auth.uid() ) );\n\ncreate policy \"Vendors can update their own products.\"\n  on public.products for update\n  using ( exists ( select 1 from public.stores where id = store_id and owner_id = auth.uid() ) );\n\ncreate policy \"Vendors can delete their own products.\"\n  on public.products for delete\n  using ( exists ( select 1 from public.stores where id = store_id and owner_id = auth.uid() ) );\n\n-- ORDERS TABLE\ncreate table public.orders (\n  id uuid default uuid_generate_v4() primary key,\n  customer_id uuid references public.profiles(id) not null,\n  store_id uuid references public.stores(id) not null,\n  total decimal(10,2) not null,\n  status text default 'pending', -- 'pending', 'processing', 'completed', 'cancelled'\n  items jsonb not null, -- Store order items as JSON for simplicity\n  delivery_address text,\n  created_at timestamp with time zone default timezone('utc'::text, now()) not null\n);\n\n-- Enable RLS for orders\nalter table public.orders enable row level security;\n\n-- Orders Policies\ncreate policy \"Users can view their own orders.\"\n  on public.orders for select\n  using ( auth.uid() = customer_id );\n\ncreate policy \"Vendors can view orders for their store.\"\n  on public.orders for select\n  using ( exists ( select 1 from public.stores where id = store_id and owner_id = auth.uid() ) );\n\ncreate policy \"Users can create orders.\"\n  on public.orders for insert\n  with check ( auth.uid() = customer_id );\n\n-- TRIGGER: Create Profile on Signup\n-- This function automatically creates a profile entry when a new user signs up via Supabase Auth\ncreate or replace function public.handle_new_user()\nreturns trigger as $$\nbegin\n  insert into public.profiles (id, email, full_name)\n  values (new.id, new.email, new.raw_user_meta_data->>'full_name');\n  return new;\nend;\n$$ language plpgsql security definer;\n\n\ncreate trigger on_auth_user_created\n  after insert on auth.users\n  for each row execute procedure public.handle_new_user();\n\n-- DRIVER APPLICATIONS TABLE\ncreate table public.driver_applications (\n  id uuid default uuid_generate_v4() primary key,\n  user_id uuid references public.profiles(id) not null,\n  full_name text not null,\n  phone text,\n  vehicle_type text,\n  license_number text,\n  status text default 'pending', -- 'pending', 'approved', 'rejected'\n  created_at timestamp with time zone default timezone('utc'::text, now()) not null\n);\n\nalter table public.driver_applications enable row level security;\n\ncreate policy \"Users can view their own driver applications.\"\n  on public.driver_applications for select\n  using ( auth.uid() = user_id );\n\ncreate policy \"Users can insert their own driver applications.\"\n  on public.driver_applications for insert\n  with check ( auth.uid() = user_id );\n\n-- PROMOTER APPLICATIONS TABLE\ncreate table public.promoter_applications (\n  id uuid default uuid_generate_v4() primary key,\n  user_id uuid references public.profiles(id) not null,\n  organization_name text,\n  event_types text[],\n  experience_years text,\n  status text default 'pending',\n  created_at timestamp with time zone default timezone('utc'::text, now()) not null\n);\n\nalter table public.promoter_applications enable row level security;\n\ncreate policy \"Users can view their own promoter applications.\"\n  on public.promoter_applications for select\n  using ( auth.uid() = user_id );\n\ncreate policy \"Users can insert their own promoter applications.\"\n  on public.promoter_applications for insert\n  with check ( auth.uid() = user_id );\n\n-- SIGNED AGREEMENTS TABLE\ncreate table public.signed_agreements (\n  id uuid default uuid_generate_v4() primary key,\n  user_id uuid references public.profiles(id) not null,\n  document_type text not null, -- 'contractor_agreement', 'liability_waiver', etc.\n  document_version text,\n  signature_data text, -- Base64 or text signature\n  ip_address text,\n  signed_at timestamp with time zone default timezone('utc'::text, now()) not null\n);\n\nalter table public.signed_agreements enable row level security;\n\ncreate policy \"Users can view their own signed agreements.\"\n  on public.signed_agreements for select\n  using ( auth.uid() = user_id );\n\ncreate policy \"Users can sign agreements.\"\n  on public.signed_agreements for insert\n  with check ( auth.uid() = user_id );\n\n",
  "tailwind.config.js": "/** @type {import('tailwindcss').Config} */\nexport default {\n  content: [\n    \"./index.html\",\n    \"./src/**/*.{js,ts,jsx,tsx}\",\n    \"./*.{js,ts,jsx,tsx}\",\n    \"./pages/**/*.{js,ts,jsx,tsx}\",\n    \"./components/**/*.{js,ts,jsx,tsx}\",\n  ],\n  theme: {\n    extend: {\n      colors: {\n        trini: {\n          red: '#CE1126', // Official Flag Red\n          black: '#000000',\n          white: '#FFFFFF',\n          teal: '#008080', // Secondary accent\n          gold: '#D4AF37', // Premium accent\n        },\n        gray: {\n          50: '#F9FAFB',\n          100: '#F3F4F6',\n          200: '#E5E7EB',\n          300: '#D1D5DB',\n          400: '#9CA3AF',\n          500: '#6B7280',\n          600: '#4B5563',\n          700: '#374151',\n          800: '#1F2937',\n          900: '#111827',\n        }\n      },\n      fontFamily: {\n        sans: ['Inter', 'system-ui', 'sans-serif'],\n        display: ['Outfit', 'Inter', 'system-ui', 'sans-serif'],\n      },\n      animation: {\n        'fade-in': 'fadeIn 0.5s ease-out',\n        'slide-up': 'slideUp 0.5s ease-out',\n        'slide-in-right': 'slideInRight 0.3s ease-out',\n        'bounce-slow': 'bounce 3s infinite',\n        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',\n        'marquee': 'marquee 25s linear infinite',\n      },\n      keyframes: {\n        fadeIn: {\n          '0%': { opacity: '0' },\n          '100%': { opacity: '1' },\n        },\n        slideUp: {\n          '0%': { transform: 'translateY(20px)', opacity: '0' },\n          '100%': { transform: 'translateY(0)', opacity: '1' },\n        },\n        slideInRight: {\n          '0%': { transform: 'translateX(100%)' },\n          '100%': { transform: 'translateX(0)' },\n        },\n        marquee: {\n          '0%': { transform: 'translateX(0%)' },\n          '100%': { transform: 'translateX(-100%)' },\n        }\n      },\n      backgroundImage: {\n        'gradient-radial': 'radial-gradient(var(--tw-gradient-stops))',\n        'hero-pattern': \"url('https://images.unsplash.com/photo-1558005530-a7958896ec60?q=80&w=2071&auto=format&fit=crop')\",\n      }\n    },\n  },\n  plugins: [\n    require('@tailwindcss/typography'),\n  ],\n}\n",
  "tsconfig.json": "{\n  \"compilerOptions\": {\n    \"target\": \"ES2022\",\n    \"experimentalDecorators\": true,\n    \"useDefineForClassFields\": false,\n    \"module\": \"ESNext\",\n    \"lib\": [\n      \"ES2022\",\n      \"DOM\",\n      \"DOM.Iterable\"\n    ],\n    \"skipLibCheck\": true,\n    \"types\": [\n      \"node\"\n    ],\n    \"moduleResolution\": \"bundler\",\n    \"isolatedModules\": true,\n    \"moduleDetection\": \"force\",\n    \"allowJs\": true,\n    \"jsx\": \"react-jsx\",\n    \"paths\": {\n      \"@/*\": [\n        \"./*\"\n      ]\n    },\n    \"allowImportingTsExtensions\": true,\n    \"noEmit\": true\n  }\n}",
  "types.ts": "\nexport enum SubscriptionTier {\n  FREE = 'Free',\n  STARTER = 'Starter',\n  PRO = 'Pro',\n  ENTERPRISE = 'Enterprise'\n}\n\nexport interface Business {\n  id: string;\n  name: string;\n  description: string;\n  category: string;\n  location: string;\n  rating: number;\n  reviewCount: number;\n  isVerified: boolean;\n  isPromoted?: boolean; // Ad Tech: Paid boost\n  image: string;\n  lat?: number;\n  lng?: number;\n  hours?: string;\n  phone?: string;\n  products?: Product[];\n  trafficBoostExpiry?: number; // Timestamp for ad expiry\n  isLocked?: boolean; // For feature gating\n  upgradeRequired?: boolean; // For feature gating\n}\n\nexport interface Product {\n  id: string;\n  name: string;\n  price: number;\n  image: string;\n  description: string;\n  status?: 'active' | 'inactive';\n  stock?: number;\n}\n\nexport interface RealEstateListing {\n  id: string | number;\n  title: string;\n  price: number;\n  type: 'rent' | 'buy' | 'commercial';\n  beds: number;\n  baths: number;\n  sqft: number;\n  location: string;\n  description: string;\n  images: string[];\n  amenities: string[];\n  agent: {\n    name: string;\n    photo: string;\n    phone: string;\n    isPremium: boolean;\n  };\n  isFeatured?: boolean;\n  postedDate: string;\n}\n\nexport interface User {\n  id: string;\n  name: string;\n  email: string;\n  role: 'CUSTOMER' | 'OWNER' | 'ADMIN' | 'DRIVER';\n  plan?: SubscriptionTier;\n  isLifetime?: boolean; // For gifted accounts\n  credits?: number; // For micro-transactions (buying leads/ads)\n}\n\nexport interface BlogPost {\n  id: string;\n  title: string;\n  excerpt: string;\n  content?: string;\n  category: string;\n  author: string;\n  date: string;\n  image: string;\n  status: 'published' | 'draft';\n  seoKeywords?: string[];\n}\n\n// E-Tick Interfaces\nexport interface TicketTier {\n  id: string;\n  name: string; // e.g. \"Early Bird\", \"VIP\", \"Backstage\"\n  price: number;\n  currency: 'TTD' | 'USD';\n  available: number;\n  perks: string[];\n}\n\nexport interface CarnivalEvent {\n  id: string;\n  title: string;\n  organizer: string;\n  date: string;\n  time: string;\n  location: string;\n  image: string;\n  category: 'All Inclusive' | 'Cooler' | 'J\\'Ouvert' | 'Concert' | 'Boat Ride' | 'Breakfast';\n  tiers: TicketTier[];\n  description: string;\n  isVerified: boolean;\n}\n\nexport interface TicketOrder {\n  id: string;\n  eventId: string;\n  eventTitle: string;\n  tierName: string;\n  quantity: number;\n  totalPaid: number;\n  purchaseDate: string;\n  status: 'valid' | 'used' | 'transferred';\n  secureCode: string; // Dynamic QR seed\n  ownerName: string;\n}\n\nexport interface PromoterWorker {\n  id: string;\n  name: string;\n  email: string;\n  role: 'Scanner' | 'Manager';\n  scansPerformed: number;\n  status: 'Active' | 'Inactive';\n  lastActive: string;\n}\n\nexport interface CommitteeMember {\n  id: string;\n  name: string;\n  code: string; // e.g. SARAH10\n  ticketsSold: number;\n  commissionEarned: number;\n  link: string;\n}\n\nexport interface BankDetails {\n  bankName: string;\n  accountNumber: string;\n  accountType: 'Savings' | 'Chequing';\n  holderName: string;\n}\n\n// Affiliate Interfaces\nexport interface AffiliateStats {\n  totalClicks: number;\n  conversions: number;\n  pendingCommission: number;\n  paidCommission: number;\n  tier: 'Bronze' | 'Silver' | 'Gold';\n}\n\nexport interface MarketingAsset {\n  id: string;\n  title: string;\n  type: 'Banner' | 'Social' | 'Text';\n  url: string;\n  copy?: string;\n}\n\nexport interface Payout {\n  id: string;\n  date: string;\n  amount: number;\n  status: 'Paid' | 'Processing';\n}\n\n// For Maps Grounding\nexport interface MapLocation {\n  title: string;\n  uri?: string;\n}\n\nexport interface GroundingChunk {\n  web?: {\n    uri: string;\n    title: string;\n  };\n  maps?: {\n    uri: string;\n    title: string;\n    placeId?: string;\n    placeAnswerSources?: {\n      reviewSnippets?: {\n        author?: string;\n        content?: string;\n      }[];\n    }[];\n  };\n}\n\n// For Google Maps JS API & Gemini Fallback\nexport interface PlaceResult {\n  place_id?: string;\n  name: string;\n  formatted_address?: string;\n  vicinity?: string;\n  geometry?: {\n    location: {\n      lat: () => number;\n      lng: () => number;\n    } | any; // Allow loose typing for fallback\n  };\n  rating?: number;\n  user_ratings_total?: number;\n  photos?: {\n    getUrl: (opts: { maxWidth: number; maxHeight: number }) => string;\n  }[];\n  types?: string[];\n  // Fallback properties\n  url?: string; // Google Maps URL from grounding\n}\n",
  "Untitled-1.txt": "npm create vite@latest petpal-portraits -- --template react\n\n",
  "vite-env.d.ts": "/// <reference types=\"vite/client\" />\n\ninterface WindowEventMap {\n    'open-chat': CustomEvent<{ mode: string }>;\n}\n\n",
  "vite.config.ts": "import path from 'path';\nimport { defineConfig, loadEnv } from 'vite';\nimport react from '@vitejs/plugin-react';\n\nexport default defineConfig(({ mode }) => {\n  const env = loadEnv(mode, '.', '');\n  return {\n    server: {\n      port: 3000,\n      host: '0.0.0.0',\n    },\n    plugins: [react()],\n    resolve: {\n      alias: {\n        '@': path.resolve(__dirname, '.'),\n      }\n    }\n  };\n});\n",
  "ai_server/main.py": "import os\nimport logging\nimport requests\nfrom fastapi import FastAPI, HTTPException, Depends\nfrom fastapi.middleware.cors import CORSMiddleware\nfrom pydantic import BaseModel, Field\nfrom typing import Optional, List\n\n# Configure logging\nlogging.basicConfig(level=logging.INFO)\nlogger = logging.getLogger(__name__)\n\napp = FastAPI(\n    title=\"TriniBuild AI Server\",\n    description=\"AI-powered backend for TriniBuild using local LLMs via Ollama\",\n    version=\"1.0.0\"\n)\n\n# Add CORS Middleware\napp.add_middleware(\n    CORSMiddleware,\n    allow_origins=[\"*\"],  # In production, replace with specific origins\n    allow_credentials=True,\n    allow_methods=[\"*\"],\n    allow_headers=[\"*\"],\n)\n\n# Configuration\nOLLAMA_BASE_URL = os.getenv(\"OLLAMA_BASE_URL\", \"http://localhost:11434\")\nDEFAULT_MODEL = \"llama3\"\n\n# --- Pydantic Models ---\n\nclass JobLetterRequest(BaseModel):\n    applicant_name: str\n    position: str\n    company_name: str\n    skills: List[str] = []\n    experience_years: int\n    tone: str = \"professional\" # professional, enthusiastic, confident\n\nclass ListingDescriptionRequest(BaseModel):\n    title: str\n    category: str\n    features: List[str]\n    condition: str\n    price: Optional[float] = None\n    tone: str = \"persuasive\"\n\nclass ChatbotRequest(BaseModel):\n    message: str\n    context: Optional[str] = None\n    persona: str = \"support_bot\" # support_bot, sales_agent\n    system_prompt: Optional[str] = None\n\nclass AIResponse(BaseModel):\n    content: str\n    model_used: str\n    processing_time_ms: Optional[float] = None\n\nclass GenerateRequest(BaseModel):\n    prompt: str\n    system_prompt: Optional[str] = None\n    model: Optional[str] = None\n\n# --- Helper Functions ---\n\n# Global variable for local model\nlocal_llm = None\n\ndef get_local_llm():\n    global local_llm\n    if local_llm is None:\n        try:\n            from ctransformers import AutoModelForCausalLM\n            logger.info(\"Loading local Llama model (TinyLlama)...\")\n            # Using TinyLlama for speed and low memory usage on standard machines\n            local_llm = AutoModelForCausalLM.from_pretrained(\n                \"TheBloke/TinyLlama-1.1B-Chat-v1.0-GGUF\",\n                model_type=\"llama\",\n                gpu_layers=0\n            )\n            logger.info(\"Local model loaded successfully.\")\n        except Exception as e:\n            logger.error(f\"Failed to load local model: {e}\")\n            return None\n    return local_llm\n\ndef query_ollama(prompt: str, model: str = DEFAULT_MODEL, system_prompt: str = \"\") -> str:\n    \"\"\"\n    Sends a prompt to the Ollama instance. Falls back to local ctransformers model if Ollama is down.\n    \"\"\"\n    url = f\"{OLLAMA_BASE_URL}/api/generate\"\n    \n    payload = {\n        \"model\": model,\n        \"prompt\": prompt,\n        \"stream\": False\n    }\n    \n    if system_prompt:\n        payload[\"system\"] = system_prompt\n\n    # 1. Try Ollama\n    try:\n        # logger.info(f\"Sending request to Ollama: {model}\")\n        response = requests.post(url, json=payload, timeout=5) # Short timeout to fail fast\n        response.raise_for_status()\n        data = response.json()\n        return data.get(\"response\", \"\")\n    except requests.exceptions.RequestException:\n        logger.warning(\"Ollama not reachable. Falling back to local model.\")\n    \n    # 2. Fallback to Local Model (ctransformers)\n    llm = get_local_llm()\n    if llm:\n        try:\n            full_prompt = f\"<|system|>\\n{system_prompt}</s>\\n<|user|>\\n{prompt}</s>\\n<|assistant|>\"\n            logger.info(\"Generating with local TinyLlama...\")\n            return llm(full_prompt, max_new_tokens=256)\n        except Exception as e:\n            logger.error(f\"Local inference failed: {e}\")\n    \n    # 3. Fallback Mock\n    if os.getenv(\"DEV_MODE\", \"false\").lower() == \"true\":\n         return f\"[DEV MODE] Mock response for: {prompt[:50]}...\"\n    \n    raise HTTPException(status_code=503, detail=\"AI Service Unavailable (Ollama & Local failed)\")\n\n# --- Endpoints ---\n\n@app.get(\"/\")\nasync def health_check():\n    return {\"status\": \"ok\", \"service\": \"TriniBuild AI Server\"}\n\n@app.post(\"/generate-job-letter\", response_model=AIResponse)\nasync def generate_job_letter(request: JobLetterRequest):\n    system_prompt = (\n        \"You are a professional career consultant. \"\n        \"Write a job application letter based on the provided details. \"\n        \"Ensure the tone is appropriate for the Trinidad & Tobago job market.\"\n    )\n    \n    prompt = (\n        f\"Write a {request.tone} job application letter for {request.applicant_name} \"\n        f\"applying for the position of {request.position} at {request.company_name}. \"\n        f\"They have {request.experience_years} years of experience. \"\n        f\"Key skills: {', '.join(request.skills)}.\"\n    )\n\n    generated_text = query_ollama(prompt, system_prompt=system_prompt)\n    \n    return AIResponse(content=generated_text, model_used=DEFAULT_MODEL)\n\n@app.post(\"/generate-listing-description\", response_model=AIResponse)\nasync def generate_listing_description(request: ListingDescriptionRequest):\n    system_prompt = (\n        \"You are an expert copywriter for an online marketplace in Trinidad & Tobago. \"\n        \"Write a compelling product description that highlights features and benefits.\"\n    )\n    \n    prompt = (\n        f\"Write a {request.tone} description for a {request.title} ({request.category}). \"\n        f\"Condition: {request.condition}. \"\n        f\"Key features: {', '.join(request.features)}. \"\n        f\"{f'Price: TT${request.price}' if request.price else ''}\"\n    )\n\n    generated_text = query_ollama(prompt, system_prompt=system_prompt)\n    \n    return AIResponse(content=generated_text, model_used=DEFAULT_MODEL)\n\n@app.post(\"/chatbot-reply\", response_model=AIResponse)\nasync def chatbot_reply(request: ChatbotRequest):\n    system_prompt = request.system_prompt\n    \n    if not system_prompt:\n        if request.persona == \"sales_agent\":\n            system_prompt = \"You are a persuasive sales agent helping a customer find the best deals on TriniBuild.\"\n        elif request.persona == \"support_bot\":\n            system_prompt = \"You are TriniBuild Support Bot, a helpful assistant with a slight Trinidadian accent.\"\n        else:\n            # Default fallback\n            system_prompt = \"You are a helpful assistant.\"\n\n    # Include context in the prompt if provided\n    full_prompt = f\"Context: {request.context}\\n\\n\" if request.context else \"\"\n    full_prompt += f\"User: {request.message}\\nBot:\"\n\n    generated_text = query_ollama(full_prompt, system_prompt=system_prompt)\n    \n    return AIResponse(content=generated_text, model_used=DEFAULT_MODEL)\n\n@app.post(\"/generate\")\nasync def generate_text(request: GenerateRequest):\n    try:\n        response = query_ollama(request.prompt, model=request.model or DEFAULT_MODEL, system_prompt=request.system_prompt or \"\")\n        return {\"content\": response, \"model_used\": request.model or DEFAULT_MODEL}\n    except Exception as e:\n        logger.error(f\"Generation error: {e}\")\n        raise HTTPException(status_code=500, detail=str(e))\n\nif __name__ == \"__main__\":\n    import uvicorn\n    uvicorn.run(app, host=\"0.0.0.0\", port=8000)\n",
  "ai_server/requirements.txt": "fastapi>=0.109.2\nuvicorn[standard]>=0.27.1\npydantic>=2.6.1\nrequests>=2.31.0\npython-multipart>=0.0.9\nctransformers>=0.2.27\n",
  "backend/docker-compose.local.yml": "version: '3.8'\n\nservices:\n  postgres:\n    image: postgres:16-alpine\n    environment:\n      POSTGRES_USER: ${DB_USER:-trinibuild}\n      POSTGRES_PASSWORD: ${DB_PASSWORD:-password}\n      POSTGRES_DB: ${DB_NAME:-trinibuild}\n    ports:\n      - \"5432:5432\"\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready -U ${DB_USER:-trinibuild}\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n\n  redis:\n    image: redis:7-alpine\n    ports:\n      - \"6379:6379\"\n    volumes:\n      - redis_data:/data\n    healthcheck:\n      test: [\"CMD\", \"redis-cli\", \"ping\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n\n  backend:\n    build: .\n    ports:\n      - \"5000:5000\"\n    environment:\n      DATABASE_URL: postgresql://${DB_USER:-trinibuild}:${DB_PASSWORD:-password}@postgres:5432/${DB_NAME:-trinibuild}\n      REDIS_URL: redis://redis:6379\n      NODE_ENV: development\n      JWT_SECRET: ${JWT_SECRET}\n      JWT_REFRESH_SECRET: ${JWT_REFRESH_SECRET}\n      STRIPE_SECRET_KEY: ${STRIPE_SECRET_KEY}\n      SENDGRID_API_KEY: ${SENDGRID_API_KEY}\n    depends_on:\n      postgres:\n        condition: service_healthy\n      redis:\n        condition: service_healthy\n    volumes:\n      - .:/app\n      - /app/node_modules\n    command: npm run dev\n\nvolumes:\n  postgres_data:\n  redis_data:\n",
  "backend/docker-compose.yml": "version: '3.8'\n\nservices:\n  postgres:\n    image: postgres:16-alpine\n    container_name: trinibuild_db\n    environment:\n      POSTGRES_USER: trinibuild\n      POSTGRES_PASSWORD: secure_password_change_me\n      POSTGRES_DB: trinibuild\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n    ports:\n      - \"5432:5432\"\n    networks:\n      - trinibuild\n\n  redis:\n    image: redis:7-alpine\n    container_name: trinibuild_redis\n    ports:\n      - \"6379:6379\"\n    volumes:\n      - redis_data:/data\n    networks:\n      - trinibuild\n\n  backend:\n    build: .\n    container_name: trinibuild_backend\n    environment:\n      NODE_ENV: development\n      DATABASE_URL: postgresql://trinibuild:secure_password_change_me@postgres:5432/trinibuild\n      REDIS_URL: redis://redis:6379\n      JWT_SECRET: ${JWT_SECRET}\n      FRONTEND_URL: http://localhost:3000\n    ports:\n      - \"5000:5000\"\n    depends_on:\n      - postgres\n      - redis\n    volumes:\n      - .:/app\n      - /app/node_modules\n    networks:\n      - trinibuild\n    command: npm run dev\n\nvolumes:\n  postgres_data:\n  redis_data:\n\nnetworks:\n  trinibuild:\n    driver: bridge\n",
  "backend/package.json": "{\n  \"name\": \"trinibuild-backend\",\n  \"version\": \"1.0.0\",\n  \"description\": \"TriniBuild Backend API - Multi-vendor marketplace platform for Trinidad & Tobago\",\n  \"main\": \"dist/server.js\",\n  \"type\": \"module\",\n  \"scripts\": {\n    \"dev\": \"nodemon --exec node --loader ts-node/esm src/server.ts\",\n    \"build\": \"tsc\",\n    \"start\": \"node dist/server.js\",\n    \"migrate\": \"node --loader ts-node/esm scripts/migrate.ts\",\n    \"seed\": \"node --loader ts-node/esm scripts/seed.ts\",\n    \"test\": \"vitest\",\n    \"test:coverage\": \"vitest --coverage\",\n    \"lint\": \"eslint src --ext .ts\",\n    \"format\": \"prettier --write src\"\n  },\n  \"dependencies\": {\n    \"express\": \"^4.18.2\",\n    \"cors\": \"^2.8.5\",\n    \"dotenv\": \"^16.3.1\",\n    \"pg\": \"^8.11.3\",\n    \"prisma\": \"^5.7.0\",\n    \"@prisma/client\": \"^5.7.0\",\n    \"jsonwebtoken\": \"^9.1.2\",\n    \"bcryptjs\": \"^2.4.3\",\n    \"socket.io\": \"^4.7.2\",\n    \"socket.io-client\": \"^4.7.2\",\n    \"stripe\": \"^13.11.0\",\n    \"nodemailer\": \"^6.9.7\",\n    \"zod\": \"^3.22.4\",\n    \"axios\": \"^1.6.2\",\n    \"bull\": \"^4.11.5\",\n    \"redis\": \"^4.6.12\",\n    \"multer\": \"^1.4.5-lts.1\",\n    \"aws-sdk\": \"^2.1527.0\",\n    \"sharp\": \"^0.33.0\",\n    \"uuid\": \"^9.0.1\",\n    \"express-rate-limit\": \"^7.1.5\",\n    \"helmet\": \"^7.1.0\",\n    \"morgan\": \"^1.10.0\",\n    \"pino\": \"^8.17.2\",\n    \"pino-http\": \"^8.6.1\"\n  },\n  \"devDependencies\": {\n    \"typescript\": \"^5.3.3\",\n    \"@types/express\": \"^4.17.21\",\n    \"@types/node\": \"^20.10.6\",\n    \"@types/jsonwebtoken\": \"^9.0.7\",\n    \"@types/bcryptjs\": \"^2.4.6\",\n    \"@types/multer\": \"^1.4.11\",\n    \"@types/nodemailer\": \"^6.4.14\",\n    \"nodemon\": \"^3.0.2\",\n    \"ts-node\": \"^10.9.2\",\n    \"eslint\": \"^8.55.0\",\n    \"@typescript-eslint/eslint-plugin\": \"^6.15.0\",\n    \"@typescript-eslint/parser\": \"^6.15.0\",\n    \"prettier\": \"^3.1.1\",\n    \"vitest\": \"^1.1.0\",\n    \"@vitest/ui\": \"^1.1.0\",\n    \"supertest\": \"^6.3.3\",\n    \"@types/supertest\": \"^6.0.2\"\n  }\n}\n",
  "backend/README.md": "# TriniBuild Backend\n\nBackend API for the multi-vendor marketplace platform serving Trinidad & Tobago.\n\n## Quick Start\n\n```bash\n# Install dependencies\nnpm install\n\n# Set up environment variables\ncp .env.example .env\n\n# Run migrations\nnpm run migrate\n\n# Seed database (optional)\nnpm run seed\n\n# Start development server\nnpm run dev\n```\n\n## Architecture\n\n- **Framework:** Express.js with TypeScript\n- **Database:** PostgreSQL with Prisma ORM\n- **Real-time:** Socket.io\n- **Authentication:** JWT + bcrypt\n- **Payments:** Stripe + TTD Gateways\n- **Storage:** AWS S3\n- **Queue:** Bull (Redis)\n\n## Environment Variables\n\nSee `.env.example` for all required variables.\n\n## API Documentation\n\nAll endpoints are documented in `/docs/api.md`\n\n## Project Structure\n\n```\nsrc/\n  \u251c\u2500\u2500 server.ts           # Entry point\n  \u251c\u2500\u2500 config/             # Configuration\n  \u251c\u2500\u2500 controllers/        # Route handlers\n  \u251c\u2500\u2500 services/           # Business logic\n  \u251c\u2500\u2500 models/             # Database models\n  \u251c\u2500\u2500 middleware/         # Express middleware\n  \u251c\u2500\u2500 routes/             # API routes\n  \u251c\u2500\u2500 utils/              # Utilities\n  \u251c\u2500\u2500 types/              # TypeScript types\n  \u2514\u2500\u2500 sockets/            # Socket.io handlers\n```\n\n## Contributing\n\n1. Create feature branch: `git checkout -b feature/xyz`\n2. Commit changes: `git commit -am 'Add feature xyz'`\n3. Push to branch: `git push origin feature/xyz`\n4. Create Pull Request\n\n## License\n\nMIT\n",
  "backend/tsconfig.json": "{\n  \"compilerOptions\": {\n    \"target\": \"ES2020\",\n    \"module\": \"ES2020\",\n    \"lib\": [\"ES2020\"],\n    \"moduleResolution\": \"node\",\n    \"outDir\": \"./dist\",\n    \"rootDir\": \"./src\",\n    \"strict\": true,\n    \"esModuleInterop\": true,\n    \"skipLibCheck\": true,\n    \"forceConsistentCasingInFileNames\": true,\n    \"resolveJsonModule\": true,\n    \"declaration\": true,\n    \"declarationMap\": true,\n    \"sourceMap\": true,\n    \"allowSyntheticDefaultImports\": true\n  },\n  \"include\": [\"src/**/*\"],\n  \"exclude\": [\"node_modules\", \"dist\"]\n}\n",
  "backend/.github/workflows/deploy.yml": "name: Deploy Backend\n\non:\n  push:\n    branches: [main]\n    paths:\n      - 'backend/**'\n  pull_request:\n    branches: [main]\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n\n    services:\n      postgres:\n        image: postgres:16\n        env:\n          POSTGRES_PASSWORD: password\n        options: >-\n          --health-cmd pg_isready\n          --health-interval 10s\n          --health-timeout 5s\n          --health-retries 5\n        ports:\n          - 5432:5432\n\n    steps:\n      - uses: actions/checkout@v3\n\n      - name: Setup Node.js\n        uses: actions/setup-node@v3\n        with:\n          node-version: '20'\n          cache: 'npm'\n          cache-dependency-path: 'backend/package-lock.json'\n\n      - name: Install dependencies\n        run: npm ci\n        working-directory: ./backend\n\n      - name: Run linter\n        run: npm run lint\n        working-directory: ./backend\n\n      - name: Build TypeScript\n        run: npm run build\n        working-directory: ./backend\n\n      - name: Run tests\n        run: npm test\n        working-directory: ./backend\n        env:\n          DATABASE_URL: postgresql://postgres:password@localhost:5432/test\n\n      - name: Build Docker image\n        run: docker build -t trinibuild-backend:${{ github.sha }} .\n        working-directory: ./backend\n\n      - name: Push to registry\n        if: github.event_name == 'push' && github.ref == 'refs/heads/main'\n        run: |\n          docker tag trinibuild-backend:${{ github.sha }} trinibuild-backend:latest\n          # Add your registry push commands here (e.g., AWS ECR, Docker Hub)\n\n  deploy:\n    needs: build\n    runs-on: ubuntu-latest\n    if: github.event_name == 'push' && github.ref == 'refs/heads/main'\n\n    steps:\n      - uses: actions/checkout@v3\n\n      - name: Deploy to production\n        env:\n          DEPLOY_KEY: ${{ secrets.DEPLOY_KEY }}\n          DEPLOY_HOST: ${{ secrets.DEPLOY_HOST }}\n        run: |\n          mkdir -p ~/.ssh\n          echo \"$DEPLOY_KEY\" > ~/.ssh/deploy_key\n          chmod 600 ~/.ssh/deploy_key\n          ssh -i ~/.ssh/deploy_key $DEPLOY_HOST 'cd /app/backend && ./deploy.sh'\n",
  "backend/src/server.ts": "import express from 'express';\nimport cors from 'cors';\nimport helmet from 'helmet';\nimport morgan from 'morgan';\nimport { Server as SocketIOServer } from 'socket.io';\nimport { createServer } from 'http';\nimport dotenv from 'dotenv';\n\n// Load environment variables\ndotenv.config();\n\nimport { errorHandler } from './middleware/errorHandler.js';\nimport { requestLogger } from './middleware/logger.js';\nimport { authenticateToken } from './middleware/auth.js';\nimport { rateLimiter } from './middleware/rateLimiter.js';\n\n// Routes\nimport authRoutes from './routes/auth.js';\nimport userRoutes from './routes/user.js';\nimport productRoutes from './routes/product.js';\nimport cartRoutes from './routes/cart.js';\nimport orderRoutes from './routes/order.js';\nimport paymentRoutes from './routes/payment.js';\nimport reviewRoutes from './routes/review.js';\nimport messageRoutes from './routes/message.js';\nimport vendorRoutes from './routes/vendor.js';\nimport triniWorksRoutes from './routes/triniWorks.js';\n\n// Socket handlers\nimport { setupMessageHandlers } from './sockets/messageHandlers.js';\nimport { setupNotificationHandlers } from './sockets/notificationHandlers.js';\n\nconst app = express();\nconst httpServer = createServer(app);\n\n// Socket.io setup\nconst io = new SocketIOServer(httpServer, {\n  cors: {\n    origin: process.env.FRONTEND_URL || 'http://localhost:3000',\n    credentials: true\n  }\n});\n\n// Middleware\napp.use(helmet()); // Security headers\napp.use(cors({\n  origin: process.env.FRONTEND_URL || 'http://localhost:3000',\n  credentials: true\n}));\napp.use(express.json({ limit: '10mb' }));\napp.use(express.urlencoded({ limit: '10mb', extended: true }));\napp.use(morgan('combined')); // Logging\napp.use(requestLogger);\napp.use(rateLimiter);\n\n// Health check\napp.get('/health', (req, res) => {\n  res.json({ status: 'OK', timestamp: new Date().toISOString() });\n});\n\n// API Routes\napp.use('/api/auth', authRoutes);\napp.use('/api/user', authenticateToken, userRoutes);\napp.use('/api/products', productRoutes);\napp.use('/api/cart', authenticateToken, cartRoutes);\napp.use('/api/orders', authenticateToken, orderRoutes);\napp.use('/api/payments', authenticateToken, paymentRoutes);\napp.use('/api/reviews', authenticateToken, reviewRoutes);\napp.use('/api/messages', authenticateToken, messageRoutes);\napp.use('/api/vendors', vendorRoutes);\napp.use('/api/trini-works', triniWorksRoutes);\n\n// Socket.io event handlers\nio.on('connection', (socket) => {\n  console.log('Client connected:', socket.id);\n  \n  // Authenticate user\n  const token = socket.handshake.auth.token;\n  if (!token) {\n    socket.disconnect();\n    return;\n  }\n  \n  // Setup handlers\n  setupMessageHandlers(socket, io);\n  setupNotificationHandlers(socket, io);\n  \n  socket.on('disconnect', () => {\n    console.log('Client disconnected:', socket.id);\n  });\n});\n\n// 404 handler\napp.use((req, res) => {\n  res.status(404).json({ error: 'Route not found' });\n});\n\n// Error handler (must be last)\napp.use(errorHandler);\n\nconst PORT = process.env.PORT || 5000;\n\nhttpServer.listen(PORT, () => {\n  console.log(`\ud83d\ude80 Server running on http://localhost:${PORT}`);\n  console.log(`\ud83d\udce1 Socket.io ready at ws://localhost:${PORT}`);\n  console.log(`\ud83c\udf0d Frontend: ${process.env.FRONTEND_URL || 'http://localhost:3000'}`);\n});\n\n// Graceful shutdown\nprocess.on('SIGTERM', () => {\n  console.log('SIGTERM signal received: closing HTTP server');\n  httpServer.close(() => {\n    console.log('HTTP server closed');\n    process.exit(0);\n  });\n});\n\nexport { io };\n",
  "backend/src/middleware/auth.ts": "import { Request, Response, NextFunction } from 'express';\nimport jwt from 'jsonwebtoken';\n\nexport interface AuthRequest extends Request {\n  userId?: string;\n  user?: any;\n}\n\nexport const authenticateToken = (req: AuthRequest, res: Response, next: NextFunction) => {\n  const authHeader = req.headers['authorization'];\n  const token = authHeader && authHeader.split(' ')[1]; // Bearer TOKEN\n\n  if (!token) {\n    return res.status(401).json({ error: 'Access token required' });\n  }\n\n  try {\n    const decoded = jwt.verify(token, process.env.JWT_SECRET || 'secret') as any;\n    req.userId = decoded.id;\n    req.user = decoded;\n    next();\n  } catch (error) {\n    return res.status(403).json({ error: 'Invalid or expired token' });\n  }\n};\n\nexport const refreshTokenMiddleware = (req: AuthRequest, res: Response, next: NextFunction) => {\n  const token = req.body.refreshToken;\n\n  if (!token) {\n    return res.status(401).json({ error: 'Refresh token required' });\n  }\n\n  try {\n    const decoded = jwt.verify(token, process.env.JWT_REFRESH_SECRET || 'refresh_secret') as any;\n    req.userId = decoded.id;\n    next();\n  } catch (error) {\n    return res.status(403).json({ error: 'Invalid refresh token' });\n  }\n};\n\nexport const authorizeRole = (allowedRoles: string[]) => {\n  return (req: AuthRequest, res: Response, next: NextFunction) => {\n    if (!req.user || !allowedRoles.includes(req.user.role)) {\n      return res.status(403).json({ error: 'Insufficient permissions' });\n    }\n    next();\n  };\n};\n",
  "backend/src/middleware/errorHandler.ts": "import { Request, Response, NextFunction } from 'express';\n\nexport class AppError extends Error {\n  constructor(\n    public statusCode: number,\n    public message: string,\n    public isOperational: boolean = true\n  ) {\n    super(message);\n    Error.captureStackTrace(this, this.constructor);\n  }\n}\n\nexport const errorHandler = (\n  err: AppError | Error,\n  req: Request,\n  res: Response,\n  next: NextFunction\n) => {\n  const error = err instanceof AppError ? err : new AppError(500, 'Internal Server Error');\n\n  const response = {\n    status: 'error',\n    statusCode: error.statusCode,\n    message: error.message,\n    ...(process.env.NODE_ENV === 'development' && { stack: err.stack })\n  };\n\n  res.status(error.statusCode).json(response);\n};\n\nexport const asyncHandler = (fn: Function) => (req: Request, res: Response, next: NextFunction) => {\n  Promise.resolve(fn(req, res, next)).catch(next);\n};\n",
  "backend/src/middleware/logger.ts": "import { Request, Response, NextFunction } from 'express';\nimport morgan from 'morgan';\n\nexport const requestLogger = morgan(':method :url :status :response-time ms');\n\nexport const logger = {\n  info: (message: string, data?: any) => {\n    console.log(`[INFO] ${new Date().toISOString()}: ${message}`, data || '');\n  },\n  error: (message: string, error?: any) => {\n    console.error(`[ERROR] ${new Date().toISOString()}: ${message}`, error || '');\n  },\n  warn: (message: string, data?: any) => {\n    console.warn(`[WARN] ${new Date().toISOString()}: ${message}`, data || '');\n  },\n  debug: (message: string, data?: any) => {\n    if (process.env.NODE_ENV === 'development') {\n      console.debug(`[DEBUG] ${new Date().toISOString()}: ${message}`, data || '');\n    }\n  }\n};\n",
  "backend/src/middleware/rateLimiter.ts": "import rateLimit from 'express-rate-limit';\n\nexport const rateLimiter = rateLimit({\n  windowMs: 15 * 60 * 1000, // 15 minutes\n  max: 100, // Limit each IP to 100 requests per windowMs\n  message: 'Too many requests, please try again later.',\n  standardHeaders: true,\n  legacyHeaders: false,\n});\n\nexport const authLimiter = rateLimit({\n  windowMs: 15 * 60 * 1000, // 15 minutes\n  max: 5, // 5 attempts per 15 minutes\n  skipSuccessfulRequests: true, // Don't count successful requests\n  message: 'Too many login attempts, please try again later.'\n});\n\nexport const apiLimiter = rateLimit({\n  windowMs: 60 * 1000, // 1 minute\n  max: 30, // 30 requests per minute\n  message: 'Too many API requests, please try again later.'\n});\n\nexport const createLimiter = rateLimit({\n  windowMs: 60 * 60 * 1000, // 1 hour\n  max: 10, // 10 creations per hour\n  message: 'Too many creations, please try again later.'\n});\n",
  "backend/src/routes/auth.ts": "import { Router } from 'express';\nimport { AuthService } from '../services/authService.js';\nimport { authLimiter } from '../middleware/rateLimiter.js';\nimport { asyncHandler } from '../middleware/errorHandler.js';\n\nconst router = Router();\n\n// Register\nrouter.post('/register', authLimiter, asyncHandler(async (req, res) => {\n  const { email, password, firstName, lastName, phone } = req.body;\n\n  if (!email || !password || !firstName || !lastName) {\n    return res.status(400).json({ error: 'Missing required fields' });\n  }\n\n  try {\n    const user = await AuthService.register(email, password, firstName, lastName, phone);\n    res.status(201).json({ status: 'success', data: user });\n  } catch (error: any) {\n    res.status(400).json({ error: error.message });\n  }\n}));\n\n// Login\nrouter.post('/login', authLimiter, asyncHandler(async (req, res) => {\n  const { email, password } = req.body;\n\n  if (!email || !password) {\n    return res.status(400).json({ error: 'Email and password required' });\n  }\n\n  try {\n    const result = await AuthService.login(email, password);\n    res.status(200).json({ status: 'success', data: result });\n  } catch (error: any) {\n    res.status(401).json({ error: error.message });\n  }\n}));\n\n// Refresh Token\nrouter.post('/refresh', asyncHandler(async (req, res) => {\n  const { refreshToken } = req.body;\n\n  if (!refreshToken) {\n    return res.status(400).json({ error: 'Refresh token required' });\n  }\n\n  try {\n    const result = await AuthService.refreshToken(refreshToken);\n    res.status(200).json({ status: 'success', data: result });\n  } catch (error: any) {\n    res.status(401).json({ error: error.message });\n  }\n}));\n\nexport default router;\n",
  "backend/src/routes/cart.ts": "// Cart routes - stub\nimport { Router } from 'express';\nexport default Router();\n",
  "backend/src/routes/message.ts": "// Message routes - stub\nimport { Router } from 'express';\nexport default Router();\n",
  "backend/src/routes/order.ts": "// Order routes - stub\nimport { Router } from 'express';\nexport default Router();\n",
  "backend/src/routes/payment.ts": "// Payment routes - stub\nimport { Router } from 'express';\nexport default Router();\n",
  "backend/src/routes/product.ts": "// Product routes - stub\nimport { Router } from 'express';\nexport default Router();\n",
  "backend/src/routes/review.ts": "// Review routes - stub\nimport { Router } from 'express';\nexport default Router();\n",
  "backend/src/routes/triniWorks.ts": "// TriniWorks routes - stub\nimport { Router } from 'express';\nexport default Router();\n",
  "backend/src/routes/user.ts": "// User routes - stub\nimport { Router } from 'express';\nexport default Router();\n",
  "backend/src/routes/vendor.ts": "// Vendor routes - stub\nimport { Router } from 'express';\nexport default Router();\n",
  "backend/src/services/authService.ts": "import jwt from 'jsonwebtoken';\nimport bcrypt from 'bcryptjs';\nimport { PrismaClient } from '@prisma/client';\n\nconst prisma = new PrismaClient();\n\nexport const AuthService = {\n  // Register new user\n  async register(email: string, password: string, firstName: string, lastName: string, phone?: string) {\n    // Check if user exists\n    const existingUser = await prisma.user.findUnique({ where: { email } });\n    if (existingUser) {\n      throw new Error('Email already registered');\n    }\n\n    // Hash password\n    const hashedPassword = await bcrypt.hash(password, 10);\n\n    // Create user\n    const user = await prisma.user.create({\n      data: {\n        email,\n        password: hashedPassword,\n        firstName,\n        lastName,\n        phone,\n        role: 'CUSTOMER'\n      }\n    });\n\n    // Create cart\n    await prisma.cart.create({\n      data: { userId: user.id }\n    });\n\n    return {\n      id: user.id,\n      email: user.email,\n      firstName: user.firstName,\n      lastName: user.lastName,\n      role: user.role\n    };\n  },\n\n  // Login user\n  async login(email: string, password: string) {\n    const user = await prisma.user.findUnique({ where: { email } });\n    if (!user) {\n      throw new Error('Invalid email or password');\n    }\n\n    const isPasswordValid = await bcrypt.compare(password, user.password);\n    if (!isPasswordValid) {\n      throw new Error('Invalid email or password');\n    }\n\n    return this.generateTokens(user);\n  },\n\n  // Generate JWT tokens\n  generateTokens(user: any) {\n    const payload = {\n      id: user.id,\n      email: user.email,\n      role: user.role\n    };\n\n    const accessToken = jwt.sign(payload, process.env.JWT_SECRET || 'secret', {\n      expiresIn: process.env.JWT_EXPIRY || '7d'\n    });\n\n    const refreshToken = jwt.sign(payload, process.env.JWT_REFRESH_SECRET || 'refresh_secret', {\n      expiresIn: '30d'\n    });\n\n    return {\n      user: {\n        id: user.id,\n        email: user.email,\n        firstName: user.firstName,\n        lastName: user.lastName,\n        role: user.role,\n        avatar: user.avatar\n      },\n      accessToken,\n      refreshToken\n    };\n  },\n\n  // Refresh access token\n  async refreshToken(refreshToken: string) {\n    try {\n      const decoded = jwt.verify(refreshToken, process.env.JWT_REFRESH_SECRET || 'refresh_secret') as any;\n      const user = await prisma.user.findUnique({ where: { id: decoded.id } });\n      if (!user) {\n        throw new Error('User not found');\n      }\n      return this.generateTokens(user);\n    } catch (error) {\n      throw new Error('Invalid refresh token');\n    }\n  },\n\n  // Verify email\n  async verifyEmail(userId: string) {\n    return prisma.user.update({\n      where: { id: userId },\n      data: { emailVerified: new Date() }\n    });\n  },\n\n  // Reset password\n  async resetPassword(email: string, newPassword: string) {\n    const hashedPassword = await bcrypt.hash(newPassword, 10);\n    return prisma.user.update({\n      where: { email },\n      data: { password: hashedPassword }\n    });\n  }\n};\n",
  "backend/src/services/cartService.ts": "import { PrismaClient } from '@prisma/client';\n\nconst prisma = new PrismaClient();\n\nexport const CartService = {\n  // Get cart\n  async getCart(userId: string) {\n    let cart = await prisma.cart.findUnique({\n      where: { userId },\n      include: {\n        items: {\n          include: { product: true }\n        }\n      }\n    });\n\n    if (!cart) {\n      cart = await prisma.cart.create({\n        data: { userId },\n        include: { items: { include: { product: true } } }\n      });\n    }\n\n    return cart;\n  },\n\n  // Add to cart\n  async addToCart(userId: string, productId: string, quantity: number = 1) {\n    let cart = await this.getCart(userId);\n\n    const existingItem = await prisma.cartItem.findUnique({\n      where: {\n        cartId_productId: {\n          cartId: cart.id,\n          productId\n        }\n      }\n    });\n\n    if (existingItem) {\n      return prisma.cartItem.update({\n        where: { id: existingItem.id },\n        data: { quantity: existingItem.quantity + quantity }\n      });\n    }\n\n    return prisma.cartItem.create({\n      data: {\n        cartId: cart.id,\n        productId,\n        quantity\n      }\n    });\n  },\n\n  // Remove from cart\n  async removeFromCart(userId: string, productId: string) {\n    const cart = await this.getCart(userId);\n    return prisma.cartItem.delete({\n      where: {\n        cartId_productId: {\n          cartId: cart.id,\n          productId\n        }\n      }\n    });\n  },\n\n  // Update cart item quantity\n  async updateCartItemQuantity(userId: string, productId: string, quantity: number) {\n    const cart = await this.getCart(userId);\n    return prisma.cartItem.update({\n      where: {\n        cartId_productId: {\n          cartId: cart.id,\n          productId\n        }\n      },\n      data: { quantity }\n    });\n  },\n\n  // Clear cart\n  async clearCart(userId: string) {\n    const cart = await this.getCart(userId);\n    return prisma.cartItem.deleteMany({\n      where: { cartId: cart.id }\n    });\n  },\n\n  // Calculate cart totals\n  async getCartTotals(userId: string) {\n    const cart = await this.getCart(userId);\n    \n    let subtotal = 0;\n    let totalItems = 0;\n    const items = [];\n\n    for (const item of cart.items) {\n      const itemTotal = item.product.price * item.quantity;\n      subtotal += itemTotal;\n      totalItems += item.quantity;\n      items.push({\n        ...item,\n        itemTotal\n      });\n    }\n\n    const shippingCost = subtotal > 500 ? 0 : 50; // Free shipping over TTD 500\n    const taxAmount = subtotal * 0.15; // 15% VAT\n    const total = subtotal + shippingCost + taxAmount;\n\n    return {\n      items,\n      subtotal,\n      shippingCost,\n      taxAmount,\n      total,\n      totalItems\n    };\n  }\n};\n",
  "backend/src/services/notificationService.ts": "import { PrismaClient } from '@prisma/client';\nimport nodemailer from 'nodemailer';\n\nconst prisma = new PrismaClient();\n\n// Email transporter setup\nconst transporter = nodemailer.createTransport({\n  service: 'SendGrid',\n  auth: {\n    user: 'apikey',\n    pass: process.env.SENDGRID_API_KEY || ''\n  }\n});\n\nexport const NotificationService = {\n  // Create notification\n  async createNotification(\n    userId: string,\n    type: string,\n    title: string,\n    message: string,\n    data?: any\n  ) {\n    const notification = await prisma.notification.create({\n      data: {\n        userId,\n        type: type as any,\n        title,\n        message,\n        relatedOrderId: data?.orderId,\n        relatedJobId: data?.jobId,\n        relatedUserId: data?.userId,\n        actionUrl: data?.actionUrl,\n        actionLabel: data?.actionLabel\n      }\n    });\n\n    // Send email notification if enabled\n    const user = await prisma.user.findUnique({ where: { id: userId } });\n    if (user?.notificationEmail) {\n      await this.sendEmailNotification(user.email, title, message);\n    }\n\n    return notification;\n  },\n\n  // Get user notifications\n  async getUserNotifications(userId: string, limit: number = 20, offset: number = 0) {\n    return prisma.notification.findMany({\n      where: { userId },\n      take: limit,\n      skip: offset,\n      orderBy: { createdAt: 'desc' }\n    });\n  },\n\n  // Mark as read\n  async markAsRead(notificationId: string) {\n    return prisma.notification.update({\n      where: { id: notificationId },\n      data: { read: true, readAt: new Date() }\n    });\n  },\n\n  // Mark all as read\n  async markAllAsRead(userId: string) {\n    return prisma.notification.updateMany({\n      where: { userId, read: false },\n      data: { read: true, readAt: new Date() }\n    });\n  },\n\n  // Get unread count\n  async getUnreadCount(userId: string) {\n    return prisma.notification.count({\n      where: { userId, read: false }\n    });\n  },\n\n  // Send email notification\n  async sendEmailNotification(email: string, subject: string, message: string) {\n    try {\n      await transporter.sendMail({\n        from: process.env.SENDER_EMAIL || 'noreply@trinibuild.com',\n        to: email,\n        subject,\n        html: `\n          <h2>${subject}</h2>\n          <p>${message}</p>\n          <p>Visit TriniBuild to manage your account.</p>\n        `\n      });\n    } catch (error) {\n      console.error('Email send error:', error);\n    }\n  },\n\n  // Notify order status change\n  async notifyOrderStatusChange(orderId: string, status: string) {\n    const order = await prisma.order.findUnique({\n      where: { id: orderId },\n      include: { user: true }\n    });\n\n    if (!order) return;\n\n    const messages: Record<string, string> = {\n      CONFIRMED: 'Your order has been confirmed!',\n      PROCESSING: 'Your order is being processed.',\n      SHIPPED: 'Your order has been shipped!',\n      DELIVERED: 'Your order has been delivered!',\n      CANCELLED: 'Your order has been cancelled.'\n    };\n\n    await this.createNotification(\n      order.userId,\n      'ORDER_' + status,\n      `Order ${order.orderNumber} ${status}`,\n      messages[status] || 'Order status updated',\n      { orderId: order.id }\n    );\n  },\n\n  // Notify payment\n  async notifyPayment(userId: string, amount: number, status: string) {\n    const message = status === 'COMPLETED'\n      ? `Payment of TTD $${amount.toLocaleString()} has been received.`\n      : `Payment of TTD $${amount.toLocaleString()} failed. Please try again.`;\n\n    await this.createNotification(\n      userId,\n      'PAYMENT_' + status,\n      `Payment ${status}`,\n      message\n    );\n  },\n\n  // Notify TriniWorks proposal\n  async notifyTriniWorksProposal(professionalId: string, jobTitle: string) {\n    const professional = await prisma.triniWorksProfessional.findUnique({\n      where: { id: professionalId },\n      include: { user: true }\n    });\n\n    if (!professional) return;\n\n    await this.createNotification(\n      professional.user.id,\n      'TRINIWORKS_PROPOSAL',\n      'New Job Opportunity',\n      `New job available: ${jobTitle}. View and submit your proposal!`\n    );\n  },\n\n  // Notify review received\n  async notifyReview(vendorId: string, productTitle: string, rating: number) {\n    const vendor = await prisma.vendor.findUnique({\n      where: { id: vendorId },\n      include: { user: true }\n    });\n\n    if (!vendor) return;\n\n    await this.createNotification(\n      vendor.user.id,\n      'REVIEW_REQUESTED',\n      'New Review',\n      `Your product \"${productTitle}\" received a ${rating}-star review.`\n    );\n  }\n};\n",
  "backend/src/services/orderService.ts": "import { PrismaClient } from '@prisma/client';\n\nconst prisma = new PrismaClient();\n\nexport const OrderService = {\n  // Create order from cart\n  async createOrder(userId: string, shippingAddressId: string, paymentMethod: string) {\n    const cart = await prisma.cart.findUnique({\n      where: { userId },\n      include: { items: { include: { product: true } } }\n    });\n\n    if (!cart || cart.items.length === 0) {\n      throw new Error('Cart is empty');\n    }\n\n    // Calculate totals\n    let subtotal = 0;\n    const orderItems = [];\n\n    for (const item of cart.items) {\n      const itemTotal = item.product.price * item.quantity;\n      subtotal += itemTotal;\n\n      orderItems.push({\n        vendorId: item.product.vendorId,\n        productId: item.product.id,\n        quantity: item.quantity,\n        price: item.product.price,\n        subtotal: itemTotal\n      });\n    }\n\n    const shippingCost = subtotal > 500 ? 0 : 50;\n    const taxAmount = subtotal * 0.15;\n    const total = subtotal + shippingCost + taxAmount;\n\n    // Create order\n    const order = await prisma.order.create({\n      data: {\n        userId,\n        shippingAddressId,\n        paymentMethod,\n        subtotal,\n        shippingCost,\n        taxAmount,\n        total,\n        items: {\n          create: orderItems.map(item => ({\n            ...item,\n            status: 'PENDING'\n          }))\n        }\n      },\n      include: { items: true }\n    });\n\n    // Clear cart\n    await prisma.cartItem.deleteMany({\n      where: { cartId: cart.id }\n    });\n\n    return order;\n  },\n\n  // Get order by ID\n  async getOrder(orderId: string) {\n    return prisma.order.findUnique({\n      where: { id: orderId },\n      include: {\n        items: { include: { product: true, vendor: true } },\n        user: true\n      }\n    });\n  },\n\n  // Get user orders\n  async getUserOrders(userId: string, limit: number = 20, offset: number = 0) {\n    return prisma.order.findMany({\n      where: { userId },\n      take: limit,\n      skip: offset,\n      orderBy: { createdAt: 'desc' },\n      include: { items: { include: { product: true } } }\n    });\n  },\n\n  // Update order status\n  async updateOrderStatus(orderId: string, status: string) {\n    return prisma.order.update({\n      where: { id: orderId },\n      data: { status: status as any }\n    });\n  },\n\n  // Cancel order\n  async cancelOrder(orderId: string, reason: string) {\n    return prisma.order.update({\n      where: { id: orderId },\n      data: {\n        status: 'CANCELLED',\n        cancelReason: reason,\n        canceledAt: new Date()\n      }\n    });\n  }\n};\n",
  "backend/src/services/paymentService.ts": "import Stripe from 'stripe';\nimport { PrismaClient } from '@prisma/client';\n\nconst prisma = new PrismaClient();\nconst stripe = new Stripe(process.env.STRIPE_SECRET_KEY || '', {\n  apiVersion: '2023-10-16'\n});\n\nexport const PaymentService = {\n  // Create payment intent for Stripe\n  async createPaymentIntent(amount: number, currency: string = 'usd', metadata: any = {}) {\n    try {\n      const paymentIntent = await stripe.paymentIntents.create({\n        amount: Math.round(amount * 100), // Convert to cents\n        currency,\n        metadata\n      });\n      return paymentIntent;\n    } catch (error) {\n      throw new Error(`Stripe error: ${error}`);\n    }\n  },\n\n  // Process TTD payment (local gateway)\n  async processTTDPayment(\n    amount: number,\n    gateway: string, // FCIB, REPUBLIC_BANK, FLOW_MOBILE, NATIONAL_SECURE\n    paymentDetails: any\n  ) {\n    const gatewayConfig = {\n      FCIB: process.env.FCIB_API_KEY,\n      REPUBLIC_BANK: process.env.REPUBLIC_BANK_API_KEY,\n      FLOW_MOBILE: process.env.FLOW_MOBILE_API_KEY,\n      NATIONAL_SECURE: process.env.NATIONAL_SECURE_API_KEY\n    };\n\n    const apiKey = gatewayConfig[gateway as keyof typeof gatewayConfig];\n    if (!apiKey) {\n      throw new Error(`Invalid payment gateway: ${gateway}`);\n    }\n\n    // TODO: Implement actual gateway API calls\n    // For now, return mock response\n    return {\n      transactionId: `TTD_${gateway}_${Date.now()}`,\n      status: 'PENDING',\n      amount,\n      currency: 'TTD',\n      gateway,\n      timestamp: new Date()\n    };\n  },\n\n  // Create order payment\n  async createOrderPayment(orderId: string, amount: number, method: string) {\n    const payment = await prisma.payment.create({\n      data: {\n        transactionId: `TXN_${Date.now()}`,\n        amount,\n        currency: 'TTD',\n        method: method as any,\n        status: 'PENDING',\n        orders: {\n          connect: { id: orderId }\n        }\n      }\n    });\n    return payment;\n  },\n\n  // Update payment status\n  async updatePaymentStatus(paymentId: string, status: string) {\n    return prisma.payment.update({\n      where: { id: paymentId },\n      data: { status: status as any }\n    });\n  },\n\n  // Process refund\n  async processRefund(paymentId: string, amount: number, reason: string) {\n    const refund = await prisma.refund.create({\n      data: {\n        paymentId,\n        amount,\n        reason,\n        status: 'PENDING'\n      }\n    });\n\n    // If Stripe payment, process refund\n    const payment = await prisma.payment.findUnique({ where: { id: paymentId } });\n    if (payment?.paymentIntentId) {\n      try {\n        await stripe.refunds.create({\n          payment_intent: payment.paymentIntentId,\n          amount: Math.round(amount * 100)\n        });\n      } catch (error) {\n        console.error('Stripe refund error:', error);\n      }\n    }\n\n    return refund;\n  },\n\n  // Webhook handler for Stripe\n  async handleStripeWebhook(event: any) {\n    switch (event.type) {\n      case 'payment_intent.succeeded':\n        return await this.handlePaymentSuccess(event.data.object);\n      case 'payment_intent.payment_failed':\n        return await this.handlePaymentFailure(event.data.object);\n      default:\n        console.log(`Unhandled event type: ${event.type}`);\n    }\n  },\n\n  // Handle successful payment\n  async handlePaymentSuccess(paymentIntent: any) {\n    const payment = await prisma.payment.findFirst({\n      where: { paymentIntentId: paymentIntent.id }\n    });\n\n    if (payment) {\n      await prisma.payment.update({\n        where: { id: payment.id },\n        data: { status: 'COMPLETED' }\n      });\n\n      // Update order status\n      await prisma.order.updateMany({\n        where: { paymentId: payment.id },\n        data: { paymentStatus: 'COMPLETED', status: 'CONFIRMED' }\n      });\n    }\n  },\n\n  // Handle failed payment\n  async handlePaymentFailure(paymentIntent: any) {\n    const payment = await prisma.payment.findFirst({\n      where: { paymentIntentId: paymentIntent.id }\n    });\n\n    if (payment) {\n      await prisma.payment.update({\n        where: { id: payment.id },\n        data: { \n          status: 'FAILED',\n          failureMessage: paymentIntent.last_payment_error?.message\n        }\n      });\n    }\n  }\n};\n",
  "backend/src/services/productService.ts": "import { PrismaClient } from '@prisma/client';\n\nconst prisma = new PrismaClient();\n\nexport const ProductService = {\n  // Get all products with filtering\n  async getProducts(filters: any = {}, limit: number = 20, offset: number = 0) {\n    const where: any = { isActive: true };\n\n    if (filters.category) where.category = filters.category;\n    if (filters.vendorId) where.vendorId = filters.vendorId;\n    if (filters.minPrice) where.price = { gte: filters.minPrice };\n    if (filters.maxPrice) where.price = { ...where.price, lte: filters.maxPrice };\n    if (filters.search) {\n      where.OR = [\n        { title: { contains: filters.search, mode: 'insensitive' } },\n        { description: { contains: filters.search, mode: 'insensitive' } },\n        { tags: { hasSome: [filters.search] } }\n      ];\n    }\n\n    const products = await prisma.product.findMany({\n      where,\n      take: limit,\n      skip: offset,\n      orderBy: filters.sortBy === 'price' \n        ? { price: 'asc' }\n        : filters.sortBy === 'newest'\n        ? { createdAt: 'desc' }\n        : { rating: 'desc' }\n    });\n\n    const total = await prisma.product.count({ where });\n\n    return { products, total };\n  },\n\n  // Get product by ID\n  async getProduct(productId: string) {\n    const product = await prisma.product.findUnique({\n      where: { id: productId },\n      include: {\n        reviews: {\n          take: 10,\n          orderBy: { createdAt: 'desc' }\n        }\n      }\n    });\n\n    if (product) {\n      // Increment views\n      await prisma.product.update({\n        where: { id: productId },\n        data: { views: { increment: 1 } }\n      });\n    }\n\n    return product;\n  },\n\n  // Create product (vendor)\n  async createProduct(vendorId: string, productData: any) {\n    return prisma.product.create({\n      data: {\n        ...productData,\n        vendorId,\n        slug: productData.title.toLowerCase().replace(/\\s+/g, '-')\n      }\n    });\n  },\n\n  // Update product (vendor)\n  async updateProduct(productId: string, productData: any) {\n    return prisma.product.update({\n      where: { id: productId },\n      data: productData\n    });\n  },\n\n  // Delete product (vendor)\n  async deleteProduct(productId: string) {\n    return prisma.product.update({\n      where: { id: productId },\n      data: { isActive: false }\n    });\n  },\n\n  // Get featured products\n  async getFeaturedProducts(limit: number = 8) {\n    return prisma.product.findMany({\n      where: {\n        isActive: true,\n        isFeatured: true\n      },\n      take: limit,\n      orderBy: { rating: 'desc' }\n    });\n  },\n\n  // Get flash sale products\n  async getFlashSaleProducts(limit: number = 20) {\n    const now = new Date();\n    return prisma.product.findMany({\n      where: {\n        isActive: true,\n        isFlashSale: true,\n        flashSaleEndDate: { gt: now }\n      },\n      take: limit,\n      orderBy: { discount: 'desc' }\n    });\n  },\n\n  // Update product views\n  async incrementViews(productId: string) {\n    return prisma.product.update({\n      where: { id: productId },\n      data: { views: { increment: 1 } }\n    });\n  },\n\n  // Search products\n  async searchProducts(query: string, limit: number = 20) {\n    return prisma.product.findMany({\n      where: {\n        isActive: true,\n        OR: [\n          { title: { contains: query, mode: 'insensitive' } },\n          { description: { contains: query, mode: 'insensitive' } },\n          { brand: { contains: query, mode: 'insensitive' } },\n          { tags: { hasSome: [query] } }\n        ]\n      },\n      take: limit\n    });\n  }\n};\n",
  "backend/src/sockets/messageHandlers.ts": "export const setupMessageHandlers = (socket: any, io: any) => {\n  socket.on('send_message', async (data: any) => {\n    // Handle message sending\n    console.log('Message received:', data);\n    io.to(data.conversationId).emit('message_received', data);\n  });\n\n  socket.on('typing', (data: any) => {\n    socket.broadcast.emit('user_typing', data);\n  });\n\n  socket.on('stop_typing', (data: any) => {\n    socket.broadcast.emit('user_stopped_typing', data);\n  });\n};\n",
  "backend/src/sockets/notificationHandlers.ts": "export const setupNotificationHandlers = (socket: any, io: any) => {\n  socket.on('notify', (data: any) => {\n    // Handle notifications\n    console.log('Notification:', data);\n    io.to(data.userId).emit('notification_received', data);\n  });\n\n  socket.on('mark_read', (data: any) => {\n    io.to(data.userId).emit('notification_read', data);\n  });\n};\n",
  "components/AdSpot.tsx": "import React, { useEffect, useState, useRef } from 'react';\nimport { Volume2, VolumeX, ExternalLink, Info } from 'lucide-react';\nimport { getAdsForPage, recordImpression, recordClick, AdCampaign } from '../services/adService';\n\ninterface AdSpotProps {\n    page: string;\n    slot: 'top' | 'bottom' | 'sidebar';\n    className?: string;\n}\n\nexport const AdSpot: React.FC<AdSpotProps> = ({ page, slot, className = '' }) => {\n    const [ad, setAd] = useState<AdCampaign | null>(null);\n    const [muted, setMuted] = useState(true);\n    const videoRef = useRef<HTMLVideoElement>(null);\n\n    useEffect(() => {\n        const ads = getAdsForPage(page);\n        // Assign slots: 'top' gets 1st ad, 'bottom' gets 2nd ad, 'sidebar' gets 3rd\n        let selectedAd = null;\n        if (slot === 'top' && ads.length > 0) selectedAd = ads[0];\n        if (slot === 'bottom' && ads.length > 1) selectedAd = ads[1];\n        if (slot === 'sidebar' && ads.length > 2) selectedAd = ads[2];\n\n        if (selectedAd) {\n            setAd(selectedAd);\n            recordImpression(selectedAd.id);\n        }\n    }, [page, slot]);\n\n    const handleClick = () => {\n        if (ad) {\n            recordClick(ad.id);\n            window.open(ad.targetUrl, '_blank');\n        }\n    };\n\n    if (!ad) return null;\n\n    return (\n        <div className={`relative w-full overflow-hidden rounded-xl shadow-lg group bg-black border border-gray-800 ${className}`}>\n            {/* Label */}\n            <div className=\"absolute top-3 left-3 z-20 flex items-center gap-2\">\n                <span className=\"bg-yellow-400 text-black text-[10px] font-bold px-2 py-0.5 rounded uppercase tracking-wider\">\n                    Sponsored\n                </span>\n                {ad.isPaidClient && (\n                    <span className=\"bg-trini-red text-white text-[10px] font-bold px-2 py-0.5 rounded uppercase tracking-wider flex items-center\">\n                        <Info className=\"w-3 h-3 mr-1\" /> Featured Partner\n                    </span>\n                )}\n            </div>\n\n            {/* Video */}\n            <video\n                ref={videoRef}\n                src={ad.videoUrl}\n                className=\"w-full h-[200px] md:h-[300px] object-cover opacity-90 group-hover:opacity-100 transition-opacity cursor-pointer\"\n                autoPlay\n                loop\n                muted={muted}\n                playsInline\n                onClick={handleClick}\n            />\n\n            {/* Controls & Overlay */}\n            <div className=\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent p-4 z-20 flex justify-between items-end opacity-0 group-hover:opacity-100 transition-opacity duration-300\">\n                <div className=\"text-white\">\n                    <p className=\"text-xs text-gray-300 mb-1\">Advertisement</p>\n                    <h4 className=\"font-bold text-lg leading-tight mb-2\">{ad.clientName}</h4>\n                    <button\n                        onClick={handleClick}\n                        className=\"bg-white text-black text-xs font-bold px-3 py-1.5 rounded-full flex items-center hover:bg-gray-200 transition-colors\"\n                    >\n                        Visit Site <ExternalLink className=\"ml-1 h-3 w-3\" />\n                    </button>\n                </div>\n\n                <button\n                    onClick={(e) => {\n                        e.stopPropagation();\n                        setMuted(!muted);\n                    }}\n                    className=\"bg-white/20 backdrop-blur p-2 rounded-full text-white hover:bg-white/30 transition-colors\"\n                >\n                    {muted ? <VolumeX className=\"h-4 w-4\" /> : <Volume2 className=\"h-4 w-4\" />}\n                </button>\n            </div>\n        </div>\n    );\n};\n",
  "components/ChatWidget.tsx": "import React, { useState, useRef, useEffect } from 'react';\nimport { MessageCircle, X, Send, Loader2, Sparkles, Store, Home, HardHat, Car, FileText } from 'lucide-react';\nimport ReactMarkdown from 'react-markdown';\nimport remarkGfm from 'remark-gfm';\nimport { aiService } from '../services/ai';\n\ninterface Message {\n  id: string;\n  text: string;\n  sender: 'user' | 'ai';\n}\n\ninterface ChatWidgetProps {\n  mode: 'platform' | 'vendor' | 'real_estate' | 'service_expert' | 'rides' | 'paperwork_assistant';\n  vendorContext?: any;\n}\n\nexport const ChatWidget: React.FC<ChatWidgetProps> = ({ mode: initialMode, vendorContext }) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [mode, setMode] = useState(initialMode);\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [input, setInput] = useState('');\n  const [loading, setLoading] = useState(false);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const [botSettings, setBotSettings] = useState<any>(null);\n\n  useEffect(() => {\n    if (vendorContext?.id) {\n      aiService.getStoreBotSettings(vendorContext.id).then(settings => {\n        if (settings) setBotSettings(settings);\n      });\n    }\n  }, [vendorContext]);\n\n  // Load messages from localStorage on mount or mode change\n  useEffect(() => {\n    const storageKey = vendorContext?.id\n      ? `chat_history_vendor_${vendorContext.id}`\n      : `chat_history_${mode}`;\n\n    const savedMessages = localStorage.getItem(storageKey);\n\n    if (savedMessages) {\n      try {\n        setMessages(JSON.parse(savedMessages));\n      } catch (e) {\n        console.error('Failed to parse chat history', e);\n        initializeDefaultMessage();\n      }\n    } else {\n      initializeDefaultMessage();\n    }\n  }, [mode, vendorContext]);\n\n  // Save messages to localStorage whenever they change\n  useEffect(() => {\n    if (messages.length > 0) {\n      const storageKey = vendorContext?.id\n        ? `chat_history_vendor_${vendorContext.id}`\n        : `chat_history_${mode}`;\n      localStorage.setItem(storageKey, JSON.stringify(messages));\n    }\n  }, [messages, mode, vendorContext]);\n\n  const initializeDefaultMessage = () => {\n    const initialMessage = mode === 'platform'\n      ? \"Hi! I'm TriniBot. How can I help you grow your business today?\"\n      : mode === 'real_estate'\n        ? \"Hello! I'm your Real Estate Assistant. Looking for a home or need advice on the market?\"\n        : mode === 'service_expert'\n          ? \"Need a pro? I can help you find the best plumbers, electricians, and more in T&T.\"\n          : mode === 'rides'\n            ? \"Going somewhere? I can help you find a ride or check traffic.\"\n            : mode === 'paperwork_assistant'\n              ? \"Struggling with bank forms or visa letters? I can help you get the official paperwork you need.\"\n              : `Welcome to ${vendorContext?.name || 'our store'}! I'm ${botSettings?.bot_name || 'the Store Assistant'}. Ask me anything about our products.`;\n\n    setMessages([{ id: '1', text: initialMessage, sender: 'ai' }]);\n  };\n\n  // Listen for external open events\n  useEffect(() => {\n    const handleOpenChat = (event: CustomEvent) => {\n      if (event.detail?.mode) {\n        setMode(event.detail.mode);\n      }\n      setIsOpen(true);\n    };\n\n    window.addEventListener('open-chat', handleOpenChat);\n    return () => window.removeEventListener('open-chat', handleOpenChat);\n  }, []);\n\n  // Scroll to bottom\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages, isOpen]);\n\n  const handleSend = async () => {\n    if (!input.trim()) return;\n\n    const userMsg: Message = { id: Date.now().toString(), text: input, sender: 'user' };\n    setMessages(prev => [...prev, userMsg]);\n    setInput('');\n    setLoading(true);\n\n    try {\n      // Construct context from history (last 5 messages)\n      const historyContext = messages.slice(-5).map(m => `${m.sender === 'user' ? 'User' : 'Bot'}: ${m.text}`).join('\\n');\n\n      // Determine system prompt based on mode\n      let systemPrompt = \"You are TriniBuild Support Bot, a helpful assistant with a slight Trinidadian accent.\";\n      if (mode === 'real_estate') systemPrompt = \"You are a Real Estate Assistant for TriniBuild. Help users find properties and understand the market.\";\n      else if (mode === 'service_expert') systemPrompt = \"You are a Service Expert. Recommend professionals (plumbers, electricians) available on TriniBuild.\";\n      else if (mode === 'rides') systemPrompt = \"You are a Ride Assistant. Help users find rides and check traffic conditions.\";\n      else if (mode === 'paperwork_assistant') systemPrompt = \"You are a Paperwork Assistant. Help users with official documents, visa letters, and bank forms.\";\n      else if (vendorContext) {\n        systemPrompt = botSettings?.bot_system_prompt || `You are a sales assistant for ${vendorContext.name}. ${vendorContext.description}. Products: ${JSON.stringify(vendorContext.products)}`;\n      }\n\n      const response = await aiService.chatWithBot({\n        message: userMsg.text,\n        context: historyContext,\n        persona: botSettings?.bot_persona || 'support_bot',\n        system_prompt: systemPrompt\n      });\n\n      const aiMsg: Message = { id: (Date.now() + 1).toString(), text: response.content, sender: 'ai' };\n      setMessages(prev => [...prev, aiMsg]);\n    } catch (error) {\n      console.error(\"Chat error\", error);\n      setMessages(prev => [...prev, { id: Date.now().toString(), text: \"Sorry, I'm having trouble connecting. Please try again.\", sender: 'ai' }]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    // Adjusted positioning: bottom-24 on mobile to clear sticky footers, bottom-6 on desktop\n    <div className=\"fixed bottom-24 right-4 md:bottom-6 md:right-6 z-50 font-sans\">\n      {/* Chat Window */}\n      {isOpen && (\n        <div className=\"bg-white rounded-2xl shadow-2xl w-80 sm:w-96 h-[500px] flex flex-col mb-4 border border-gray-200 overflow-hidden animate-in slide-in-from-bottom-10 fade-in\">\n          {/* Header */}\n          <div className={`p-4 text-white flex justify-between items-center ${mode === 'platform' ? 'bg-trini-black' :\n            mode === 'real_estate' ? 'bg-green-700' :\n              mode === 'service_expert' ? 'bg-blue-600' :\n                mode === 'rides' ? 'bg-yellow-500' :\n                  mode === 'paperwork_assistant' ? 'bg-indigo-600' :\n                    'bg-trini-teal'\n            }`}>\n            <div className=\"flex items-center gap-2\">\n              <div className=\"bg-white/20 p-1.5 rounded-full\">\n                {mode === 'platform' ? <Sparkles className=\"h-5 w-5\" /> :\n                  mode === 'real_estate' ? <Home className=\"h-5 w-5\" /> :\n                    mode === 'service_expert' ? <HardHat className=\"h-5 w-5\" /> :\n                      mode === 'rides' ? <Car className=\"h-5 w-5\" /> :\n                        mode === 'paperwork_assistant' ? <FileText className=\"h-5 w-5\" /> :\n                          <Store className=\"h-5 w-5\" />}\n              </div>\n              <div>\n                <h3 className=\"font-bold text-sm\">\n                  {mode === 'platform' ? 'TriniBuild Support' :\n                    mode === 'real_estate' ? 'Property Assistant' :\n                      mode === 'service_expert' ? 'Service Expert' :\n                        mode === 'rides' ? 'Ride Assistant' :\n                          mode === 'paperwork_assistant' ? 'Paperwork & Visa Help' :\n                            'Store Assistant'}\n                </h3>\n                <span className=\"flex items-center text-[10px] opacity-80\">\n                  <span className=\"w-1.5 h-1.5 bg-green-400 rounded-full mr-1\"></span>\n                  Online \u2022 TriniBuild AI\n                </span>\n              </div>\n            </div>\n            <button onClick={() => setIsOpen(false)} className=\"hover:bg-white/20 p-1 rounded\" aria-label=\"Close chat\">\n              <X className=\"h-5 w-5\" />\n            </button>\n          </div>\n\n          {/* Messages */}\n          <div className=\"flex-grow overflow-y-auto p-4 space-y-4 bg-gray-50\">\n            {messages.map((msg) => (\n              <div key={msg.id} className={`flex ${msg.sender === 'user' ? 'justify-end' : 'justify-start'}`}>\n                <div className={`max-w-[80%] px-4 py-3 rounded-2xl text-sm leading-relaxed shadow-sm ${msg.sender === 'user'\n                  ? 'bg-trini-red text-white rounded-br-none'\n                  : 'bg-white text-gray-800 border border-gray-200 rounded-bl-none'\n                  }`}>\n                  {msg.sender === 'ai' ? (\n                    <ReactMarkdown\n                      className=\"prose prose-sm max-w-none prose-p:leading-relaxed prose-pre:bg-gray-800 prose-pre:text-white prose-a:text-blue-600 prose-ul:list-disc prose-ol:list-decimal\"\n                      remarkPlugins={[remarkGfm]}\n                    >\n                      {msg.text}\n                    </ReactMarkdown>\n                  ) : (\n                    msg.text\n                  )}\n                </div>\n              </div>\n            ))}\n            {loading && (\n              <div className=\"flex justify-start\">\n                <div className=\"bg-white px-4 py-3 rounded-2xl rounded-bl-none border border-gray-200 shadow-sm flex items-center gap-2\">\n                  <Loader2 className=\"h-4 w-4 animate-spin text-gray-400\" />\n                  <span className=\"text-xs text-gray-400\">Thinking...</span>\n                </div>\n              </div>\n            )}\n            <div ref={messagesEndRef} />\n          </div>\n\n          {/* Input */}\n          <div className=\"p-3 bg-white border-t border-gray-100\">\n            <div className=\"flex gap-2\">\n              <input\n                type=\"text\"\n                value={input}\n                onChange={(e) => setInput(e.target.value)}\n                onKeyDown={(e) => e.key === 'Enter' && handleSend()}\n                placeholder=\"Type a message...\"\n                className=\"flex-grow bg-gray-100 border-0 rounded-full px-4 py-2 text-sm focus:ring-2 focus:ring-trini-red/20 focus:bg-white transition-all outline-none\"\n              />\n              <button\n                onClick={handleSend}\n                disabled={!input.trim() || loading}\n                className=\"bg-trini-red text-white p-2 rounded-full hover:bg-red-700 disabled:opacity-50 disabled:scale-90 transition-all\"\n                aria-label=\"Send message\"\n              >\n                <Send className=\"h-5 w-5 ml-0.5\" />\n              </button>\n            </div>\n            <div className=\"text-center mt-2\">\n              <span className=\"text-[10px] text-gray-400\">Powered by TriniBuild AI</span>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Toggle Button */}\n      {!isOpen && (\n        <button\n          onClick={() => setIsOpen(true)}\n          className={`${mode === 'real_estate' ? 'bg-green-600' : mode === 'service_expert' ? 'bg-blue-600' : mode === 'rides' ? 'bg-yellow-500' : mode === 'paperwork_assistant' ? 'bg-indigo-600' : 'bg-trini-black'} text-white p-4 rounded-full shadow-lg hover:scale-110 transition-transform flex items-center justify-center group border-2 border-white/20`}\n        >\n          {mode === 'real_estate' ? (\n            <Home className=\"h-8 w-8 group-hover:scale-110 transition-transform\" />\n          ) : mode === 'service_expert' ? (\n            <HardHat className=\"h-8 w-8 group-hover:rotate-12 transition-transform\" />\n          ) : mode === 'rides' ? (\n            <Car className=\"h-8 w-8 group-hover:translate-x-1 transition-transform\" />\n          ) : mode === 'paperwork_assistant' ? (\n            <FileText className=\"h-8 w-8 group-hover:scale-110 transition-transform\" />\n          ) : (\n            <MessageCircle className=\"h-8 w-8 group-hover:rotate-12 transition-transform\" />\n          )}\n          <span className=\"absolute -top-2 -right-2 bg-red-600 text-white text-xs font-bold px-2 py-0.5 rounded-full border-2 border-white shadow-sm\">1</span>\n        </button>\n      )}\n    </div>\n  );\n};\n",
  "components/Footer.tsx": "\nimport React from 'react';\nimport { Facebook, Twitter, Instagram, Mail, MapPin } from 'lucide-react';\nimport { Link } from 'react-router-dom';\n\n// Placeholder logo URL - Replace with your actual logo path\nconst LOGO_URL = \"/trinibuild-logo.png\";\n\nexport const Footer: React.FC = () => {\n  return (\n    <footer className=\"bg-gray-900 text-white pt-12 pb-8\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-8\">\n          <div className=\"col-span-1 md:col-span-1\">\n            <div className=\"bg-white/90 p-3 rounded-lg inline-block mb-4\">\n              <img\n                src={LOGO_URL}\n                alt=\"TriniBuild\"\n                className=\"h-10 w-auto\"\n                onError={(e) => {\n                  e.currentTarget.style.display = 'none';\n                  e.currentTarget.parentElement!.innerHTML = '<span class=\"font-bold text-2xl text-trini-black\">Trini<span class=\"text-trini-red\">Build</span></span>';\n                }}\n              />\n            </div>\n            <p className=\"text-gray-400 text-sm mb-4\">\n              Connecting Trinidad & Tobago's businesses with the community. The smartest way to find, buy, and grow locally.\n            </p>\n            <div className=\"flex items-center text-gray-500 text-xs\">\n              <MapPin className=\"h-3 w-3 mr-1\" /> Port of Spain, Trinidad\n            </div>\n          </div>\n\n          <div>\n            <h3 className=\"text-sm font-semibold text-gray-300 tracking-wider uppercase\">Platform</h3>\n            <ul className=\"mt-4 space-y-4\">\n              <li><Link to=\"/directory\" className=\"text-base text-gray-400 hover:text-white\">Business Directory</Link></li>\n              <li><Link to=\"/classifieds\" className=\"text-base text-gray-400 hover:text-white\">Marketplace</Link></li>\n              <li><Link to=\"/rides\" className=\"text-base text-gray-400 hover:text-white\">Rideshare & Delivery</Link></li>\n              <li><Link to=\"/jobs\" className=\"text-base text-gray-400 hover:text-white\">Jobs Board</Link></li>\n            </ul>\n          </div>\n\n          <div>\n            <h3 className=\"text-sm font-semibold text-gray-300 tracking-wider uppercase\">For Business</h3>\n            <ul className=\"mt-4 space-y-4\">\n              <li><Link to=\"/create-store\" className=\"text-base text-gray-400 hover:text-white\">Claim Business</Link></li>\n              <li><Link to=\"/earn\" className=\"text-base text-gray-400 hover:text-white\">Partner Program</Link></li>\n              <li><Link to=\"/pricing\" className=\"text-base text-gray-400 hover:text-white\">Pricing & Plans</Link></li>\n              <li><Link to=\"/blog\" className=\"text-base text-gray-400 hover:text-white\">Success Stories</Link></li>\n              <li><Link to=\"/affiliate\" className=\"text-base text-gray-400 hover:text-white\">Affiliate Program</Link></li>\n            </ul>\n          </div>\n\n          <div>\n            <h3 className=\"text-sm font-semibold text-gray-300 tracking-wider uppercase\">Support</h3>\n            <ul className=\"mt-4 space-y-4\">\n              <li><Link to=\"/contact\" className=\"text-base text-gray-400 hover:text-white\">Contact Sales</Link></li>\n              <li><Link to=\"/privacy\" className=\"text-base text-gray-400 hover:text-white\">Privacy Policy</Link></li>\n              <li><Link to=\"/terms\" className=\"text-base text-gray-400 hover:text-white\">Terms of Service</Link></li>\n              <li className=\"flex items-center text-gray-400 pt-2\">\n                <Mail className=\"h-5 w-5 mr-2\" /> support@trinibuild.tt\n              </li>\n            </ul>\n            <div className=\"flex space-x-6 mt-4\">\n              <a href=\"#\" className=\"text-gray-400 hover:text-white\" aria-label=\"Facebook\"><Facebook className=\"h-6 w-6\" /></a>\n              <a href=\"#\" className=\"text-gray-400 hover:text-white\" aria-label=\"Instagram\"><Instagram className=\"h-6 w-6\" /></a>\n              <a href=\"#\" className=\"text-gray-400 hover:text-white\" aria-label=\"Twitter\"><Twitter className=\"h-6 w-6\" /></a>\n            </div>\n          </div>\n        </div>\n        <div className=\"mt-8 border-t border-gray-800 pt-8 text-center flex justify-between items-center\">\n          <p className=\"text-base text-gray-400\">&copy; 2025 TriniBuild. Built with Google Antigravity. All rights reserved.</p>\n          <Link to=\"/admin\" className=\"text-xs text-gray-700 hover:text-gray-500\">Admin</Link>\n        </div>\n      </div>\n    </footer>\n  );\n};\n",
  "components/JobLetterGenerator.tsx": "import React, { useState } from 'react';\nimport { X, FileText, Loader2, Download, Copy, Check } from 'lucide-react';\nimport ReactMarkdown from 'react-markdown';\nimport remarkGfm from 'remark-gfm';\nimport { aiService, JobLetterRequest } from '../services/ai';\n\ninterface JobLetterGeneratorProps {\n    isOpen: boolean;\n    onClose: () => void;\n}\n\nexport const JobLetterGenerator: React.FC<JobLetterGeneratorProps> = ({ isOpen, onClose }) => {\n    const [formData, setFormData] = useState<JobLetterRequest>({\n        applicant_name: '',\n        position: '',\n        company_name: '',\n        skills: [],\n        experience_years: 0,\n        tone: 'professional',\n    });\n    const [skillsInput, setSkillsInput] = useState('');\n    const [generatedLetter, setGeneratedLetter] = useState('');\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState('');\n    const [copied, setCopied] = useState(false);\n\n    if (!isOpen) return null;\n\n    const handleAddSkill = () => {\n        if (skillsInput.trim()) {\n            setFormData(prev => ({\n                ...prev,\n                skills: [...prev.skills, skillsInput.trim()]\n            }));\n            setSkillsInput('');\n        }\n    };\n\n    const handleRemoveSkill = (skillToRemove: string) => {\n        setFormData(prev => ({\n            ...prev,\n            skills: prev.skills.filter(s => s !== skillToRemove)\n        }));\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setLoading(true);\n        setError('');\n        setGeneratedLetter('');\n\n        try {\n            const response = await aiService.generateJobLetter(formData);\n            setGeneratedLetter(response.content);\n        } catch (err: any) {\n            setError(err.message || 'Failed to generate letter. Please try again.');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const copyToClipboard = () => {\n        navigator.clipboard.writeText(generatedLetter);\n        setCopied(true);\n        setTimeout(() => setCopied(false), 2000);\n    };\n\n    return (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in\">\n            <div className=\"bg-white rounded-2xl max-w-2xl w-full p-6 shadow-2xl relative animate-in zoom-in-95 max-h-[90vh] overflow-y-auto\">\n                <button onClick={onClose} className=\"absolute top-4 right-4 text-gray-400 hover:text-gray-600\">\n                    <X className=\"h-6 w-6\" />\n                </button>\n\n                <div className=\"flex items-center gap-3 mb-6\">\n                    <div className=\"p-3 bg-trini-teal/10 rounded-full text-trini-teal\">\n                        <FileText className=\"h-6 w-6\" />\n                    </div>\n                    <div>\n                        <h2 className=\"text-xl font-bold text-gray-900\">AI Job Letter Generator</h2>\n                        <p className=\"text-sm text-gray-500\">Create a professional application in seconds.</p>\n                    </div>\n                </div>\n\n                {!generatedLetter ? (\n                    <form onSubmit={handleSubmit} className=\"space-y-4\">\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                            <div>\n                                <label className=\"block text-sm font-bold text-gray-700 mb-1\">Your Name</label>\n                                <input\n                                    type=\"text\" required\n                                    value={formData.applicant_name}\n                                    onChange={e => setFormData({ ...formData, applicant_name: e.target.value })}\n                                    className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-trini-teal outline-none\"\n                                    placeholder=\"John Doe\"\n                                />\n                            </div>\n                            <div>\n                                <label className=\"block text-sm font-bold text-gray-700 mb-1\">Target Position</label>\n                                <input\n                                    type=\"text\" required\n                                    value={formData.position}\n                                    onChange={e => setFormData({ ...formData, position: e.target.value })}\n                                    className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-trini-teal outline-none\"\n                                    placeholder=\"Sales Associate\"\n                                />\n                            </div>\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-bold text-gray-700 mb-1\">Company Name</label>\n                            <input\n                                type=\"text\" required\n                                value={formData.company_name}\n                                onChange={e => setFormData({ ...formData, company_name: e.target.value })}\n                                className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-trini-teal outline-none\"\n                                placeholder=\"TriniBuild Ltd.\"\n                            />\n                        </div>\n\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                            <div>\n                                <label className=\"block text-sm font-bold text-gray-700 mb-1\">Years of Experience</label>\n                                <input\n                                    type=\"number\" required min=\"0\"\n                                    value={formData.experience_years}\n                                    onChange={e => setFormData({ ...formData, experience_years: parseInt(e.target.value) || 0 })}\n                                    className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-trini-teal outline-none\"\n                                />\n                            </div>\n                            <div>\n                                <label className=\"block text-sm font-bold text-gray-700 mb-1\">Tone</label>\n                                <select\n                                    value={formData.tone}\n                                    onChange={e => setFormData({ ...formData, tone: e.target.value as JobLetterRequest['tone'] })}\n                                    className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-trini-teal outline-none\"\n                                >\n                                    <option value=\"professional\">Professional</option>\n                                    <option value=\"enthusiastic\">Enthusiastic</option>\n                                    <option value=\"confident\">Confident</option>\n                                </select>\n                            </div>\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-bold text-gray-700 mb-1\">Key Skills</label>\n                            <div className=\"flex gap-2 mb-2\">\n                                <input\n                                    type=\"text\"\n                                    value={skillsInput}\n                                    onChange={e => setSkillsInput(e.target.value)}\n                                    onKeyDown={e => e.key === 'Enter' && (e.preventDefault(), handleAddSkill())}\n                                    className=\"flex-grow p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-trini-teal outline-none\"\n                                    placeholder=\"e.g. Customer Service, Excel\"\n                                />\n                                <button\n                                    type=\"button\"\n                                    onClick={handleAddSkill}\n                                    className=\"bg-gray-100 text-gray-700 px-4 rounded-lg font-bold hover:bg-gray-200\"\n                                >\n                                    Add\n                                </button>\n                            </div>\n                            <div className=\"flex flex-wrap gap-2\">\n                                {formData.skills.map(skill => (\n                                    <span key={skill} className=\"bg-trini-teal/10 text-trini-teal px-3 py-1 rounded-full text-sm font-medium flex items-center gap-1\">\n                                        {skill}\n                                        <button type=\"button\" onClick={() => handleRemoveSkill(skill)} className=\"hover:text-red-500\">\n                                            <X className=\"h-3 w-3\" />\n                                        </button>\n                                    </span>\n                                ))}\n                            </div>\n                        </div>\n\n                        {error && (\n                            <div className=\"bg-red-50 text-red-600 p-3 rounded-lg text-sm\">\n                                {error}\n                            </div>\n                        )}\n\n                        <button\n                            type=\"submit\"\n                            disabled={loading}\n                            className=\"w-full bg-trini-teal text-white font-bold py-3 rounded-lg hover:bg-teal-600 transition-colors shadow-lg flex items-center justify-center gap-2 disabled:opacity-70\"\n                        >\n                            {loading ? (\n                                <>\n                                    <Loader2 className=\"h-5 w-5 animate-spin\" /> Generating...\n                                </>\n                            ) : (\n                                <>\n                                    <FileText className=\"h-5 w-5\" /> Generate Letter\n                                </>\n                            )}\n                        </button>\n                    </form>\n                ) : (\n                    <div className=\"space-y-4\">\n                        <div className=\"bg-gray-50 p-6 rounded-xl border border-gray-200 font-serif text-gray-800 leading-relaxed max-h-[50vh] overflow-y-auto\">\n                            <ReactMarkdown\n                                className=\"prose prose-sm max-w-none prose-p:leading-relaxed prose-ul:list-disc prose-ol:list-decimal\"\n                                remarkPlugins={[remarkGfm]}\n                            >\n                                {generatedLetter}\n                            </ReactMarkdown>\n                        </div>\n\n                        <div className=\"flex gap-3\">\n                            <button\n                                onClick={() => setGeneratedLetter('')}\n                                className=\"flex-1 border border-gray-300 text-gray-700 font-bold py-3 rounded-lg hover:bg-gray-50 transition-colors\"\n                            >\n                                Edit Details\n                            </button>\n                            <button\n                                onClick={copyToClipboard}\n                                className=\"flex-1 bg-trini-teal text-white font-bold py-3 rounded-lg hover:bg-teal-600 transition-colors shadow-lg flex items-center justify-center gap-2\"\n                            >\n                                {copied ? <Check className=\"h-5 w-5\" /> : <Copy className=\"h-5 w-5\" />}\n                                {copied ? 'Copied!' : 'Copy Text'}\n                            </button>\n                        </div>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n};\n",
  "components/ListingDescriptionGenerator.tsx": "import React, { useState } from 'react';\nimport { X, Sparkles, Loader2, Copy, Check, ShoppingBag } from 'lucide-react';\nimport ReactMarkdown from 'react-markdown';\nimport remarkGfm from 'remark-gfm';\nimport { aiService, ListingDescriptionRequest } from '../services/ai';\n\ninterface ListingDescriptionGeneratorProps {\n    isOpen: boolean;\n    onClose: () => void;\n    onSelect?: (description: string) => void;\n}\n\nexport const ListingDescriptionGenerator: React.FC<ListingDescriptionGeneratorProps> = ({ isOpen, onClose, onSelect }) => {\n    const [formData, setFormData] = useState<ListingDescriptionRequest>({\n        title: '',\n        category: '',\n        features: [],\n        condition: 'New',\n        price: undefined,\n        tone: 'persuasive',\n    });\n    const [featureInput, setFeatureInput] = useState('');\n    const [generatedDescription, setGeneratedDescription] = useState('');\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState('');\n    const [copied, setCopied] = useState(false);\n\n    if (!isOpen) return null;\n\n    const handleAddFeature = () => {\n        if (featureInput.trim()) {\n            setFormData(prev => ({\n                ...prev,\n                features: [...prev.features, featureInput.trim()]\n            }));\n            setFeatureInput('');\n        }\n    };\n\n    const handleRemoveFeature = (featureToRemove: string) => {\n        setFormData(prev => ({\n            ...prev,\n            features: prev.features.filter(f => f !== featureToRemove)\n        }));\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setLoading(true);\n        setError('');\n        setGeneratedDescription('');\n\n        try {\n            const response = await aiService.generateListingDescription(formData);\n            setGeneratedDescription(response.content);\n        } catch (err: any) {\n            setError(err.message || 'Failed to generate description.');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const copyToClipboard = () => {\n        navigator.clipboard.writeText(generatedDescription);\n        setCopied(true);\n        setTimeout(() => setCopied(false), 2000);\n    };\n\n    const handleUseDescription = () => {\n        if (onSelect) {\n            onSelect(generatedDescription);\n            onClose();\n        } else {\n            copyToClipboard();\n        }\n    };\n\n    return (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in\">\n            <div className=\"bg-white rounded-2xl max-w-2xl w-full p-6 shadow-2xl relative animate-in zoom-in-95 max-h-[90vh] overflow-y-auto\">\n                <button onClick={onClose} className=\"absolute top-4 right-4 text-gray-400 hover:text-gray-600\">\n                    <X className=\"h-6 w-6\" />\n                </button>\n\n                <div className=\"flex items-center gap-3 mb-6\">\n                    <div className=\"p-3 bg-purple-100 text-purple-600 rounded-full\">\n                        <Sparkles className=\"h-6 w-6\" />\n                    </div>\n                    <div>\n                        <h2 className=\"text-xl font-bold text-gray-900\">AI Listing Optimizer</h2>\n                        <p className=\"text-sm text-gray-500\">Generate high-converting product descriptions.</p>\n                    </div>\n                </div>\n\n                {!generatedDescription ? (\n                    <form onSubmit={handleSubmit} className=\"space-y-4\">\n                        <div>\n                            <label className=\"block text-sm font-bold text-gray-700 mb-1\">Product Title</label>\n                            <input\n                                type=\"text\" required\n                                value={formData.title}\n                                onChange={e => setFormData({ ...formData, title: e.target.value })}\n                                className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 outline-none\"\n                                placeholder=\"e.g. iPhone 13 Pro Max 256GB\"\n                            />\n                        </div>\n\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                            <div>\n                                <label className=\"block text-sm font-bold text-gray-700 mb-1\">Category</label>\n                                <input\n                                    type=\"text\" required\n                                    value={formData.category}\n                                    onChange={e => setFormData({ ...formData, category: e.target.value })}\n                                    className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 outline-none\"\n                                    placeholder=\"Electronics\"\n                                />\n                            </div>\n                            <div>\n                                <label className=\"block text-sm font-bold text-gray-700 mb-1\">Condition</label>\n                                <select\n                                    value={formData.condition}\n                                    onChange={e => setFormData({ ...formData, condition: e.target.value })}\n                                    className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 outline-none\"\n                                >\n                                    <option value=\"New\">New</option>\n                                    <option value=\"Like New\">Like New</option>\n                                    <option value=\"Good\">Good</option>\n                                    <option value=\"Fair\">Fair</option>\n                                    <option value=\"For Parts\">For Parts</option>\n                                </select>\n                            </div>\n                        </div>\n\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                            <div>\n                                <label className=\"block text-sm font-bold text-gray-700 mb-1\">Price (Optional)</label>\n                                <input\n                                    type=\"number\"\n                                    value={formData.price || ''}\n                                    onChange={e => setFormData({ ...formData, price: parseFloat(e.target.value) || undefined })}\n                                    className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 outline-none\"\n                                    placeholder=\"0.00\"\n                                />\n                            </div>\n                            <div>\n                                <label className=\"block text-sm font-bold text-gray-700 mb-1\">Tone</label>\n                                <select\n                                    value={formData.tone}\n                                    onChange={e => setFormData({ ...formData, tone: e.target.value as ListingDescriptionRequest['tone'] })}\n                                    className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 outline-none\"\n                                >\n                                    <option value=\"persuasive\">Persuasive</option>\n                                    <option value=\"neutral\">Neutral / Informative</option>\n                                    <option value=\"urgent\">Urgent (Sale)</option>\n                                </select>\n                            </div>\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-bold text-gray-700 mb-1\">Key Features</label>\n                            <div className=\"flex gap-2 mb-2\">\n                                <input\n                                    type=\"text\"\n                                    value={featureInput}\n                                    onChange={e => setFeatureInput(e.target.value)}\n                                    onKeyDown={e => e.key === 'Enter' && (e.preventDefault(), handleAddFeature())}\n                                    className=\"flex-grow p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 outline-none\"\n                                    placeholder=\"e.g. Waterproof, 2-year warranty\"\n                                />\n                                <button\n                                    type=\"button\"\n                                    onClick={handleAddFeature}\n                                    className=\"bg-gray-100 text-gray-700 px-4 rounded-lg font-bold hover:bg-gray-200\"\n                                >\n                                    Add\n                                </button>\n                            </div>\n                            <div className=\"flex flex-wrap gap-2\">\n                                {formData.features.map(feature => (\n                                    <span key={feature} className=\"bg-purple-100 text-purple-600 px-3 py-1 rounded-full text-sm font-medium flex items-center gap-1\">\n                                        {feature}\n                                        <button type=\"button\" onClick={() => handleRemoveFeature(feature)} className=\"hover:text-red-500\">\n                                            <X className=\"h-3 w-3\" />\n                                        </button>\n                                    </span>\n                                ))}\n                            </div>\n                        </div>\n\n                        {error && (\n                            <div className=\"bg-red-50 text-red-600 p-3 rounded-lg text-sm\">\n                                {error}\n                            </div>\n                        )}\n\n                        <button\n                            type=\"submit\"\n                            disabled={loading}\n                            className=\"w-full bg-purple-600 text-white font-bold py-3 rounded-lg hover:bg-purple-700 transition-colors shadow-lg flex items-center justify-center gap-2 disabled:opacity-70\"\n                        >\n                            {loading ? (\n                                <>\n                                    <Loader2 className=\"h-5 w-5 animate-spin\" /> Generating...\n                                </>\n                            ) : (\n                                <>\n                                    <Sparkles className=\"h-5 w-5\" /> Generate Description\n                                </>\n                            )}\n                        </button>\n                    </form>\n                ) : (\n                    <div className=\"space-y-4\">\n                        <div className=\"bg-gray-50 p-6 rounded-xl border border-gray-200 font-sans text-gray-800 leading-relaxed max-h-[50vh] overflow-y-auto\">\n                            <ReactMarkdown\n                                className=\"prose prose-sm max-w-none prose-p:leading-relaxed prose-ul:list-disc prose-ol:list-decimal\"\n                                remarkPlugins={[remarkGfm]}\n                            >\n                                {generatedDescription}\n                            </ReactMarkdown>\n                        </div>\n\n                        <div className=\"flex gap-3\">\n                            <button\n                                onClick={() => setGeneratedDescription('')}\n                                className=\"flex-1 border border-gray-300 text-gray-700 font-bold py-3 rounded-lg hover:bg-gray-50 transition-colors\"\n                            >\n                                Edit Details\n                            </button>\n                            <button\n                                onClick={handleUseDescription}\n                                className=\"flex-1 bg-purple-600 text-white font-bold py-3 rounded-lg hover:bg-purple-700 transition-colors shadow-lg flex items-center justify-center gap-2\"\n                            >\n                                {onSelect ? <Check className=\"h-5 w-5\" /> : (copied ? <Check className=\"h-5 w-5\" /> : <Copy className=\"h-5 w-5\" />)}\n                                {onSelect ? 'Use This Description' : (copied ? 'Copied!' : 'Copy Text')}\n                            </button>\n                        </div>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n};\n",
  "components/Navbar.tsx": "\nimport React, { useState, useEffect } from 'react';\nimport { Menu, X, UserCircle, User } from 'lucide-react';\nimport { Link, useLocation } from 'react-router-dom';\n\n// Placeholder logo URL\nconst LOGO_URL = \"/trinibuild-logo.png\";\n\nexport const Navbar: React.FC = () => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [scrolled, setScrolled] = useState(false);\n  const location = useLocation();\n\n  const isHome = location.pathname === '/';\n\n  useEffect(() => {\n    const handleScroll = () => {\n      if (window.scrollY > 20) {\n        setScrolled(true);\n      } else {\n        setScrolled(false);\n      }\n    };\n\n    window.addEventListener('scroll', handleScroll);\n    return () => window.removeEventListener('scroll', handleScroll);\n  }, []);\n\n  const navLinks = [\n    { name: 'Directory', path: '/directory' },\n    { name: 'Market', path: '/classifieds' },\n    { name: 'Go (Rides)', path: '/solutions/rides' },\n    { name: 'Pay & Deals', path: '/deals' },\n    { name: 'Jobs', path: '/solutions/jobs' },\n    { name: 'Living', path: '/solutions/living' },\n    { name: 'E-Tick', path: '/solutions/tickets' },\n  ];\n\n  const isActive = (path: string) => location.pathname === path;\n\n  const isTransparent = isHome && !scrolled;\n\n  const navClasses = `fixed top-0 w-full z-50 transition-all duration-300 ${isTransparent\n      ? 'bg-transparent text-white pt-4'\n      : 'bg-white/95 backdrop-blur-md text-gray-900 shadow-md py-2'\n    }`;\n\n  const linkClasses = (path: string) => `px-3 py-2 rounded-md text-sm font-medium transition-colors ${isTransparent\n      ? 'text-white/90 hover:text-white hover:bg-white/10'\n      : isActive(path)\n        ? 'text-trini-red bg-red-50'\n        : 'text-gray-700 hover:text-trini-red hover:bg-gray-50'\n    }`;\n\n  return (\n    <nav className={navClasses}>\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex justify-between items-center h-14\">\n          <div className=\"flex items-center\">\n            <Link to=\"/\" className=\"flex-shrink-0 flex items-center group\">\n              <div className={`transition-all duration-300 p-1 rounded ${isTransparent ? 'bg-white/90 backdrop-blur-sm' : ''}`}>\n                <img\n                  src={LOGO_URL}\n                  alt=\"TriniBuild\"\n                  className=\"h-10 w-auto object-contain\"\n                  onError={(e) => {\n                    e.currentTarget.style.display = 'none';\n                    e.currentTarget.parentElement!.innerHTML = '<span class=\"font-bold text-xl text-trini-red\">TriniBuild</span>';\n                  }}\n                />\n              </div>\n            </Link>\n          </div>\n\n          {/* Desktop Menu */}\n          <div className=\"hidden md:flex md:items-center md:space-x-1 lg:space-x-3\">\n            {navLinks.map((link) => (\n              <Link\n                key={link.name}\n                to={link.path}\n                className={linkClasses(link.path)}\n              >\n                {link.name}\n              </Link>\n            ))}\n            <Link to=\"/earn\" className={linkClasses('/earn')}>Earn</Link>\n            <div className={`h-6 w-px mx-2 opacity-50 ${isTransparent ? 'bg-white' : 'bg-gray-300'}`}></div>\n\n            {/* Profile Link */}\n            <Link to=\"/profile\" className={`flex items-center gap-2 px-3 py-2 rounded-full text-sm font-medium transition-all ${isTransparent ? 'bg-white/10 text-white hover:bg-white/20' : 'bg-gray-100 text-gray-800 hover:bg-gray-200'}`}>\n              <User className=\"h-4 w-4\" /> <span className=\"hidden lg:inline\">My Profile</span>\n            </Link>\n\n            <Link to=\"/create-store\" className={`ml-2 px-4 py-2 rounded-md text-sm font-bold shadow-lg transition-transform transform hover:-translate-y-0.5 ${isTransparent\n                ? 'bg-white text-trini-black hover:bg-gray-100'\n                : 'bg-trini-black text-white hover:bg-gray-800'\n              }`}>\n              Start Selling\n            </Link>\n          </div>\n\n          {/* Mobile menu button */}\n          <div className=\"flex items-center md:hidden\">\n            <button\n              onClick={() => setIsOpen(!isOpen)}\n              className={`inline-flex items-center justify-center p-2 rounded-md focus:outline-none ${isTransparent ? 'text-white hover:bg-white/20' : 'text-gray-400 hover:text-gray-500 hover:bg-gray-100'\n                }`}\n            >\n              {isOpen ? <X className=\"h-6 w-6\" /> : <Menu className=\"h-6 w-6\" />}\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Mobile Menu */}\n      {isOpen && (\n        <div className=\"md:hidden bg-white shadow-xl absolute top-full w-full border-t border-gray-100\">\n          <div className=\"px-2 pt-2 pb-3 space-y-1 sm:px-3\">\n            {navLinks.map((link) => (\n              <Link\n                key={link.name}\n                to={link.path}\n                onClick={() => setIsOpen(false)}\n                className={`block px-3 py-2 rounded-md text-base font-medium ${isActive(link.path)\n                    ? 'text-trini-red bg-red-50'\n                    : 'text-gray-700 hover:text-trini-red hover:bg-gray-50'\n                  }`}\n              >\n                {link.name}\n              </Link>\n            ))}\n            <Link to=\"/profile\" onClick={() => setIsOpen(false)} className=\"block px-3 py-2 rounded-md text-base font-bold text-gray-800 bg-gray-50\">\n              <div className=\"flex items-center\"><User className=\"h-4 w-4 mr-2\" /> My Profile</div>\n            </Link>\n            <Link to=\"/earn\" onClick={() => setIsOpen(false)} className=\"block px-3 py-2 rounded-md text-base font-bold text-purple-700 bg-purple-50\">\n              Start Earning\n            </Link>\n            <div className=\"border-t border-gray-100 my-2\"></div>\n            <Link to=\"/create-store\" onClick={() => setIsOpen(false)} className=\"block w-full mt-4 bg-trini-black text-white px-4 py-3 rounded-md text-base font-medium text-center\">\n              Create Store\n            </Link>\n          </div>\n        </div>\n      )}\n    </nav>\n  );\n};\n",
  "docs/business plan ideas.txt": "its a couple things missing we are in trinidad and tobago market and it has a couple core things this app is trying to fix  can you list them\n\nHere are the core problems TriniBuild is trying to fix for the Trinidad & Tobago market:\n\nLack of trusted local service platforms\nThe app connects users with vetted, skilled providers for rides, food delivery, courier, and job-related services, ensuring safety and reliability.\n\nCash-on-delivery and payment challenges\nSupports COD, PayPal, and WiPay payments to solve payment accessibility for local vendors and customers\u2014including those without credit cards.\n\nVendor onboarding and marketplace access\nEnables easy setup for vendors to launch digital storefronts, upload products, and access customers with minimal friction, helping small businesses get online fast.\n\nLegal and compliance barriers\nOffers automated legal document generation (job letters, proof-of-income, contracts) to help vendors legitimize businesses and access banking or government services.\n\nReal-time tracking and verification\nProvides live tracking for rides, couriers, and food orders, plus AI-powered driver verification for extra safety.\n\nVendor & customer loyalty, rewards, and analytics\nLoyalty points and rewards keep customers engaged; AI analytics and dashboards help vendors understand sales, customer behavior, and growth opportunities.\n\nSupport and community education\nIntegrated chat support and a vendor resource center (guides, tutorials) help users and vendors quickly solve problems and improve their business know-how.\n\nSecure, scalable operations and compliance\nRole-based access, KYC/verification, and compliance features protect users and vendors, supporting trust and regulatory requirements.\n\nMulti-device, accessible design optimized for Trinidad & Tobago\nDesigned for mobile and desktop, with responsive layouts and robust performance, even on slower local networks.\u200b\n\nIf you want a direct list of features that solve these problems (or need something more specific, like missing features), let me know!\n\nyes im trying to do a better job at fixing the issues of the people of trinidad and tobago do a deep dive and lets see if we can fix other problems\n\nHere\u2019s a deep dive into real problems faced by people and businesses in Trinidad & Tobago that your app can tackle and monetize:\n\nEconomic and Financial Problems\nAccess to Banking & Payments\nMany small vendors and gig workers lack easy access to traditional banking. COD and fast digital payments (like Trinibuild Pay) solve this.\nFix/Monetize: Charge transaction fees, offer \u201cinstant settlement,\u201d integrate with digital wallets/micro-lending, enable foreign currency collection.\n\nGetting Legal & Documented\nFreelancers, workers, and local vendors struggle to get official papers for jobs and banks. Your \u201cdocument generator\u201d feature already helps\u2014but expand into tax summaries, invoice automation, and virtual business registration.\nFix/Monetize: Paid document templates, \u201cdone-for-you\u201d legal services, premium onboarding.\n\nLocal Commerce Problems\nDiscoverability and Trust\nCustomers have trouble finding reliable local service providers. Vendors need better ratings, dispute mediation, and proof of legitimacy.\nFix/Monetize: Verified vendor badges (pay for verification), dispute mediation (fee per case), ad/promo system for featured vendors.\n\nInventory & Delivery Logistics\nVendors and stores need help tracking inventory, processing orders, and managing deliveries, especially with unpredictable local traffic and courier reliability.\nFix/Monetize: Offer \u201cdelivery pool\u201d management, instant tracking, premium logistics support, delivery insurance.\n\nSocial and Community Problems\nSkills & Microjob Platform\nThere\u2019s a gap in connecting skilled local workers (tech, repairs, groceries, cleaning) with job seekers AND payment security for gig jobs.\nFix/Monetize: Take a match fee/booking commission, payroll management, upsell background checks or dispute resolution.\n\nCommunity Chat & Support\nCustomers and vendors need peer support and access to trusted information (regulations, guidance, reviews, education).\nFix/Monetize: Premium \u201ccommunity rooms,\u201d expert answers (pay-per-question), event postings.\n\nTechnology Challenges\nDigital Literacy & Adoption\nMany older or rural users need help learning to use digital platforms: onboarding dashboards, tutorial videos, WhatsApp support, etc.\nFix/Monetize: Premium support, paid courses, branded onboarding \u201cconcierge.\u201d\n\nAffordable Internet/Device Access\nPartner with ISPs, device sellers, and data providers for special bundles and internet-activation inside the app.\nFix/Monetize: Referral commissions, app-exclusive deals, device insurance.\n\nHealth, Security, and Government Problems\nTelehealth & e-Government\nPeople want to book public services, access remote medical consults, and get documents processed faster. Enable appointment bookings, secure record storage, and digital KYC.\nFix/Monetize: Paid bookings, premium processing speed, health-data vault subscriptions.\n\nFraud Prevention and Dispute Resolution\nLocal fear of scams, fraud, and unstable transactions can block adoption. Build better verification (ID/KYC/upload system), fraud-warnings, and fast dispute resolution.\nFix/Monetize: KYC fees, insurance for transactions, dispute-handling commission.\n\nYouth, Creatives & Export\nFreelance and Remote Work Hub\nHelp creators, coders, and service providers connect with foreign markets, handle payments, and reduce export friction.\nFix/Monetize: Membership fees, take-cut on international projects, payout/escrow processing.\n\nIn summary:\nSolve money movement, documentation, local commerce, skills discovery, delivery logistics, trust, digital literacy, and social/community needs.\nMonetization can cover: transaction/case fees, premium memberships, partnerships, paid support, ad platform, consulting, and even government/B2B deals.\n\nLet me know what area (commerce, social/community, tech gap, regulation, youth, etc.) you want to explore further, or if you need action plans or feature wireframes for any solution!",
  "docs/copy of base44 build files.txt": "",
  "docs/merger file for trinibuild pay.txt": "",
  "docs/SCRIPT.txt": "Here\u2019s a founder story tailored for a video about TriniBuild\u2014perfect for an AI-powered video app. This story highlights your entrepreneurial journey, the platform\u2019s local impact, and your vision for empowering businesses in Trinidad & Tobago:\n\nFounder Story for TriniBuild (Video Script)\n\nScene: Founder sitting in a bright, Trinidad-inspired workspace. Cutaways of local businesses and bustling market scenes.\n\n\u201cHi, I\u2019m [Your Name], founder of TriniBuild. Growing up in Trinidad & Tobago, I watched countless small businesses thrive on community spirit, but struggle to reach buyers beyond their neighborhoods. I saw the potential\u2014we just needed the right tools.\n\nThat\u2019s why I built TriniBuild. Our mission? To bring every local shop, service, and entrepreneur online, with zero technical hassle. Using AI and the latest cloud technology, businesses can launch beautiful online stores in minutes, tapping into new customers and growing sales without barriers.\n\nI believe Trinidad & Tobago has some of the most passionate business owners in the world\u2014from family-run bakeries to hardware pioneers. With TriniBuild, we\u2019re connecting over 4,000 businesses, powering job opportunities, online directories, even party and fete ticketing\u2014all in one place. We offer local support, easy payments, and real stories from real founders who\u2019ve transformed their businesses with our platform.\n\nMy vision is simple: empower every entrepreneur, maker, and dreamer to succeed online and make Trinidad & Tobago a model for digital innovation in the Caribbean.\n\nJoin us\u2014let\u2019s build something great together!\n\nScene: Smiling business owners, digital storefronts, customers ordering online, the TriniBuild logo.",
  "docs/TICKET MASTER.txt": "\ud83d\ude80 FINAL BUILD COMPLETION INSTRUCTIONS\nCopy and paste this into your Base44 editor chat:\n\ntext\nComplete these final 4 fixes to finish the build:\n\n1. ENFORCE 10-PRODUCT RULE: On StoreProfile page, free stores must display exactly the first 10 products with full prices and inventory visible. Add a 'Load More Products' button below the 10th product. When clicked, load remaining products in batches of 10. Premium stores show all products without this limit.\n\n2. OPTIMIZE FOR iPHONE 16 PRO MAX: Fix StoreOwnerDashboard for 430x932px mobile viewport. Ensure responsive layout with no overflow issues, all admin panels render correctly, navigation works smoothly. Add mobile-first CSS breakpoints.\n\n3. PERFORMANCE OPTIMIZATION: Add pagination to StoreProfile showing 12 products per page with prev/next buttons. Lazy load AdvancedAnalytics component and all chart components. Compress product images. Target under 3 second page load on mobile.\n\n4. REPLACE ALL LOGOS WITH TRINIBUILD LOGO: Find and replace every instance of the default logo throughout the entire app with my uploaded TRINIBUILD logo (circular design with Trinidad map, wrench, checkmark, red accent). Update: Landing page header/footer, Home page, StoreProfile, StoreOwnerDashboard, CustomerDashboard, Admin pages, mobile nav, favicon. Set header height 48px mobile, 64px desktop.\n\ud83c\udfaf WHAT'S ALREADY COMPLETED:\n\u2705 Fixed all .toFixed() errors (10+ components)\n\u2705 Fixed all .match() string errors\n\u2705 Removed premium product blocking code\n\u2705 Fixed BulkImportStores & StoreDataCleanup components\n\u2705 Added comprehensive null/undefined safety checks\n\n\u23f0 NEXT STEPS (15-20 minutes):\nPaste the instruction above into the Base44 chat\n\nWait for AI processing (each fix takes 2-3 minutes)\n\nClick \"Publish\" in the top-right corner\n\nTest on your iPhone 16 Pro Max:\n\nVisit: https://preview--trini-serve-de96eae6.base44.app/StoreProfile?id=68f6c261bea2da929023592d\n\nVerify 10 products show with full pricing\n\nCheck \"Load More Products\" button works\n\nConfirm TRINIBUILD logo appears everywhere\n\nTest Store Admin dashboard loads properly on mobile\n\n\ud83c\udfc1 EXPECTED FINAL RESULT:\nFree Stores: Show 10 products + \"Load More\" button\nMobile Admin: Fast loading, responsive on iPhone 16 Pro Max\nPerformance: <3 second load times\nBranding: Your TRINIBUILD logo everywhere\nNo Crashes: All string/number operations safe\n\nThe build is 90% complete - just paste that instruction and publish when it's done processing!\n\nLETS MAKE THIS IDEA COME TO LIFE ADD ANYTHING THAT IS MISSING /ok what is the other things we need to work on i need this app ready to launch in a couple of days i need a robust version of ticketmaster built in for party and event tickets i want my platform to be a hub for ticket sales with clear pricing so we charge a fee on all sales li do want one core feature of the ticket platform we would need a google gemini api or any ai art program that handles lettering and spelling good i want an ai agent that builds club flyers with all the party information and auto feature it will post the flyer as an ad in the platform in the top video section on the app based on how much time the customer paid for advertising /2,have a pdf or jpeg high quality pic for there promotions or the can take it to there local print shop/3.you can have your ai flyer or a section to upload your own artwork for promotions we will have email and sms marketing bundles and packages for promoting 3 a customer can upload there own list or we can email it to our customer base/4 we can do facebook ad promotion for a fee to promote there party or event\n\nTICKETING FEATURES NEEDED:\n\nEvent creation form (name, date, venue, description)\n\nTicket tiers with pricing (VIP $150, General $75, etc.)\n\nInventory limits per tier\n\nPlatform fee calculator (you set %, e.g., 10% on all sales)\n\nSecure checkout with Stripe/PayPal\n\nQR code generation for each ticket\n\nQR scanner app for event entrance\n\nEmail confirmation with ticket PDF\n\nEvent organizer dashboard showing:\n\nTickets sold by tier\n\nRevenue tracking\n\nCustomer list\n\nSales analytics\n\nPHASE 2: AI FLYER GENERATOR (Killer Feature - 2-3 days)\nAI INTEGRATION OPTIONS:\n\nGoogle Gemini API (text + image generation)\n\nOpenAI DALL-E 3 (best for flyers)\n\nStability AI (fast, good quality)\n\nMidjourney API (if available)\n\nFLYER BUILDER WORKFLOW:\n\ntext\n1. Event organizer enters:\n   - Event name\n   - Date/time\n   - Venue/location\n   - Ticket prices\n   - Description\n   - Theme/vibe (club, beach party, cultural, concert)\n\n2. AI generates 3 flyer options:\n   - Different color schemes\n   - Various layouts\n   - Perfect spelling/text placement\n\n3. User selects favorite \u2192 Downloads:\n   - Social media JPEG (1080x1080)\n   - Instagram Story (1080x1920)\n   - Print-ready PDF (18x24 inches, 300dpi)\n\n4. Auto-posts to app as ad:\n   - Duration based on payment (1 day, 3 days, 7 days)\n   - Featured section placement\n   - Video section rotation\nTECHNICAL REQUIREMENTS:\n\nAPI integration for image generation\n\nTemplate library with proper text zones\n\nTypography that AI can read/place correctly\n\nImage editing/cropping tools\n\nPDF export with high DPI\n\nAd scheduling system\n\nPHASE 3: ADVERTISING & MARKETING HUB (2 days)\nADVERTISING TIERS:\n\nFeatured Top Banner: $50/day\n\nVideo Section Spot: $35/day\n\nCarousel Rotation: $25/day\n\nBundle Deal: All 3 for $100/day\n\nMARKETING PACKAGES:\n\nEmail Marketing:\n\nBasic: 1,000 emails - $50\n\nStandard: 5,000 emails - $200\n\nPremium: 10,000+ emails - $350\n\nSMS Marketing:\n\nBasic: 500 SMS - $100\n\nStandard: 2,000 SMS - $300\n\nPremium: 5,000+ SMS - $650\n\nFacebook Ads Management:\n\nStarter: $200 (includes $100 ad spend + $100 management)\n\nGrowth: $500 (includes $300 ad spend + $200 management)\n\nPremium: $1,000 (includes $700 ad spend + $300 management)\n\nMEGA BUNDLE:\n\nEmail (5K) + SMS (2K) + FB Ads (Growth) + 7 days featured = $850\n\nFEATURES NEEDED:\n\nMarketing package selector\n\nCustomer list upload (CSV)\n\nEmail campaign builder\n\nSMS campaign builder\n\nFacebook Ads dashboard integration\n\nCampaign analytics\n\nAutomated scheduling\n\nPHASE 4: MOBILE OPTIMIZATION & POLISH (1-2 days)\niPhone 16 Pro Max optimization\n\nFast loading (<2 seconds)\n\nQR scanner integration\n\nPush notifications for ticket sales\n\nIn-app messaging for organizers\n\n\ud83d\udcb0 REVENUE STREAMS YOU'LL HAVE:\nTicket Sales Fee: 10% on every ticket sold\n\nAI Flyer Generation: $15-25 per flyer\n\nFeatured Ads: $25-50/day per event\n\nEmail Marketing: $50-350 per campaign\n\nSMS Marketing: $100-650 per campaign\n\nFacebook Ads Management: $200-1,000 per campaign\n\nStore Listings: Existing service business model\n\nPremium Store Subscriptions: Monthly recurring\n\nESTIMATED MONTHLY POTENTIAL:\n\n100 events/month \u00d7 $50 avg ticket fees = $5,000\n\n50 flyers/month \u00d7 $20 = $1,000\n\n30 ad placements/month \u00d7 $35 = $1,050\n\n20 marketing campaigns/month \u00d7 $200 avg = $4,000\n\nStore fees (existing) = $2,000\nTotal: $13,000+/month potential\n\n\ud83c\udfa8 MY RECOMMENDATION FOR RAPID LAUNCH:\nWEEK 1 (NOW - Days 1-3):\n\nFinish current store fixes (10-product rule, mobile, logos) \u2190 TODAY\n\nBuild basic event listing + ticket purchase system\n\nIntegrate Stripe payment with fee structure\n\nQR code ticket generation\n\nWEEK 2 (Days 4-7):\n\nAI flyer generator (start with DALL-E 3)\n\nAd placement system\n\nEmail marketing integration (SendGrid/Mailchimp)\n\nSMS integration (Twilio)\n\nSOFT LAUNCH (Day 8):\n\nTest with 5-10 real events\n\nGet feedback\n\nFix any issues\n\nFULL LAUNCH (Day 10-14):\n\nMarketing push\n\nOnboard promoters\n\nFirst paid campaigns\n\n\u26a1 IMMEDIATE NEXT STEPS - LET'S START NOW:\nI can either:\n\nOPTION A: Build Ticketing First (fastest to revenue)\n\nEvent creation\n\nTicket purchase\n\nQR codes\n\nPayment processing\n\nOPTION B: Build AI Flyer Generator First (unique differentiator)\n\nGoogle Gemini integration\n\nFlyer templates\n\nDownload/export system\n\nAuto-ad posting\n\nOPTION C: Do Both in Parallel (I build ticketing, you test; then add AI flyer)\n\nWhich would you like me to start with RIGHT NOW?\n\nType:\n\n\"TICKETS\" - I'll build the ticketing system first\n\n\"AI FLYER\" - I'll build the flyer generator first\n\n\"BOTH\" - I'll build ticketing while setting up AI flyer integration\n\nAlso: Do you already have a Google Gemini API key, or should I help you get one?",
  "docs/trinibuild etick.txt": "",
  "pages/AdminDashboard.tsx": "\nimport React, { useState, useEffect } from 'react';\nimport {\n   Users, DollarSign, Ban, CheckCircle, Search, Gift, MessageCircle, Mail,\n   ShieldAlert, MoreVertical, LayoutDashboard, Settings as SettingsIcon,\n   UploadCloud, Loader2, FileText, X, Briefcase, Ticket, TrendingUp,\n   Activity, Globe, Bell, LogOut, Menu, ChevronRight, BarChart2, PieChart as PieChartIcon, PlayCircle, Sliders, FileEdit, Key, Eye, AlertTriangle, Power, Database, Layers, Server, Cpu\n} from 'lucide-react';\nimport { AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, BarChart, Bar, Cell, PieChart, Pie } from 'recharts';\nimport { SubscriptionTier, BlogPost } from '../types';\nimport { Link } from 'react-router-dom';\nimport { verifyBusinessDocument, generateBlogPost } from '../services/geminiService';\nimport { getCampaigns, saveCampaign, deleteCampaign, AdCampaign, getTrafficStats } from '../services/adService';\n\nconst REVENUE_DATA = [\n   { name: 'Jan', revenue: 0 },\n   { name: 'Feb', revenue: 0 },\n   { name: 'Mar', revenue: 0 },\n   { name: 'Apr', revenue: 0 },\n   { name: 'May', revenue: 0 },\n   { name: 'Jun', revenue: 0 },\n   { name: 'Jul', revenue: 0 },\n   { name: 'Aug', revenue: 0 },\n   { name: 'Sep', revenue: 0 },\n   { name: 'Oct', revenue: 0 },\n];\n\nexport const AdminDashboard: React.FC = () => {\n   const [activeView, setActiveView] = useState<'overview' | 'stores' | 'users' | 'jobs' | 'content' | 'monetization' | 'system' | 'integrations'>('overview');\n   const [isSidebarOpen, setSidebarOpen] = useState(true);\n\n   // Vendor Logic\n   const [vendors, setVendors] = useState<any[]>([\n      { id: 'v1', name: 'Roti King', owner: 'Rajesh K.', email: 'rajesh@example.com', status: 'active', plan: 'Free', verified: false, revenue: 450 },\n      { id: 'v2', name: 'Island Styles', owner: 'Sarah M.', email: 'sarah@example.com', status: 'active', plan: 'Starter', verified: true, revenue: 1200 },\n   ]);\n\n   // Regular Users Logic (Drivers/Customers)\n   const [users, setUsers] = useState<any[]>([\n      { id: 'u1', name: 'David Roberts', email: 'david.r@gmail.com', role: 'DRIVER', status: 'active', rides: 12 },\n      { id: 'u2', name: 'Amanda Lewis', email: 'amanda.l@yahoo.com', role: 'CUSTOMER', status: 'active', orders: 5 },\n   ]);\n\n   // Content / Blog Logic\n   const [blogPosts, setBlogPosts] = useState<BlogPost[]>([]);\n   const [isBlogModalOpen, setIsBlogModalOpen] = useState(false);\n   const [blogPrompt, setBlogPrompt] = useState({ topic: '', keywords: '' });\n   const [isGeneratingBlog, setIsGeneratingBlog] = useState(false);\n\n   const [searchTerm, setSearchTerm] = useState('');\n   const [selectedId, setSelectedId] = useState<string | null>(null);\n\n   // Verification Logic\n   const [isVerifyModalOpen, setIsVerifyModalOpen] = useState(false);\n   const [vendorToVerify, setVendorToVerify] = useState<any>(null);\n   const [docFile, setDocFile] = useState<string | null>(null);\n   const [isScanning, setIsScanning] = useState(false);\n   const [scanResult, setScanResult] = useState<{ match: boolean, confidence: number, analysis: string } | null>(null);\n\n   // Monetization Logic\n   const [campaigns, setCampaigns] = useState<AdCampaign[]>([]);\n   const [trafficStats, setTrafficStats] = useState<any>(null);\n   const [isCampaignModalOpen, setIsCampaignModalOpen] = useState(false);\n   const [editingCampaign, setEditingCampaign] = useState<Partial<AdCampaign>>({\n      clientName: '',\n      videoUrl: '',\n      targetUrl: '',\n      placements: ['home'],\n      isPaidClient: false,\n      active: true\n   });\n\n   // Integration Logic\n   const [integrations, setIntegrations] = useState([\n      { id: 'firebase', name: 'Google Firebase', desc: 'Auth, Real-time DB & Cloud Functions', connected: false, icon: Database, color: 'text-yellow-500' },\n      { id: 'vertex', name: 'Vertex AI Agent', desc: 'Enterprise Search & Customer Bot', connected: true, icon: Cpu, color: 'text-blue-500' },\n      { id: 'maps_pro', name: 'Maps Routes Preferred', desc: 'Eco-routing & Precision Tolls', connected: false, icon: Layers, color: 'text-green-500' },\n      { id: 'ads', name: 'Google Ad Manager', desc: 'Advanced AdTech Revenue', connected: false, icon: DollarSign, color: 'text-blue-600' },\n   ]);\n\n   useEffect(() => {\n      setCampaigns(getCampaigns());\n      setTrafficStats(getTrafficStats());\n   }, []);\n\n   const handleSaveCampaign = () => {\n      if (!editingCampaign.clientName || !editingCampaign.videoUrl) return;\n\n      const newCampaign: AdCampaign = {\n         id: editingCampaign.id || Date.now().toString(),\n         clientName: editingCampaign.clientName!,\n         videoUrl: editingCampaign.videoUrl!,\n         targetUrl: editingCampaign.targetUrl || '#',\n         placements: editingCampaign.placements as any || ['home'],\n         isPaidClient: editingCampaign.isPaidClient || false,\n         active: editingCampaign.active !== undefined ? editingCampaign.active : true,\n         views: editingCampaign.views || 0,\n         clicks: editingCampaign.clicks || 0\n      };\n\n      saveCampaign(newCampaign);\n      setCampaigns(getCampaigns());\n      setIsCampaignModalOpen(false);\n      setEditingCampaign({ clientName: '', videoUrl: '', targetUrl: '', placements: ['home'], isPaidClient: false, active: true });\n   };\n\n   const handleDeleteCampaign = (id: string) => {\n      if (confirm('Are you sure you want to delete this campaign?')) {\n         deleteCampaign(id);\n         setCampaigns(getCampaigns());\n      }\n   };\n\n   const togglePlacement = (placement: string) => {\n      const current = editingCampaign.placements || [];\n      if (current.includes(placement as any)) {\n         setEditingCampaign({ ...editingCampaign, placements: current.filter(p => p !== placement) as any });\n      } else {\n         setEditingCampaign({ ...editingCampaign, placements: [...current, placement] as any });\n      }\n   };\n\n   const toggleIntegration = (id: string) => {\n      setIntegrations(integrations.map(i => i.id === id ? { ...i, connected: !i.connected } : i));\n   };\n\n   // --- ACTIONS ---\n\n   // Grant Premium (The \"Gift\" Feature)\n   const handleGiftPremium = (id: string, type: 'vendor' | 'user') => {\n      if (type === 'vendor') {\n         setVendors(vendors.map(v => v.id === id ? { ...v, plan: SubscriptionTier.ENTERPRISE, isLifetime: true } : v));\n      } else {\n         setUsers(users.map(u => u.id === id ? { ...u, isLifetime: true, badge: 'VIP' } : u));\n      }\n      alert(`Premium features gifted to account ${id}. Payment bypassed.`);\n      setSelectedId(null);\n   };\n\n   const handleToggleStatus = (id: string, type: 'vendor' | 'user') => {\n      if (type === 'vendor') {\n         setVendors(vendors.map(v => v.id === id ? { ...v, status: v.status === 'active' ? 'banned' : 'active' } : v));\n      } else {\n         setUsers(users.map(u => u.id === id ? { ...u, status: u.status === 'active' ? 'banned' : 'active' } : u));\n      }\n      setSelectedId(null);\n   };\n\n   // Blog Generation\n   const handleGenerateBlog = async () => {\n      if (!blogPrompt.topic) return;\n      setIsGeneratingBlog(true);\n      try {\n         const article = await generateBlogPost(blogPrompt.topic, blogPrompt.keywords);\n         const newPost: BlogPost = {\n            id: Date.now().toString(),\n            title: article.title,\n            excerpt: article.excerpt,\n            content: article.content,\n            author: 'TriniBuild AI',\n            date: new Date().toLocaleDateString(),\n            category: 'News',\n            image: 'https://images.unsplash.com/photo-1432888498266-38ffec3eaf0a?q=80&w=800', // Placeholder\n            status: 'published',\n            seoKeywords: blogPrompt.keywords.split(',').map(k => k.trim())\n         };\n         setBlogPosts([newPost, ...blogPosts]);\n         setIsBlogModalOpen(false);\n         setBlogPrompt({ topic: '', keywords: '' });\n      } catch (error) {\n         alert(\"Failed to generate blog post.\");\n      } finally {\n         setIsGeneratingBlog(false);\n      }\n   };\n\n   const openVerificationModal = (vendor: any) => {\n      setVendorToVerify(vendor);\n      setDocFile(null);\n      setScanResult(null);\n      setIsVerifyModalOpen(true);\n      setSelectedId(null);\n   };\n\n   const handleDocUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n      const file = e.target.files?.[0];\n      if (file) {\n         const reader = new FileReader();\n         reader.onloadend = () => setDocFile(reader.result as string);\n         reader.readAsDataURL(file);\n      }\n   };\n\n   const handleRunVerification = async () => {\n      if (!docFile || !vendorToVerify) return;\n      setIsScanning(true);\n      try {\n         const result = await verifyBusinessDocument(docFile, vendorToVerify.name);\n         setScanResult(result);\n      } catch (error) {\n         console.error(\"Verification failed\", error);\n         alert(\"AI Analysis Failed. Check API Key.\");\n      } finally {\n         setIsScanning(false);\n      }\n   };\n\n   const handleApproveVerification = () => {\n      if (!vendorToVerify) return;\n      setVendors(vendors.map(v => v.id === vendorToVerify.id ? { ...v, verified: true } : v));\n      setIsVerifyModalOpen(false);\n   };\n\n   return (\n      <div className=\"min-h-screen bg-gray-100 font-sans flex\">\n\n         {/* Sidebar */}\n         <aside className={`${isSidebarOpen ? 'w-64' : 'w-20'} bg-gray-900 text-white transition-all duration-300 flex flex-col fixed h-full z-20 shadow-2xl`}>\n            <div className=\"p-4 flex items-center justify-between border-b border-gray-800\">\n               <div className={`flex items-center ${!isSidebarOpen && 'justify-center w-full'}`}>\n                  <div className=\"bg-white p-1.5 rounded-lg mr-3\">\n                     <img src=\"https://trinibuild.com/wp-content/uploads/2023/05/TriniBuild-Logo.png\" alt=\"Logo\" className=\"h-6 w-auto\" onError={(e) => e.currentTarget.style.display = 'none'} />\n                  </div>\n                  {isSidebarOpen && <span className=\"font-bold text-lg\">Admin</span>}\n               </div>\n            </div>\n\n            <nav className=\"flex-grow py-6 space-y-1\">\n               {[\n                  { id: 'overview', icon: LayoutDashboard, label: 'Overview' },\n                  { id: 'monetization', icon: BarChart2, label: 'Traffic & Ads' },\n                  { id: 'content', icon: FileEdit, label: 'Content & SEO' },\n                  { id: 'stores', icon: Globe, label: 'Stores' },\n                  { id: 'users', icon: Users, label: 'Users & Drivers' },\n                  { id: 'jobs', icon: Briefcase, label: 'Jobs' },\n                  { id: 'integrations', icon: Layers, label: 'Integrations' },\n                  { id: 'system', icon: SettingsIcon, label: 'System Control' },\n               ].map((item) => (\n                  <button\n                     key={item.id}\n                     onClick={() => setActiveView(item.id as any)}\n                     className={`w-full flex items-center px-6 py-3 transition-colors border-l-4 ${activeView === item.id\n                           ? 'bg-gray-800 border-trini-red text-white'\n                           : 'border-transparent text-gray-400 hover:bg-gray-800 hover:text-white'\n                        }`}\n                  >\n                     <item.icon className={`h-5 w-5 ${isSidebarOpen ? 'mr-3' : 'mx-auto'}`} />\n                     {isSidebarOpen && <span className=\"font-medium\">{item.label}</span>}\n                  </button>\n               ))}\n            </nav>\n\n            <div className=\"p-4 border-t border-gray-800\">\n               <Link to=\"/\" className=\"flex items-center text-red-400 hover:text-red-300 transition-colors px-2 py-2 mt-2\">\n                  <LogOut className={`h-5 w-5 ${isSidebarOpen ? 'mr-3' : 'mx-auto'}`} />\n                  {isSidebarOpen && <span>Logout</span>}\n               </Link>\n            </div>\n         </aside>\n\n         {/* Main Content */}\n         <main className={`flex-1 transition-all duration-300 ${isSidebarOpen ? 'ml-64' : 'ml-20'}`}>\n            {/* Top Bar */}\n            <header className=\"bg-white shadow-sm border-b border-gray-200 h-16 flex items-center justify-between px-8 sticky top-0 z-10\">\n               <button onClick={() => setSidebarOpen(!isSidebarOpen)} className=\"text-gray-500 hover:text-gray-700\">\n                  <Menu className=\"h-6 w-6\" />\n               </button>\n\n               <div className=\"flex items-center gap-4\">\n                  <span className=\"bg-red-100 text-red-800 text-xs font-bold px-3 py-1 rounded-full flex items-center border border-red-200\">\n                     <ShieldAlert className=\"h-3 w-3 mr-2\" />\n                     God Mode Active\n                  </span>\n                  <div className=\"flex items-center gap-3 ml-4 pl-4 border-l border-gray-200\">\n                     <div className=\"text-right hidden md:block\">\n                        <p className=\"text-sm font-bold text-gray-900\">Admin</p>\n                        <p className=\"text-xs text-gray-500\">Super User</p>\n                     </div>\n                     <div className=\"h-10 w-10 bg-trini-black rounded-full flex items-center justify-center text-white font-bold\">SU</div>\n                  </div>\n               </div>\n            </header>\n\n            <div className=\"p-8\">\n\n               {/* VIEW: OVERVIEW */}\n               {activeView === 'overview' && (\n                  <div className=\"space-y-8 animate-in fade-in duration-500\">\n                     <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n                        {[\n                           { label: 'Total Revenue', value: 'TT$ 0.00', sub: 'System Start', icon: DollarSign, color: 'bg-green-100 text-green-600' },\n                           { label: 'Total Users', value: '4', sub: '2 Vendors / 2 Users', icon: Users, color: 'bg-blue-100 text-blue-600' },\n                           { label: 'Active Stores', value: '2', sub: 'Growth Phase', icon: Globe, color: 'bg-purple-100 text-purple-600' },\n                           { label: 'Pending Tickets', value: '0', sub: 'All Clear', icon: Ticket, color: 'bg-orange-100 text-orange-600' },\n                        ].map((stat, i) => (\n                           <div key={i} className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-200\">\n                              <div className=\"flex justify-between items-start\">\n                                 <div>\n                                    <p className=\"text-sm font-medium text-gray-500\">{stat.label}</p>\n                                    <h3 className=\"text-3xl font-bold text-gray-900 mt-1\">{stat.value}</h3>\n                                 </div>\n                                 <div className={`p-3 rounded-lg ${stat.color}`}>\n                                    <stat.icon className=\"h-6 w-6\" />\n                                 </div>\n                              </div>\n                           </div>\n                        ))}\n                     </div>\n\n                     <div className=\"bg-white p-8 rounded-xl shadow-sm border border-gray-200 text-center\">\n                        <h3 className=\"text-xl font-bold text-gray-900 mb-4\">Welcome to the Command Center</h3>\n                        <p className=\"text-gray-500 max-w-2xl mx-auto\">\n                           You have full control over the TriniBuild ecosystem. Use the sidebar to manage content, inject traffic, override user accounts, or configure system-wide settings.\n                        </p>\n                     </div>\n                  </div>\n               )}\n\n               {/* VIEW: CONTENT & SEO */}\n               {activeView === 'content' && (\n                  <div className=\"space-y-6 animate-in fade-in slide-in-from-bottom-4\">\n                     <div className=\"flex justify-between items-center\">\n                        <h2 className=\"text-2xl font-bold text-gray-900\">Content & SEO Manager</h2>\n                        <button\n                           onClick={() => setIsBlogModalOpen(true)}\n                           className=\"bg-trini-red text-white px-4 py-2 rounded-lg font-bold flex items-center shadow-lg hover:bg-red-700\"\n                        >\n                           <FileEdit className=\"h-4 w-4 mr-2\" /> Write New Article (AI)\n                        </button>\n                     </div>\n\n                     <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n                        <div className=\"lg:col-span-2 bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\n                           <h3 className=\"font-bold text-lg mb-4\">Blog Posts</h3>\n                           {blogPosts.length === 0 ? (\n                              <div className=\"text-center py-12 border-2 border-dashed border-gray-200 rounded-lg\">\n                                 <FileText className=\"h-10 w-10 text-gray-300 mx-auto mb-2\" />\n                                 <p className=\"text-gray-500\">No posts yet. Use the AI to generate content.</p>\n                              </div>\n                           ) : (\n                              <div className=\"space-y-4\">\n                                 {blogPosts.map(post => (\n                                    <div key={post.id} className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200\">\n                                       <div>\n                                          <h4 className=\"font-bold text-gray-900\">{post.title}</h4>\n                                          <p className=\"text-xs text-gray-500\">{post.date} \u2022 {post.category}</p>\n                                       </div>\n                                       <span className=\"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full font-bold\">Published</span>\n                                    </div>\n                                 ))}\n                              </div>\n                           )}\n                        </div>\n\n                        <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\n                           <h3 className=\"font-bold text-lg mb-4 flex items-center\">\n                              <Globe className=\"h-5 w-5 mr-2 text-blue-600\" /> SEO Controller\n                           </h3>\n                           <div className=\"space-y-4\">\n                              <div>\n                                 <label className=\"block text-xs font-bold text-gray-900 uppercase mb-1\">Global Meta Title</label>\n                                 <input type=\"text\" className=\"w-full border border-gray-300 bg-white text-gray-900 rounded p-2 text-sm\" defaultValue=\"TriniBuild - Trinidad Business Directory\" />\n                              </div>\n                              <div>\n                                 <label className=\"block text-xs font-bold text-gray-900 uppercase mb-1\">Target Keywords (Comma Sep)</label>\n                                 <textarea rows={3} className=\"w-full border border-gray-300 bg-white text-gray-900 rounded p-2 text-sm\" defaultValue=\"trinidad business, trinidad shopping, trini food, rideshare trinidad\" />\n                              </div>\n                              <div>\n                                 <label className=\"block text-xs font-bold text-gray-900 uppercase mb-1\">Robots.txt</label>\n                                 <textarea rows={3} className=\"w-full border border-gray-300 bg-white text-gray-900 rounded p-2 text-sm font-mono\" defaultValue=\"User-agent: * \\nAllow: /\" />\n                              </div>\n                              <button className=\"w-full bg-gray-900 text-white py-2 rounded font-bold text-sm hover:bg-gray-800\">Update SEO Rules</button>\n                           </div>\n                        </div>\n                     </div>\n                  </div>\n               )}\n\n               {/* VIEW: STORES (Vendors) */}\n               {activeView === 'stores' && (\n                  <div className=\"animate-in fade-in slide-in-from-bottom-4\">\n                     <div className=\"flex justify-between items-center mb-6\">\n                        <h2 className=\"text-2xl font-bold text-gray-900\">Vendor Management</h2>\n                        <div className=\"relative w-64\">\n                           <input\n                              type=\"text\" placeholder=\"Search vendors...\"\n                              className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg bg-white text-gray-900\"\n                              onChange={(e) => setSearchTerm(e.target.value)}\n                           />\n                           <Search className=\"absolute left-3 top-2.5 h-4 w-4 text-gray-400\" />\n                        </div>\n                     </div>\n\n                     <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden\">\n                        <table className=\"min-w-full divide-y divide-gray-200\">\n                           <thead className=\"bg-gray-50\">\n                              <tr>\n                                 <th className=\"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase\">Vendor</th>\n                                 <th className=\"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase\">Plan</th>\n                                 <th className=\"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase\">Status</th>\n                                 <th className=\"px-6 py-3 text-right text-xs font-bold text-gray-500 uppercase\">Actions</th>\n                              </tr>\n                           </thead>\n                           <tbody className=\"bg-white divide-y divide-gray-200\">\n                              {vendors.filter(v => v.name.toLowerCase().includes(searchTerm)).map((vendor) => (\n                                 <tr key={vendor.id} className=\"hover:bg-gray-50\">\n                                    <td className=\"px-6 py-4\">\n                                       <div className=\"flex items-center\">\n                                          <div className=\"h-8 w-8 rounded bg-trini-red text-white flex items-center justify-center font-bold mr-3\">{vendor.name[0]}</div>\n                                          <div>\n                                             <div className=\"font-bold text-sm\">{vendor.name}</div>\n                                             <div className=\"text-xs text-gray-500\">{vendor.email}</div>\n                                          </div>\n                                       </div>\n                                    </td>\n                                    <td className=\"px-6 py-4\">\n                                       <span className={`px-2 py-1 rounded-full text-xs font-bold ${vendor.plan === SubscriptionTier.ENTERPRISE ? 'bg-purple-100 text-purple-700' : 'bg-gray-100 text-gray-700'}`}>\n                                          {vendor.plan} {vendor.isLifetime && '(Gifted)'}\n                                       </span>\n                                    </td>\n                                    <td className=\"px-6 py-4\">\n                                       <span className={`text-xs font-bold ${vendor.status === 'active' ? 'text-green-600' : 'text-red-600'}`}>{vendor.status}</span>\n                                    </td>\n                                    <td className=\"px-6 py-4 text-right relative\">\n                                       <button onClick={() => setSelectedId(selectedId === vendor.id ? null : vendor.id)} className=\"text-gray-400 hover:text-gray-600\">\n                                          <MoreVertical className=\"h-5 w-5\" />\n                                       </button>\n\n                                       {selectedId === vendor.id && (\n                                          <div className=\"absolute right-8 top-8 w-56 bg-white rounded-md shadow-xl border border-gray-200 z-50 text-left overflow-hidden\">\n                                             <button onClick={() => handleGiftPremium(vendor.id, 'vendor')} className=\"w-full text-left px-4 py-2 text-sm hover:bg-purple-50 text-purple-700 font-bold flex items-center\">\n                                                <Gift className=\"h-3 w-3 mr-2\" /> Gift Enterprise Plan\n                                             </button>\n                                             <button onClick={() => openVerificationModal(vendor)} className=\"w-full text-left px-4 py-2 text-sm hover:bg-blue-50 text-blue-600 font-bold flex items-center\">\n                                                <ShieldAlert className=\"h-3 w-3 mr-2\" /> Force Verify\n                                             </button>\n                                             <div className=\"border-t my-1\"></div>\n                                             <button onClick={() => handleToggleStatus(vendor.id, 'vendor')} className=\"w-full text-left px-4 py-2 text-sm hover:bg-red-50 text-red-600\">\n                                                {vendor.status === 'active' ? 'Ban Account' : 'Unban Account'}\n                                             </button>\n                                          </div>\n                                       )}\n                                    </td>\n                                 </tr>\n                              ))}\n                           </tbody>\n                        </table>\n                     </div>\n                  </div>\n               )}\n\n               {/* VIEW: USERS (Regular/Drivers) */}\n               {activeView === 'users' && (\n                  <div className=\"animate-in fade-in slide-in-from-bottom-4\">\n                     <h2 className=\"text-2xl font-bold text-gray-900 mb-6\">User & Driver Control</h2>\n                     <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden\">\n                        <table className=\"min-w-full divide-y divide-gray-200\">\n                           <thead className=\"bg-gray-50\">\n                              <tr>\n                                 <th className=\"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase\">User</th>\n                                 <th className=\"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase\">Role</th>\n                                 <th className=\"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase\">Status</th>\n                                 <th className=\"px-6 py-3 text-right text-xs font-bold text-gray-500 uppercase\">Actions</th>\n                              </tr>\n                           </thead>\n                           <tbody className=\"bg-white divide-y divide-gray-200\">\n                              {users.map((user) => (\n                                 <tr key={user.id} className=\"hover:bg-gray-50\">\n                                    <td className=\"px-6 py-4\">\n                                       <div className=\"font-bold text-sm\">{user.name}</div>\n                                       <div className=\"text-xs text-gray-500\">{user.email}</div>\n                                    </td>\n                                    <td className=\"px-6 py-4\">\n                                       <span className={`px-2 py-1 rounded-full text-xs font-bold ${user.role === 'DRIVER' ? 'bg-yellow-100 text-yellow-800' : 'bg-gray-100 text-gray-700'}`}>\n                                          {user.role}\n                                       </span>\n                                    </td>\n                                    <td className=\"px-6 py-4\">\n                                       <span className={`text-xs font-bold ${user.status === 'active' ? 'text-green-600' : 'text-red-600'}`}>{user.status}</span>\n                                    </td>\n                                    <td className=\"px-6 py-4 text-right relative\">\n                                       <button onClick={() => setSelectedId(selectedId === user.id ? null : user.id)} className=\"text-gray-400 hover:text-gray-600\">\n                                          <MoreVertical className=\"h-5 w-5\" />\n                                       </button>\n                                       {selectedId === user.id && (\n                                          <div className=\"absolute right-8 top-8 w-48 bg-white rounded-md shadow-xl border border-gray-200 z-50 text-left\">\n                                             <button onClick={() => handleGiftPremium(user.id, 'user')} className=\"w-full text-left px-4 py-2 text-sm hover:bg-purple-50 text-purple-700\">\n                                                Gift VIP Status\n                                             </button>\n                                             <button onClick={() => handleToggleStatus(user.id, 'user')} className=\"w-full text-left px-4 py-2 text-sm hover:bg-red-50 text-red-600\">\n                                                {user.status === 'active' ? 'Ban User' : 'Unban User'}\n                                             </button>\n                                          </div>\n                                       )}\n                                    </td>\n                                 </tr>\n                              ))}\n                           </tbody>\n                        </table>\n                     </div>\n                  </div>\n               )}\n\n               {/* VIEW: MONETIZATION */}\n               {activeView === 'monetization' && trafficStats && (\n                  <div className=\"animate-in fade-in slide-in-from-bottom-4 space-y-8\">\n                     <div className=\"flex justify-between items-center\">\n                        <div>\n                           <h2 className=\"text-2xl font-bold text-gray-900\">Ad Platform & Traffic Control</h2>\n                           <p className=\"text-gray-500 text-sm\">Manage video slots across the entire ecosystem.</p>\n                        </div>\n                        <button\n                           onClick={() => {\n                              setEditingCampaign({ clientName: '', videoUrl: '', targetUrl: '', placements: ['home'], isPaidClient: false, active: true });\n                              setIsCampaignModalOpen(true);\n                           }}\n                           className=\"bg-trini-black text-white px-4 py-2 rounded font-bold text-sm hover:bg-gray-800 shadow flex items-center\"\n                        >\n                           <PlayCircle className=\"h-4 w-4 mr-2\" /> New Video Campaign\n                        </button>\n                     </div>\n\n                     {/* Stats Row */}\n                     <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n                        <div className=\"bg-white p-5 rounded-xl shadow-sm border border-gray-200\">\n                           <p className=\"text-xs font-bold text-gray-500 uppercase\">Total Impressions</p>\n                           <h3 className=\"text-2xl font-extrabold text-gray-900 mt-2\">{trafficStats.adImpressions.toLocaleString()}</h3>\n                        </div>\n                        <div className=\"bg-white p-5 rounded-xl shadow-sm border border-gray-200\">\n                           <p className=\"text-xs font-bold text-gray-500 uppercase\">Video Views</p>\n                           <h3 className=\"text-2xl font-extrabold text-gray-900 mt-2\">{trafficStats.videoViews.toLocaleString()}</h3>\n                        </div>\n                        <div className=\"bg-white p-5 rounded-xl shadow-sm border border-gray-200\">\n                           <p className=\"text-xs font-bold text-gray-500 uppercase\">Click-Through Rate</p>\n                           <h3 className=\"text-2xl font-extrabold text-blue-600 mt-2\">{trafficStats.ctr}%</h3>\n                        </div>\n                        <div className=\"bg-white p-5 rounded-xl shadow-sm border border-gray-200\">\n                           <p className=\"text-xs font-bold text-gray-500 uppercase\">Est. Revenue</p>\n                           <h3 className=\"text-2xl font-extrabold text-green-600 mt-2\">$2,140.50</h3>\n                        </div>\n                     </div>\n\n                     {/* Campaign List */}\n                     <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden\">\n                        <div className=\"p-6 border-b border-gray-200\">\n                           <h3 className=\"font-bold text-lg text-gray-900\">Active Campaigns</h3>\n                        </div>\n                        <table className=\"min-w-full divide-y divide-gray-200\">\n                           <thead className=\"bg-gray-50\">\n                              <tr>\n                                 <th className=\"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase\">Client</th>\n                                 <th className=\"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase\">Placements</th>\n                                 <th className=\"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase\">Performance</th>\n                                 <th className=\"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase\">Status</th>\n                                 <th className=\"px-6 py-3 text-right text-xs font-bold text-gray-500 uppercase\">Actions</th>\n                              </tr>\n                           </thead>\n                           <tbody className=\"bg-white divide-y divide-gray-200\">\n                              {campaigns.map((campaign) => (\n                                 <tr key={campaign.id} className=\"hover:bg-gray-50\">\n                                    <td className=\"px-6 py-4\">\n                                       <div className=\"font-bold text-sm text-gray-900\">{campaign.clientName}</div>\n                                       <div className=\"text-xs text-blue-600 truncate max-w-[150px]\">{campaign.targetUrl}</div>\n                                    </td>\n                                    <td className=\"px-6 py-4\">\n                                       <div className=\"flex flex-wrap gap-1\">\n                                          {campaign.placements.map(p => (\n                                             <span key={p} className=\"bg-gray-100 text-gray-600 text-[10px] uppercase font-bold px-2 py-0.5 rounded\">\n                                                {p}\n                                             </span>\n                                          ))}\n                                       </div>\n                                    </td>\n                                    <td className=\"px-6 py-4\">\n                                       <div className=\"text-xs\">\n                                          <span className=\"font-bold\">{campaign.views.toLocaleString()}</span> views\n                                       </div>\n                                       <div className=\"text-xs text-gray-500\">\n                                          {campaign.clicks} clicks ({(campaign.clicks / (campaign.views || 1) * 100).toFixed(1)}%)\n                                       </div>\n                                    </td>\n                                    <td className=\"px-6 py-4\">\n                                       {campaign.isPaidClient && (\n                                          <span className=\"bg-purple-100 text-purple-700 text-[10px] font-bold px-2 py-0.5 rounded mr-2\">\n                                             BOOSTED\n                                          </span>\n                                       )}\n                                       <span className={`text-xs font-bold ${campaign.active ? 'text-green-600' : 'text-gray-400'}`}>\n                                          {campaign.active ? 'Active' : 'Paused'}\n                                       </span>\n                                    </td>\n                                    <td className=\"px-6 py-4 text-right\">\n                                       <button\n                                          onClick={() => {\n                                             setEditingCampaign(campaign);\n                                             setIsCampaignModalOpen(true);\n                                          }}\n                                          className=\"text-blue-600 hover:text-blue-800 mr-3\"\n                                       >\n                                          <SettingsIcon className=\"h-4 w-4\" />\n                                       </button>\n                                       <button\n                                          onClick={() => handleDeleteCampaign(campaign.id)}\n                                          className=\"text-red-400 hover:text-red-600\"\n                                       >\n                                          <X className=\"h-4 w-4\" />\n                                       </button>\n                                    </td>\n                                 </tr>\n                              ))}\n                           </tbody>\n                        </table>\n                     </div>\n                  </div>\n               )}\n\n               {/* VIEW: INTEGRATIONS (Next Level Tools) */}\n               {activeView === 'integrations' && (\n                  <div className=\"animate-in fade-in slide-in-from-bottom-4 space-y-6\">\n                     <div className=\"bg-gradient-to-r from-blue-900 to-blue-800 text-white p-8 rounded-xl shadow-lg\">\n                        <h2 className=\"text-2xl font-bold mb-2\">Platform Architecture</h2>\n                        <p className=\"text-blue-200\">Manage your cloud connections and scale your infrastructure.</p>\n                     </div>\n\n                     <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                        {integrations.map(tool => (\n                           <div key={tool.id} className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-200 flex items-start justify-between\">\n                              <div className=\"flex gap-4\">\n                                 <div className={`p-3 rounded-xl bg-gray-50 ${tool.color}`}>\n                                    <tool.icon className=\"h-8 w-8\" />\n                                 </div>\n                                 <div>\n                                    <h3 className=\"font-bold text-gray-900 text-lg\">{tool.name}</h3>\n                                    <p className=\"text-sm text-gray-500 mb-2\">{tool.desc}</p>\n                                    <span className={`inline-flex items-center text-xs font-bold px-2 py-1 rounded-full ${tool.connected ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-500'}`}>\n                                       {tool.connected ? 'Active' : 'Not Configured'}\n                                    </span>\n                                 </div>\n                              </div>\n                              <button\n                                 onClick={() => toggleIntegration(tool.id)}\n                                 className={`px-4 py-2 rounded-lg text-sm font-bold transition-colors ${tool.connected ? 'bg-gray-100 text-gray-600 hover:bg-gray-200' : 'bg-blue-600 text-white hover:bg-blue-700'}`}\n                              >\n                                 {tool.connected ? 'Configure' : 'Connect'}\n                              </button>\n                           </div>\n                        ))}\n                     </div>\n                  </div>\n               )}\n\n               {/* VIEW: SYSTEM OVERRIDES (God Mode Controls) */}\n               {activeView === 'system' && (\n                  <div className=\"animate-in fade-in slide-in-from-bottom-4 space-y-6\">\n                     <div className=\"bg-red-900 text-white p-6 rounded-xl shadow-lg\">\n                        <h2 className=\"text-2xl font-bold flex items-center\">\n                           <ShieldAlert className=\"h-8 w-8 mr-3\" /> System Overrides\n                        </h2>\n                        <p className=\"text-red-200 mt-2\">Dangerous actions. Use with caution.</p>\n                     </div>\n\n                     <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                        <div className=\"bg-white p-6 rounded-xl border border-red-100 shadow-sm\">\n                           <h3 className=\"font-bold text-red-800 mb-2\">Emergency Kill Switch</h3>\n                           <p className=\"text-xs text-gray-500 mb-4\">Disables new signups and orders platform-wide.</p>\n                           <button className=\"w-full bg-red-600 text-white py-2 rounded font-bold hover:bg-red-700 flex items-center justify-center\">\n                              <Power className=\"h-4 w-4 mr-2\" /> SHUT DOWN PLATFORM\n                           </button>\n                        </div>\n\n                        <div className=\"bg-white p-6 rounded-xl border border-blue-100 shadow-sm\">\n                           <h3 className=\"font-bold text-blue-800 mb-2\">Global Notification</h3>\n                           <p className=\"text-xs text-gray-500 mb-4\">Sends a push alert to all active users.</p>\n                           <button className=\"w-full bg-blue-600 text-white py-2 rounded font-bold hover:bg-blue-700 flex items-center justify-center\">\n                              <Bell className=\"h-4 w-4 mr-2\" /> Broadcast Alert\n                           </button>\n                        </div>\n\n                        <div className=\"bg-white p-6 rounded-xl border border-yellow-100 shadow-sm\">\n                           <h3 className=\"font-bold text-yellow-800 mb-2\">Force Indexing</h3>\n                           <p className=\"text-xs text-gray-500 mb-4\">Manually triggers Google Indexing for all new store pages.</p>\n                           <button className=\"w-full bg-yellow-500 text-white py-2 rounded font-bold hover:bg-yellow-600 flex items-center justify-center\">\n                              <Globe className=\"h-4 w-4 mr-2\" /> Update Sitemap\n                           </button>\n                        </div>\n                     </div>\n                  </div>\n               )}\n\n            </div>\n         </main>\n\n         {/* Blog Generation Modal */}\n         {isBlogModalOpen && (\n            <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm\">\n               <div className=\"bg-white rounded-xl p-8 w-full max-w-lg\">\n                  <h2 className=\"text-xl font-bold mb-4 flex items-center\">\n                     <FileEdit className=\"h-5 w-5 mr-2 text-trini-red\" /> AI Article Writer\n                  </h2>\n                  <div className=\"space-y-4\">\n                     <div>\n                        <label className=\"block text-sm font-bold text-gray-900 mb-1\">Topic / Title Idea</label>\n                        <input\n                           type=\"text\"\n                           value={blogPrompt.topic}\n                           onChange={(e) => setBlogPrompt({ ...blogPrompt, topic: e.target.value })}\n                           className=\"w-full border border-gray-300 rounded p-2 bg-white text-gray-900\"\n                           placeholder=\"e.g. Benefits of Ridesharing in Port of Spain\"\n                        />\n                     </div>\n                     <div>\n                        <label className=\"block text-sm font-bold text-gray-900 mb-1\">SEO Keywords (Comma Sep)</label>\n                        <input\n                           type=\"text\"\n                           value={blogPrompt.keywords}\n                           onChange={(e) => setBlogPrompt({ ...blogPrompt, keywords: e.target.value })}\n                           className=\"w-full border border-gray-300 rounded p-2 bg-white text-gray-900\"\n                           placeholder=\"e.g. taxi trinidad, safe rides, transport\"\n                        />\n                     </div>\n                     <div className=\"flex justify-end gap-2 mt-6\">\n                        <button onClick={() => setIsBlogModalOpen(false)} className=\"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded\">Cancel</button>\n                        <button\n                           onClick={handleGenerateBlog}\n                           disabled={isGeneratingBlog || !blogPrompt.topic}\n                           className=\"px-4 py-2 bg-trini-red text-white rounded font-bold flex items-center disabled:opacity-50\"\n                        >\n                           {isGeneratingBlog ? <Loader2 className=\"h-4 w-4 animate-spin mr-2\" /> : <FileText className=\"h-4 w-4 mr-2\" />}\n                           Generate & Publish\n                        </button>\n                     </div>\n                  </div>\n               </div>\n            </div>\n         )}\n\n         {/* Verification Modal */}\n         {isVerifyModalOpen && (\n            <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm\">\n               <div className=\"bg-white rounded-xl w-full max-w-2xl overflow-hidden\">\n                  <div className=\"bg-gray-900 text-white p-4 flex justify-between items-center\">\n                     <h3 className=\"font-bold flex items-center\"><ShieldAlert className=\"mr-2\" /> Override Verification</h3>\n                     <button onClick={() => setIsVerifyModalOpen(false)}><X /></button>\n                  </div>\n                  <div className=\"p-6\">\n                     <p className=\"mb-4 text-sm text-gray-600\">Force verifying <strong>{vendorToVerify?.name}</strong> will bypass AI checks.</p>\n                     <div className=\"flex gap-4\">\n                        <button onClick={handleApproveVerification} className=\"flex-1 bg-green-600 text-white py-3 rounded font-bold\">\n                           Force Approve (God Mode)\n                        </button>\n                        <button onClick={handleRunVerification} className=\"flex-1 bg-blue-600 text-white py-3 rounded font-bold\">\n                           Run Standard AI Scan\n                        </button>\n                     </div>\n\n                     {/* Hidden file input for standard flow support if needed */}\n                     <input type=\"file\" className=\"hidden\" onChange={handleDocUpload} id=\"admin-doc-upload\" />\n                  </div>\n               </div>\n            </div>\n         )}\n\n         {/* Campaign Modal */}\n         {isCampaignModalOpen && (\n            <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm\">\n               <div className=\"bg-white rounded-xl p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\n                  <h2 className=\"text-xl font-bold mb-6 flex items-center\">\n                     <PlayCircle className=\"h-5 w-5 mr-2 text-trini-red\" />\n                     {editingCampaign.id ? 'Edit Campaign' : 'Create New Campaign'}\n                  </h2>\n\n                  <div className=\"space-y-6\">\n                     <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                        <div>\n                           <label className=\"block text-sm font-bold text-gray-900 mb-1\">Client Name</label>\n                           <input\n                              type=\"text\"\n                              value={editingCampaign.clientName}\n                              onChange={(e) => setEditingCampaign({ ...editingCampaign, clientName: e.target.value })}\n                              className=\"w-full border border-gray-300 rounded p-2 bg-white text-gray-900\"\n                              placeholder=\"e.g. Massy Motors\"\n                           />\n                        </div>\n                        <div>\n                           <label className=\"block text-sm font-bold text-gray-900 mb-1\">Target URL</label>\n                           <input\n                              type=\"text\"\n                              value={editingCampaign.targetUrl}\n                              onChange={(e) => setEditingCampaign({ ...editingCampaign, targetUrl: e.target.value })}\n                              className=\"w-full border border-gray-300 rounded p-2 bg-white text-gray-900\"\n                              placeholder=\"https://...\"\n                           />\n                        </div>\n                     </div>\n\n                     <div>\n                        <label className=\"block text-sm font-bold text-gray-900 mb-1\">Video Asset URL</label>\n                        <input\n                           type=\"text\"\n                           value={editingCampaign.videoUrl}\n                           onChange={(e) => setEditingCampaign({ ...editingCampaign, videoUrl: e.target.value })}\n                           className=\"w-full border border-gray-300 rounded p-2 bg-white text-gray-900\"\n                           placeholder=\"https://storage.googleapis.com/...\"\n                        />\n                        <p className=\"text-xs text-gray-500 mt-1\">Direct link to MP4 file required.</p>\n                     </div>\n\n                     <div>\n                        <label className=\"block text-sm font-bold text-gray-900 mb-2\">Placements (Where to show)</label>\n                        <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\n                           {['home', 'marketplace', 'rides', 'jobs', 'tickets', 'real_estate'].map(p => (\n                              <label key={p} className={`flex items-center p-3 rounded border cursor-pointer transition-colors ${editingCampaign.placements?.includes(p as any) ? 'bg-blue-50 border-blue-200' : 'bg-gray-50 border-gray-200'}`}>\n                                 <input\n                                    type=\"checkbox\"\n                                    checked={editingCampaign.placements?.includes(p as any)}\n                                    onChange={() => togglePlacement(p)}\n                                    className=\"mr-2\"\n                                 />\n                                 <span className=\"capitalize font-medium text-sm\">{p.replace('_', ' ')}</span>\n                              </label>\n                           ))}\n                        </div>\n                     </div>\n\n                     <div className=\"bg-purple-50 p-4 rounded-lg border border-purple-100 flex items-center justify-between\">\n                        <div>\n                           <h4 className=\"font-bold text-purple-900\">Paid Customer Boost</h4>\n                           <p className=\"text-xs text-purple-700\">Prioritize this campaign over free tier ads.</p>\n                        </div>\n                        <label className=\"relative inline-flex items-center cursor-pointer\">\n                           <input\n                              type=\"checkbox\"\n                              checked={editingCampaign.isPaidClient}\n                              onChange={(e) => setEditingCampaign({ ...editingCampaign, isPaidClient: e.target.checked })}\n                              className=\"sr-only peer\"\n                           />\n                           <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600\"></div>\n                        </label>\n                     </div>\n\n                     <div className=\"flex justify-end gap-3 pt-4 border-t border-gray-100\">\n                        <button\n                           onClick={() => setIsCampaignModalOpen(false)}\n                           className=\"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded font-medium\"\n                        >\n                           Cancel\n                        </button>\n                        <button\n                           onClick={handleSaveCampaign}\n                           className=\"px-6 py-2 bg-trini-black text-white rounded font-bold hover:bg-gray-800\"\n                        >\n                           Save Campaign\n                        </button>\n                     </div>\n                  </div>\n               </div>\n            </div>\n         )}\n\n      </div>\n   );\n};\n",
  "pages/AffiliateProgram.tsx": "\nimport React, { useState } from 'react';\nimport { DollarSign, Users, BarChart2, Link as LinkIcon, Copy, CheckCircle, Download, ArrowRight, Globe, TrendingUp, Shield } from 'lucide-react';\nimport { AffiliateStats, Payout, MarketingAsset } from '../types';\nimport { AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\n\nexport const AffiliateProgram: React.FC = () => {\n  const [isRegistered, setIsRegistered] = useState(false);\n  const [activeTab, setActiveTab] = useState<'overview' | 'links' | 'assets' | 'payouts'>('overview');\n\n  // Mock Data\n  const stats: AffiliateStats = {\n    totalClicks: 1245,\n    conversions: 84,\n    pendingCommission: 450,\n    paidCommission: 1200,\n    tier: 'Silver'\n  };\n\n  const chartData = [\n    { name: 'Mon', clicks: 40, sales: 2 },\n    { name: 'Tue', clicks: 55, sales: 4 },\n    { name: 'Wed', clicks: 30, sales: 1 },\n    { name: 'Thu', clicks: 70, sales: 8 },\n    { name: 'Fri', clicks: 95, sales: 12 },\n    { name: 'Sat', clicks: 120, sales: 15 },\n    { name: 'Sun', clicks: 85, sales: 9 },\n  ];\n\n  const assets: MarketingAsset[] = [\n    { id: '1', title: 'Instagram Story (Store Launch)', type: 'Social', url: 'https://images.unsplash.com/photo-1611162617474-5b21e879e113?q=80&w=800', copy: \"Launch your free online store today with TriniBuild! \ud83c\uddf9\ud83c\uddf9 10 Free Listings. No Credit Card. Link in bio! #TriniBusiness\" },\n    { id: '2', title: 'WhatsApp Status (Driver)', type: 'Social', url: 'https://images.unsplash.com/photo-1449965408869-eaa3f722e40d?q=80&w=800', copy: \"Drive and earn on your own schedule. Keep 85% of fares with TriniBuild Go. DM me for signup link!\" },\n    { id: '3', title: 'Web Banner (300x250)', type: 'Banner', url: 'https://via.placeholder.com/300x250/CE1126/FFFFFF?text=Start+Selling+Free', copy: \"\" },\n  ];\n\n  const payouts: Payout[] = [\n    { id: 'TX-992', date: 'Oct 01, 2025', amount: 450, status: 'Paid' },\n    { id: 'TX-884', date: 'Sep 01, 2025', amount: 320, status: 'Paid' },\n    { id: 'TX-771', date: 'Aug 01, 2025', amount: 430, status: 'Paid' },\n  ];\n\n  const handleRegister = () => {\n    // Simulate signup\n    setIsRegistered(true);\n  };\n\n  if (!isRegistered) {\n    return (\n      <div className=\"min-h-screen bg-white font-sans\">\n        {/* Hero */}\n        <div className=\"bg-trini-black text-white py-24 relative overflow-hidden\">\n           <div className=\"absolute top-0 right-0 w-1/3 h-full bg-gradient-to-l from-trini-red/20 to-transparent\"></div>\n           <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 text-center\">\n              <span className=\"text-yellow-400 font-bold tracking-widest uppercase text-sm mb-4 block\">TriniBuild Partner Program</span>\n              <h1 className=\"text-5xl md:text-7xl font-extrabold mb-6 leading-tight\">\n                 Turn Your Network <br/> Into <span className=\"text-trini-red\">Passive Income.</span>\n              </h1>\n              <p className=\"text-xl text-gray-300 mb-10 max-w-2xl mx-auto\">\n                 Earn <strong>20% recurring commissions</strong> on every store you refer. Plus TT$100 for every verified driver. The most lucrative affiliate program in the Caribbean.\n              </p>\n              <button onClick={handleRegister} className=\"bg-white text-trini-black px-10 py-4 rounded-full font-extrabold text-lg hover:bg-gray-100 shadow-2xl transform hover:scale-105 transition-all\">\n                 Start Earning Now\n              </button>\n           </div>\n        </div>\n\n        {/* Tiers */}\n        <div className=\"py-20 bg-gray-50\">\n           <div className=\"max-w-6xl mx-auto px-4\">\n              <h2 className=\"text-3xl font-bold text-center mb-16 text-gray-900\">How You Earn</h2>\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n                 <div className=\"bg-white p-8 rounded-2xl shadow-xl border-t-4 border-blue-500 hover:-translate-y-2 transition-transform\">\n                    <div className=\"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-6 text-blue-600 mx-auto\">\n                       <Users className=\"h-8 w-8\" />\n                    </div>\n                    <h3 className=\"text-xl font-bold text-center mb-2\">Refer Merchants</h3>\n                    <p className=\"text-4xl font-extrabold text-center text-gray-900 mb-2\">20%</p>\n                    <p className=\"text-center text-gray-500 text-sm mb-6\">Recurring Lifetime Commission</p>\n                    <p className=\"text-gray-600 text-sm text-center\">If a store pays $299/mo, you get <strong>$60/mo</strong>. Build a portfolio of just 10 stores and earn $600/mo passive.</p>\n                 </div>\n                 <div className=\"bg-white p-8 rounded-2xl shadow-xl border-t-4 border-yellow-500 hover:-translate-y-2 transition-transform scale-105 z-10\">\n                    <div className=\"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mb-6 text-yellow-600 mx-auto\">\n                       <Users className=\"h-8 w-8\" />\n                    </div>\n                    <h3 className=\"text-xl font-bold text-center mb-2\">Refer Drivers</h3>\n                    <p className=\"text-4xl font-extrabold text-center text-gray-900 mb-2\">$100</p>\n                    <p className=\"text-center text-gray-500 text-sm mb-6\">One-Time Bounty</p>\n                    <p className=\"text-gray-600 text-sm text-center\">For every verified driver that completes their first 10 rides. Easy volume, fast cash.</p>\n                 </div>\n                 <div className=\"bg-white p-8 rounded-2xl shadow-xl border-t-4 border-purple-500 hover:-translate-y-2 transition-transform\">\n                    <div className=\"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mb-6 text-purple-600 mx-auto\">\n                       <Users className=\"h-8 w-8\" />\n                    </div>\n                    <h3 className=\"text-xl font-bold text-center mb-2\">Event Tickets</h3>\n                    <p className=\"text-4xl font-extrabold text-center text-gray-900 mb-2\">1%</p>\n                    <p className=\"text-center text-gray-500 text-sm mb-6\">Of Ticket Sales</p>\n                    <p className=\"text-gray-600 text-sm text-center\">Promote a fete. If they sell $100k in tickets via your link, you walk away with <strong>$1,000</strong>.</p>\n                 </div>\n              </div>\n           </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 font-sans\">\n       <div className=\"flex\">\n          {/* Sidebar */}\n          <div className=\"w-64 bg-trini-black text-white fixed h-full hidden md:block\">\n             <div className=\"p-6\">\n                <h2 className=\"text-2xl font-bold mb-1\">Partner<span className=\"text-trini-red\">Hub</span></h2>\n                <p className=\"text-gray-400 text-xs\">Affiliate ID: #TB-8821</p>\n             </div>\n             <nav className=\"mt-6\">\n                {[\n                   { id: 'overview', icon: BarChart2, label: 'Dashboard' },\n                   { id: 'links', icon: LinkIcon, label: 'Link Generator' },\n                   { id: 'assets', icon: Download, label: 'Marketing Assets' },\n                   { id: 'payouts', icon: DollarSign, label: 'Payouts' },\n                ].map(item => (\n                   <button \n                     key={item.id}\n                     onClick={() => setActiveTab(item.id as any)}\n                     className={`w-full flex items-center px-6 py-4 transition-colors border-l-4 ${activeTab === item.id ? 'bg-gray-800 border-trini-red text-white' : 'border-transparent text-gray-400 hover:bg-gray-800 hover:text-white'}`}\n                   >\n                      <item.icon className=\"h-5 w-5 mr-3\" /> {item.label}\n                   </button>\n                ))}\n             </nav>\n          </div>\n\n          {/* Main Content */}\n          <div className=\"flex-grow md:ml-64 p-8\">\n             {/* Header */}\n             <div className=\"flex justify-between items-center mb-8\">\n                <h1 className=\"text-2xl font-bold text-gray-900 capitalize\">{activeTab}</h1>\n                <div className=\"flex items-center gap-4\">\n                   <div className=\"text-right\">\n                      <p className=\"text-xs text-gray-500 uppercase font-bold\">Unpaid Balance</p>\n                      <p className=\"text-xl font-extrabold text-green-600\">TT$ {stats.pendingCommission}</p>\n                   </div>\n                   <div className=\"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center font-bold text-gray-600\">\n                      JD\n                   </div>\n                </div>\n             </div>\n\n             {/* OVERVIEW TAB */}\n             {activeTab === 'overview' && (\n                <div className=\"space-y-8 animate-in fade-in\">\n                   <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n                      <div className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-200\">\n                         <p className=\"text-xs text-gray-500 uppercase font-bold\">Total Clicks</p>\n                         <h3 className=\"text-3xl font-bold text-gray-900 mt-1\">{stats.totalClicks}</h3>\n                         <span className=\"text-xs text-green-600 font-bold flex items-center mt-2\"><TrendingUp className=\"h-3 w-3 mr-1\" /> +12% this week</span>\n                      </div>\n                      <div className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-200\">\n                         <p className=\"text-xs text-gray-500 uppercase font-bold\">Conversions</p>\n                         <h3 className=\"text-3xl font-bold text-gray-900 mt-1\">{stats.conversions}</h3>\n                         <span className=\"text-xs text-green-600 font-bold flex items-center mt-2\"><CheckCircle className=\"h-3 w-3 mr-1\" /> 6.7% Conv. Rate</span>\n                      </div>\n                      <div className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-200\">\n                         <p className=\"text-xs text-gray-500 uppercase font-bold\">Lifetime Earnings</p>\n                         <h3 className=\"text-3xl font-bold text-gray-900 mt-1\">TT${stats.paidCommission}</h3>\n                      </div>\n                      <div className=\"bg-gradient-to-br from-yellow-400 to-orange-500 p-6 rounded-xl shadow-lg text-white relative overflow-hidden\">\n                         <Shield className=\"absolute top-4 right-4 h-16 w-16 opacity-20\" />\n                         <p className=\"text-xs uppercase font-bold opacity-90\">Current Tier</p>\n                         <h3 className=\"text-3xl font-bold mt-1\">{stats.tier}</h3>\n                         <p className=\"text-xs mt-2 font-medium\">16 sales to Gold (30% comm)</p>\n                      </div>\n                   </div>\n\n                   <div className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-200 h-80\">\n                      <h3 className=\"font-bold text-gray-900 mb-6\">Performance</h3>\n                      <ResponsiveContainer width=\"100%\" height=\"100%\">\n                         <AreaChart data={chartData}>\n                            <defs>\n                               <linearGradient id=\"colorSales\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                  <stop offset=\"5%\" stopColor=\"#CE1126\" stopOpacity={0.8}/>\n                                  <stop offset=\"95%\" stopColor=\"#CE1126\" stopOpacity={0}/>\n                               </linearGradient>\n                            </defs>\n                            <XAxis dataKey=\"name\" axisLine={false} tickLine={false} />\n                            <YAxis axisLine={false} tickLine={false} />\n                            <CartesianGrid strokeDasharray=\"3 3\" vertical={false} />\n                            <Tooltip />\n                            <Area type=\"monotone\" dataKey=\"sales\" stroke=\"#CE1126\" fillOpacity={1} fill=\"url(#colorSales)\" />\n                         </AreaChart>\n                      </ResponsiveContainer>\n                   </div>\n                </div>\n             )}\n\n             {/* LINKS TAB */}\n             {activeTab === 'links' && (\n                <div className=\"animate-in fade-in\">\n                   <div className=\"bg-white p-8 rounded-xl shadow-sm border border-gray-200 mb-8\">\n                      <h3 className=\"font-bold text-lg mb-4\">Create Tracking Link</h3>\n                      <div className=\"flex flex-col md:flex-row gap-4\">\n                         <select className=\"p-3 border border-gray-300 rounded-lg bg-gray-50\">\n                            <option>Homepage (General)</option>\n                            <option>Store Creator (Merchants)</option>\n                            <option>Driver Signup (Rides)</option>\n                            <option>Pricing Page</option>\n                         </select>\n                         <div className=\"flex-grow relative\">\n                            <input type=\"text\" readOnly value=\"https://trinibuild.com/?ref=TB-8821\" className=\"w-full p-3 border border-gray-300 rounded-lg bg-gray-100 text-gray-600\" />\n                            <button className=\"absolute right-2 top-2 p-1.5 hover:bg-gray-200 rounded text-gray-500\" onClick={() => alert(\"Copied!\")}>\n                               <Copy className=\"h-5 w-5\" />\n                            </button>\n                         </div>\n                         <button className=\"bg-trini-red text-white px-6 py-3 rounded-lg font-bold hover:bg-red-700\">Generate</button>\n                      </div>\n                   </div>\n\n                   <h3 className=\"font-bold text-lg mb-4\">Your Active Links</h3>\n                   <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden\">\n                      <table className=\"min-w-full divide-y divide-gray-200\">\n                         <thead className=\"bg-gray-50\">\n                            <tr>\n                               <th className=\"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase\">Target</th>\n                               <th className=\"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase\">Link</th>\n                               <th className=\"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase\">Clicks</th>\n                               <th className=\"px-6 py-3 text-right text-xs font-bold text-gray-500 uppercase\">Action</th>\n                            </tr>\n                         </thead>\n                         <tbody className=\"divide-y divide-gray-200\">\n                            <tr>\n                               <td className=\"px-6 py-4 font-bold\">Default</td>\n                               <td className=\"px-6 py-4 text-blue-600 text-sm\">trinibuild.com/?ref=TB-8821</td>\n                               <td className=\"px-6 py-4\">842</td>\n                               <td className=\"px-6 py-4 text-right\"><button className=\"text-gray-400 hover:text-gray-600\"><Copy className=\"h-4 w-4\" /></button></td>\n                            </tr>\n                            <tr>\n                               <td className=\"px-6 py-4 font-bold\">Instagram Bio</td>\n                               <td className=\"px-6 py-4 text-blue-600 text-sm\">trinibuild.com/create-store?ref=TB-8821</td>\n                               <td className=\"px-6 py-4\">403</td>\n                               <td className=\"px-6 py-4 text-right\"><button className=\"text-gray-400 hover:text-gray-600\"><Copy className=\"h-4 w-4\" /></button></td>\n                            </tr>\n                         </tbody>\n                      </table>\n                   </div>\n                </div>\n             )}\n\n             {/* ASSETS TAB */}\n             {activeTab === 'assets' && (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-in fade-in\">\n                   {assets.map(asset => (\n                      <div key={asset.id} className=\"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden group\">\n                         <div className=\"h-48 bg-gray-100 relative overflow-hidden\">\n                            <img src={asset.url} className=\"w-full h-full object-cover\" alt=\"Asset\" />\n                            <div className=\"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity\">\n                               <button className=\"bg-white text-black px-4 py-2 rounded-full font-bold flex items-center text-sm\">\n                                  <Download className=\"h-4 w-4 mr-2\" /> Download\n                               </button>\n                            </div>\n                         </div>\n                         <div className=\"p-4\">\n                            <div className=\"flex justify-between items-start mb-2\">\n                               <h4 className=\"font-bold text-gray-900\">{asset.title}</h4>\n                               <span className=\"text-[10px] uppercase font-bold bg-gray-100 px-2 py-1 rounded text-gray-500\">{asset.type}</span>\n                            </div>\n                            {asset.copy && (\n                               <div className=\"bg-gray-50 p-3 rounded border border-gray-200 text-xs text-gray-600 mb-3\">\n                                  \"{asset.copy}\"\n                               </div>\n                            )}\n                            <button className=\"w-full border border-gray-300 py-2 rounded font-bold text-sm hover:bg-gray-50 text-gray-600\" onClick={() => alert(\"Copy text copied!\")}>\n                               Copy Caption\n                            </button>\n                         </div>\n                      </div>\n                   ))}\n                </div>\n             )}\n\n             {/* PAYOUTS TAB */}\n             {activeTab === 'payouts' && (\n                <div className=\"animate-in fade-in\">\n                   <div className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-200 mb-8 flex justify-between items-center\">\n                      <div>\n                         <h3 className=\"font-bold text-lg mb-1\">Banking Details</h3>\n                         <p className=\"text-sm text-gray-500\">Republic Bank \u2022\u2022\u2022\u2022 4521</p>\n                      </div>\n                      <button className=\"text-blue-600 font-bold text-sm hover:underline\">Edit</button>\n                   </div>\n\n                   <h3 className=\"font-bold text-lg mb-4\">Payout History</h3>\n                   <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden\">\n                      <table className=\"min-w-full divide-y divide-gray-200\">\n                         <thead className=\"bg-gray-50\">\n                            <tr>\n                               <th className=\"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase\">Transaction ID</th>\n                               <th className=\"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase\">Date</th>\n                               <th className=\"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase\">Amount</th>\n                               <th className=\"px-6 py-3 text-right text-xs font-bold text-gray-500 uppercase\">Status</th>\n                            </tr>\n                         </thead>\n                         <tbody className=\"divide-y divide-gray-200\">\n                            {payouts.map(p => (\n                               <tr key={p.id}>\n                                  <td className=\"px-6 py-4 font-mono text-sm text-gray-600\">{p.id}</td>\n                                  <td className=\"px-6 py-4 text-sm\">{p.date}</td>\n                                  <td className=\"px-6 py-4 font-bold text-gray-900\">TT${p.amount}</td>\n                                  <td className=\"px-6 py-4 text-right\">\n                                     <span className=\"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-bold\">{p.status}</span>\n                                  </td>\n                               </tr>\n                            ))}\n                         </tbody>\n                      </table>\n                   </div>\n                </div>\n             )}\n          </div>\n       </div>\n    </div>\n  );\n};\n",
  "pages/Auth.tsx": "\nimport { authService } from '../services/authService';\n\nexport const Auth: React.FC = () => {\n  const [formData, setFormData] = useState({\n    firstName: '',\n    lastName: '',\n    email: '',\n    password: ''\n  });\n  const [error, setError] = useState<string | null>(null);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    try {\n      if (isLogin) {\n        const { error } = await authService.login({ email: formData.email, password: formData.password });\n        if (error) throw new Error(error);\n        navigate('/dashboard');\n      } else {\n        const { error } = await authService.register(formData);\n        if (error) throw new Error(error);\n        navigate('/onboarding');\n      }\n    } catch (err: any) {\n      setError(err.message);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8\">\n      <div className=\"sm:mx-auto sm:w-full sm:max-w-md\">\n        <div className=\"bg-trini-black w-16 h-16 rounded-lg mx-auto flex items-center justify-center mb-4\">\n          <span className=\"text-trini-red text-3xl font-extrabold\">TB</span>\n        </div>\n        <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">\n          {isLogin ? 'Welcome Back' : 'Join TriniBuild'}\n        </h2>\n        <p className=\"mt-2 text-center text-sm text-gray-600\">\n          {isLogin ? 'Sign in to your account' : 'Create your free account today'}\n        </p>\n      </div>\n\n      <div className=\"mt-8 sm:mx-auto sm:w-full sm:max-w-md\">\n        <div className=\"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10\">\n\n          <form className=\"mt-8 space-y-6\" onSubmit={handleSubmit}>\n            <div className=\"space-y-4\">\n              {error && (\n                <div className=\"bg-red-50 border-l-4 border-red-500 p-4 mb-4\">\n                  <div className=\"flex\">\n                    <div className=\"ml-3\">\n                      <p className=\"text-sm text-red-700\">{error}</p>\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {!isLogin && (\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">First Name</label>\n                    <div className=\"relative\">\n                      <User className=\"absolute left-3 top-3 text-gray-400 h-5 w-5\" />\n                      <input\n                        type=\"text\"\n                        required\n                        className=\"w-full pl-10 p-3 border border-gray-300 rounded-lg focus:ring-trini-red focus:border-trini-red\"\n                        placeholder=\"John\"\n                        value={formData.firstName}\n                        onChange={(e) => setFormData({ ...formData, firstName: e.target.value })}\n                      />\n                    </div>\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">Last Name</label>\n                    <div className=\"relative\">\n                      <input\n                        type=\"text\"\n                        required\n                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-trini-red focus:border-trini-red\"\n                        placeholder=\"Doe\"\n                        value={formData.lastName}\n                        onChange={(e) => setFormData({ ...formData, lastName: e.target.value })}\n                      />\n                    </div>\n                  </div>\n                </div>\n              )}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Email Address</label>\n                <div className=\"relative\">\n                  <Mail className=\"absolute left-3 top-3 text-gray-400 h-5 w-5\" />\n                  <input\n                    type=\"email\"\n                    required\n                    className=\"w-full pl-10 p-3 border border-gray-300 rounded-lg focus:ring-trini-red focus:border-trini-red\"\n                    placeholder=\"you@example.com\"\n                    value={formData.email}\n                    onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n                  />\n                </div>\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Password</label>\n                <div className=\"relative\">\n                  <Lock className=\"absolute left-3 top-3 text-gray-400 h-5 w-5\" />\n                  <input\n                    type=\"password\"\n                    required\n                    className=\"w-full pl-10 p-3 border border-gray-300 rounded-lg focus:ring-trini-red focus:border-trini-red\"\n                    placeholder=\"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\"\n                    value={formData.password}\n                    onChange={(e) => setFormData({ ...formData, password: e.target.value })}\n                  />\n                </div>\n              </div>\n            </div>\n\n            <div>\n              <button\n                type=\"submit\"\n                className=\"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-trini-red hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 shadow-lg transition-all\"\n              >\n                {isLogin ? 'Sign In' : 'Create Account'} <ArrowRight className=\"ml-2 h-4 w-4\" />\n              </button>\n            </div>\n\n            <div className=\"relative my-6\">\n              <div className=\"absolute inset-0 flex items-center\">\n                <div className=\"w-full border-t border-gray-300\"></div>\n              </div>\n              <div className=\"relative flex justify-center text-sm\">\n                <span className=\"px-2 bg-white text-gray-500\">Or continue with</span>\n              </div>\n            </div>\n\n            <button type=\"button\" className=\"w-full flex justify-center items-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50\">\n              <Globe className=\"h-4 w-4 mr-2 text-blue-600\" /> Google\n            </button>\n\n          </form>\n\n          <div className=\"text-center\">\n            <button onClick={() => setIsLogin(!isLogin)} className=\"text-sm text-trini-red hover:underline font-medium\">\n              {isLogin ? \"Don't have an account? Sign up\" : \"Already have an account? Log in\"}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};",
  "pages/Blog.tsx": "import React from 'react';\nimport { Calendar, User, ArrowRight, TrendingUp } from 'lucide-react';\nimport { Link } from 'react-router-dom';\n\nexport const Blog: React.FC = () => {\n  const posts = [\n    {\n      id: 1,\n      title: \"How 'Roti King' Increased Sales by 300% with TriniBuild\",\n      excerpt: \"From a small roadside stall to shipping frozen roti to Tobago. Learn how digital tools transformed this local business.\",\n      category: \"Success Stories\",\n      author: \"Ray Kunjal\",\n      date: \"Oct 12, 2025\",\n      image: \"https://images.unsplash.com/photo-1565557623262-b51c2513a641?q=80&w=800\"\n    },\n    {\n      id: 2,\n      title: \"5 Tips for Local SEO in Trinidad & Tobago\",\n      excerpt: \"Getting found on Google Maps is crucial. Here are 5 easy steps to optimize your TriniBuild profile.\",\n      category: \"Guides\",\n      author: \"Sarah Lee\",\n      date: \"Oct 08, 2025\",\n      image: \"https://images.unsplash.com/photo-1432888498266-38ffec3eaf0a?q=80&w=800\"\n    },\n    {\n      id: 3,\n      title: \"Introducing TriniRides: The Future of Transport\",\n      excerpt: \"We are expanding! Learn about our new rideshare features and how drivers can earn more.\",\n      category: \"Platform News\",\n      author: \"TriniBuild Team\",\n      date: \"Sep 25, 2025\",\n      image: \"https://images.unsplash.com/photo-1449965408869-eaa3f722e40d?q=80&w=800\"\n    }\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-white py-12\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"text-center mb-16\">\n          <h1 className=\"text-4xl font-extrabold text-gray-900 mb-4\">News & Insights</h1>\n          <p className=\"text-xl text-gray-500 max-w-2xl mx-auto\">\n            Stories from our community and updates on how to grow your business in the Caribbean.\n          </p>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n          {posts.map((post) => (\n            <div key={post.id} className=\"flex flex-col rounded-xl shadow-lg overflow-hidden border border-gray-100 hover:shadow-xl transition-all\">\n              <div className=\"h-48 w-full relative\">\n                <img src={post.image} alt={post.title} className=\"w-full h-full object-cover\" />\n                <div className=\"absolute top-4 left-4 bg-white/90 backdrop-blur px-3 py-1 rounded-full text-xs font-bold text-trini-red\">\n                  {post.category}\n                </div>\n              </div>\n              <div className=\"flex-1 bg-white p-6 flex flex-col justify-between\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center text-xs text-gray-500 mb-3\">\n                    <Calendar className=\"h-3 w-3 mr-1\" /> {post.date}\n                    <span className=\"mx-2\">\u2022</span>\n                    <User className=\"h-3 w-3 mr-1\" /> {post.author}\n                  </div>\n                  <Link to={`/blog/${post.id}`} className=\"block mt-2\">\n                    <p className=\"text-xl font-bold text-gray-900 hover:text-trini-red transition-colors\">{post.title}</p>\n                    <p className=\"mt-3 text-base text-gray-500\">{post.excerpt}</p>\n                  </Link>\n                </div>\n                <div className=\"mt-6\">\n                  <Link to={`/blog/${post.id}`} className=\"flex items-center text-sm font-bold text-trini-red hover:text-red-700\">\n                    Read full story <ArrowRight className=\"ml-2 h-4 w-4\" />\n                  </Link>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n\n        <div className=\"mt-16 bg-gray-50 rounded-2xl p-12 text-center border border-gray-100\">\n          <TrendingUp className=\"h-12 w-12 text-trini-teal mx-auto mb-4\" />\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Have a success story?</h2>\n          <p className=\"text-gray-600 mb-8 max-w-2xl mx-auto\">\n            If TriniBuild has helped your business grow, we'd love to hear about it and feature you on our blog and social media.\n          </p>\n          <Link to=\"/contact\" className=\"inline-block bg-trini-black text-white px-8 py-3 rounded-lg font-bold hover:bg-gray-800\">\n            Submit Your Story\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n};",
  "pages/BlogPost.tsx": "\nimport React from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { Calendar, User, ArrowLeft, Share2, Facebook, Twitter, Linkedin } from 'lucide-react';\n\nexport const BlogPost: React.FC = () => {\n  const { id } = useParams();\n\n  // In a real app, fetch this by ID. For now, we simulate dynamic content.\n  const post = {\n    title: \"How 'Roti King' Increased Sales by 300% with TriniBuild\",\n    date: \"Oct 12, 2025\",\n    author: \"Ray Kunjal\",\n    category: \"Success Stories\",\n    image: \"https://images.unsplash.com/photo-1565557623262-b51c2513a641?q=80&w=1200\",\n    content: `\n      <p class=\"lead text-xl text-gray-600 mb-6 font-medium\">\n        From a small roadside stall to shipping frozen roti to Tobago. Learn how digital tools transformed this local business.\n      </p>\n      \n      <h2>The Struggle of Cash Only</h2>\n      <p class=\"mb-4\">\n        For 15 years, Mr. Singh ran his shop on a cash-only basis. While the food was excellent, he missed out on corporate orders and customers who didn't carry cash. \"People would call and ask if they could transfer money, and I had to say no,\" Singh recalls.\n      </p>\n\n      <h2>The Digital Pivot</h2>\n      <p class=\"mb-4\">\n        Singh discovered TriniBuild's <strong>Community Plan</strong>. Within minutes, he had a digital menu. He didn't need a credit card processor; he simply used the <strong>WhatsApp Checkout</strong> feature.\n      </p>\n      \n      <blockquote class=\"border-l-4 border-trini-red pl-4 italic my-6 text-gray-700 bg-gray-50 p-4 rounded-r-lg\">\n        \"The first day I posted my TriniBuild link on Facebook, I got 20 orders for lunch delivery. I couldn't believe it.\"\n      </blockquote>\n\n      <h2>Scaling Up</h2>\n      <p class=\"mb-4\">\n        With the revenue tracking in his dashboard, Singh realized his \"Boneless Curry Goat\" was his bestseller. He used TriniBuild Go to hire drivers for deliveries, expanding his reach from just San Juan to Port of Spain and Chaguanas.\n      </p>\n\n      <h2>Conclusion</h2>\n      <p>\n        Today, Roti King is on the Enterprise plan, shipping frozen packs nationwide. It started with a free account.\n      </p>\n    `\n  };\n\n  return (\n    <div className=\"min-h-screen bg-white font-sans\">\n      {/* Header Image */}\n      <div className=\"h-[40vh] w-full relative\">\n        <img src={post.image} alt={post.title} className=\"w-full h-full object-cover\" />\n        <div className=\"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent\"></div>\n        <div className=\"absolute bottom-0 left-0 w-full p-8 md:p-12\">\n          <div className=\"max-w-4xl mx-auto\">\n            <Link to=\"/blog\" className=\"text-white/80 hover:text-white flex items-center mb-4 text-sm font-bold uppercase tracking-wider\">\n              <ArrowLeft className=\"h-4 w-4 mr-2\" /> Back to Blog\n            </Link>\n            <span className=\"bg-trini-red text-white px-3 py-1 rounded-full text-xs font-bold uppercase mb-4 inline-block\">\n              {post.category}\n            </span>\n            <h1 className=\"text-3xl md:text-5xl font-extrabold text-white mb-4 leading-tight\">\n              {post.title}\n            </h1>\n            <div className=\"flex items-center text-white/90 text-sm\">\n              <div className=\"flex items-center mr-6\">\n                <User className=\"h-4 w-4 mr-2\" /> {post.author}\n              </div>\n              <div className=\"flex items-center\">\n                <Calendar className=\"h-4 w-4 mr-2\" /> {post.date}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"max-w-4xl mx-auto px-4 py-12 grid grid-cols-1 lg:grid-cols-12 gap-12\">\n        {/* Main Content */}\n        <article className=\"lg:col-span-8 prose prose-lg prose-red max-w-none text-gray-800\">\n          <div dangerouslySetInnerHTML={{ __html: post.content }} />\n        </article>\n\n        {/* Sidebar */}\n        <aside className=\"lg:col-span-4 space-y-8\">\n           <div className=\"bg-gray-50 p-6 rounded-xl border border-gray-200\">\n              <h3 className=\"font-bold text-gray-900 mb-4\">Share this story</h3>\n              <div className=\"flex gap-4\">\n                 <button className=\"bg-blue-600 text-white p-2 rounded-full hover:bg-blue-700\"><Facebook className=\"h-5 w-5\" /></button>\n                 <button className=\"bg-sky-500 text-white p-2 rounded-full hover:bg-sky-600\"><Twitter className=\"h-5 w-5\" /></button>\n                 <button className=\"bg-blue-800 text-white p-2 rounded-full hover:bg-blue-900\"><Linkedin className=\"h-5 w-5\" /></button>\n                 <button className=\"bg-gray-800 text-white p-2 rounded-full hover:bg-gray-900\"><Share2 className=\"h-5 w-5\" /></button>\n              </div>\n           </div>\n\n           <div className=\"bg-trini-black text-white p-8 rounded-xl shadow-lg text-center\">\n              <h3 className=\"text-xl font-bold mb-2\">Start Your Own Story</h3>\n              <p className=\"text-gray-400 mb-6 text-sm\">Join Roti King and thousands of others.</p>\n              <Link to=\"/create-store\" className=\"block w-full bg-trini-red text-white py-3 rounded-lg font-bold hover:bg-red-700 transition-colors\">\n                 Build Free Store\n              </Link>\n           </div>\n        </aside>\n      </div>\n    </div>\n  );\n};\n",
  "pages/Classifieds.tsx": "\nimport React, { useState } from 'react';\nimport { Search, Filter, Camera, MapPin, DollarSign, Tag, Clock, MessageCircle, ChevronRight, TrendingUp, Star } from 'lucide-react';\nimport { AdSpot } from '../components/AdSpot';\n\nexport const Classifieds: React.FC = () => {\n   const [activeCategory, setActiveCategory] = useState('All');\n\n   const categories = ['All', 'Vehicles', 'Electronics', 'Furniture', 'Real Estate', 'Jobs', 'Services'];\n\n   const items = [\n      { id: 1, title: \"2018 Toyota Aqua\", price: 65000, location: \"Chaguanas\", category: \"Vehicles\", image: \"https://images.unsplash.com/photo-1619682817481-e994891cd1f5?q=80&w=800\", posted: \"2 hrs ago\", promoted: true },\n      { id: 2, title: \"iPhone 14 Pro Max\", price: 6500, location: \"Port of Spain\", category: \"Electronics\", image: \"https://images.unsplash.com/photo-1695048133142-1a20484d2569?q=80&w=800\", posted: \"5 hrs ago\", promoted: false },\n      { id: 3, title: \"L-Shape Sofa Set\", price: 2500, location: \"Arima\", category: \"Furniture\", image: \"https://images.unsplash.com/photo-1555041469-a586c61ea9bc?q=80&w=800\", posted: \"1 day ago\", promoted: false },\n      { id: 4, title: \"Gaming PC Full Setup\", price: 8000, location: \"San Fernando\", category: \"Electronics\", image: \"https://images.unsplash.com/photo-1587202372775-e229f172b9d7?q=80&w=800\", posted: \"3 days ago\", promoted: true },\n      { id: 5, title: \"Honda Civic Rims 17 inch\", price: 3000, location: \"Curepe\", category: \"Vehicles\", image: \"https://images.unsplash.com/photo-1568605117036-5fe5e7bab0b7?q=80&w=800\", posted: \"1 week ago\", promoted: false },\n   ];\n\n   const filteredItems = activeCategory === 'All' ? items : items.filter(i => i.category === activeCategory);\n\n   const handleContact = (title: string) => {\n      alert(`Opening WhatsApp chat for: ${title}`);\n   };\n\n   return (\n      <div className=\"min-h-screen bg-gray-50 font-sans pb-20\">\n         {/* Header */}\n         <div className=\"bg-white shadow-sm border-b border-gray-200 py-8\">\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n               <div className=\"flex flex-col md:flex-row justify-between items-center gap-6\">\n                  <div>\n                     <h1 className=\"text-3xl font-extrabold text-gray-900\">TriniBuild <span className=\"text-purple-600\">Market</span></h1>\n                     <p className=\"text-gray-500\">Buy and sell anything in Trinidad & Tobago.</p>\n                  </div>\n                  <div className=\"flex gap-3\">\n                     <button onClick={() => alert(\"Post Ad Wizard\")} className=\"bg-purple-600 text-white px-6 py-3 rounded-lg font-bold shadow-lg hover:bg-purple-700 flex items-center\">\n                        <Camera className=\"h-5 w-5 mr-2\" /> Post Free Ad\n                     </button>\n                  </div>\n               </div>\n\n               {/* Search & Filter */}\n               <div className=\"mt-8 flex flex-col md:flex-row gap-4\">\n                  <div className=\"relative flex-grow\">\n                     <Search className=\"absolute left-3 top-3 text-gray-400 h-5 w-5\" />\n                     <input type=\"text\" placeholder=\"What are you looking for?\" className=\"w-full pl-10 p-3 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500\" />\n                  </div>\n                  <div className=\"flex gap-2 overflow-x-auto pb-1\">\n                     {categories.map(cat => (\n                        <button\n                           key={cat}\n                           onClick={() => setActiveCategory(cat)}\n                           className={`px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-colors ${activeCategory === cat ? 'bg-purple-100 text-purple-700 border border-purple-200' : 'bg-white border border-gray-200 text-gray-600 hover:bg-gray-50'}`}\n                        >\n                           {cat}\n                        </button>\n                     ))}\n                  </div>\n               </div>\n            </div>\n         </div>\n\n         {/* Listings */}\n         <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n\n            {/* Ad Spot */}\n            <AdSpot page=\"classifieds\" slot=\"top\" className=\"mb-8\" />\n\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\n               {filteredItems.map(item => (\n                  <div key={item.id} className={`bg-white rounded-xl border overflow-hidden hover:shadow-lg transition-all group ${item.promoted ? 'border-yellow-400 ring-1 ring-yellow-400' : 'border-gray-200'}`}>\n                     <div className=\"h-48 relative\">\n                        <img src={item.image} alt={item.title} className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500\" />\n                        {item.promoted && (\n                           <div className=\"absolute top-2 left-2 bg-yellow-400 text-black text-[10px] font-bold px-2 py-1 rounded shadow-sm flex items-center\">\n                              <TrendingUp className=\"h-3 w-3 mr-1\" /> Featured\n                           </div>\n                        )}\n                        <div className=\"absolute bottom-2 right-2 bg-black/70 backdrop-blur text-white text-xs font-bold px-2 py-1 rounded\">\n                           {item.posted}\n                        </div>\n                     </div>\n                     <div className=\"p-4\">\n                        <div className=\"flex justify-between items-start mb-2\">\n                           <h3 className=\"font-bold text-gray-900 line-clamp-1\" title={item.title}>{item.title}</h3>\n                        </div>\n                        <p className=\"text-purple-700 font-extrabold text-lg mb-3\">TT$ {item.price.toLocaleString()}</p>\n\n                        <div className=\"flex items-center text-xs text-gray-500 mb-4\">\n                           <MapPin className=\"h-3 w-3 mr-1\" /> {item.location}\n                           <span className=\"mx-2\">\u2022</span>\n                           <Tag className=\"h-3 w-3 mr-1\" /> {item.category}\n                        </div>\n\n                        <button\n                           onClick={() => handleContact(item.title)}\n                           className=\"w-full border border-purple-600 text-purple-700 font-bold py-2 rounded-lg hover:bg-purple-50 flex items-center justify-center text-sm transition-colors\"\n                        >\n                           <MessageCircle className=\"h-4 w-4 mr-2\" /> Chat Seller\n                        </button>\n                     </div>\n                  </div>\n               ))}\n            </div>\n         </div>\n\n         {/* Monetization Strip */}\n         <div className=\"max-w-4xl mx-auto px-4 mt-8\">\n            <div className=\"bg-gradient-to-r from-gray-900 to-purple-900 rounded-xl p-6 text-white flex flex-col md:flex-row items-center justify-between shadow-xl\">\n               <div className=\"mb-4 md:mb-0\">\n                  <h3 className=\"font-bold text-xl mb-1 flex items-center\"><Star className=\"h-5 w-5 text-yellow-400 mr-2 fill-current\" /> Sell Faster with Boost</h3>\n                  <p className=\"text-purple-200 text-sm\">Get 10x more views on your items.</p>\n               </div>\n               <div className=\"flex gap-4\">\n                  <button className=\"bg-white/10 border border-white/20 px-4 py-2 rounded-lg text-sm font-bold hover:bg-white/20\">Highlight ($5)</button>\n                  <button className=\"bg-yellow-500 text-black px-6 py-2 rounded-lg text-sm font-bold hover:bg-yellow-400 shadow-lg\">Top of Page ($20)</button>\n               </div>\n            </div>\n         </div>\n      </div>\n   );\n};\n",
  "pages/Contact.tsx": "import React, { useState } from 'react';\nimport { Mail, Phone, MapPin, Send, CheckCircle } from 'lucide-react';\n\nexport const Contact: React.FC = () => {\n  const [submitted, setSubmitted] = useState(false);\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    setSubmitted(true);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 py-12\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"text-center mb-12\">\n          <h1 className=\"text-3xl font-extrabold text-gray-900 sm:text-4xl\">\n            Get in touch with <span className=\"text-trini-red\">TriniBuild</span>\n          </h1>\n          <p className=\"mt-4 text-xl text-gray-500\">\n            Whether you're a business owner, driver, or looking for a partnership, we're here to help.\n          </p>\n        </div>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-12\">\n          {/* Contact Info */}\n          <div className=\"bg-trini-black text-white rounded-2xl shadow-xl p-10 flex flex-col justify-between\">\n            <div>\n              <h3 className=\"text-2xl font-bold mb-6\">Contact Information</h3>\n              <div className=\"space-y-6\">\n                <div className=\"flex items-start\">\n                  <Phone className=\"h-6 w-6 text-trini-red mr-4 mt-1\" />\n                  <div>\n                    <p className=\"font-bold\">Phone</p>\n                    <p className=\"text-gray-300\">+1 (868) 555-0199</p>\n                    <p className=\"text-gray-500 text-sm\">Mon-Fri, 8am - 5pm</p>\n                  </div>\n                </div>\n                <div className=\"flex items-start\">\n                  <Mail className=\"h-6 w-6 text-trini-red mr-4 mt-1\" />\n                  <div>\n                    <p className=\"font-bold\">Email</p>\n                    <p className=\"text-gray-300\">sales@trinibuild.tt</p>\n                    <p className=\"text-gray-300\">support@trinibuild.tt</p>\n                  </div>\n                </div>\n                <div className=\"flex items-start\">\n                  <MapPin className=\"h-6 w-6 text-trini-red mr-4 mt-1\" />\n                  <div>\n                    <p className=\"font-bold\">Office</p>\n                    <p className=\"text-gray-300\">\n                      One Woodbrook Place,<br />\n                      Port of Spain,<br />\n                      Trinidad & Tobago\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"mt-10\">\n              <div className=\"bg-white/10 p-6 rounded-xl backdrop-blur-sm\">\n                <p className=\"italic text-gray-300\">\n                  \"TriniBuild's support team helped us get our restaurant online in under 24 hours. Fantastic service.\"\n                </p>\n                <p className=\"font-bold mt-4\">- Roti King, San Juan</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Contact Form */}\n          <div className=\"bg-white rounded-2xl shadow-xl p-10\">\n            {submitted ? (\n              <div className=\"h-full flex flex-col items-center justify-center text-center\">\n                <div className=\"bg-green-100 p-4 rounded-full mb-6\">\n                  <CheckCircle className=\"h-12 w-12 text-green-600\" />\n                </div>\n                <h3 className=\"text-2xl font-bold text-gray-900 mb-2\">Message Sent!</h3>\n                <p className=\"text-gray-500\">\n                  Thank you for reaching out. Our team will get back to you within 24 hours.\n                </p>\n                <button \n                  onClick={() => setSubmitted(false)} \n                  className=\"mt-8 text-trini-red font-bold hover:underline\"\n                >\n                  Send another message\n                </button>\n              </div>\n            ) : (\n              <form onSubmit={handleSubmit} className=\"space-y-6\">\n                <div>\n                  <label className=\"block text-sm font-bold text-gray-700 mb-2\">Full Name</label>\n                  <input type=\"text\" required className=\"w-full border border-gray-300 rounded-lg p-3 focus:ring-trini-red focus:border-trini-red\" placeholder=\"John Doe\" />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-bold text-gray-700 mb-2\">Email Address</label>\n                  <input type=\"email\" required className=\"w-full border border-gray-300 rounded-lg p-3 focus:ring-trini-red focus:border-trini-red\" placeholder=\"john@example.com\" />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-bold text-gray-700 mb-2\">Subject</label>\n                  <select className=\"w-full border border-gray-300 rounded-lg p-3 focus:ring-trini-red focus:border-trini-red bg-white\">\n                    <option>General Inquiry</option>\n                    <option>Sales / Enterprise Plan</option>\n                    <option>Technical Support</option>\n                    <option>Partnership</option>\n                  </select>\n                </div>\n                <div>\n                  <label className=\"block text-sm font-bold text-gray-700 mb-2\">Message</label>\n                  <textarea required rows={4} className=\"w-full border border-gray-300 rounded-lg p-3 focus:ring-trini-red focus:border-trini-red\" placeholder=\"How can we help you?\"></textarea>\n                </div>\n                <button type=\"submit\" className=\"w-full bg-trini-red text-white font-bold py-4 rounded-lg hover:bg-red-700 transition-colors shadow-lg flex items-center justify-center\">\n                  Send Message <Send className=\"ml-2 h-5 w-5\" />\n                </button>\n              </form>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};",
  "pages/Dashboard.tsx": "import React, { useState, useEffect } from 'react';\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, AreaChart, Area, LineChart, Line } from 'recharts';\nimport {\n  DollarSign, Users, ShoppingBag, Plus, Edit, Trash2, X, Image as ImageIcon,\n  ArrowUp, UploadCloud, Loader2, Sparkles, Wand2, ExternalLink,\n  Store, Package, Settings as SettingsIcon, MessageCircle, ScanLine, Lock, TrendingUp, Crown,\n  CheckCircle, Clock, Truck, AlertCircle, FileText, Briefcase, Plane, FileCheck,\n  Car, Ticket, Home as HomeIcon, MapPin, Star, ChevronRight, LayoutGrid\n} from 'lucide-react';\nimport { Product } from '../types';\nimport { generateProductDescription, generateProductImage, analyzeProductPhoto, generateStoreLogo } from '../services/geminiService';\nimport { orderService, OrderResponse } from '../services/orderService';\nimport { documentService, DocumentRequest } from '../services/documentService';\nimport { Link } from 'react-router-dom';\nimport { ChatWidget } from '../components/ChatWidget';\nimport { storeService } from '../services/storeService';\nimport { ListingDescriptionGenerator } from '../components/ListingDescriptionGenerator';\n\nexport const Dashboard: React.FC = () => {\n  // App Context State\n  const [activeApp, setActiveApp] = useState<'store' | 'driver' | 'pro' | 'promoter' | 'agent'>('store');\n\n  // Store State\n  const [activeTab, setActiveTab] = useState<'overview' | 'products' | 'orders' | 'documents' | 'settings'>('overview');\n\n  // User Subscription State (Simulated)\n  const [isPro, setIsPro] = useState(false);\n\n  // Data States\n  const [vendorOrders, setVendorOrders] = useState<OrderResponse[]>([]);\n  const [products, setProducts] = useState<Product[]>([]);\n\n  // Modal States\n  const [isProductModalOpen, setIsProductModalOpen] = useState(false);\n  const [editingProduct, setEditingProduct] = useState<Product | null>(null);\n\n  // Product Form State\n  const [formData, setFormData] = useState<Partial<Product>>({\n    name: '',\n    price: 0,\n    stock: 0,\n    description: '',\n    image: '',\n    status: 'active'\n  });\n  const [uploading, setUploading] = useState(false);\n  const [generatingDescription, setGeneratingDescription] = useState(false);\n  const [generatingImage, setGeneratingImage] = useState(false);\n  const [analyzing, setAnalyzing] = useState(false);\n  const [isSaving, setIsSaving] = useState(false);\n\n  // Branding / Settings State\n  const [logoPrompt, setLogoPrompt] = useState({ name: 'My Store', type: 'Restaurant' });\n  const [generatedLogo, setGeneratedLogo] = useState('');\n  const [generatingLogo, setGeneratingLogo] = useState(false);\n  const [whatsappNumber, setWhatsappNumber] = useState('');\n\n  // Document Generation State\n  const [docType, setDocType] = useState<DocumentRequest['type']>('job_letter');\n  const [isGeneratingDoc, setIsGeneratingDoc] = useState(false);\n  const [docSuccess, setDocSuccess] = useState<string | null>(null);\n\n  // AI Generator State\n  const [showDescriptionGenerator, setShowDescriptionGenerator] = useState(false);\n\n  // Agent Test State\n  const [showAgentTest, setShowAgentTest] = useState(false);\n\n  // Store Context for AI Agent\n  const storeContext = {\n    name: logoPrompt.name,\n    description: \"A local business powered by TriniBuild.\",\n    whatsapp: whatsappNumber,\n    products: products\n  };\n\n  // Chart Data (Mock)\n  const revenueData = [\n    { name: 'Mon', sales: 0 },\n    { name: 'Tue', sales: 0 },\n    { name: 'Wed', sales: 0 },\n    { name: 'Thu', sales: 0 },\n    { name: 'Fri', sales: 0 },\n    { name: 'Sat', sales: 0 },\n    { name: 'Sun', sales: 0 },\n  ];\n\n  // Handlers\n  const [storeId, setStoreId] = useState<string | null>(null);\n\n  // ... \n\n  // Handlers\n  const handleOpenAdd = () => {\n    setEditingProduct(null);\n    setFormData({ title: '', price: 0, stock: 0, description: '', images: [], status: 'active' } as any); // Cast for now as interface mismatch might exist\n    setIsProductModalOpen(true);\n  };\n\n  const handleOpenEdit = (product: Product) => {\n    setEditingProduct(product);\n    setFormData({\n      ...product,\n      name: product.name,\n      image: product.image\n    } as any);\n    setIsProductModalOpen(true);\n  };\n\n  const handleStatusUpdate = async (orderId: string, status: string) => {\n    setVendorOrders(prev => prev.map(o => o.id === orderId ? { ...o, status } : o));\n  };\n\n  const handleGenerateDocument = async () => {\n    setIsGeneratingDoc(true);\n    try {\n      await new Promise(resolve => setTimeout(resolve, 2000));\n      setDocSuccess(`Your ${docType.replace(/_/g, ' ')} has been generated successfully.`);\n    } catch (e) {\n      alert(\"Failed to generate document\");\n    } finally {\n      setIsGeneratingDoc(false);\n    }\n  };\n\n  const handleDeleteProduct = async (id: string) => {\n    if (window.confirm('Delete this product?')) {\n      const success = await storeService.deleteProduct(id);\n      if (success) {\n        setProducts(products.filter(p => p.id !== id));\n      } else {\n        alert(\"Failed to delete product\");\n      }\n    }\n  };\n\n  // Load Store Data on Mount\n  useEffect(() => {\n    // Check Subscription\n    const subscription = localStorage.getItem('trinibuild_subscription');\n    if (subscription === 'Growth' || subscription === 'Empire') {\n      setIsPro(true);\n    }\n\n    const loadStore = async () => {\n      const store = await storeService.getMyStore();\n      if (store) {\n        setStoreId(store.id);\n        setLogoPrompt({ name: store.businessName, type: 'Store' });\n        setProducts(store.products || []);\n        setWhatsappNumber(store.whatsapp || '');\n      }\n    };\n    loadStore();\n\n    // Fetch Orders\n    const fetchOrders = async () => {\n      const orders = await orderService.getVendorOrders();\n      setVendorOrders(orders);\n    };\n    fetchOrders();\n  }, []);\n\n  const handleSaveProduct = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!formData.name || formData.price === undefined) return;\n    setIsSaving(true);\n\n    let finalImage = formData.image;\n    if (!finalImage && formData.name) {\n      try {\n        finalImage = await generateProductImage(formData.name);\n      } catch (e) { console.log(\"Auto-image failed\"); }\n    }\n\n    const productData = {\n      title: formData.name,\n      price: Number(formData.price),\n      description: formData.description,\n      images: finalImage ? [finalImage] : [],\n      category: 'General'\n    };\n\n    try {\n      if (editingProduct) {\n        const updated = await storeService.updateProduct(editingProduct.id, productData);\n        if (updated) {\n          setProducts(products.map(p => p.id === updated.id ? updated : p));\n        }\n      } else {\n        if (storeId) {\n          const newProduct = await storeService.addProduct(storeId, productData);\n          if (newProduct) {\n            setProducts([...products, newProduct]);\n          }\n        } else {\n          alert(\"No store found. Please create a store first.\");\n        }\n      }\n    } catch (e) {\n      console.error(\"Save failed\", e);\n      alert(\"Failed to save product\");\n    }\n\n    setIsProductModalOpen(false);\n    setIsSaving(false);\n  };\n\n  // --- APP SWITCHER LOGIC ---\n  const apps = [\n    { id: 'store', label: 'Marketplace', icon: Store, color: 'text-trini-red', bg: 'bg-red-50' },\n    { id: 'driver', label: 'Driver', icon: Car, color: 'text-blue-600', bg: 'bg-blue-50' },\n    { id: 'pro', label: 'Service Pro', icon: Briefcase, color: 'text-purple-600', bg: 'bg-purple-50' },\n    { id: 'promoter', label: 'Promoter', icon: Ticket, color: 'text-pink-600', bg: 'bg-pink-50' },\n    { id: 'agent', label: 'Real Estate', icon: HomeIcon, color: 'text-green-600', bg: 'bg-green-50' },\n  ];\n\n  return (\n    <div className=\"flex min-h-screen bg-gray-50 font-sans\">\n      {/* Sidebar */}\n      <div className=\"w-64 bg-white border-r border-gray-200 hidden md:flex flex-col fixed h-full z-10\">\n\n        {/* App Switcher Header */}\n        <div className=\"p-4 border-b border-gray-100\">\n          <div className=\"flex items-center gap-3 mb-4\">\n            <div className=\"h-10 w-10 bg-trini-black rounded-full flex items-center justify-center text-white font-bold text-lg\">\n              RK\n            </div>\n            <div>\n              <h2 className=\"font-bold text-gray-900 leading-tight\">Ray Kunjal</h2>\n              <p className=\"text-xs text-gray-500\">Unified Account</p>\n            </div>\n          </div>\n\n          <div className=\"space-y-1\">\n            <p className=\"text-xs font-bold text-gray-400 uppercase px-2 mb-2\">My Apps</p>\n            {apps.map(app => (\n              <button\n                key={app.id}\n                onClick={() => setActiveApp(app.id as any)}\n                className={`w-full flex items-center px-3 py-2 rounded-lg transition-all ${activeApp === app.id ? `${app.bg} ${app.color} font-bold shadow-sm` : 'text-gray-600 hover:bg-gray-50'}`}\n              >\n                <app.icon className=\"h-4 w-4 mr-3\" />\n                {app.label}\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* Contextual Navigation */}\n        <nav className=\"flex-grow p-4 space-y-1 overflow-y-auto\">\n          {activeApp === 'store' && (\n            <>\n              <p className=\"text-xs font-bold text-gray-400 uppercase px-2 mb-2 mt-2\">Store Menu</p>\n              {[\n                { id: 'overview', icon: Sparkles, label: 'Overview' },\n                { id: 'products', icon: ShoppingBag, label: 'Products' },\n                { id: 'orders', icon: Package, label: 'Orders' },\n                { id: 'documents', icon: FileText, label: 'Documents' },\n                { id: 'settings', icon: SettingsIcon, label: 'Settings' },\n              ].map((item) => (\n                <button\n                  key={item.id}\n                  onClick={() => setActiveTab(item.id as any)}\n                  className={`w-full flex items-center px-4 py-3 rounded-lg transition-colors ${activeTab === item.id\n                    ? 'bg-gray-100 text-gray-900 font-bold'\n                    : 'text-gray-600 hover:bg-gray-50'\n                    }`}\n                >\n                  <item.icon className=\"h-5 w-5 mr-3\" />\n                  {item.label}\n                </button>\n              ))}\n            </>\n          )}\n\n          {activeApp === 'driver' && (\n            <div className=\"text-center py-8\">\n              <Car className=\"h-12 w-12 text-gray-300 mx-auto mb-2\" />\n              <p className=\"text-sm text-gray-500\">Driver Dashboard</p>\n            </div>\n          )}\n          {/* Add similar placeholders for other apps if needed in nav */}\n        </nav>\n\n        {/* Bottom Actions */}\n        <div className=\"p-4 border-t border-gray-100\">\n          {activeApp === 'store' && (\n            <Link to=\"/store/preview\" target=\"_blank\" className=\"flex items-center justify-center w-full bg-gray-100 text-gray-700 py-2 rounded-lg text-sm font-bold hover:bg-gray-200\">\n              <ExternalLink className=\"h-4 w-4 mr-2\" /> View Storefront\n            </Link>\n          )}\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"flex-grow md:ml-64 p-8\">\n\n        {/* --- STORE DASHBOARD --- */}\n        {activeApp === 'store' && (\n          <>\n            {/* OVERVIEW TAB */}\n            {activeTab === 'overview' && (\n              <div className=\"space-y-6 animate-in fade-in\">\n                <div className=\"flex justify-between items-center\">\n                  <h1 className=\"text-2xl font-bold text-gray-900\">Store Overview</h1>\n                  {!isPro && (\n                    <Link to=\"/pricing\" className=\"bg-gradient-to-r from-yellow-500 to-orange-500 text-white px-4 py-2 rounded-lg font-bold text-sm flex items-center shadow-lg hover:scale-105 transition-transform\">\n                      <Crown className=\"h-4 w-4 mr-2\" /> Upgrade to Pro\n                    </Link>\n                  )}\n                </div>\n\n                {/* Stats Cards */}\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                  <div className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-200\">\n                    <div className=\"flex justify-between items-start\">\n                      <div>\n                        <p className=\"text-sm text-gray-500 font-medium\">Total Revenue</p>\n                        <h3 className=\"text-3xl font-bold text-gray-900 mt-2\">TT$ {vendorOrders.reduce((acc, order) => acc + order.total, 0).toFixed(2)}</h3>\n                      </div>\n                      <div className=\"p-3 bg-green-50 rounded-lg text-green-600\">\n                        <DollarSign className=\"h-6 w-6\" />\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-200\">\n                    <div className=\"flex justify-between items-start\">\n                      <div>\n                        <p className=\"text-sm text-gray-500 font-medium\">Total Orders</p>\n                        <h3 className=\"text-3xl font-bold text-gray-900 mt-2\">{vendorOrders.length}</h3>\n                      </div>\n                      <div className=\"p-3 bg-blue-50 rounded-lg text-blue-600\">\n                        <Package className=\"h-6 w-6\" />\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-200 opacity-75 relative overflow-hidden\">\n                    {!isPro && (\n                      <div className=\"absolute inset-0 bg-white/60 backdrop-blur-sm flex items-center justify-center z-10\">\n                        <Link to=\"/pricing\" className=\"flex items-center text-sm font-bold text-gray-900 bg-white px-3 py-1 rounded-full shadow border border-gray-200 hover:bg-gray-50\">\n                          <Lock className=\"h-3 w-3 mr-2 text-trini-red\" /> Unlock Insights\n                        </Link>\n                      </div>\n                    )}\n                    <div className=\"flex justify-between items-start\">\n                      <div>\n                        <p className=\"text-sm text-gray-500 font-medium\">Customer LTV</p>\n                        <h3 className=\"text-3xl font-bold text-gray-900 mt-2\">--</h3>\n                      </div>\n                      <div className=\"p-3 bg-purple-50 rounded-lg text-purple-600\">\n                        <TrendingUp className=\"h-6 w-6\" />\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Chart Area (Gated) */}\n                <div className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-200 h-80 relative\">\n                  <h3 className=\"text-lg font-bold text-gray-900 mb-6\">Sales Performance</h3>\n                  {!isPro && (\n                    <div className=\"absolute inset-0 top-16 z-10 flex flex-col items-center justify-center bg-white/50 backdrop-blur-sm rounded-b-xl\">\n                      <Lock className=\"h-10 w-10 text-gray-400 mb-2\" />\n                      <h4 className=\"font-bold text-gray-900\">Analytics Locked</h4>\n                      <p className=\"text-sm text-gray-500 mb-4\">Upgrade to see detailed sales trends.</p>\n                      <Link to=\"/pricing\" className=\"bg-trini-black text-white px-6 py-2 rounded-full font-bold text-sm hover:bg-gray-800\">\n                        Unlock Charts\n                      </Link>\n                    </div>\n                  )}\n                  <ResponsiveContainer width=\"100%\" height=\"100%\">\n                    <AreaChart data={revenueData}>\n                      <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"#f0f0f0\" />\n                      <XAxis dataKey=\"name\" axisLine={false} tickLine={false} tick={{ fill: '#9ca3af' }} dy={10} />\n                      <YAxis axisLine={false} tickLine={false} tick={{ fill: '#9ca3af' }} />\n                      <Tooltip />\n                      <Area type=\"monotone\" dataKey=\"sales\" stroke=\"#CE1126\" strokeWidth={3} fillOpacity={0.1} fill=\"#CE1126\" />\n                    </AreaChart>\n                  </ResponsiveContainer>\n                </div>\n              </div>\n            )}\n\n            {/* PRODUCTS TAB */}\n            {activeTab === 'products' && (\n              <div className=\"animate-in fade-in\">\n                <div className=\"flex justify-between items-center mb-6\">\n                  <h1 className=\"text-2xl font-bold text-gray-900\">Products ({products.length}/10 Free)</h1>\n                  <div className=\"flex gap-3\">\n                    <button className=\"bg-gray-100 text-gray-400 px-4 py-2 rounded-lg font-bold flex items-center cursor-not-allowed\" title=\"Upgrade to Pro for Bulk Upload\">\n                      <UploadCloud className=\"h-5 w-5 mr-2\" /> Bulk Upload (Pro)\n                    </button>\n                    <button onClick={handleOpenAdd} className=\"bg-trini-red text-white px-4 py-2 rounded-lg font-bold flex items-center hover:bg-red-700 transition-colors\">\n                      <Plus className=\"h-5 w-5 mr-2\" /> Add Product\n                    </button>\n                  </div>\n                </div>\n\n                {products.length === 0 ? (\n                  <div className=\"text-center py-20 bg-white rounded-xl border-2 border-dashed border-gray-300\">\n                    <ShoppingBag className=\"h-16 w-16 text-gray-300 mx-auto mb-4\" />\n                    <h3 className=\"text-lg font-bold text-gray-900\">No Products Yet</h3>\n                    <p className=\"text-gray-500 mb-6\">Start building your catalog.</p>\n                    <button onClick={handleOpenAdd} className=\"text-trini-red font-bold hover:underline\">\n                      Add your first product\n                    </button>\n                  </div>\n                ) : (\n                  <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden\">\n                    <table className=\"min-w-full divide-y divide-gray-200\">\n                      <thead className=\"bg-gray-50\">\n                        <tr>\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Product</th>\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Price</th>\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th>\n                          <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th>\n                        </tr>\n                      </thead>\n                      <tbody className=\"bg-white divide-y divide-gray-200\">\n                        {products.map((product) => (\n                          <tr key={product.id}>\n                            <td className=\"px-6 py-4 whitespace-nowrap\">\n                              <div className=\"flex items-center\">\n                                <div className=\"h-10 w-10 flex-shrink-0\">\n                                  <img className=\"h-10 w-10 rounded-lg object-cover\" src={product.image || 'https://via.placeholder.com/40'} alt=\"\" />\n                                </div>\n                                <div className=\"ml-4\">\n                                  <div className=\"text-sm font-medium text-gray-900\">{product.name}</div>\n                                  <div className=\"text-xs text-gray-500\">Stock: {product.stock}</div>\n                                </div>\n                              </div>\n                            </td>\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                              TT$ {product.price}\n                            </td>\n                            <td className=\"px-6 py-4 whitespace-nowrap\">\n                              <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${product.status === 'active' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`}>\n                                {product.status}\n                              </span>\n                            </td>\n                            <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\n                              <button onClick={() => handleOpenEdit(product)} className=\"text-indigo-600 hover:text-indigo-900 mr-4\"><Edit className=\"h-4 w-4\" /></button>\n                              <button onClick={() => handleDeleteProduct(product.id)} className=\"text-red-600 hover:text-red-900\"><Trash2 className=\"h-4 w-4\" /></button>\n                            </td>\n                          </tr>\n                        ))}\n                      </tbody>\n                    </table>\n                  </div>\n                )}\n              </div>\n            )}\n\n            {activeTab === 'settings' && (\n              <div className=\"text-center py-10\">\n                <h2 className=\"text-xl font-bold\">Settings</h2>\n                <p className=\"text-gray-500\">Configure your store branding here.</p>\n              </div>\n            )}\n\n            {activeTab === 'orders' && (\n              <div className=\"animate-in fade-in\">\n                <h1 className=\"text-2xl font-bold text-gray-900 mb-6\">Orders</h1>\n                {vendorOrders.length === 0 ? (\n                  <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 text-center py-16\">\n                    <Package className=\"h-12 w-12 text-gray-300 mx-auto mb-3\" />\n                    <h3 className=\"text-lg font-bold text-gray-900\">No Orders Yet</h3>\n                    <p className=\"text-gray-500\">Share your store link to start selling.</p>\n                  </div>\n                ) : (\n                  <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden\">\n                    <table className=\"min-w-full divide-y divide-gray-200\">\n                      <thead className=\"bg-gray-50\">\n                        <tr>\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Order ID</th>\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Customer</th>\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Date</th>\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Total</th>\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Method</th>\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th>\n                          <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th>\n                        </tr>\n                      </thead>\n                      <tbody className=\"bg-white divide-y divide-gray-200\">\n                        {vendorOrders.map((order) => (\n                          <tr key={order.id} className=\"hover:bg-gray-50 transition-colors\">\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900\">\n                              {order.orderNumber}\n                            </td>\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                              {order.customerName}\n                            </td>\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                              {order.createdAt ? new Date(order.createdAt).toLocaleDateString() : 'N/A'}\n                            </td>\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\n                              TT$ {order.total.toFixed(2)}\n                            </td>\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                              <div className=\"flex flex-col\">\n                                <span className=\"text-xs font-bold uppercase\">{order.deliveryOption}</span>\n                                <span className=\"text-[10px] text-gray-400\">{order.paymentMethod?.replace(/_/g, ' ')}</span>\n                              </div>\n                            </td>\n                            <td className=\"px-6 py-4 whitespace-nowrap\">\n                              <span className={`px-2 py-1 inline-flex text-xs leading-5 font-bold rounded-full \n                                                ${order.status === 'PENDING' ? 'bg-yellow-100 text-yellow-800' :\n                                  order.status === 'PROCESSING' ? 'bg-blue-100 text-blue-800' :\n                                    order.status === 'COMPLETED' ? 'bg-green-100 text-green-800' :\n                                      'bg-gray-100 text-gray-800'}`}>\n                                {order.status}\n                              </span>\n                            </td>\n                            <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\n                              <div className=\"flex justify-end gap-2\">\n                                {order.status === 'PENDING' && (\n                                  <button\n                                    onClick={() => handleStatusUpdate(order.id, 'PROCESSING')}\n                                    className=\"text-blue-600 hover:text-blue-900 bg-blue-50 px-2 py-1 rounded text-xs font-bold\"\n                                  >\n                                    Accept\n                                  </button>\n                                )}\n                                {order.status === 'PROCESSING' && (\n                                  <button\n                                    onClick={() => handleStatusUpdate(order.id, 'COMPLETED')}\n                                    className=\"text-green-600 hover:text-green-900 bg-green-50 px-2 py-1 rounded text-xs font-bold\"\n                                  >\n                                    Complete\n                                  </button>\n                                )}\n                                <button className=\"text-gray-400 hover:text-gray-600\">\n                                  <ExternalLink className=\"h-4 w-4\" />\n                                </button>\n                              </div>\n                            </td>\n                          </tr>\n                        ))}\n                      </tbody>\n                    </table>\n                  </div>\n                )}\n              </div>\n            )}\n\n            {/* DOCUMENTS TAB */}\n            {activeTab === 'documents' && (\n              <div className=\"animate-in fade-in\">\n                <div className=\"mb-8\">\n                  <h1 className=\"text-2xl font-bold text-gray-900\">Documentation Freedom</h1>\n                  <p className=\"text-gray-500 mt-2\">Stop getting rejected. Automatically generate the paperwork financial institutions require.</p>\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12\">\n                  {[\n                    { id: 'job_letter', icon: Briefcase, title: 'Job Letters', desc: 'Proof of self-employment for loans.' },\n                    { id: 'proof_of_income', icon: DollarSign, title: 'Proof of Income', desc: 'Verified statements from sales data.' },\n                    { id: 'visa_letter', icon: Plane, title: 'Visa Letters', desc: 'Support docs for US/UK/Canada interviews.' },\n                    { id: 'invoice', icon: FileText, title: 'Invoices', desc: 'Professional white-label invoices.' },\n                  ].map((doc) => (\n                    <button\n                      key={doc.id}\n                      onClick={() => setDocType(doc.id as any)}\n                      className={`p-6 rounded-xl border text-left transition-all ${docType === doc.id\n                        ? 'border-trini-red bg-red-50 ring-2 ring-trini-red ring-opacity-20'\n                        : 'border-gray-200 bg-white hover:border-gray-300 hover:shadow-md'\n                        }`}\n                    >\n                      <div className={`w-12 h-12 rounded-lg flex items-center justify-center mb-4 ${docType === doc.id ? 'bg-trini-red text-white' : 'bg-gray-100 text-gray-600'\n                        }`}>\n                        <doc.icon className=\"h-6 w-6\" />\n                      </div>\n                      <h3 className=\"font-bold text-gray-900 mb-1\">{doc.title}</h3>\n                      <p className=\"text-xs text-gray-500 leading-relaxed\">{doc.desc}</p>\n                    </button>\n                  ))}\n                </div>\n\n                <div className=\"bg-white rounded-xl border border-gray-200 p-8 max-w-2xl relative overflow-hidden\">\n                  {!isPro && (\n                    <div className=\"absolute inset-0 z-10 bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center text-center p-8\">\n                      <div className=\"bg-gray-100 p-4 rounded-full mb-4\">\n                        <Lock className=\"h-8 w-8 text-gray-500\" />\n                      </div>\n                      <h3 className=\"text-xl font-bold text-gray-900 mb-2\">Premium Feature</h3>\n                      <p className=\"text-gray-500 mb-6 max-w-sm\">\n                        Official document generation is available exclusively to Pro and Empire members.\n                      </p>\n                      <Link to=\"/pricing\" className=\"bg-gradient-to-r from-trini-red to-red-700 text-white px-8 py-3 rounded-xl font-bold shadow-lg hover:scale-105 transition-transform flex items-center\">\n                        <Crown className=\"h-5 w-5 mr-2\" /> Upgrade to Unlock\n                      </Link>\n                    </div>\n                  )}\n\n                  <h2 className=\"text-xl font-bold text-gray-900 mb-6\">Generate {docType.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase())}</h2>\n\n                  {docSuccess ? (\n                    <div className=\"text-center py-8 animate-in zoom-in\">\n                      <div className=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                        <CheckCircle className=\"h-8 w-8 text-green-600\" />\n                      </div>\n                      <h3 className=\"text-xl font-bold text-gray-900 mb-2\">Document Ready!</h3>\n                      <p className=\"text-gray-500 mb-6\">{docSuccess}</p>\n                      <div className=\"flex gap-4 justify-center\">\n                        <button onClick={() => setDocSuccess(null)} className=\"text-gray-500 hover:text-gray-700 font-bold\">Generate Another</button>\n                        <button className=\"bg-trini-black text-white px-6 py-2 rounded-lg font-bold shadow-lg hover:bg-gray-800 flex items-center\">\n                          <FileCheck className=\"h-4 w-4 mr-2\" /> Download PDF\n                        </button>\n                      </div>\n                    </div>\n                  ) : (\n                    <div className=\"space-y-6\">\n                      <div className=\"bg-blue-50 p-4 rounded-lg flex items-start gap-3\">\n                        <AlertCircle className=\"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5\" />\n                        <p className=\"text-sm text-blue-800\">\n                          This document will be generated using your verified store data (Name: <strong>{logoPrompt.name}</strong>). Ensure your profile details are up to date before generating.\n                        </p>\n                      </div>\n\n                      <div className=\"flex justify-end\">\n                        <button\n                          onClick={handleGenerateDocument}\n                          disabled={isGeneratingDoc || !isPro}\n                          className=\"bg-trini-red text-white px-8 py-3 rounded-lg font-bold shadow-lg hover:bg-red-700 disabled:opacity-70 flex items-center transition-all\"\n                        >\n                          {isGeneratingDoc ? (\n                            <>\n                              <Loader2 className=\"h-5 w-5 animate-spin mr-2\" /> Generating...\n                            </>\n                          ) : (\n                            <>\n                              Generate Document <ArrowUp className=\"h-4 w-4 ml-2 rotate-45\" />\n                            </>\n                          )}\n                        </button>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n            )}\n          </>\n        )}\n\n        {/* --- DRIVER DASHBOARD --- */}\n        {activeApp === 'driver' && (\n          <div className=\"animate-in fade-in\">\n            <h1 className=\"text-2xl font-bold text-gray-900 mb-6\">Driver Dashboard</h1>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\n              <div className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-200\">\n                <p className=\"text-sm text-gray-500\">Today's Earnings</p>\n                <h3 className=\"text-3xl font-bold text-gray-900 mt-2\">TT$ 450.00</h3>\n              </div>\n              <div className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-200\">\n                <p className=\"text-sm text-gray-500\">Trips Completed</p>\n                <h3 className=\"text-3xl font-bold text-gray-900 mt-2\">12</h3>\n              </div>\n              <div className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-200\">\n                <p className=\"text-sm text-gray-500\">Driver Rating</p>\n                <h3 className=\"text-3xl font-bold text-gray-900 mt-2 flex items-center\">4.9 <Star className=\"h-5 w-5 text-yellow-400 ml-1 fill-current\" /></h3>\n              </div>\n            </div>\n            <div className=\"bg-blue-50 p-8 rounded-xl border border-blue-100 text-center\">\n              <Car className=\"h-12 w-12 text-blue-600 mx-auto mb-4\" />\n              <h3 className=\"text-xl font-bold text-gray-900 mb-2\">Ready to Drive?</h3>\n              <p className=\"text-gray-600 mb-6\">Go online to start receiving ride requests.</p>\n              <Link to=\"/rides\" className=\"bg-blue-600 text-white px-8 py-3 rounded-full font-bold hover:bg-blue-700 shadow-lg inline-flex items-center\">\n                Launch Driver App <ChevronRight className=\"h-4 w-4 ml-2\" />\n              </Link>\n            </div>\n          </div>\n        )}\n\n        {/* --- PRO DASHBOARD --- */}\n        {activeApp === 'pro' && (\n          <div className=\"animate-in fade-in\">\n            <h1 className=\"text-2xl font-bold text-gray-900 mb-6\">Service Pro Dashboard</h1>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\n              <div className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-200\">\n                <p className=\"text-sm text-gray-500\">Active Leads</p>\n                <h3 className=\"text-3xl font-bold text-gray-900 mt-2\">5</h3>\n              </div>\n              <div className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-200\">\n                <p className=\"text-sm text-gray-500\">Profile Views</p>\n                <h3 className=\"text-3xl font-bold text-gray-900 mt-2\">128</h3>\n              </div>\n              <div className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-200\">\n                <p className=\"text-sm text-gray-500\">Response Rate</p>\n                <h3 className=\"text-3xl font-bold text-gray-900 mt-2\">98%</h3>\n              </div>\n            </div>\n            <div className=\"bg-purple-50 p-8 rounded-xl border border-purple-100 text-center\">\n              <Briefcase className=\"h-12 w-12 text-purple-600 mx-auto mb-4\" />\n              <h3 className=\"text-xl font-bold text-gray-900 mb-2\">Grow Your Business</h3>\n              <p className=\"text-gray-600 mb-6\">Update your profile to attract more customers.</p>\n              <Link to=\"/work/profile\" className=\"bg-purple-600 text-white px-8 py-3 rounded-full font-bold hover:bg-purple-700 shadow-lg inline-flex items-center\">\n                Edit Profile <ChevronRight className=\"h-4 w-4 ml-2\" />\n              </Link>\n            </div>\n          </div>\n        )}\n\n        {/* --- PROMOTER DASHBOARD --- */}\n        {activeApp === 'promoter' && (\n          <div className=\"animate-in fade-in\">\n            <h1 className=\"text-2xl font-bold text-gray-900 mb-6\">Promoter Dashboard</h1>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\n              <div className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-200\">\n                <p className=\"text-sm text-gray-500\">Tickets Sold</p>\n                <h3 className=\"text-3xl font-bold text-gray-900 mt-2\">1,240</h3>\n              </div>\n              <div className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-200\">\n                <p className=\"text-sm text-gray-500\">Event Revenue</p>\n                <h3 className=\"text-3xl font-bold text-gray-900 mt-2\">TT$ 85k</h3>\n              </div>\n              <div className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-200\">\n                <p className=\"text-sm text-gray-500\">Upcoming Events</p>\n                <h3 className=\"text-3xl font-bold text-gray-900 mt-2\">2</h3>\n              </div>\n            </div>\n            <div className=\"bg-pink-50 p-8 rounded-xl border border-pink-100 text-center\">\n              <Ticket className=\"h-12 w-12 text-pink-600 mx-auto mb-4\" />\n              <h3 className=\"text-xl font-bold text-gray-900 mb-2\">Manage Your Events</h3>\n              <p className=\"text-gray-600 mb-6\">Create events, manage guest lists, and track sales.</p>\n              <Link to=\"/tickets\" className=\"bg-pink-600 text-white px-8 py-3 rounded-full font-bold hover:bg-pink-700 shadow-lg inline-flex items-center\">\n                Go to Event Manager <ChevronRight className=\"h-4 w-4 ml-2\" />\n              </Link>\n            </div>\n          </div>\n        )}\n\n        {/* --- AGENT DASHBOARD --- */}\n        {activeApp === 'agent' && (\n          <div className=\"animate-in fade-in\">\n            <h1 className=\"text-2xl font-bold text-gray-900 mb-6\">Real Estate Agent Dashboard</h1>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\n              <div className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-200\">\n                <p className=\"text-sm text-gray-500\">Active Listings</p>\n                <h3 className=\"text-3xl font-bold text-gray-900 mt-2\">8</h3>\n              </div>\n              <div className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-200\">\n                <p className=\"text-sm text-gray-500\">Total Views</p>\n                <h3 className=\"text-3xl font-bold text-gray-900 mt-2\">3,450</h3>\n              </div>\n              <div className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-200\">\n                <p className=\"text-sm text-gray-500\">New Leads</p>\n                <h3 className=\"text-3xl font-bold text-gray-900 mt-2\">12</h3>\n              </div>\n            </div>\n            <div className=\"bg-green-50 p-8 rounded-xl border border-green-100 text-center\">\n              <HomeIcon className=\"h-12 w-12 text-green-600 mx-auto mb-4\" />\n              <h3 className=\"text-xl font-bold text-gray-900 mb-2\">Manage Listings</h3>\n              <p className=\"text-gray-600 mb-6\">Post new properties and manage inquiries.</p>\n              <Link to=\"/real-estate\" className=\"bg-green-600 text-white px-8 py-3 rounded-full font-bold hover:bg-green-700 shadow-lg inline-flex items-center\">\n                Go to Property Manager <ChevronRight className=\"h-4 w-4 ml-2\" />\n              </Link>\n            </div>\n          </div>\n        )}\n\n      </div>\n\n      {/* Chat Widget for Testing */}\n      {showAgentTest && (\n        <ChatWidget mode=\"vendor\" vendorContext={storeContext} />\n      )}\n\n      {/* Edit Modal (Preserved from original) */}\n      {isProductModalOpen && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4\">\n          <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\n            {/* ... Modal Content ... */}\n            <div className=\"p-6 border-b border-gray-100 flex justify-between items-center\">\n              <h2 className=\"text-xl font-bold text-gray-900\">{editingProduct ? 'Edit Product' : 'Add New Product'}</h2>\n              <button onClick={() => setIsProductModalOpen(false)} className=\"text-gray-400 hover:text-gray-600\"><X className=\"h-6 w-6\" /></button>\n            </div>\n            <form onSubmit={handleSaveProduct} className=\"p-6 space-y-6\">\n              <div className=\"grid grid-cols-1 gap-4\">\n                <label className=\"block text-sm font-bold text-gray-700 bg-white w-fit px-1\">Product Name</label>\n                <input type=\"text\" value={formData.name} onChange={e => setFormData({ ...formData, name: e.target.value })} className=\"w-full border border-gray-300 rounded-lg p-3 bg-white text-gray-900\" required />\n                <label className=\"block text-sm font-bold text-gray-700 bg-white w-fit px-1\">Price</label>\n                <input type=\"number\" value={formData.price} onChange={e => setFormData({ ...formData, price: Number(e.target.value) })} className=\"w-full border border-gray-300 rounded-lg p-3 bg-white text-gray-900\" required />\n\n                <label className=\"block text-sm font-bold text-gray-700 bg-white w-fit px-1\">Description</label>\n                <div className=\"relative\">\n                  <textarea\n                    value={formData.description || ''}\n                    onChange={e => setFormData({ ...formData, description: e.target.value })}\n                    className=\"w-full border border-gray-300 rounded-lg p-3 bg-white text-gray-900 min-h-[100px]\"\n                    placeholder=\"Describe your product...\"\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowDescriptionGenerator(true)}\n                    className=\"absolute top-2 right-2 text-xs bg-purple-100 text-purple-600 px-2 py-1 rounded-md font-bold flex items-center hover:bg-purple-200 transition-colors\"\n                  >\n                    <Sparkles className=\"h-3 w-3 mr-1\" /> AI Write\n                  </button>\n                </div>\n              </div>\n              <div className=\"flex justify-end pt-4\">\n                <button type=\"submit\" className=\"bg-trini-red text-white px-6 py-2 rounded font-bold\">Save</button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n      <ListingDescriptionGenerator\n        isOpen={showDescriptionGenerator}\n        onClose={() => setShowDescriptionGenerator(false)}\n        onSelect={(desc) => setFormData({ ...formData, description: desc })}\n      />\n    </div>\n  );\n};\n",
  "pages/Deals.tsx": "import React, { useState, useEffect } from 'react';\nimport { Timer, Tag, ShoppingCart } from 'lucide-react';\nimport { Link } from 'react-router-dom';\n\nexport const Deals: React.FC = () => {\n  const [timeLeft, setTimeLeft] = useState({ hours: 12, minutes: 45, seconds: 30 });\n\n  useEffect(() => {\n    const timer = setInterval(() => {\n      setTimeLeft(prev => {\n        if (prev.seconds > 0) return { ...prev, seconds: prev.seconds - 1 };\n        if (prev.minutes > 0) return { ...prev, minutes: prev.minutes - 1, seconds: 59 };\n        if (prev.hours > 0) return { ...prev, hours: prev.hours - 1, minutes: 59, seconds: 59 };\n        return prev; // Expired\n      });\n    }, 1000);\n    return () => clearInterval(timer);\n  }, []);\n\n  const deals = [\n    { id: 1, name: \"Samsung 55' 4K Smart TV\", store: \"Tech Giants TT\", oldPrice: 4500, newPrice: 3200, img: \"https://images.unsplash.com/photo-1593359677879-a4bb92f829d1?q=80&w=800\", discount: 28 },\n    { id: 2, name: \"Designer Handbag\", store: \"Fashion Ave\", oldPrice: 1200, newPrice: 600, img: \"https://images.unsplash.com/photo-1584917865442-de89df76afd3?q=80&w=800\", discount: 50 },\n    { id: 3, name: \"Weekend Resort Pass\", store: \"Coco Reef\", oldPrice: 2500, newPrice: 1800, img: \"https://images.unsplash.com/photo-1582719508461-905c673771fd?q=80&w=800\", discount: 28 },\n    { id: 4, name: \"Air Fryer XL\", store: \"Home & Garden\", oldPrice: 900, newPrice: 550, img: \"https://images.unsplash.com/photo-1626163781947-1b7c5d419b98?q=80&w=800\", discount: 38 },\n    { id: 5, name: \"Men's Running Shoes\", store: \"Sport World\", oldPrice: 800, newPrice: 400, img: \"https://images.unsplash.com/photo-1542291026-7eec264c27ff?q=80&w=800\", discount: 50 },\n    { id: 6, name: \"Bluetooth Speaker\", store: \"Audio Lab\", oldPrice: 350, newPrice: 199, img: \"https://images.unsplash.com/photo-1608043152269-423dbba4e7e1?q=80&w=800\", discount: 43 },\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Banner */}\n      <div className=\"bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-12 relative overflow-hidden\">\n         <div className=\"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10\"></div>\n         <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 flex flex-col md:flex-row items-center justify-between\">\n            <div className=\"mb-6 md:mb-0\">\n               <h1 className=\"text-4xl md:text-5xl font-extrabold mb-2 flex items-center\">\n                  <Tag className=\"h-10 w-10 mr-4 transform -rotate-12 text-yellow-300\" />\n                  Flash Sales\n               </h1>\n               <p className=\"text-xl text-indigo-100\">Exclusive deals from local stores up to 70% off.</p>\n            </div>\n            <div className=\"bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/20 flex items-center gap-4\">\n               <div className=\"text-right\">\n                  <p className=\"text-xs uppercase font-bold tracking-wider text-indigo-200\">Ending In</p>\n                  <div className=\"font-mono text-3xl font-bold\">\n                     {String(timeLeft.hours).padStart(2, '0')}:{String(timeLeft.minutes).padStart(2, '0')}:{String(timeLeft.seconds).padStart(2, '0')}\n                  </div>\n               </div>\n               <Timer className=\"h-10 w-10 text-yellow-300 animate-pulse\" />\n            </div>\n         </div>\n      </div>\n\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n         <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8\">\n            {deals.map((deal) => (\n               <div key={deal.id} className=\"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-xl transition-all duration-300 group relative\">\n                  <div className=\"absolute top-4 left-4 bg-red-600 text-white font-bold px-3 py-1 rounded-full z-10 shadow-md\">\n                     -{deal.discount}%\n                  </div>\n                  <div className=\"h-56 overflow-hidden relative\">\n                     <img src={deal.img} alt={deal.name} className=\"w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-500\" />\n                  </div>\n                  <div className=\"p-6\">\n                     <p className=\"text-xs text-gray-500 font-bold uppercase tracking-wide mb-1\">{deal.store}</p>\n                     <h3 className=\"text-lg font-bold text-gray-900 mb-2 group-hover:text-purple-600 transition-colors\">{deal.name}</h3>\n                     <div className=\"flex items-end gap-2 mb-4\">\n                        <span className=\"text-2xl font-extrabold text-red-600\">TT${deal.newPrice}</span>\n                        <span className=\"text-sm text-gray-400 line-through mb-1\">TT${deal.oldPrice}</span>\n                     </div>\n                     <Link to=\"/directory\" className=\"block w-full bg-gray-900 text-white text-center py-3 rounded-lg font-bold hover:bg-purple-600 transition-colors\">\n                        View Deal\n                     </Link>\n                  </div>\n               </div>\n            ))}\n         </div>\n      </div>\n    </div>\n  );\n};",
  "pages/Directory.tsx": "import React, { useState, useEffect, useRef } from 'react';\nimport { Search, Loader2, BadgeCheck, ArrowRight, Navigation, Crosshair, Map as MapIcon, AlertCircle, ExternalLink, Star, ChevronDown } from 'lucide-react';\nimport { findLocalBusinesses } from '../services/geminiService';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { PlaceResult } from '../types';\nimport { storeService } from '../services/storeService';\nimport { AdSpot } from '../components/AdSpot';\n\ndeclare global {\n  interface Window {\n    google: any;\n    gm_authFailure?: () => void;\n  }\n}\n\nconst GOOGLE_MAPS_KEY = 'AIzaSyAbjOn5lpjfYw6Ig3M-KWU1y0JP5z0LbPM';\n\nconst CATEGORIES = [\n  { id: 'restaurant', label: 'Food & Drink', icon: '\ud83c\udf54' },\n  { id: 'store', label: 'Shopping', icon: '\ud83d\udecd\ufe0f' },\n  { id: 'service', label: 'Services', icon: '\ud83d\udd27' },\n  { id: 'lodging', label: 'Hotels', icon: '\ud83c\udfe8' },\n  { id: 'gas_station', label: 'Gas', icon: '\u26fd' },\n  { id: 'bank', label: 'Banks', icon: '\ud83c\udfe6' },\n];\n\n// Comprehensive list of places in Trinidad & Tobago\nconst LOCATIONS = [\n  { id: 'all', label: 'All Trinidad & Tobago', center: { lat: 10.6918, lng: -61.2225 }, zoom: 10 },\n  { id: 'arima', label: 'Arima', center: { lat: 10.6333, lng: -61.2833 }, zoom: 14 },\n  { id: 'arouca', label: 'Arouca', center: { lat: 10.6333, lng: -61.3333 }, zoom: 14 },\n  { id: 'barataria', label: 'Barataria', center: { lat: 10.6500, lng: -61.4833 }, zoom: 14 },\n  { id: 'blanchisseuse', label: 'Blanchisseuse', center: { lat: 10.7833, lng: -61.3000 }, zoom: 14 },\n  { id: 'california', label: 'California', center: { lat: 10.4167, lng: -61.4833 }, zoom: 14 },\n  { id: 'caroni', label: 'Caroni', center: { lat: 10.5833, lng: -61.3833 }, zoom: 14 },\n  { id: 'cedros', label: 'Cedros', center: { lat: 10.1000, lng: -61.7667 }, zoom: 13 },\n  { id: 'chaguanas', label: 'Chaguanas', center: { lat: 10.5167, lng: -61.4167 }, zoom: 14 },\n  { id: 'chaguaramas', label: 'Chaguaramas', center: { lat: 10.6833, lng: -61.6333 }, zoom: 14 },\n  { id: 'charlotteville', label: 'Charlotteville (Tobago)', center: { lat: 11.3167, lng: -60.5500 }, zoom: 14 },\n  { id: 'claxton_bay', label: 'Claxton Bay', center: { lat: 10.3667, lng: -61.4500 }, zoom: 14 },\n  { id: 'couva', label: 'Couva', center: { lat: 10.4167, lng: -61.4500 }, zoom: 14 },\n  { id: 'crown_point', label: 'Crown Point (Tobago)', center: { lat: 11.1500, lng: -60.8333 }, zoom: 14 },\n  { id: 'curepe', label: 'Curepe', center: { lat: 10.6333, lng: -61.4000 }, zoom: 14 },\n  { id: 'debe', label: 'Debe', center: { lat: 10.2000, lng: -61.4500 }, zoom: 14 },\n  { id: 'diego_martin', label: 'Diego Martin', center: { lat: 10.7167, lng: -61.5667 }, zoom: 14 },\n  { id: 'fyzabad', label: 'Fyzabad', center: { lat: 10.1667, lng: -61.5333 }, zoom: 14 },\n  { id: 'gasparillo', label: 'Gasparillo', center: { lat: 10.3167, lng: -61.4333 }, zoom: 14 },\n  { id: 'la_brea', label: 'La Brea', center: { lat: 10.2333, lng: -61.6167 }, zoom: 14 },\n  { id: 'la_horquetta', label: 'La Horquetta', center: { lat: 10.6167, lng: -61.2833 }, zoom: 14 },\n  { id: 'laventille', label: 'Laventille', center: { lat: 10.6500, lng: -61.5000 }, zoom: 14 },\n  { id: 'marabella', label: 'Marabella', center: { lat: 10.3000, lng: -61.4500 }, zoom: 14 },\n  { id: 'maracas', label: 'Maracas', center: { lat: 10.7500, lng: -61.4333 }, zoom: 14 },\n  { id: 'mayaro', label: 'Mayaro', center: { lat: 10.3000, lng: -61.0167 }, zoom: 13 },\n  { id: 'morvant', label: 'Morvant', center: { lat: 10.6500, lng: -61.4667 }, zoom: 14 },\n  { id: 'mucurapo', label: 'Mucurapo', center: { lat: 10.6667, lng: -61.5333 }, zoom: 14 },\n  { id: 'palo_seco', label: 'Palo Seco', center: { lat: 10.0833, lng: -61.5833 }, zoom: 14 },\n  { id: 'penal', label: 'Penal', center: { lat: 10.1667, lng: -61.4667 }, zoom: 14 },\n  { id: 'petit_valley', label: 'Petit Valley', center: { lat: 10.6833, lng: -61.5500 }, zoom: 14 },\n  { id: 'piarco', label: 'Piarco', center: { lat: 10.5833, lng: -61.3333 }, zoom: 14 },\n  { id: 'plymouth', label: 'Plymouth (Tobago)', center: { lat: 11.2167, lng: -60.7833 }, zoom: 14 },\n  { id: 'point_fortin', label: 'Point Fortin', center: { lat: 10.1833, lng: -61.6667 }, zoom: 14 },\n  { id: 'port_of_spain', label: 'Port of Spain', center: { lat: 10.6573, lng: -61.5180 }, zoom: 14 },\n  { id: 'princes_town', label: 'Princes Town', center: { lat: 10.2667, lng: -61.3833 }, zoom: 14 },\n  { id: 'rio_claro', label: 'Rio Claro', center: { lat: 10.3000, lng: -61.1667 }, zoom: 14 },\n  { id: 'roxborough', label: 'Roxborough (Tobago)', center: { lat: 11.2500, lng: -60.5833 }, zoom: 14 },\n  { id: 'san_fernando', label: 'San Fernando', center: { lat: 10.2833, lng: -61.4667 }, zoom: 14 },\n  { id: 'san_juan', label: 'San Juan', center: { lat: 10.6500, lng: -61.4500 }, zoom: 14 },\n  { id: 'sangre_grande', label: 'Sangre Grande', center: { lat: 10.5833, lng: -61.1333 }, zoom: 14 },\n  { id: 'santa_cruz', label: 'Santa Cruz', center: { lat: 10.7167, lng: -61.4667 }, zoom: 14 },\n  { id: 'scarborough', label: 'Scarborough (Tobago)', center: { lat: 11.1833, lng: -60.7333 }, zoom: 14 },\n  { id: 'siparia', label: 'Siparia', center: { lat: 10.1333, lng: -61.5000 }, zoom: 14 },\n  { id: 'st_augustine', label: 'St. Augustine', center: { lat: 10.6333, lng: -61.4000 }, zoom: 14 },\n  { id: 'st_james', label: 'St. James', center: { lat: 10.6667, lng: -61.5333 }, zoom: 14 },\n  { id: 'st_joseph', label: 'St. Joseph', center: { lat: 10.6333, lng: -61.4333 }, zoom: 14 },\n  { id: 'toco', label: 'Toco', center: { lat: 10.8333, lng: -60.9500 }, zoom: 13 },\n  { id: 'trincity', label: 'Trincity', center: { lat: 10.6333, lng: -61.3500 }, zoom: 14 },\n  { id: 'tunapuna', label: 'Tunapuna', center: { lat: 10.6500, lng: -61.3833 }, zoom: 14 },\n  { id: 'valencia', label: 'Valencia', center: { lat: 10.6500, lng: -61.2167 }, zoom: 14 },\n  { id: 'valsayn', label: 'Valsayn', center: { lat: 10.6333, lng: -61.4167 }, zoom: 14 },\n  { id: 'westmoorings', label: 'Westmoorings', center: { lat: 10.6833, lng: -61.5667 }, zoom: 14 },\n];\n\nexport const Directory: React.FC = () => {\n  const navigate = useNavigate();\n  const [searchQuery, setSearchQuery] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [places, setPlaces] = useState<PlaceResult[]>([]);\n  const [localStores, setLocalStores] = useState<any[]>([]);\n  const [aiResponseText, setAiResponseText] = useState('');\n  const [showSearchAreaBtn, setShowSearchAreaBtn] = useState(false);\n  const [activeCategory, setActiveCategory] = useState<string | null>(null);\n  const [activeLocation, setActiveLocation] = useState('all');\n  const [mapError, setMapError] = useState<string | null>(null);\n\n  const mapRef = useRef<HTMLDivElement>(null);\n  const mapInstanceRef = useRef<any>(null);\n  const serviceRef = useRef<any>(null);\n  const markersRef = useRef<any[]>([]);\n  const searchInputRef = useRef<HTMLInputElement>(null);\n  const autocompleteRef = useRef<any>(null);\n\n  // Load Google Maps Script\n  useEffect(() => {\n    // Global auth failure handler for Maps JS API\n    window.gm_authFailure = () => {\n      console.error(\"Google Maps Authentication Failure\");\n      setMapError(\"Invalid Key or Service Not Enabled. Please enable 'Maps JavaScript API' in Google Cloud Console.\");\n      setLoading(false);\n      // Force fallback search if we were loading\n      if (loading) {\n        searchWithGemini(searchQuery || 'businesses in Trinidad');\n      }\n    };\n\n    const loadMap = async () => {\n      // Check for key in localStorage first, then env, then the hardcoded fallback\n      const apiKey = localStorage.getItem('google_maps_api_key') || GOOGLE_MAPS_KEY || process.env.API_KEY;\n\n      if (!apiKey) {\n        setMapError(\"No API Key found. Please go to Settings.\");\n        return;\n      }\n\n      if (!window.google || !window.google.maps) {\n        // Check if script is already present to prevent duplicate injection\n        if (document.querySelector('script[src*=\"maps.googleapis.com/maps/api/js\"]')) {\n          // Script loaded but maybe failed previously or is loading\n          return;\n        }\n\n        const script = document.createElement('script');\n        script.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}&libraries=places`;\n        script.async = true;\n        script.defer = true;\n        script.onload = () => {\n          initMap();\n        };\n        script.onerror = () => {\n          setMapError(\"Failed to load Google Maps script (Network Error).\");\n        };\n        document.head.appendChild(script);\n      } else {\n        initMap();\n      }\n    };\n\n    loadMap();\n\n    // Load local stores from API\n    const fetchStores = async () => {\n      try {\n        const data = await storeService.getAllStores();\n        setLocalStores(data);\n      } catch (err) {\n        console.error(\"Failed to load stores from API:\", err);\n        // Fallback to local storage if API fails\n        const stored = JSON.parse(localStorage.getItem('trinibuild_stores') || '[]');\n        setLocalStores(stored);\n      }\n    };\n\n    fetchStores();\n\n    return () => {\n      // cleanup\n    };\n  }, []);\n\n  const initMap = () => {\n    if (!mapRef.current || mapError) return;\n\n    try {\n      // Check if map is already initialized on this ref\n      if (mapInstanceRef.current) return;\n\n      const trinidad = { lat: 10.654, lng: -61.502 };\n\n      // Adjust Zoom based on screen width\n      const initialZoom = window.innerWidth < 768 ? 9 : 11;\n      const initialCenter = window.innerWidth < 768 ? { lat: 10.45, lng: -61.3 } : trinidad;\n\n      mapInstanceRef.current = new window.google.maps.Map(mapRef.current, {\n        center: initialCenter,\n        zoom: initialZoom,\n        mapTypeControl: true,\n        mapTypeControlOptions: {\n          style: window.google.maps.MapTypeControlStyle.HORIZONTAL_BAR,\n          position: window.google.maps.ControlPosition.TOP_RIGHT,\n        },\n        streetViewControl: true,\n        fullscreenControl: true,\n        zoomControl: true,\n        zoomControlOptions: {\n          position: window.google.maps.ControlPosition.RIGHT_CENTER,\n        },\n        styles: [\n          {\n            featureType: \"poi\",\n            elementType: \"labels\",\n            stylers: [{ visibility: \"off\" }]\n          }\n        ]\n      });\n\n      serviceRef.current = new window.google.maps.places.PlacesService(mapInstanceRef.current);\n\n      if (searchInputRef.current) {\n        // Only init autocomplete if div exists and API loaded\n        try {\n          autocompleteRef.current = new window.google.maps.places.Autocomplete(searchInputRef.current, {\n            componentRestrictions: { country: 'tt' },\n            fields: ['geometry', 'name', 'formatted_address', 'place_id'],\n          });\n\n          autocompleteRef.current.addListener('place_changed', () => {\n            const place = autocompleteRef.current.getPlace();\n            if (!place.geometry || !place.geometry.location) {\n              setSearchQuery(place.name);\n              performSearch(place.name);\n              return;\n            }\n            setSearchQuery(place.name);\n\n            if (place.place_id) {\n              setPlaces([place]);\n              updateMapMarkers([place]);\n              mapInstanceRef.current.setCenter(place.geometry.location);\n              mapInstanceRef.current.setZoom(15);\n              fetchAiInsights(place.name, place.geometry.location.lat(), place.geometry.location.lng());\n            } else {\n              mapInstanceRef.current.setCenter(place.geometry.location);\n              mapInstanceRef.current.setZoom(14);\n              performSearch(place.name);\n            }\n          });\n        } catch (e) {\n          console.warn(\"Autocomplete init failed\", e);\n        }\n      }\n\n      mapInstanceRef.current.addListener('dragend', () => setShowSearchAreaBtn(true));\n      mapInstanceRef.current.addListener('zoom_changed', () => setShowSearchAreaBtn(true));\n\n    } catch (e) {\n      console.error(\"Error initializing map:\", e);\n      setMapError(\"Map initialization failed.\");\n    }\n  };\n\n  const fetchAiInsights = async (query: string, lat?: number, lng?: number) => {\n    try {\n      const { text } = await findLocalBusinesses(query, lat, lng);\n      setAiResponseText(text);\n    } catch (error) {\n      console.error(\"Gemini error\", error);\n    }\n  };\n\n  const searchWithGemini = async (query: string, category?: string) => {\n    const searchTerm = query || category || 'businesses in Trinidad';\n\n    try {\n      const { text, chunks } = await findLocalBusinesses(searchTerm);\n      setAiResponseText(text);\n\n      const fallbackPlaces: PlaceResult[] = chunks\n        .filter(chunk => chunk.maps)\n        .map(chunk => ({\n          name: chunk.maps.title,\n          place_id: chunk.maps.placeId || `gemini-${Date.now()}-${Math.random()}`,\n          formatted_address: \"Address available via map link\",\n          url: chunk.maps.uri,\n          rating: 0,\n          user_ratings_total: 0,\n          geometry: { location: null }\n        }));\n\n      setPlaces(fallbackPlaces);\n    } catch (e) {\n      console.error(\"Gemini search failed\", e);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const performSearch = (query: string, type?: string) => {\n    setLoading(true);\n    setPlaces([]);\n    setAiResponseText('');\n    setShowSearchAreaBtn(false);\n\n    if (mapError || !window.google || !serviceRef.current) {\n      searchWithGemini(query, type);\n      return;\n    }\n\n    try {\n      const center = mapInstanceRef.current.getCenter();\n      const request: any = {\n        location: center,\n        radius: 5000,\n        query: query ? query : undefined,\n        type: type ? type : undefined,\n      };\n\n      if (query) {\n        request.query = query + ' in Trinidad';\n        serviceRef.current.textSearch(request, (results: PlaceResult[], status: any) => {\n          handleSearchResults(results, status, query, center.lat(), center.lng());\n        });\n      } else if (type) {\n        serviceRef.current.nearbySearch(request, (results: PlaceResult[], status: any) => {\n          handleSearchResults(results, status);\n        });\n      } else {\n        setLoading(false);\n      }\n    } catch (e) {\n      console.error(\"Search error\", e);\n      searchWithGemini(query, type);\n    }\n  };\n\n  const handleSearchResults = (results: PlaceResult[], status: any, query?: string, lat?: number, lng?: number) => {\n    let combinedResults: PlaceResult[] = [];\n\n    // Filter local stores based on query\n    const matchingLocalStores = localStores.filter(store => {\n      if (!query) return true;\n      return store.businessName.toLowerCase().includes(query.toLowerCase()) ||\n        store.description?.toLowerCase().includes(query.toLowerCase());\n    }).map(store => ({\n      place_id: store.id,\n      name: store.businessName,\n      formatted_address: store.address || \"Trinidad & Tobago\",\n      geometry: {\n        location: {\n        }, // Mock location with slight randomization\n        viewport: null\n      },\n      rating: 5.0,\n      user_ratings_total: 1,\n      photos: [],\n      types: ['store']\n    }));\n\n    if (status === window.google.maps.places.PlacesServiceStatus.OK && results) {\n      combinedResults = [...matchingLocalStores, ...results];\n      setPlaces(combinedResults);\n      updateMapMarkers(combinedResults);\n      if (query) fetchAiInsights(query, lat, lng);\n    } else {\n      if (query) {\n        // If maps fail, still show local stores + Gemini\n        if (matchingLocalStores.length > 0) {\n          setPlaces(matchingLocalStores);\n        } else {\n          searchWithGemini(query);\n        }\n        return;\n      }\n      setPlaces(matchingLocalStores);\n    }\n    setLoading(false);\n  };\n\n  const handleSearchSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!searchQuery.trim()) return;\n    setActiveCategory(null);\n    performSearch(searchQuery);\n  };\n\n  const handleCategoryClick = (catId: string) => {\n    setActiveCategory(catId);\n    setSearchQuery('');\n    performSearch('', catId);\n  };\n\n  const handleLocationChange = (locId: string) => {\n    setActiveLocation(locId);\n    const location = LOCATIONS.find(l => l.id === locId);\n    if (location && mapInstanceRef.current) {\n      mapInstanceRef.current.setCenter(location.center);\n      mapInstanceRef.current.setZoom(location.zoom);\n      // Trigger a fresh search for the area if there's no specific query\n      if (!searchQuery && activeCategory) {\n        performSearch('', activeCategory);\n      } else if (searchQuery) {\n        performSearch(searchQuery);\n      } else {\n        // Just explore the location\n        performSearch('local businesses');\n      }\n    }\n  };\n\n  const searchCurrentArea = () => {\n    const query = searchQuery || (activeCategory ? '' : 'business');\n    performSearch(query, activeCategory || undefined);\n  };\n\n  const handleLocateMe = () => {\n    if (!mapInstanceRef.current) return;\n\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          const pos = {\n            lat: position.coords.latitude,\n            lng: position.coords.longitude,\n          };\n          mapInstanceRef.current.setCenter(pos);\n          mapInstanceRef.current.setZoom(14);\n          performSearch('nearby businesses');\n        },\n        () => {\n          alert(\"Error: The Geolocation service failed.\");\n        }\n      );\n    } else {\n      alert(\"Error: Your browser doesn't support geolocation.\");\n    }\n  };\n\n  const updateMapMarkers = (results: PlaceResult[]) => {\n    if (!mapInstanceRef.current) return;\n\n    markersRef.current.forEach((marker) => marker.setMap(null));\n    markersRef.current = [];\n\n    const bounds = new window.google.maps.LatLngBounds();\n\n    results.forEach((place, i) => {\n      if (!place.geometry || !place.geometry.location) return;\n\n      const marker = new window.google.maps.Marker({\n        map: mapInstanceRef.current,\n        position: place.geometry.location,\n        title: place.name,\n        animation: window.google.maps.Animation.DROP,\n        label: {\n          text: (i + 1).toString(),\n          color: \"white\",\n          fontSize: \"10px\"\n        }\n      });\n\n      const infoWindow = new window.google.maps.InfoWindow({\n        content: `\n          <div style=\"padding: 12px; max-width: 220px;\">\n            <h3 style=\"font-weight: 700; margin-bottom: 4px; font-size: 14px;\">${place.name}</h3>\n            <p style=\"font-size: 12px; color: #555; margin-bottom: 8px;\">${place.formatted_address || place.vicinity || ''}</p>\n            ${place.rating ? `<div style=\"display:flex; align-items:center; margin-bottom:8px;\"><span style=\"color:#f59e0b;\">\u2605</span> <span style=\"font-size:12px; font-weight:bold; margin-left:2px;\">${place.rating}</span> <span style=\"font-size:10px; color:#888; margin-left:4px;\">(${place.user_ratings_total})</span></div>` : ''}\n            <div style=\"margin-top: 8px;\">\n               ${place.place_id && place.place_id.startsWith('store-') ?\n            `<button id=\"view-btn-${place.place_id}\" style=\"background-color: #000; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-size: 12px; font-weight: bold; width: 100%; transition: background 0.2s;\">\n                    View Store\n                 </button>` :\n            `<button id=\"claim-btn-${place.place_id}\" style=\"background-color: #CE1126; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-size: 12px; font-weight: bold; width: 100%; transition: background 0.2s;\">\n                    Claim This Business\n                 </button>`\n          }\n            </div>\n          </div>\n        `,\n      });\n\n      marker.addListener('click', () => {\n        infoWindow.open(mapInstanceRef.current, marker);\n        setTimeout(() => {\n          if (place.place_id && place.place_id.startsWith('store-')) {\n            const btn = document.getElementById(`view-btn-${place.place_id}`);\n            if (btn) {\n              btn.onclick = () => navigate(`/store/${place.place_id}`);\n            }\n          } else {\n            const btn = document.getElementById(`claim-btn-${place.place_id}`);\n            if (btn) {\n              btn.onclick = () => handleClaim(place);\n            }\n          }\n        }, 100);\n      });\n\n      markersRef.current.push(marker);\n      bounds.extend(place.geometry.location);\n    });\n\n    if (!showSearchAreaBtn && results.length > 0) {\n      mapInstanceRef.current.fitBounds(bounds);\n    }\n  };\n\n  const handleClaim = (place: PlaceResult) => {\n    const params = new URLSearchParams();\n    params.append('claim_name', place.name);\n    params.append('claim_source', 'directory_map');\n    if (place.formatted_address) params.append('claim_address', place.formatted_address);\n    if (place.place_id && !place.place_id.startsWith('gemini-')) params.append('claim_place_id', place.place_id);\n\n    navigate(`/create-store?${params.toString()}`);\n  };\n\n  const handleListClick = (place: PlaceResult) => {\n    if (place.place_id && place.place_id.startsWith('store-')) {\n      navigate(`/store/${place.place_id}`);\n      return;\n    }\n\n    if (mapError || !mapInstanceRef.current) {\n      if (place.url) window.open(place.url, '_blank');\n      return;\n    }\n\n    if (place.geometry?.location) {\n      mapInstanceRef.current.panTo(place.geometry.location);\n      mapInstanceRef.current.setZoom(16);\n      const marker = markersRef.current.find(m => m.getTitle() === place.name);\n      if (marker) {\n        window.google.maps.event.trigger(marker, 'click');\n      }\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col h-[calc(100vh-4rem)] overflow-hidden bg-gray-50\">\n      <div className=\"bg-white shadow-md border-b border-gray-200 z-30 flex-shrink-0 relative\">\n        <div className=\"max-w-7xl mx-auto w-full px-4 py-3\">\n          <form onSubmit={handleSearchSubmit} className=\"flex flex-col md:flex-row gap-3 mb-3\">\n            <div className=\"relative flex-grow\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5 z-10\" />\n              <input\n                ref={searchInputRef}\n                type=\"text\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                placeholder=\"Search Trinidad for shops, restaurants, services...\"\n                className=\"w-full pl-10 pr-12 py-3 bg-gray-50 border border-gray-300 rounded-lg focus:bg-white focus:border-trini-red focus:ring-1 focus:ring-trini-red transition-all shadow-sm text-base\"\n              />\n              {searchQuery && (\n                <button\n                  type=\"button\"\n                  onClick={() => setSearchQuery('')}\n                  className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600\"\n                >\n                  <span className=\"sr-only\">Clear</span>\n                  \u2715\n                </button>\n              )}\n            </div>\n            <div className=\"flex gap-2\">\n              {/* Location Selector */}\n              <div className=\"relative min-w-[160px] md:min-w-[200px]\">\n                <select\n                  value={activeLocation}\n                  onChange={(e) => handleLocationChange(e.target.value)}\n                  className=\"w-full bg-gray-50 border border-gray-300 text-gray-700 text-sm rounded-lg focus:ring-trini-red focus:border-trini-red block px-3 py-3 font-medium appearance-none\"\n                >\n                  {LOCATIONS.map(loc => (\n                    <option key={loc.id} value={loc.id}>{loc.label}</option>\n                  ))}\n                </select>\n                <ChevronDown className=\"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500 pointer-events-none\" />\n              </div>\n\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"px-8 py-3 bg-trini-red text-white rounded-lg hover:bg-red-700 font-bold disabled:opacity-50 shadow-md transition-transform active:scale-95 flex items-center justify-center min-w-[100px]\"\n              >\n                {loading ? <Loader2 className=\"h-5 w-5 animate-spin\" /> : 'Search'}\n              </button>\n            </div>\n          </form>\n\n          <div className=\"flex gap-2 overflow-x-auto pb-2 custom-scrollbar\">\n            {CATEGORIES.map((cat) => (\n              <button\n                key={cat.id}\n                onClick={() => handleCategoryClick(cat.id)}\n                className={`flex items-center px-4 py-1.5 rounded-full text-sm font-medium whitespace-nowrap transition-colors border ${activeCategory === cat.id\n                  ? 'bg-trini-black text-white border-trini-black'\n                  : 'bg-white text-gray-700 border-gray-300 hover:bg-gray-50 hover:border-gray-400'\n                  }`}\n              >\n                <span className=\"mr-2\">{cat.icon}</span> {cat.label}\n              </button>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"flex flex-col-reverse lg:flex-row flex-grow overflow-hidden relative\">\n        <div className=\"w-full lg:w-[450px] xl:w-[500px] bg-white flex flex-col border-r border-gray-200 z-20 shadow-xl h-[45vh] lg:h-auto relative\">\n          <div className=\"px-4 py-3 border-b border-gray-100 bg-gray-50 flex justify-between items-center text-xs font-semibold text-gray-500 uppercase tracking-wider\">\n            <span>{places.length} Results Found</span>\n            <span>{mapError ? 'via TriniBuild AI' : (activeLocation !== 'all' ? LOCATIONS.find(z => z.id === activeLocation)?.label : 'Trinidad & Tobago')}</span>\n          </div>\n\n          <div className=\"flex-grow overflow-y-auto p-4 custom-scrollbar bg-gray-50\">\n            <AdSpot page=\"marketplace\" slot=\"top\" className=\"mb-4\" />\n            {!loading && aiResponseText && (\n              <div className=\"mb-6 bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-xl border border-blue-100 shadow-sm\">\n                <div className=\"flex items-center mb-2 text-blue-800\">\n                  <BadgeCheck className=\"h-5 w-5 mr-2 text-blue-600\" />\n                  <h3 className=\"font-bold text-sm uppercase tracking-wider\">AI Local Insights</h3>\n                </div>\n                <p className=\"text-sm text-gray-700 leading-relaxed\">\n                  {aiResponseText.split('\\n')[0]}\n                </p>\n              </div>\n            )}\n\n            <div className=\"space-y-3 pb-8\">\n              {places.length > 0 ? (\n                places.map((place, idx) => (\n                  <div\n                    key={place.place_id || idx}\n                    className=\"bg-white rounded-xl shadow-sm border border-gray-200 hover:border-trini-red hover:shadow-md transition-all duration-200 cursor-pointer group overflow-hidden\"\n                    onClick={() => handleListClick(place)}\n                  >\n                    <div className=\"flex h-32\">\n                      <div className=\"w-32 h-full bg-gray-100 flex-shrink-0 relative\">\n                        {place.photos && place.photos.length > 0 ? (\n                          <img\n                            src={place.photos[0].getUrl({ maxWidth: 200, maxHeight: 200 })}\n                            alt={place.name}\n                            className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500\"\n                          />\n                        ) : (\n                          <div className=\"w-full h-full flex flex-col items-center justify-center text-gray-300 bg-gray-100\">\n                            <MapIcon className=\"h-8 w-8 mb-1 opacity-50\" />\n                            <span className=\"text-[10px]\">No Photo</span>\n                          </div>\n                        )}\n                        {mapError && (\n                          <div className=\"absolute top-1 right-1\">\n                            <div className=\"bg-blue-500 text-white p-1 rounded-full shadow-sm\" title=\"From TriniBuild AI\">\n                              <BadgeCheck className=\"h-3 w-3\" />\n                            </div>\n                          </div>\n                        )}\n                      </div>\n\n                      <div className=\"flex-grow p-3 flex flex-col justify-between min-w-0\">\n                        <div>\n                          <div className=\"flex justify-between items-start gap-2\">\n                            <h3 className=\"font-bold text-gray-900 text-sm leading-tight line-clamp-2\">{place.name}</h3>\n                            <span className=\"bg-gray-800 text-white text-[10px] px-1.5 rounded font-mono\">{idx + 1}</span>\n                          </div>\n\n                          <div className=\"flex items-center mt-1 mb-1\">\n                            {place.rating ? (\n                              <>\n                                <div className=\"flex items-center text-yellow-500\">\n                                  <span className=\"font-bold text-sm mr-1 text-gray-900\">{place.rating}</span>\n                                  <div className=\"flex\">\n                                    {[...Array(5)].map((_, i) => (\n                                      <Star key={i} className={`h-3 w-3 ${i < Math.round(place.rating || 0) ? 'fill-current' : 'text-gray-300'}`} />\n                                    ))}\n                                  </div>\n                                </div>\n                                <span className=\"text-xs text-gray-400 ml-2\">({place.user_ratings_total})</span>\n                              </>\n                            ) : (\n                              <span className=\"text-xs text-gray-400 italic\">\n                                {mapError ? 'AI Verified' : 'No ratings yet'}\n                              </span>\n                            )}\n                          </div>\n\n                          <p className=\"text-xs text-gray-500 line-clamp-2 mb-2\">\n                            {place.formatted_address || place.vicinity || \"Trinidad & Tobago\"}\n                          </p>\n                        </div>\n\n                        <div className=\"flex justify-end gap-2\">\n                          {place.url && (\n                            <a\n                              href={place.url}\n                              target=\"_blank\"\n                              rel=\"noopener noreferrer\"\n                              onClick={(e) => e.stopPropagation()}\n                              className=\"text-xs font-bold text-gray-500 hover:bg-gray-100 px-2 py-1.5 rounded transition-colors flex items-center\"\n                            >\n                              <ExternalLink className=\"h-3 w-3\" />\n                            </a>\n                          )}\n                          <button\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              if (place.place_id && place.place_id.startsWith('store-')) {\n                                navigate(`/store/${place.place_id}`);\n                              } else {\n                                handleClaim(place);\n                              }\n                            }}\n                            className={`text-xs font-bold px-3 py-1.5 rounded transition-colors flex items-center border ${place.place_id && place.place_id.startsWith('store-')\n                              ? 'text-white bg-trini-red border-trini-red hover:bg-red-700'\n                              : 'text-trini-red hover:bg-red-50 border-trini-red/20'\n                              }`}\n                          >\n                            {place.place_id && place.place_id.startsWith('store-') ? (\n                              <>View Store <ArrowRight className=\"h-3 w-3 ml-1\" /></>\n                            ) : (\n                              <>Claim This Business <ArrowRight className=\"h-3 w-3 ml-1\" /></>\n                            )}\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                ))\n              ) : (\n                !loading && (\n                  <div className=\"flex flex-col items-center justify-center py-16 px-4 text-center\">\n                    <div className=\"bg-white p-4 rounded-full shadow-sm mb-4\">\n                      <MapIcon className=\"h-10 w-10 text-gray-300\" />\n                    </div>\n                    <h3 className=\"text-lg font-medium text-gray-900\">Explore Trinidad & Tobago</h3>\n                    <p className=\"text-gray-500 text-sm mt-2 max-w-xs\">\n                      {mapError\n                        ? \"Map unavailable due to API Key restriction. You can still search businesses using AI.\"\n                        : \"Use the map or search bar to find local businesses, services, and hidden gems.\"}\n                    </p>\n                  </div>\n                )\n              )}\n\n              {loading && (\n                <div className=\"flex flex-col items-center justify-center py-12\">\n                  <Loader2 className=\"h-8 w-8 text-trini-red animate-spin mb-2\" />\n                  <p className=\"text-sm text-gray-500\">\n                    {mapError ? 'Searching database via TriniBuild AI...' : 'Searching T&T\\'s database...'}\n                  </p>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"flex-grow h-[45vh] lg:h-auto bg-gray-200 relative group\">\n          {mapError ? (\n            <div className=\"w-full h-full flex flex-col items-center justify-center bg-gray-100 text-gray-500 p-6 text-center border-l border-gray-200\">\n              <div className=\"bg-red-50 p-4 rounded-full mb-4\">\n                <AlertCircle className=\"h-8 w-8 text-red-500\" />\n              </div>\n              <h3 className=\"font-bold text-gray-900 text-lg mb-1\">Visual Map Unavailable</h3>\n              <p className=\"text-sm mb-4 max-w-md\">\n                {mapError}\n              </p>\n              <div className=\"bg-white px-4 py-3 rounded-md shadow-sm border border-gray-200 text-xs text-gray-600 text-left max-w-sm mx-auto\">\n                <strong>Likely Cause:</strong> Your API Key is valid for AI Studio but does not have the \"Maps JavaScript API\" service enabled in Google Cloud Console.\n              </div>\n              <p className=\"text-sm text-gray-600 mt-6 font-medium\">\n                Don't worry! Search works via the \"Built-in Backend\" (TriniBuild AI).\n              </p>\n              <Link to=\"/settings\" className=\"mt-4 inline-block bg-gray-800 text-white px-4 py-2 rounded text-sm hover:bg-gray-700\">\n                Update Maps API Key\n              </Link>\n            </div>\n          ) : (\n            <>\n              <div ref={mapRef} className=\"w-full h-full min-h-[400px]\" />\n              {showSearchAreaBtn && !mapError && (\n                <div className=\"absolute top-4 left-1/2 transform -translate-x-1/2 z-10\">\n                  <button\n                    onClick={searchCurrentArea}\n                    className=\"bg-white text-gray-800 px-4 py-2 rounded-full shadow-lg font-semibold text-sm flex items-center hover:bg-gray-50 transition-transform transform hover:scale-105 animate-in fade-in slide-in-from-top-4\"\n                  >\n                    {loading ? <Loader2 className=\"h-4 w-4 animate-spin mr-2\" /> : <Crosshair className=\"h-4 w-4 mr-2 text-trini-red\" />}\n                    Search this area\n                  </button>\n                </div>\n              )}\n\n              {!mapError && (\n                <button\n                  onClick={handleLocateMe}\n                  className=\"absolute bottom-8 right-4 bg-white p-3 rounded-full shadow-lg hover:bg-gray-50 focus:outline-none z-10 text-gray-600\"\n                  title=\"Locate Me\"\n                >\n                  <Navigation className=\"h-6 w-6 transform hover:text-trini-red transition-colors\" />\n                </button>\n              )}\n            </>\n          )}\n\n          {!window.google && !mapError && (\n            <div className=\"absolute inset-0 flex items-center justify-center bg-gray-100 bg-opacity-50 z-10\">\n              <Loader2 className=\"h-10 w-10 text-gray-400 animate-spin\" />\n            </div>\n          )}\n        </div>\n\n      </div>\n    </div>\n  );\n};",
  "pages/DriverOnboarding.tsx": "import React, { useState } from 'react';\nimport { Car, UploadCloud, CheckCircle, ChevronRight, ArrowLeft, FileSignature, Loader2 } from 'lucide-react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { legalService } from '../services/legalService';\nimport { supabase } from '../services/supabaseClient';\n\nexport const DriverOnboarding: React.FC = () => {\n  const navigate = useNavigate();\n  const [step, setStep] = useState(1);\n  const [formData, setFormData] = useState({\n    vehicleType: 'Sedan',\n    make: '',\n    model: '',\n    plate: '',\n    licenseFile: null as File | null\n  });\n  const [isSigning, setIsSigning] = useState(false);\n  const [hasSigned, setHasSigned] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files[0]) {\n      setFormData({ ...formData, licenseFile: e.target.files[0] });\n    }\n  };\n\n  const handleSign = async () => {\n    setIsSigning(true);\n    try {\n      // Sign documents in Supabase\n      await legalService.signDocument('current-user', 'contractor_agreement', 'Signed via App');\n      await legalService.signDocument('current-user', 'liability_waiver', 'Signed via App');\n      setHasSigned(true);\n    } catch (error) {\n      console.error(\"Signing failed\", error);\n      alert(\"Failed to sign documents. Please try again.\");\n    } finally {\n      setIsSigning(false);\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (step < 4) {\n      setStep(step + 1);\n    } else {\n      setIsSubmitting(true);\n      try {\n        const { data: { user } } = await supabase.auth.getUser();\n        if (!user) throw new Error(\"Not authenticated\");\n\n        // Upload license file (Mocking upload for now as storage bucket might not exist)\n        // const licenseUrl = await uploadFile(formData.licenseFile); \n\n        const { error } = await supabase\n          .from('driver_applications')\n          .insert({\n            user_id: user.id,\n            full_name: user.user_metadata?.full_name || 'Unknown Driver',\n            phone: user.phone || '', // Try to get phone from auth\n            vehicle_type: `${formData.vehicleType} - ${formData.make} ${formData.model}`,\n            license_number: formData.plate,\n            status: 'pending'\n          });\n\n        if (error) throw error;\n\n        alert(\"Application Submitted! We will review your documents.\");\n        navigate('/dashboard');\n      } catch (error) {\n        console.error(\"Submission failed\", error);\n        alert(\"Failed to submit application. Please try again.\");\n      } finally {\n        setIsSubmitting(false);\n      }\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 py-12\">\n      <div className=\"max-w-2xl mx-auto px-4\">\n        <Link to=\"/earn\" className=\"text-gray-500 hover:text-gray-900 flex items-center mb-8\">\n          <ArrowLeft className=\"h-4 w-4 mr-1\" /> Back to Earn\n        </Link>\n\n        <div className=\"bg-white rounded-xl shadow-xl overflow-hidden\">\n          <div className=\"bg-blue-600 p-6 text-white\">\n            <h1 className=\"text-2xl font-bold flex items-center\">\n              <Car className=\"h-8 w-8 mr-3\" /> Driver Registration\n            </h1>\n            <p className=\"text-blue-100 mt-2\">Step {step} of 4</p>\n          </div>\n\n          <form onSubmit={handleSubmit} className=\"p-8\">\n            {step === 1 && (\n              <div className=\"space-y-6 animate-in fade-in\">\n                <h2 className=\"text-xl font-bold text-gray-900\">Vehicle Information</h2>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Vehicle Type</label>\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    {['Sedan', 'SUV', 'Pickup Truck', 'Van'].map(type => (\n                      <div\n                        key={type}\n                        onClick={() => setFormData({ ...formData, vehicleType: type })}\n                        className={`border rounded-lg p-4 cursor-pointer transition-all text-center ${formData.vehicleType === type ? 'border-blue-600 bg-blue-50 text-blue-700 font-bold' : 'hover:bg-gray-50'}`}\n                      >\n                        {type}\n                      </div>\n                    ))}\n                  </div>\n                </div>\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700\">Make (e.g. Toyota)</label>\n                    <input type=\"text\" required className=\"mt-1 w-full border border-gray-300 rounded-md p-3\" value={formData.make} onChange={e => setFormData({ ...formData, make: e.target.value })} />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700\">Model (e.g. Corolla)</label>\n                    <input type=\"text\" required className=\"mt-1 w-full border border-gray-300 rounded-md p-3\" value={formData.model} onChange={e => setFormData({ ...formData, model: e.target.value })} />\n                  </div>\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700\">License Plate (e.g. PDE 1234)</label>\n                  <input type=\"text\" required className=\"mt-1 w-full border border-gray-300 rounded-md p-3 uppercase\" value={formData.plate} onChange={e => setFormData({ ...formData, plate: e.target.value })} />\n                </div>\n                <button type=\"button\" onClick={() => setStep(2)} className=\"w-full bg-blue-600 text-white py-3 rounded-lg font-bold hover:bg-blue-700 flex items-center justify-center\">\n                  Next Step <ChevronRight className=\"ml-2 h-5 w-5\" />\n                </button>\n              </div>\n            )}\n\n            {step === 2 && (\n              <div className=\"space-y-6 animate-in fade-in\">\n                <h2 className=\"text-xl font-bold text-gray-900\">Document Verification</h2>\n                <div className=\"bg-yellow-50 p-4 rounded-lg text-sm text-yellow-800 border border-yellow-200\">\n                  Please upload a clear photo of your valid Driver's Permit. We use AI to verify expiry dates.\n                </div>\n\n                <div className=\"border-2 border-dashed border-gray-300 rounded-xl p-10 text-center hover:bg-gray-50 transition-colors cursor-pointer relative\">\n                  <input type=\"file\" required accept=\"image/*\" onChange={handleFileChange} className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\" />\n                  {formData.licenseFile ? (\n                    <div>\n                      <CheckCircle className=\"h-12 w-12 text-green-500 mx-auto mb-3\" />\n                      <p className=\"font-bold text-gray-900\">{formData.licenseFile.name}</p>\n                      <p className=\"text-xs text-gray-500\">Click to change</p>\n                    </div>\n                  ) : (\n                    <div>\n                      <UploadCloud className=\"h-12 w-12 text-gray-400 mx-auto mb-3\" />\n                      <p className=\"font-medium text-gray-600\">Upload Driver's Permit</p>\n                      <p className=\"text-xs text-gray-400\">JPG or PNG</p>\n                    </div>\n                  )\n                  }\n                </div>\n\n                <div className=\"flex gap-4\">\n                  <button type=\"button\" onClick={() => setStep(1)} className=\"w-1/3 bg-gray-100 text-gray-700 py-3 rounded-lg font-bold hover:bg-gray-200\">Back</button>\n                  <button type=\"button\" onClick={() => setStep(3)} disabled={!formData.licenseFile} className=\"w-2/3 bg-blue-600 text-white py-3 rounded-lg font-bold hover:bg-blue-700 disabled:opacity-50\">Next Step</button>\n                </div>\n              </div>\n            )}\n\n            {step === 3 && (\n              <div className=\"space-y-6 animate-in fade-in\">\n                <h2 className=\"text-xl font-bold text-gray-900\">Legal Agreements</h2>\n                <p className=\"text-gray-500 text-sm\">\n                  To drive with TriniBuild, you must sign the Independent Contractor Agreement and Liability Waiver.\n                </p>\n\n                <div className=\"space-y-4\">\n                  <div className=\"border p-4 rounded-lg flex items-center justify-between\">\n                    <div className=\"flex items-center\">\n                      <FileSignature className=\"h-5 w-5 text-gray-400 mr-3\" />\n                      <div>\n                        <p className=\"font-bold text-sm\">Independent Contractor Agreement</p>\n                        <Link to=\"/contractor-agreement\" target=\"_blank\" className=\"text-xs text-blue-600 hover:underline\">View Document</Link>\n                      </div>\n                    </div>\n                    {hasSigned && <CheckCircle className=\"h-5 w-5 text-green-500\" />}\n                  </div>\n\n                  <div className=\"border p-4 rounded-lg flex items-center justify-between\">\n                    <div className=\"flex items-center\">\n                      <FileSignature className=\"h-5 w-5 text-gray-400 mr-3\" />\n                      <div>\n                        <p className=\"font-bold text-sm\">Liability Waiver</p>\n                        <Link to=\"/liability-waiver\" target=\"_blank\" className=\"text-xs text-blue-600 hover:underline\">View Document</Link>\n                      </div>\n                    </div>\n                    {hasSigned && <CheckCircle className=\"h-5 w-5 text-green-500\" />}\n                  </div>\n                </div>\n\n                <div className=\"bg-gray-50 p-4 rounded-lg text-xs text-gray-500\">\n                  By clicking \"Sign with DocuSign\", you agree to be bound by these terms electronically.\n                </div>\n\n                <div className=\"flex gap-4\">\n                  <button type=\"button\" onClick={() => setStep(2)} className=\"w-1/3 bg-gray-100 text-gray-700 py-3 rounded-lg font-bold hover:bg-gray-200\">Back</button>\n                  {hasSigned ? (\n                    <button type=\"button\" onClick={() => setStep(4)} className=\"w-2/3 bg-green-600 text-white py-3 rounded-lg font-bold hover:bg-green-700\">Continue</button>\n                  ) : (\n                    <button\n                      type=\"button\"\n                      onClick={handleSign}\n                      disabled={isSigning}\n                      className=\"w-2/3 bg-blue-600 text-white py-3 rounded-lg font-bold hover:bg-blue-700 disabled:opacity-70 flex items-center justify-center\"\n                    >\n                      {isSigning ? <Loader2 className=\"h-5 w-5 animate-spin\" /> : 'Sign with DocuSign'}\n                    </button>\n                  )}\n                </div>\n              </div>\n            )}\n\n            {step === 4 && (\n              <div className=\"text-center py-8 animate-in fade-in\">\n                <CheckCircle className=\"h-20 w-20 text-green-500 mx-auto mb-6\" />\n                <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">Ready to Submit?</h2>\n                <p className=\"text-gray-500 mb-8\">\n                  Your application and signed documents are ready for review.\n                </p>\n\n                <div className=\"bg-gray-50 p-4 rounded-lg text-left mb-8 text-sm text-gray-600\">\n                  <p><strong>Vehicle:</strong> {formData.make} {formData.model} ({formData.plate})</p>\n                  <p><strong>Docs:</strong> {formData.licenseFile?.name}</p>\n                  <p><strong>Legal:</strong> <span className=\"text-green-600 font-bold\">Signed</span></p>\n                </div>\n\n                <button type=\"submit\" className=\"w-full bg-green-600 text-white py-4 rounded-lg font-bold text-lg hover:bg-green-700 shadow-lg\">\n                  Submit Application\n                </button>\n              </div>\n            )}\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};",
  "pages/Earn.tsx": "\nimport React from 'react';\nimport { Car, ShoppingBag, Briefcase, ArrowRight, CheckCircle, DollarSign } from 'lucide-react';\nimport { Link } from 'react-router-dom';\n\nexport const Earn: React.FC = () => {\n  return (\n    <div className=\"min-h-screen bg-white\">\n      {/* Hero Section */}\n      <div className=\"bg-trini-black text-white py-20\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center\">\n          <h1 className=\"text-4xl md:text-6xl font-extrabold mb-6\">\n            Make Money on <span className=\"text-trini-red\">TriniBuild</span>\n          </h1>\n          <p className=\"text-xl text-gray-300 max-w-2xl mx-auto mb-10\">\n            One platform, three ways to earn. Join thousands of Trinbagonians building their future with us.\n          </p>\n        </div>\n      </div>\n\n      {/* The Three Pillars */}\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 -mt-16 relative z-10\">\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n          \n          {/* Merchant Card */}\n          <div className=\"bg-white rounded-2xl shadow-xl p-8 border-t-4 border-trini-red hover:transform hover:-translate-y-1 transition-all\">\n            <div className=\"bg-red-50 w-16 h-16 rounded-full flex items-center justify-center mb-6\">\n              <ShoppingBag className=\"h-8 w-8 text-trini-red\" />\n            </div>\n            <h3 className=\"text-2xl font-bold text-gray-900 mb-2\">Start Selling</h3>\n            <p className=\"text-gray-500 mb-6 min-h-[80px]\">\n              Open your digital store in minutes. Sell products, food, or services to customers nationwide.\n            </p>\n            <ul className=\"space-y-3 mb-8 text-sm text-gray-600\">\n              <li className=\"flex items-center\"><CheckCircle className=\"h-4 w-4 text-green-500 mr-2\" /> Free Online Storefront</li>\n              <li className=\"flex items-center\"><CheckCircle className=\"h-4 w-4 text-green-500 mr-2\" /> 10 Free Listings</li>\n              <li className=\"flex items-center\"><CheckCircle className=\"h-4 w-4 text-green-500 mr-2\" /> WhatsApp Checkout</li>\n            </ul>\n            <Link to=\"/create-store\" className=\"block w-full bg-trini-red text-white text-center py-3 rounded-lg font-bold hover:bg-red-700 transition-colors\">\n              Create Store\n            </Link>\n          </div>\n\n          {/* Driver Card */}\n          <div className=\"bg-white rounded-2xl shadow-xl p-8 border-t-4 border-blue-600 hover:transform hover:-translate-y-1 transition-all\">\n            <div className=\"bg-blue-50 w-16 h-16 rounded-full flex items-center justify-center mb-6\">\n              <Car className=\"h-8 w-8 text-blue-600\" />\n            </div>\n            <h3 className=\"text-2xl font-bold text-gray-900 mb-2\">Drive & Deliver</h3>\n            <p className=\"text-gray-500 mb-6 min-h-[80px]\">\n              Turn your vehicle into an income stream. Accept ride requests or deliver packages on your schedule.\n            </p>\n            <ul className=\"space-y-3 mb-8 text-sm text-gray-600\">\n              <li className=\"flex items-center\"><CheckCircle className=\"h-4 w-4 text-green-500 mr-2\" /> Weekly Payouts</li>\n              <li className=\"flex items-center\"><CheckCircle className=\"h-4 w-4 text-green-500 mr-2\" /> Flexible Hours</li>\n              <li className=\"flex items-center\"><CheckCircle className=\"h-4 w-4 text-green-500 mr-2\" /> Keep 85% of Fares</li>\n            </ul>\n            <Link to=\"/drive/signup\" className=\"block w-full bg-blue-600 text-white text-center py-3 rounded-lg font-bold hover:bg-blue-700 transition-colors\">\n              Become a Driver\n            </Link>\n          </div>\n\n          {/* Professional Card */}\n          <div className=\"bg-white rounded-2xl shadow-xl p-8 border-t-4 border-purple-600 hover:transform hover:-translate-y-1 transition-all\">\n            <div className=\"bg-purple-50 w-16 h-16 rounded-full flex items-center justify-center mb-6\">\n              <Briefcase className=\"h-8 w-8 text-purple-600\" />\n            </div>\n            <h3 className=\"text-2xl font-bold text-gray-900 mb-2\">Find Work</h3>\n            <p className=\"text-gray-500 mb-6 min-h-[80px]\">\n              Showcase your skills. Get hired for full-time jobs, freelance gigs, or one-off tasks.\n            </p>\n            <ul className=\"space-y-3 mb-8 text-sm text-gray-600\">\n              <li className=\"flex items-center\"><CheckCircle className=\"h-4 w-4 text-green-500 mr-2\" /> Professional Profile</li>\n              <li className=\"flex items-center\"><CheckCircle className=\"h-4 w-4 text-green-500 mr-2\" /> 'Easy Apply' to Jobs</li>\n              <li className=\"flex items-center\"><CheckCircle className=\"h-4 w-4 text-green-500 mr-2\" /> Skill Verification</li>\n            </ul>\n            <Link to=\"/work/profile\" className=\"block w-full bg-purple-600 text-white text-center py-3 rounded-lg font-bold hover:bg-purple-700 transition-colors\">\n              Build CV Profile\n            </Link>\n          </div>\n\n        </div>\n      </div>\n\n      {/* Testimonials / Social Proof */}\n      <div className=\"bg-gray-50 py-16\">\n        <div className=\"max-w-7xl mx-auto px-4 text-center\">\n          <h2 className=\"text-3xl font-bold text-gray-900 mb-12\">Who's earning with TriniBuild?</h2>\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n            <div className=\"p-6\">\n               <div className=\"flex items-center justify-center mb-4\">\n                  <img src=\"https://images.unsplash.com/photo-1531123897727-8f129e1688ce?q=80&w=200&auto=format&fit=crop\" className=\"w-20 h-20 rounded-full border-4 border-white shadow-md object-cover\" alt=\"Sarah J.\" />\n               </div>\n               <p className=\"text-gray-600 italic mb-4\">\"I started selling my homemade pepper sauce here. Now I ship cases to Tobago weekly!\"</p>\n               <p className=\"font-bold text-gray-900\">- Sarah J., Chaguanas</p>\n            </div>\n            <div className=\"p-6\">\n               <div className=\"flex items-center justify-center mb-4\">\n                  <img src=\"https://images.unsplash.com/photo-1542596594-649edbc13630?q=80&w=200&auto=format&fit=crop\" className=\"w-20 h-20 rounded-full border-4 border-white shadow-md object-cover\" alt=\"David R.\" />\n               </div>\n               <p className=\"text-gray-600 italic mb-4\">\"Driving part-time helped me pay off my car loan. The app is super easy to use.\"</p>\n               <p className=\"font-bold text-gray-900\">- David R., Port of Spain</p>\n            </div>\n            <div className=\"p-6\">\n               <div className=\"flex items-center justify-center mb-4\">\n                  <img src=\"https://images.unsplash.com/photo-1567532939604-b6b5b0db2604?q=80&w=200&auto=format&fit=crop\" className=\"w-20 h-20 rounded-full border-4 border-white shadow-md object-cover\" alt=\"Amanda K.\" />\n               </div>\n               <p className=\"text-gray-600 italic mb-4\">\"Found a graphic design gig in 2 days. The profile builder is great.\"</p>\n               <p className=\"font-bold text-gray-900\">- Amanda K., Arima</p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* CTA */}\n      <div className=\"bg-trini-teal py-16\">\n         <div className=\"max-w-4xl mx-auto px-4 text-center\">\n            <h2 className=\"text-3xl font-bold text-white mb-6\">Not sure where to start?</h2>\n            <p className=\"text-white/80 text-lg mb-8\">Create a free account and explore the dashboard. You can add any service later.</p>\n            <Link to=\"/auth\" className=\"inline-block bg-white text-trini-teal font-bold px-10 py-4 rounded-full shadow-lg hover:bg-gray-100 text-lg\">\n               Join TriniBuild Free\n            </Link>\n         </div>\n      </div>\n\n    </div>\n  );\n};\n",
  "pages/Home.tsx": "import React, { useEffect, useState } from 'react';\nimport { Search, MapPin, Star, TrendingUp, Briefcase, ShoppingCart, Car, Truck, ArrowRight, Check, ShieldCheck, Globe, Play, ExternalLink, Volume2, VolumeX, Wand2, Zap, ChevronRight, Settings, Wallet, CreditCard, Heart, Home as HomeIcon, Ticket, UserCheck, Clock, FileText } from 'lucide-react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { getAdConfig, AdConfig } from '../services/adService';\nimport { AdSpot } from '../components/AdSpot';\n\nexport const Home: React.FC = () => {\n   const navigate = useNavigate();\n   const [adConfig, setAdConfig] = useState<AdConfig>(getAdConfig());\n   const [offset, setOffset] = useState(0);\n\n   // Parallax Effect\n   useEffect(() => {\n      const handleScroll = () => {\n         setOffset(window.pageYOffset);\n      };\n      window.addEventListener('scroll', handleScroll);\n      return () => window.removeEventListener('scroll', handleScroll);\n   }, []);\n\n   // Intent Selector State\n   const [intent, setIntent] = useState<string | null>(null);\n\n   const handleIntent = (path: string) => {\n      navigate(path);\n   };\n\n   return (\n      <div className=\"min-h-screen bg-gray-50 font-sans overflow-x-hidden\">\n\n         {/* Parallax Hero Section */}\n         <div className=\"relative h-screen flex items-center justify-center overflow-hidden\">\n            {/* Background Image with Parallax */}\n            <div\n               className=\"absolute inset-0 z-0\"\n               style={{\n                  backgroundImage: \"url('/trini-market-hero.jpg')\", // Tropical/Construction vibe\n                  backgroundSize: 'cover',\n                  backgroundPosition: 'center',\n                  transform: `translateY(${offset * 0.5}px)`,\n               }}\n            ></div>\n\n            {/* Overlay */}\n            <div className=\"absolute inset-0 bg-gradient-to-b from-black/70 via-black/50 to-gray-900/90 z-10\"></div>\n\n            <div className=\"relative z-20 text-center px-4 max-w-5xl mx-auto animate-fade-in\">\n\n               {/* Logo */}\n               <div className=\"mb-8 flex justify-center\">\n                  <img src=\"/trinibuild-logo.png\" alt=\"TriniBuild Logo\" className=\"h-24 md:h-32 w-auto drop-shadow-2xl\" />\n               </div>\n\n               {/* Hero Content */}\n               <h1 className=\"text-4xl md:text-6xl lg:text-7xl font-display font-extrabold text-white mb-6 leading-tight tracking-tight drop-shadow-2xl\">\n                  TriniBuild: <span className=\"text-trini-red\">For We,</span> <span className=\"text-trini-gold\">By We</span>\n               </h1>\n\n               <p className=\"text-xl md:text-2xl text-gray-200 mb-10 max-w-3xl mx-auto font-light leading-relaxed\">\n                  Free Websites for Everyone. No Credit Card Required. Your digital home for everything from marketplaces to job boards. Start your business today with our free tier\u2014list up to 10 items at no cost. Just we own ting, finally brought up to modern standards.\n               </p>\n\n               {/* CTAs */}\n               <div className=\"flex flex-col sm:flex-row gap-4 justify-center mb-12\">\n                  <Link to=\"/auth?mode=signup\" className=\"px-8 py-4 bg-trini-red text-white rounded-full font-bold text-lg shadow-lg hover:bg-red-700 transition-all hover:scale-105 flex items-center justify-center\">\n                     Start for Free Today <ArrowRight className=\"ml-2 h-5 w-5\" />\n                  </Link>\n                  <button onClick={() => {\n                     document.getElementById('ecosystem')?.scrollIntoView({ behavior: 'smooth' });\n                  }} className=\"px-8 py-4 bg-white/10 backdrop-blur-md border border-white/30 text-white rounded-full font-bold text-lg shadow-lg hover:bg-white/20 transition-all hover:scale-105 flex items-center justify-center\">\n                     Explore All Our Features <ChevronRight className=\"ml-2 h-5 w-5\" />\n                  </button>\n               </div>\n\n               {/* Trust Badges */}\n               <div className=\"mt-8 flex items-center justify-center gap-6 text-white/60 text-sm font-medium\">\n                  <div className=\"flex items-center gap-2\">\n                     <ShieldCheck className=\"h-5 w-5 text-green-400\" /> 100% Verified Users\n                  </div>\n                  <div className=\"hidden md:flex items-center gap-2\">\n                     <UserCheck className=\"h-5 w-5 text-blue-400\" /> 5,000+ Active Trinis\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                     <Star className=\"h-5 w-5 text-yellow-400\" /> 4.9/5 Average Rating\n                  </div>\n               </div>\n            </div>\n         </div>\n\n         {/* Top Ad Spot (Preserved) */}\n         <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-24 relative z-30 mb-12\">\n            <AdSpot page=\"home\" slot=\"top\" />\n         </div>\n\n         {/* Ecosystem Section */}\n         <section id=\"ecosystem\" className=\"py-20 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto\">\n            <div className=\"text-center mb-16\">\n               <h2 className=\"text-3xl md:text-5xl font-display font-bold text-gray-900 mb-6\">Everything You Need, Right Here in T&T</h2>\n               <p className=\"text-xl text-gray-500 max-w-3xl mx-auto leading-relaxed\">\n                  With TriniBuild, we put all the pieces together. Want to sell your goods? Open a marketplace store. Need to list your property? We got a real estate hub. Looking to offer rides or find a job? It\u2019s all here, easy as doubles on a Saturday morning. One login, one platform, and all the tools that get you moving.\n               </p>\n               <div className=\"mt-8\">\n                  <Link to=\"/auth?mode=signup\" className=\"inline-flex items-center text-trini-red font-bold text-lg hover:underline\">\n                     Join the Movement <ArrowRight className=\"ml-2 h-5 w-5\" />\n                  </Link>\n               </div>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 grid-rows-2 gap-6 h-auto md:h-[600px]\">\n\n               {/* Marketplace - Large Tile */}\n               <div className=\"md:col-span-2 md:row-span-2 relative group overflow-hidden rounded-3xl bg-white shadow-xl border border-gray-100 cursor-pointer\" onClick={() => navigate('/classifieds')}>\n                  <div className=\"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent z-10\"></div>\n                  <img src=\"https://images.unsplash.com/photo-1556740758-90de374c12ad?q=80&w=2070&auto=format&fit=crop\" className=\"absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-110\" alt=\"Marketplace\" />\n                  <div className=\"absolute bottom-0 left-0 p-8 z-20 text-white\">\n                     <div className=\"bg-blue-600 w-12 h-12 rounded-xl flex items-center justify-center mb-4\">\n                        <ShoppingCart className=\"h-6 w-6\" />\n                     </div>\n                     <h3 className=\"text-3xl font-bold mb-2\">Marketplace</h3>\n                     <p className=\"text-gray-200 mb-4\">Open your free store today. List up to 10 items for free. Shop Verified.</p>\n                     <span className=\"inline-flex items-center font-bold text-blue-300 group-hover:text-white transition-colors\">Start Shopping <ArrowRight className=\"ml-2 h-4 w-4\" /></span>\n                  </div>\n               </div>\n\n               {/* Jobs - Tall Tile */}\n               <div className=\"md:col-span-1 md:row-span-2 relative group overflow-hidden rounded-3xl bg-gray-900 shadow-xl border border-gray-800 cursor-pointer\" onClick={() => navigate('/jobs')}>\n                  <div className=\"absolute inset-0 bg-gradient-to-b from-purple-900/50 to-black/90 z-10\"></div>\n                  <div className=\"absolute inset-0 p-6 z-20 flex flex-col justify-end\">\n                     <div className=\"bg-purple-600 w-10 h-10 rounded-lg flex items-center justify-center mb-4\">\n                        <Briefcase className=\"h-5 w-5 text-white\" />\n                     </div>\n                     <h3 className=\"text-2xl font-bold text-white mb-2\">TriniWorks</h3>\n                     <p className=\"text-gray-400 text-sm mb-4\">Can't Find Good Help? Hire Vetted Pros.</p>\n                     <div className=\"space-y-2\">\n                        <div className=\"flex items-center text-xs text-gray-300 bg-white/10 p-2 rounded-lg\">\n                           <Check className=\"h-3 w-3 text-green-400 mr-2\" /> Plumbers\n                        </div>\n                        <div className=\"flex items-center text-xs text-gray-300 bg-white/10 p-2 rounded-lg\">\n                           <Check className=\"h-3 w-3 text-green-400 mr-2\" /> Electricians\n                        </div>\n                        <div className=\"flex items-center text-xs text-gray-300 bg-white/10 p-2 rounded-lg\">\n                           <Check className=\"h-3 w-3 text-green-400 mr-2\" /> Mechanics\n                        </div>\n                     </div>\n                  </div>\n               </div>\n\n               {/* Rides - Small Tile */}\n               <div className=\"md:col-span-1 relative group overflow-hidden rounded-3xl bg-green-50 shadow-lg border border-green-100 cursor-pointer hover:shadow-xl transition-all\" onClick={() => navigate('/rides')}>\n                  <div className=\"p-6 h-full flex flex-col justify-between\">\n                     <div className=\"flex justify-between items-start\">\n                        <div className=\"bg-green-500 w-10 h-10 rounded-lg flex items-center justify-center text-white\">\n                           <Car className=\"h-5 w-5\" />\n                        </div>\n                        <span className=\"bg-green-100 text-green-800 text-xs font-bold px-2 py-1 rounded-full\">Live</span>\n                     </div>\n                     <div>\n                        <h3 className=\"text-xl font-bold text-gray-900\">Rides</h3>\n                        <p className=\"text-sm text-gray-500\">Travel Safe. Tracked Rides.</p>\n                     </div>\n                  </div>\n               </div>\n\n               {/* Tickets - Small Tile */}\n               <div className=\"md:col-span-1 relative group overflow-hidden rounded-3xl bg-pink-50 shadow-lg border border-pink-100 cursor-pointer hover:shadow-xl transition-all\" onClick={() => navigate('/tickets')}>\n                  <div className=\"p-6 h-full flex flex-col justify-between\">\n                     <div className=\"flex justify-between items-start\">\n                        <div className=\"bg-pink-500 w-10 h-10 rounded-lg flex items-center justify-center text-white\">\n                           <Ticket className=\"h-5 w-5\" />\n                        </div>\n                        <span className=\"bg-pink-100 text-pink-800 text-xs font-bold px-2 py-1 rounded-full\">Hot</span>\n                     </div>\n                     <div>\n                        <h3 className=\"text-xl font-bold text-gray-900\">Events</h3>\n                        <p className=\"text-sm text-gray-500\">No Scalpers. Real Tickets.</p>\n                     </div>\n                  </div>\n               </div>\n\n            </div>\n         </section>\n\n         {/* Social Proof Ticker */}\n         <div className=\"bg-gray-900 py-4 overflow-hidden\">\n            <div className=\"flex whitespace-nowrap animate-marquee\">\n               {[\n                  \"John from Arima just hired a Plumber\",\n                  \"Sarah from POS bought a Honda Civic\",\n                  \"Mike from Chaguanas sold his iPhone\",\n                  \"Lisa from Tobago booked a Ride\",\n                  \"David from San Fernando got a Job Letter\",\n                  \"TriniBuild: 5,000+ Verified Users\",\n                  \"Secure Payments via Endcash\",\n               ].map((text, i) => (\n                  <span key={i} className=\"text-gray-400 mx-8 font-mono text-sm flex items-center\">\n                     <div className=\"w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse\"></div>\n                     {text}\n                  </span>\n               ))}\n            </div>\n         </div>\n\n         {/* Pain Points Section */}\n         <section className=\"py-24 bg-white relative overflow-hidden\">\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10\">\n               <div className=\"bg-gray-50 rounded-3xl p-8 md:p-16 shadow-xl border border-gray-100\">\n                  <div className=\"max-w-4xl mx-auto text-center\">\n                     <h2 className=\"text-3xl md:text-4xl font-display font-bold text-gray-900 mb-8\">\n                        We Know the Struggle: That\u2019s Why We Made TriniBuild\n                     </h2>\n                     <p className=\"text-xl text-gray-600 mb-10 leading-relaxed\">\n                        Look, we know how it goes in T&T. Banking\u2019s a hassle. Getting a website feels like a big-company thing. And sometimes it feels like nobody building nothing for we. Well, that\u2019s why we built this. On TriniBuild, you don\u2019t need a credit card to get started. Get a free website and list your first 10 items on us. We set you up as your own boss and give you the tools to prove your income, handle your business, and do it all \u2018for we, by we.\u2019\n                     </p>\n                     <Link to=\"/auth?mode=signup\" className=\"inline-flex items-center px-8 py-4 bg-gray-900 text-white rounded-full font-bold text-lg shadow-lg hover:bg-gray-800 transition-all hover:scale-105\">\n                        Build My Free Page Now <ArrowRight className=\"ml-2 h-5 w-5\" />\n                     </Link>\n                  </div>\n               </div>\n            </div>\n         </section >\n\n         {/* Mid Ad Spot (Preserved) */}\n         < div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\" >\n            <AdSpot page=\"home\" slot=\"bottom\" />\n         </div >\n\n         {/* AI Paperwork Assistant - Lead Magnet */}\n         < section className=\"py-20 bg-indigo-900 relative overflow-hidden\" >\n            <div className=\"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/diagmonds-light.png')] opacity-10\"></div>\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 flex flex-col md:flex-row items-center justify-between gap-12\">\n               <div className=\"md:w-1/2 text-white\">\n                  <div className=\"inline-block bg-indigo-800 text-indigo-200 text-xs font-bold px-3 py-1 rounded-full mb-4 border border-indigo-700\">\n                     NEW: AI DOCUMENT ASSISTANT\n                  </div>\n                  <h2 className=\"text-4xl md:text-5xl font-display font-bold mb-6 leading-tight\">\n                     Paperwork Giving You a Migraine?\n                  </h2>\n                  <p className=\"text-xl text-indigo-200 mb-8 leading-relaxed\">\n                     Let AI write your Job Letters, Proof of Income, and Visa Letters in seconds. Stop waiting in lines and get approved faster.\n                  </p>\n                  <div className=\"flex flex-col sm:flex-row gap-4\">\n                     <button\n                        onClick={() => {\n                           const event = new CustomEvent('open-chat', { detail: { mode: 'paperwork_assistant' } });\n                           window.dispatchEvent(event);\n                        }}\n                        className=\"px-8 py-4 bg-white text-indigo-900 rounded-full font-bold text-lg shadow-lg hover:bg-indigo-50 transition-all hover:scale-105 flex items-center justify-center\"\n                     >\n                        Chat with your business expert <ArrowRight className=\"ml-2 h-5 w-5\" />\n                     </button>\n                  </div>\n               </div>\n               <div className=\"md:w-1/2 flex justify-center\">\n                  <div className=\"relative\">\n                     <div className=\"absolute -inset-4 bg-indigo-500/30 rounded-full blur-2xl animate-pulse\"></div>\n                     <div className=\"bg-white p-6 rounded-2xl shadow-2xl max-w-sm relative transform rotate-3 hover:rotate-0 transition-transform duration-500\">\n                        <div className=\"flex items-center gap-4 mb-4 border-b border-gray-100 pb-4\">\n                           <div className=\"w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center text-indigo-600\">\n                              <Wand2 className=\"h-6 w-6\" />\n                           </div>\n                           <div>\n                              <h4 className=\"font-bold text-gray-900\">AI Document Generator</h4>\n                              <p className=\"text-xs text-gray-500\">Instant \u2022 Verified \u2022 PDF</p>\n                           </div>\n                        </div>\n                        <div className=\"space-y-3\">\n                           <div className=\"flex items-start gap-3\">\n                              <Check className=\"h-5 w-5 text-green-500 mt-0.5\" />\n                              <p className=\"text-sm text-gray-600\">US Visa Letters</p>\n                           </div>\n                           <div className=\"flex items-start gap-3\">\n                              <Check className=\"h-5 w-5 text-green-500 mt-0.5\" />\n                              <p className=\"text-sm text-gray-600\">Proof of Income</p>\n                           </div>\n                           <div className=\"flex items-start gap-3\">\n                              <Check className=\"h-5 w-5 text-green-500 mt-0.5\" />\n                              <p className=\"text-sm text-gray-600\">Contractor Agreements</p>\n                           </div>\n                        </div>\n                     </div>\n                  </div>\n               </div>\n            </div>\n         </section >\n\n         {/* Final CTA */}\n         < section className=\"py-24 bg-gray-900 relative overflow-hidden\" >\n            <div className=\"absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]\"></div>\n            <div className=\"relative z-10 max-w-4xl mx-auto text-center px-4\">\n               <h2 className=\"text-4xl md:text-5xl font-display font-bold text-white mb-8\">We Made This for We People</h2>\n               <p className=\"text-xl text-gray-400 mb-10 leading-relaxed\">\n                  This isn\u2019t some foreign platform trying to fit into we island life. This is homegrown, just like a good pelau. We know the vibes. We know the challenges. And we built TriniBuild so that every vendor, every creative, every hustler in T&T can have their own space. This is \u2018For We, By We.\u2019\n               </p>\n               <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n                  <Link to=\"/auth?mode=signup\" className=\"px-8 py-4 bg-trini-red text-white rounded-full font-bold text-lg shadow-lg hover:bg-red-700 transition-colors flex items-center justify-center\">\n                     Get Started Free <ArrowRight className=\"ml-2 h-5 w-5\" />\n                  </Link>\n               </div>\n            </div>\n         </section >\n\n      </div >\n   );\n};\n",
  "pages/JobProfile.tsx": "import React, { useState } from 'react';\nimport { Briefcase, User, FileText, Plus, X, Check } from 'lucide-react';\nimport { Link, useNavigate } from 'react-router-dom';\n\nexport const JobProfile: React.FC = () => {\n   const navigate = useNavigate();\n   const [skills, setSkills] = useState<string[]>([]);\n   const [newSkill, setNewSkill] = useState('');\n   const [formData, setFormData] = useState({\n      title: '',\n      bio: '',\n      experience: 'Entry Level'\n   });\n\n   const addSkill = () => {\n      if (newSkill && !skills.includes(newSkill)) {\n         setSkills([...skills, newSkill]);\n         setNewSkill('');\n      }\n   };\n\n   const handleSave = () => {\n      const profile = {\n         ...formData,\n         skills,\n         updatedAt: new Date().toISOString()\n      };\n      localStorage.setItem('job_profile', JSON.stringify(profile));\n\n      alert(\"Profile Created! You can now 'Easy Apply' to jobs.\");\n      navigate('/jobs');\n   };\n\n   // Load existing profile on mount\n   React.useEffect(() => {\n      const saved = localStorage.getItem('job_profile');\n      if (saved) {\n         const p = JSON.parse(saved);\n         setFormData({ title: p.title, bio: p.bio, experience: p.experience });\n         setSkills(p.skills || []);\n      }\n   }, []);\n\n   return (\n      <div className=\"min-h-screen bg-gray-50 py-12\">\n         <div className=\"max-w-3xl mx-auto px-4\">\n            <div className=\"bg-white rounded-xl shadow-lg overflow-hidden\">\n               <div className=\"bg-purple-700 p-8 text-white text-center\">\n                  <div className=\"bg-white/20 w-20 h-20 rounded-full mx-auto mb-4 flex items-center justify-center text-3xl font-bold\">\n                     JD\n                  </div>\n                  <h1 className=\"text-2xl font-bold\">Create Professional Profile</h1>\n                  <p className=\"text-purple-200\">Let employers find you on TriniWorks</p>\n               </div>\n\n               <div className=\"p-8 space-y-8\">\n                  <div>\n                     <label className=\"block text-sm font-bold text-gray-700 mb-2\">Professional Headline</label>\n                     <div className=\"relative\">\n                        <Briefcase className=\"absolute left-3 top-3 text-gray-400 h-5 w-5\" />\n                        <input\n                           type=\"text\"\n                           placeholder=\"e.g. Experienced Graphic Designer or Sales Representative\"\n                           className=\"w-full pl-10 p-3 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500\"\n                           value={formData.title}\n                           onChange={e => setFormData({ ...formData, title: e.target.value })}\n                        />\n                     </div>\n                  </div>\n\n                  <div>\n                     <label className=\"block text-sm font-bold text-gray-700 mb-2\">Bio / Summary</label>\n                     <textarea\n                        rows={4}\n                        placeholder=\"Tell us about your experience...\"\n                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500\"\n                        value={formData.bio}\n                        onChange={e => setFormData({ ...formData, bio: e.target.value })}\n                     />\n                  </div>\n\n                  <div className=\"grid grid-cols-2 gap-6\">\n                     <div>\n                        <label className=\"block text-sm font-bold text-gray-700 mb-2\">Experience Level</label>\n                        <select\n                           className=\"w-full p-3 border border-gray-300 rounded-lg bg-white\"\n                           value={formData.experience}\n                           onChange={e => setFormData({ ...formData, experience: e.target.value })}\n                        >\n                           <option>Entry Level</option>\n                           <option>Mid-Level (2-5 yrs)</option>\n                           <option>Senior (5+ yrs)</option>\n                           <option>Executive</option>\n                        </select>\n                     </div>\n                     <div>\n                        <label className=\"block text-sm font-bold text-gray-700 mb-2\">Resume / CV</label>\n                        <div className=\"border border-gray-300 rounded-lg p-2 flex items-center justify-between bg-gray-50\">\n                           <span className=\"text-sm text-gray-500 ml-2\">No file chosen</span>\n                           <button className=\"bg-white border border-gray-300 px-3 py-1 rounded text-sm hover:bg-gray-100\">Upload</button>\n                        </div>\n                     </div>\n                  </div>\n\n                  <div>\n                     <label className=\"block text-sm font-bold text-gray-700 mb-2\">Skills</label>\n                     <div className=\"flex gap-2 mb-3\">\n                        <input\n                           type=\"text\"\n                           placeholder=\"Add a skill (e.g. Photoshop)\"\n                           className=\"flex-grow p-2 border border-gray-300 rounded-lg\"\n                           value={newSkill}\n                           onChange={e => setNewSkill(e.target.value)}\n                           onKeyDown={e => e.key === 'Enter' && addSkill()}\n                        />\n                        <button onClick={addSkill} className=\"bg-gray-900 text-white p-2 rounded-lg hover:bg-gray-700\"><Plus /></button>\n                     </div>\n                     <div className=\"flex flex-wrap gap-2\">\n                        {skills.map(skill => (\n                           <span key={skill} className=\"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-medium flex items-center\">\n                              {skill} <button onClick={() => setSkills(skills.filter(s => s !== skill))} className=\"ml-2 hover:text-purple-900\"><X className=\"h-3 w-3\" /></button>\n                           </span>\n                        ))}\n                     </div>\n                  </div>\n\n                  <div className=\"pt-6 border-t border-gray-100 flex justify-end gap-4\">\n                     <Link to=\"/earn\" className=\"px-6 py-3 text-gray-600 hover:bg-gray-100 rounded-lg font-medium\">Cancel</Link>\n                     <button onClick={handleSave} className=\"px-8 py-3 bg-purple-600 text-white rounded-lg font-bold hover:bg-purple-700 shadow-lg flex items-center\">\n                        <Check className=\"h-5 w-5 mr-2\" /> Save Profile\n                     </button>\n                  </div>\n               </div>\n            </div>\n         </div>\n      </div>\n   );\n};",
  "pages/Jobs.tsx": "import React, { useState, useEffect } from 'react';\nimport { Briefcase, MapPin, Search, Filter, Clock, DollarSign, Building, ArrowRight, Plus, Star, ShieldCheck, Wrench, Zap, Droplets, Paintbrush, Truck, Camera, ChevronRight, X, CheckCircle, AlertCircle, HardHat, FileText } from 'lucide-react';\nimport { proService, ServicePro } from '../services/proService';\nimport { ChatWidget } from '../components/ChatWidget';\nimport { AdSpot } from '../components/AdSpot';\nimport { JobLetterGenerator } from '../components/JobLetterGenerator';\n\nexport const Jobs: React.FC = () => {\n   const [activeTab, setActiveTab] = useState<'services' | 'jobs'>('services');\n   const [pros, setPros] = useState<ServicePro[]>([]);\n   const [selectedCategory, setSelectedCategory] = useState('All');\n   const [selectedPro, setSelectedPro] = useState<ServicePro | null>(null);\n   const [showQuoteModal, setShowQuoteModal] = useState(false);\n   const [quoteForm, setQuoteForm] = useState({ name: '', phone: '', details: '' });\n\n   // AI Generator State\n   const [showJobLetterModal, setShowJobLetterModal] = useState(false);\n\n   // Job Board State (Legacy)\n   const [localJobs, setLocalJobs] = useState<any[]>([]);\n   const initialJobs = [\n      { id: 1, title: \"Store Manager\", company: \"Pennywise Cosmetics\", type: \"Full-time\", location: \"Chaguanas\", salary: \"$5,000 - $7,000/mth\", posted: \"2d ago\" },\n      { id: 2, title: \"Delivery Driver\", company: \"TriniRides\", type: \"Contract\", location: \"Port of Spain\", salary: \"$200/trip\", posted: \"5h ago\" },\n      { id: 3, title: \"Web Developer\", company: \"TriniBuild\", type: \"Remote\", location: \"Anywhere\", salary: \"$15,000/mth\", posted: \"1w ago\" },\n   ];\n\n   useEffect(() => {\n      const loadData = async () => {\n         const proData = await proService.getPros();\n         setPros(proData);\n         const storedJobs = JSON.parse(localStorage.getItem('posted_jobs') || '[]');\n         setLocalJobs(storedJobs);\n      };\n      loadData();\n   }, []);\n\n   const handleQuoteSubmit = (e: React.FormEvent) => {\n      e.preventDefault();\n      alert(`Quote request sent to ${selectedPro?.name}! They will contact you shortly.`);\n      setShowQuoteModal(false);\n      setQuoteForm({ name: '', phone: '', details: '' });\n   };\n\n   const categories = [\n      { id: 'Plumbing', icon: Droplets, color: 'bg-blue-100 text-blue-600' },\n      { id: 'Electrical', icon: Zap, color: 'bg-yellow-100 text-yellow-600' },\n      { id: 'Cleaning', icon: SparklesIcon, color: 'bg-purple-100 text-purple-600' }, // Defined below\n      { id: 'Construction', icon: HardHat, color: 'bg-orange-100 text-orange-600' },\n      { id: 'Events', icon: Camera, color: 'bg-pink-100 text-pink-600' },\n      { id: 'Tech Support', icon: Wrench, color: 'bg-gray-100 text-gray-600' },\n   ];\n\n   const filteredPros = selectedCategory === 'All' ? pros : pros.filter(p => p.category === selectedCategory || p.services.some(s => s.includes(selectedCategory)));\n   const allJobs = [...localJobs, ...initialJobs];\n\n   return (\n      <div className=\"min-h-screen bg-gray-50 font-sans\">\n\n         {/* Hero Section */}\n         <div className=\"bg-trini-black text-white relative overflow-hidden\">\n            <div className=\"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1581578731117-104f2a8d23e9?q=80&w=2070&auto=format&fit=crop')] bg-cover bg-center opacity-20\"></div>\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 relative z-10 text-center\">\n               <h1 className=\"text-4xl md:text-6xl font-extrabold mb-6 tracking-tight\">\n                  Hire Top <span className=\"text-trini-teal\">Pros</span> in T&T\n               </h1>\n               <p className=\"text-xl text-gray-300 max-w-2xl mx-auto mb-10\">\n                  From plumbing to party planning, find trusted professionals for any project.\n               </p>\n\n               {/* Search Bar */}\n               <div className=\"max-w-3xl mx-auto bg-white rounded-full p-2 flex shadow-2xl transform hover:scale-105 transition-transform duration-300\">\n                  <div className=\"flex-grow flex items-center px-6 border-r border-gray-200\">\n                     <Search className=\"h-6 w-6 text-gray-400 mr-3\" />\n                     <input type=\"text\" placeholder=\"What do you need done?\" className=\"w-full h-12 outline-none text-gray-800 text-lg placeholder-gray-500\" />\n                  </div>\n                  <div className=\"hidden sm:flex items-center px-6 w-1/3\">\n                     <MapPin className=\"h-6 w-6 text-gray-400 mr-3\" />\n                     <input type=\"text\" placeholder=\"Zip Code\" className=\"w-full h-12 outline-none text-gray-800 text-lg placeholder-gray-500\" />\n                  </div>\n                  <button className=\"bg-trini-teal text-white px-8 py-3 rounded-full font-bold text-lg hover:bg-teal-600 transition-colors shadow-lg\">\n                     Search\n                  </button>\n               </div>\n\n               {/* Toggle Tabs */}\n               <div className=\"flex justify-center mt-12 gap-4\">\n                  <button\n                     onClick={() => setActiveTab('services')}\n                     className={`px-6 py-2 rounded-full font-bold text-sm transition-all ${activeTab === 'services' ? 'bg-white text-trini-black' : 'bg-white/10 text-white hover:bg-white/20'}`}\n                  >\n                     Find a Pro\n                  </button>\n                  <button\n                     onClick={() => setActiveTab('jobs')}\n                     className={`px-6 py-2 rounded-full font-bold text-sm transition-all ${activeTab === 'jobs' ? 'bg-white text-trini-black' : 'bg-white/10 text-white hover:bg-white/20'}`}\n                  >\n                     Find a Job\n                  </button>\n               </div>\n            </div>\n         </div>\n\n         <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n            <AdSpot page=\"jobs\" slot=\"top\" className=\"mb-8\" />\n\n            {activeTab === 'services' ? (\n               <div className=\"animate-in fade-in slide-in-from-bottom-4\">\n                  {/* Categories Grid */}\n                  <div className=\"mb-12\">\n                     <h2 className=\"text-2xl font-bold text-gray-900 mb-6\">Popular Services</h2>\n                     <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4\">\n                        {categories.map((cat) => (\n                           <button\n                              key={cat.id}\n                              onClick={() => setSelectedCategory(cat.id === selectedCategory ? 'All' : cat.id)}\n                              className={`p-4 rounded-xl border transition-all flex flex-col items-center justify-center gap-3 hover:shadow-md ${selectedCategory === cat.id ? 'border-trini-teal bg-teal-50 ring-2 ring-trini-teal ring-opacity-50' : 'border-gray-200 bg-white hover:border-gray-300'}`}\n                           >\n                              <div className={`p-3 rounded-full ${cat.color}`}>\n                                 <cat.icon className=\"h-6 w-6\" />\n                              </div>\n                              <span className=\"font-bold text-sm text-gray-700\">{cat.id}</span>\n                           </button>\n                        ))}\n                     </div>\n                  </div>\n\n                  {/* Pros List */}\n                  <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n                     {/* Sidebar Ad / Filter */}\n                     <div className=\"lg:col-span-1 space-y-6\">\n                        <div className=\"bg-gradient-to-br from-blue-600 to-blue-800 rounded-2xl p-6 text-white shadow-lg\">\n                           <ShieldCheck className=\"h-12 w-12 mb-4 text-blue-200\" />\n                           <h3 className=\"text-xl font-bold mb-2\">TriniBuild Guarantee</h3>\n                           <p className=\"text-blue-100 text-sm mb-4\">Hire with confidence. Verified Pros are background checked and insured.</p>\n                           <button className=\"w-full bg-white text-blue-700 font-bold py-2 rounded-lg hover:bg-blue-50 transition-colors\">\n                              Learn More\n                           </button>\n                        </div>\n\n                        <div className=\"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm\">\n                           <h3 className=\"font-bold text-gray-900 mb-4\">Are you a Pro?</h3>\n                           <p className=\"text-gray-600 text-sm mb-4\">Join thousands of pros growing their business on TriniBuild.</p>\n                           <ul className=\"space-y-2 text-sm text-gray-500 mb-6\">\n                              <li className=\"flex items-center\"><CheckCircle className=\"h-4 w-4 text-green-500 mr-2\" /> Get qualified leads</li>\n                              <li className=\"flex items-center\"><CheckCircle className=\"h-4 w-4 text-green-500 mr-2\" /> Build your reputation</li>\n                              <li className=\"flex items-center\"><CheckCircle className=\"h-4 w-4 text-green-500 mr-2\" /> Zero upfront fees</li>\n                           </ul>\n                           <button className=\"w-full border-2 border-trini-black text-trini-black font-bold py-2 rounded-lg hover:bg-gray-50 transition-colors\">\n                              Join as a Pro\n                           </button>\n                        </div>\n                     </div>\n\n                     {/* Main List */}\n                     <div className=\"lg:col-span-2 space-y-6\">\n                        <div className=\"flex justify-between items-center\">\n                           <h2 className=\"text-xl font-bold text-gray-900\">{selectedCategory === 'All' ? 'Top Rated Pros' : `${selectedCategory} Pros`}</h2>\n                           <span className=\"text-sm text-gray-500\">{filteredPros.length} results</span>\n                        </div>\n\n                        {filteredPros.map((pro) => (\n                           <div key={pro.id} className=\"bg-white rounded-2xl border border-gray-200 p-6 hover:shadow-lg transition-all group relative overflow-hidden\">\n                              {pro.isPromoted && (\n                                 <div className=\"absolute top-0 right-0 bg-yellow-400 text-black text-xs font-bold px-3 py-1 rounded-bl-lg z-10\">\n                                    Promoted\n                                 </div>\n                              )}\n                              <div className=\"flex flex-col sm:flex-row gap-6\">\n                                 <div className=\"flex-shrink-0 relative\">\n                                    <img src={pro.image} alt={pro.name} className=\"w-24 h-24 rounded-xl object-cover shadow-sm\" />\n                                    {pro.isVerified && (\n                                       <div className=\"absolute -bottom-2 -right-2 bg-blue-500 text-white p-1 rounded-full border-2 border-white\" title=\"Verified Pro\">\n                                          <ShieldCheck className=\"h-4 w-4\" />\n                                       </div>\n                                    )}\n                                 </div>\n                                 <div className=\"flex-grow\">\n                                    <div className=\"flex justify-between items-start\">\n                                       <div>\n                                          <h3 className=\"text-lg font-bold text-gray-900 group-hover:text-trini-teal transition-colors flex items-center gap-2\">\n                                             {pro.businessName}\n                                          </h3>\n                                          <div className=\"flex items-center gap-2 mt-1\">\n                                             <div className=\"flex items-center text-yellow-400\">\n                                                <Star className=\"h-4 w-4 fill-current\" />\n                                                <span className=\"text-gray-900 font-bold ml-1\">{pro.rating}</span>\n                                             </div>\n                                             <span className=\"text-gray-400 text-sm\">({pro.reviewCount} reviews)</span>\n                                          </div>\n                                       </div>\n                                       <div className=\"text-right hidden sm:block\">\n                                          <p className=\"text-lg font-bold text-gray-900\">{pro.hourlyRate}</p>\n                                          <p className=\"text-xs text-gray-500\">Est. Price</p>\n                                       </div>\n                                    </div>\n\n                                    <p className=\"text-gray-600 text-sm mt-3 line-clamp-2\">{pro.description}</p>\n\n                                    <div className=\"flex flex-wrap gap-2 mt-4\">\n                                       {pro.badges.map(badge => (\n                                          <span key={badge} className=\"bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded-md font-medium\">\n                                             {badge}\n                                          </span>\n                                       ))}\n                                    </div>\n\n                                    <div className=\"mt-6 flex gap-3\">\n                                       <button\n                                          onClick={() => { setSelectedPro(pro); setShowQuoteModal(true); }}\n                                          className=\"flex-1 bg-trini-teal text-white py-2 rounded-lg font-bold hover:bg-teal-600 transition-colors shadow-md\"\n                                       >\n                                          Get a Quote\n                                       </button>\n                                       <button className=\"px-4 py-2 border border-gray-200 rounded-lg font-bold text-gray-600 hover:bg-gray-50\">\n                                          View Profile\n                                       </button>\n                                    </div>\n                                 </div>\n                              </div>\n                           </div>\n                        ))}\n                     </div>\n                  </div>\n               </div>\n            ) : (\n               <div className=\"animate-in fade-in slide-in-from-bottom-4\">\n                  {/* AI Tool Banner */}\n                  <div className=\"bg-gradient-to-r from-trini-teal to-teal-800 rounded-2xl p-6 mb-8 text-white shadow-lg flex flex-col md:flex-row items-center justify-between gap-6\">\n                     <div>\n                        <h2 className=\"text-2xl font-bold mb-2 flex items-center gap-2\">\n                           <FileText className=\"h-6 w-6\" /> Need a Job Letter?\n                        </h2>\n                        <p className=\"text-teal-100\">Use our AI to write a professional application letter in seconds.</p>\n                     </div>\n                     <button\n                        onClick={() => setShowJobLetterModal(true)}\n                        className=\"bg-white text-trini-teal px-6 py-3 rounded-full font-bold hover:bg-teal-50 transition-colors shadow-md whitespace-nowrap\"\n                     >\n                        Generate Letter\n                     </button>\n                  </div>\n\n                  {/* Legacy Job Board UI */}\n                  <div className=\"bg-white rounded-2xl shadow-sm border border-gray-200 p-8 text-center mb-8\">\n                     <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Looking for Employment?</h2>\n                     <p className=\"text-gray-600 mb-6\">Browse hundreds of full-time and part-time job listings.</p>\n\n                     <div className=\"space-y-4 text-left max-w-3xl mx-auto\">\n                        {allJobs.map(job => (\n                           <div key={job.id} className=\"bg-gray-50 rounded-xl p-6 border border-gray-200 hover:border-trini-teal transition-colors cursor-pointer\">\n                              <div className=\"flex justify-between items-start\">\n                                 <div>\n                                    <h3 className=\"font-bold text-lg text-gray-900\">{job.title}</h3>\n                                    <p className=\"text-gray-600\">{job.company} \u2022 {job.location}</p>\n                                 </div>\n                                 <span className=\"bg-white border border-gray-200 px-3 py-1 rounded-full text-xs font-bold text-gray-600\">{job.type}</span>\n                              </div>\n                              <div className=\"mt-4 flex justify-between items-center\">\n                                 <span className=\"text-sm font-medium text-green-600\">{job.salary}</span>\n                                 <span className=\"text-xs text-gray-400\">{job.posted}</span>\n                              </div>\n                           </div>\n                        ))}\n                     </div>\n                  </div>\n               </div>\n            )}\n         </div>\n\n         {/* Quote Modal */}\n         {showQuoteModal && selectedPro && (\n            <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in\">\n               <div className=\"bg-white rounded-2xl max-w-lg w-full p-6 shadow-2xl relative animate-in zoom-in-95\">\n                  <button onClick={() => setShowQuoteModal(false)} className=\"absolute top-4 right-4 text-gray-400 hover:text-gray-600\">\n                     <X className=\"h-6 w-6\" />\n                  </button>\n\n                  <div className=\"text-center mb-6\">\n                     <div className=\"w-16 h-16 bg-gray-100 rounded-full mx-auto mb-3 overflow-hidden\">\n                        <img src={selectedPro.image} alt={selectedPro.name} className=\"w-full h-full object-cover\" />\n                     </div>\n                     <h2 className=\"text-xl font-bold text-gray-900\">Get a Quote from {selectedPro.businessName}</h2>\n                     <p className=\"text-sm text-gray-500\">Response time: Usually within 1 hour</p>\n                  </div>\n\n                  <form onSubmit={handleQuoteSubmit} className=\"space-y-4\">\n                     <div>\n                        <label className=\"block text-sm font-bold text-gray-700 mb-1\">Your Name</label>\n                        <input\n                           type=\"text\" required\n                           value={quoteForm.name}\n                           onChange={e => setQuoteForm({ ...quoteForm, name: e.target.value })}\n                           className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-trini-teal outline-none\"\n                        />\n                     </div>\n                     <div>\n                        <label className=\"block text-sm font-bold text-gray-700 mb-1\">Phone Number</label>\n                        <input\n                           type=\"tel\" required\n                           value={quoteForm.phone}\n                           onChange={e => setQuoteForm({ ...quoteForm, phone: e.target.value })}\n                           className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-trini-teal outline-none\"\n                        />\n                     </div>\n                     <div>\n                        <label className=\"block text-sm font-bold text-gray-700 mb-1\">Project Details</label>\n                        <textarea\n                           rows={3} required\n                           placeholder=\"Describe what you need done...\"\n                           value={quoteForm.details}\n                           onChange={e => setQuoteForm({ ...quoteForm, details: e.target.value })}\n                           className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-trini-teal outline-none\"\n                        ></textarea>\n                     </div>\n\n                     <div className=\"bg-yellow-50 p-3 rounded-lg flex items-start gap-2 text-xs text-yellow-800\">\n                        <AlertCircle className=\"h-4 w-4 flex-shrink-0 mt-0.5\" />\n                        <p>By submitting, you agree to share your contact details with this pro. TriniBuild does not charge you for quotes.</p>\n                     </div>\n\n                     <button type=\"submit\" className=\"w-full bg-trini-teal text-white font-bold py-3 rounded-lg hover:bg-teal-600 transition-colors shadow-lg\">\n                        Send Request\n                     </button>\n                  </form>\n               </div>\n            </div>\n         )}\n\n         <JobLetterGenerator isOpen={showJobLetterModal} onClose={() => setShowJobLetterModal(false)} />\n\n         <ChatWidget mode=\"service_expert\" />\n      </div>\n   );\n};\n\n// Helper Icon\nconst SparklesIcon = ({ className }: { className?: string }) => (\n   <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><path d=\"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z\" /><path d=\"M5 3v4\" /><path d=\"M9 3v4\" /><path d=\"M3 9h4\" /><path d=\"M3 5h4\" /></svg>\n);\n",
  "pages/Legal.tsx": "import React from 'react';\nimport { Shield, FileText, CheckCircle, AlertTriangle } from 'lucide-react';\n\ninterface LegalProps {\n  type: 'terms' | 'privacy' | 'contractor-agreement' | 'liability-waiver' | 'affiliate-terms' | 'document-disclaimer';\n}\n\nexport const Legal: React.FC<LegalProps> = ({ type }) => {\n  const renderContent = () => {\n    switch (type) {\n      case 'terms':\n        return (\n          <>\n            <h1>TriniBuild Terms of Service</h1>\n            <p className=\"text-gray-500\">Last Updated: November 25, 2025</p>\n\n            <h3>1. Platform Nature</h3>\n            <p>\n              TriniBuild is a digital platform providing marketplace, service, job, ride-share, ticketing, and business-document tools.\n              TriniBuild does not employ, supervise, or control users.\n            </p>\n\n            <h3>2. Independent Contractor Status</h3>\n            <p>\n              <strong>Mandatory for all users:</strong> All users (vendors, buyers, drivers, delivery persons, freelancers, job seekers, paid members, affiliate users, service providers)\n              acknowledge they are independent contractors responsible for their own taxes, insurance, licenses, and legal compliance.\n            </p>\n\n            <h3>3. Affiliate Membership</h3>\n            <p>\n              All users are automatically enrolled as affiliate partners and may earn commissions on referrals. Users are responsible for taxes on any commissions earned.\n            </p>\n\n            <h3>4. DocuSign Requirement</h3>\n            <p>\n              Certain features (drivers, service providers, freelancers, paid subscription members) require signing a legally binding agreement via DocuSign.\n            </p>\n\n            <h3>5. Liability Limitations</h3>\n            <p>\n              TriniBuild is not liable for accidents, injuries, property damage, financial losses, disputes, fraud, downtime, or user-generated content to the maximum extent permissible under law.\n            </p>\n          </>\n        );\n      case 'privacy':\n        return (\n          <>\n            <h1>TriniBuild Privacy Policy</h1>\n            <p className=\"text-gray-500\">Last Updated: November 25, 2025</p>\n\n            <h3>1. Data Collected</h3>\n            <p>\n              We collect name, address, phone, email, device data, location (optional for rides), business information, uploaded documents, transaction history, and ID for KYC purposes.\n            </p>\n\n            <h3>2. How Data is Used</h3>\n            <p>\n              Data is used for identity verification, document generation, fraud prevention, analytics, platform improvement, affiliate tracking, and payment processing.\n            </p>\n\n            <h3>3. Third-Party Sharing</h3>\n            <p>\n              We share data with KYC providers, payment processors, DocuSign, fraud prevention services, and law enforcement (if required).\n            </p>\n          </>\n        );\n      case 'contractor-agreement':\n        return (\n          <>\n            <h1>Independent Contractor Agreement</h1>\n            <div className=\"bg-yellow-50 p-4 rounded-lg border border-yellow-200 mb-6 flex items-start\">\n              <AlertTriangle className=\"h-5 w-5 text-yellow-600 mr-2 mt-0.5\" />\n              <p className=\"text-sm text-yellow-800\">\n                This is a legally binding agreement. By using TriniBuild services as a provider, driver, or vendor, you agree to these terms.\n              </p>\n            </div>\n\n            <h3>1. Contractor Status</h3>\n            <p>\n              The user acknowledges that they are an independent contractor, not an employee of TriniBuild. You are solely responsible for your own taxes, insurance, licenses, and compliance with local laws.\n            </p>\n\n            <h3>2. No Employment Claims</h3>\n            <p>\n              You agree to waive any claims to employment benefits, including but not limited to health insurance, paid time off, or retirement benefits.\n            </p>\n\n            <h3>3. Business Document Rights</h3>\n            <p>\n              You grant TriniBuild permission to generate job letters, income summaries, and business-related documents based on your platform activity for your convenience.\n            </p>\n\n            <h3>4. Tax Responsibility</h3>\n            <p>\n              All income earned through TriniBuild is self-employment income. TriniBuild does not withhold taxes on your behalf.\n            </p>\n          </>\n        );\n      case 'liability-waiver':\n        return (\n          <>\n            <h1>Service, Delivery & Ride Liability Waiver</h1>\n\n            <h3>1. User Risk Acknowledgement</h3>\n            <p>\n              User acknowledges all responsibilities and risks associated with transporting passengers, delivering items, or performing services. You operate entirely at your own risk.\n            </p>\n\n            <h3>2. TriniBuild Liability Disclaimer</h3>\n            <p>\n              TriniBuild is not responsible for injuries, accidents, thefts, property damage, or disputes arising from interactions between users.\n            </p>\n\n            <h3>3. Insurance Requirement</h3>\n            <p>\n              You must maintain appropriate insurance coverage (vehicle, liability, etc.) to cover your work on the platform.\n            </p>\n          </>\n        );\n      case 'affiliate-terms':\n        return (\n          <>\n            <h1>Affiliate & Referral Terms</h1>\n\n            <h3>1. Automatic Membership</h3>\n            <p>\n              All users are automatically considered affiliate partners of TriniBuild.\n            </p>\n\n            <h3>2. Commissions</h3>\n            <p>\n              Commission is paid based on approved referrals only. TriniBuild reserves the right to withhold commissions for suspicious activity.\n            </p>\n\n            <h3>3. Prohibited Actions</h3>\n            <p>\n              Spam marketing, false claims, unauthorized advertisements, and misrepresentation of TriniBuild are strictly prohibited and may result in account termination.\n            </p>\n          </>\n        );\n      case 'document-disclaimer':\n        return (\n          <>\n            <h1>Document Generation Disclaimer</h1>\n\n            <h3>1. Automated Generation</h3>\n            <p>\n              All documents (job letters, income summaries, contractor statements) are automatically generated from user activity and data provided by you.\n            </p>\n\n            <h3>2. No Employment Relationship</h3>\n            <p>\n              The generation of these documents does not imply that TriniBuild employs the user. They are proof of your independent business activity on the platform.\n            </p>\n\n            <h3>3. No Guarantee</h3>\n            <p>\n              Documents are provided for convenience only and do not guarantee income or approval by any financial institution or visa authority.\n            </p>\n          </>\n        );\n      default:\n        return <p>Document not found.</p>;\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-white py-12\">\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"prose prose-red lg:prose-lg mx-auto\">\n          <div className=\"flex justify-center mb-8\">\n            <img src=\"/trinibuild-logo.png\" alt=\"TriniBuild Logo\" className=\"h-16 w-auto\" />\n          </div>\n          {renderContent()}\n        </div>\n\n        <div className=\"mt-12 pt-8 border-t border-gray-200 text-center text-sm text-gray-500\">\n          <p>\n            &copy; {new Date().getFullYear()} TriniBuild. All rights reserved.\n            <br />\n            Use of this site constitutes acceptance of our <a href=\"/#/terms\" className=\"text-trini-red hover:underline\">Terms</a> and <a href=\"/#/privacy\" className=\"text-trini-red hover:underline\">Privacy Policy</a>.\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};",
  "pages/Onboarding.tsx": "import React, { useState } from 'react';\nimport { User, Store, CheckCircle, ArrowRight, MapPin, TrendingUp, Briefcase, DollarSign, Star, Car, FileSignature, Loader2 } from 'lucide-react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { legalService } from '../services/legalService';\n\nexport const Onboarding: React.FC = () => {\n  const navigate = useNavigate();\n  const [step, setStep] = useState(1);\n  const [intent, setIntent] = useState<'sell' | 'buy' | 'work' | null>(null);\n  const [businessName, setBusinessName] = useState('');\n  const [location, setLocation] = useState('');\n\n  const [isSigning, setIsSigning] = useState(false);\n  const [hasSigned, setHasSigned] = useState(false);\n\n  const totalSteps = 3;\n  const progress = (step / totalSteps) * 100;\n\n  const handleSign = async () => {\n    setIsSigning(true);\n    try {\n      await legalService.signDocument('current-user', 'contractor_agreement', 'Signed via DocuSign');\n      setHasSigned(true);\n    } catch (error) {\n      console.error(\"Signing failed\", error);\n    } finally {\n      setIsSigning(false);\n    }\n  };\n\n  const handleContinue = () => {\n    if (step === 1 && intent) {\n      // Save intent immediately\n      localStorage.setItem('user_intent', intent);\n\n      if (intent === 'work') {\n        navigate('/work/profile');\n      } else {\n        setStep(2);\n      }\n    } else if (step === 2) {\n      if (intent === 'sell') {\n        if (businessName.trim()) {\n          // Save business name for the creator to pick up\n          localStorage.setItem('draft_business_name', businessName);\n          setStep(3);\n        }\n      } else if (intent === 'buy') {\n        if (location.trim()) {\n          localStorage.setItem('user_location', location);\n        }\n        // Buyers skip legal signing for now or have a simpler flow\n        navigate('/directory');\n      }\n    } else if (step === 3) {\n      // Final Step Logic (Merchant Legal)\n      if (intent === 'sell') {\n        navigate(`/create-store?claim_name=${encodeURIComponent(businessName)}`);\n      }\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8 font-sans\">\n\n      {/* Progress Bar */}\n      <div className=\"fixed top-16 left-0 right-0 h-1 bg-gray-200\">\n        <div\n          className=\"h-full bg-trini-red transition-all duration-500 ease-out\"\n          style={{ width: `${progress}%` }}\n        ></div>\n      </div>\n\n      <div className=\"sm:mx-auto sm:w-full sm:max-w-md\">\n        <div className=\"text-center mb-8\">\n          <div className=\"inline-flex items-center justify-center w-12 h-12 rounded-full bg-trini-black text-white font-bold text-xl mb-4 shadow-lg\">\n            TB\n          </div>\n          <h2 className=\"text-3xl font-extrabold text-gray-900\">\n            {step === 1 && \"What brings you here?\"}\n            {step === 2 && intent === 'sell' && \"Let's name your store\"}\n            {step === 2 && intent === 'buy' && \"Where are you located?\"}\n            {step === 3 && \"One Last Thing\"}\n          </h2>\n          <p className=\"mt-2 text-sm text-gray-600\">\n            {step === 1 && \"Select your path in the TriniBuild ecosystem.\"}\n            {step === 2 && intent === 'sell' && \"Customers need to know who you are.\"}\n            {step === 3 && \"We need to make it official.\"}\n          </p>\n        </div>\n\n        <div className=\"bg-white py-8 px-4 shadow-2xl sm:rounded-2xl sm:px-10 border border-gray-100 relative overflow-hidden\">\n\n          <div className=\"absolute top-0 right-0 bg-green-50 text-green-700 text-[10px] font-bold px-3 py-1 rounded-bl-xl border-b border-l border-green-100 flex items-center\">\n            <TrendingUp className=\"h-3 w-3 mr-1\" /> 45 people joined today\n          </div>\n\n          {step === 1 && (\n            <div className=\"space-y-3 mt-4\">\n              <button\n                onClick={() => setIntent('sell')}\n                className={`w-full text-left p-4 border-2 rounded-xl transition-all flex items-center group ${intent === 'sell' ? 'border-trini-red bg-red-50' : 'border-gray-100 hover:border-gray-300 hover:bg-gray-50'\n                  }`}\n              >\n                <div className={`p-3 rounded-full mr-4 ${intent === 'sell' ? 'bg-trini-red text-white' : 'bg-gray-100 text-gray-500 group-hover:bg-white'}`}>\n                  <Store className=\"h-6 w-6\" />\n                </div>\n                <div className=\"flex-grow\">\n                  <h3 className=\"font-bold text-gray-900\">Merchant</h3>\n                  <p className=\"text-xs text-gray-500\">Build a Store & Accept Payments.</p>\n                  <span className=\"text-[10px] font-bold text-trini-red bg-white px-1 rounded mt-1 inline-block\">TriniBuild Pay</span>\n                </div>\n                {intent === 'sell' && <CheckCircle className=\"h-5 w-5 text-trini-red\" />}\n              </button>\n\n              <button\n                onClick={() => setIntent('buy')}\n                className={`w-full text-left p-4 border-2 rounded-xl transition-all flex items-center group ${intent === 'buy' ? 'border-blue-500 bg-blue-50' : 'border-gray-100 hover:border-gray-300 hover:bg-gray-50'\n                  }`}\n              >\n                <div className={`p-3 rounded-full mr-4 ${intent === 'buy' ? 'bg-blue-500 text-white' : 'bg-gray-100 text-gray-500 group-hover:bg-white'}`}>\n                  <User className=\"h-6 w-6\" />\n                </div>\n                <div className=\"flex-grow\">\n                  <h3 className=\"font-bold text-gray-900\">Shopper</h3>\n                  <p className=\"text-xs text-gray-500\">Find Deals, Order Food & Request Rides.</p>\n                  <span className=\"text-[10px] font-bold text-blue-600 bg-white px-1 rounded mt-1 inline-block\">Ecosystem</span>\n                </div>\n                {intent === 'buy' && <CheckCircle className=\"h-5 w-5 text-blue-500\" />}\n              </button>\n\n              <button\n                onClick={() => setIntent('work')}\n                className={`w-full text-left p-4 border-2 rounded-xl transition-all flex items-center group ${intent === 'work' ? 'border-yellow-500 bg-yellow-50' : 'border-gray-100 hover:border-gray-300 hover:bg-gray-50'\n                  }`}\n              >\n                <div className={`p-3 rounded-full mr-4 ${intent === 'work' ? 'bg-yellow-500 text-white' : 'bg-gray-100 text-gray-500 group-hover:bg-white'}`}>\n                  <Car className=\"h-6 w-6\" />\n                </div>\n                <div className=\"flex-grow\">\n                  <h3 className=\"font-bold text-gray-900\">Driver / Worker</h3>\n                  <p className=\"text-xs text-gray-500\">Drive for Go or Find Jobs.</p>\n                  <span className=\"text-[10px] font-bold text-yellow-600 bg-white px-1 rounded mt-1 inline-block\">TriniBuild Go</span>\n                </div>\n                {intent === 'work' && <CheckCircle className=\"h-5 w-5 text-yellow-500\" />}\n              </button>\n            </div>\n          )}\n\n          {step === 2 && intent === 'sell' && (\n            <div className=\"space-y-6 animate-in fade-in\">\n              <div className=\"bg-blue-50 p-4 rounded-lg border border-blue-100 text-sm text-blue-800 flex items-start\">\n                <Star className=\"h-5 w-5 text-blue-500 mr-2 flex-shrink-0 fill-current\" />\n                <p>Great choice! <strong>TriniBuild Pay</strong> is included automatically with your store.</p>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-bold text-gray-700 mb-2\">Business Name</label>\n                <input\n                  type=\"text\"\n                  autoFocus\n                  placeholder=\"e.g. Aunty May's Roti Shop\"\n                  className=\"w-full p-4 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-trini-red focus:border-trini-red text-lg\"\n                  value={businessName}\n                  onChange={(e) => setBusinessName(e.target.value)}\n                />\n                <p className=\"text-xs text-gray-500 mt-2\">We'll use this to generate your free website instantly.</p>\n              </div>\n            </div>\n          )}\n\n          {step === 2 && intent === 'buy' && (\n            <div className=\"space-y-6 animate-in fade-in\">\n              <div>\n                <label className=\"block text-sm font-bold text-gray-700 mb-2\">Where are you located?</label>\n                <div className=\"relative\">\n                  <MapPin className=\"absolute left-3 top-3.5 h-5 w-5 text-gray-400\" />\n                  <input\n                    type=\"text\"\n                    autoFocus\n                    placeholder=\"City or Town (e.g. Chaguanas)\"\n                    className=\"w-full pl-10 p-3 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                    value={location}\n                    onChange={(e) => setLocation(e.target.value)}\n                  />\n                </div>\n              </div>\n            </div>\n          )}\n\n          {step === 3 && (\n            <div className=\"space-y-6 animate-in fade-in\">\n              <p className=\"text-gray-500 text-sm\">\n                To join the TriniBuild ecosystem as a {intent === 'sell' ? 'Merchant' : 'Member'}, you must agree to our terms.\n              </p>\n\n              <div className=\"border p-4 rounded-lg flex items-center justify-between\">\n                <div className=\"flex items-center\">\n                  <FileSignature className=\"h-5 w-5 text-gray-400 mr-3\" />\n                  <div>\n                    <p className=\"font-bold text-sm\">Independent Contractor Agreement</p>\n                    <Link to=\"/contractor-agreement\" target=\"_blank\" className=\"text-xs text-blue-600 hover:underline\">View Document</Link>\n                  </div>\n                </div>\n                {hasSigned && <CheckCircle className=\"h-5 w-5 text-green-500\" />}\n              </div>\n\n              <div className=\"bg-gray-50 p-4 rounded-lg text-xs text-gray-500\">\n                By clicking \"Sign & Continue\", you agree to be bound by these terms electronically and acknowledge your status as an independent contractor.\n              </div>\n\n              {hasSigned ? (\n                <button\n                  onClick={handleContinue}\n                  className=\"w-full flex justify-center items-center py-4 px-4 border border-transparent rounded-xl shadow-lg text-base font-bold text-white bg-green-600 hover:bg-green-700 transition-all hover:scale-[1.02]\"\n                >\n                  Complete Setup <ArrowRight className=\"ml-2 h-5 w-5\" />\n                </button>\n              ) : (\n                <button\n                  onClick={handleSign}\n                  disabled={isSigning}\n                  className=\"w-full flex justify-center items-center py-4 px-4 border border-transparent rounded-xl shadow-lg text-base font-bold text-white bg-trini-black hover:bg-gray-800 disabled:opacity-70 transition-all\"\n                >\n                  {isSigning ? <Loader2 className=\"h-5 w-5 animate-spin\" /> : 'Sign & Continue'}\n                </button>\n              )}\n            </div>\n          )}\n\n          <div className=\"mt-8\">\n            {step < 3 && (\n              <button\n                onClick={handleContinue}\n                disabled={(step === 1 && !intent) || (step === 2 && intent === 'sell' && !businessName) || (step === 2 && intent === 'buy' && !location)}\n                className=\"w-full flex justify-center items-center py-4 px-4 border border-transparent rounded-xl shadow-lg text-base font-bold text-white bg-trini-black hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all hover:scale-[1.02]\"\n              >\n                {step === 1 ? 'Continue' : 'Next Step'} <ArrowRight className=\"ml-2 h-5 w-5\" />\n              </button>\n            )}\n            {step === 1 && (\n              <p className=\"text-center text-xs text-gray-400 mt-4\">\n                Already have an account? <span className=\"text-trini-red font-bold cursor-pointer\">Log in</span>\n              </p>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n",
  "pages/Pricing.tsx": "import React from 'react';\nimport { Check, HelpCircle, CreditCard, Zap, Heart, TrendingUp, ShieldCheck } from 'lucide-react';\nimport { Link, useNavigate } from 'react-router-dom';\n\nexport const Pricing: React.FC = () => {\n  const navigate = useNavigate();\n\n  const handleSelectPlan = (planName: string) => {\n    if (planName === 'Community Plan') {\n      localStorage.removeItem('trinibuild_subscription');\n      navigate('/create-store');\n    } else {\n      localStorage.setItem('trinibuild_subscription', planName);\n      // Simulate \"Upgrade Successful\" toast or similar by just going to dashboard\n      alert(`Successfully upgraded to ${planName}!`);\n      navigate('/dashboard');\n    }\n  };\n\n  const tiers = [\n    {\n      name: 'Community Plan',\n      price: '0',\n      desc: 'Your right to be online. No credit card needed.',\n      fee: '8%',\n      features: [\n        '10 Product Listings',\n        'Basic Directory Profile',\n        'Accept COD Orders',\n        'Subdomain Website',\n        'Photo Receipts',\n        'Community Support'\n      ],\n      cta: 'Claim Free Account',\n      color: 'border-gray-200 border-t-4 border-t-gray-400'\n    },\n    {\n      name: 'Growth',\n      price: '99',\n      desc: 'For vendors ready to scale up.',\n      fee: '6%',\n      features: [\n        '50 Product Listings',\n        'Verified Business Badge',\n        'Loyalty Rewards System',\n        'AI Sales Insights',\n        'Official Documents (Job Letters)',\n        'WhatsApp Integration'\n      ],\n      cta: 'Start Scaling',\n      popular: true,\n      color: 'border-trini-red ring-2 ring-trini-red ring-opacity-50'\n    },\n    {\n      name: 'Empire',\n      price: '299',\n      desc: 'Dominate your market category.',\n      fee: '0% (Cash Orders)',\n      features: [\n        'Unlimited Listings',\n        'Custom Domain Name',\n        'Bulk Product Upload',\n        'Priority Search Placement',\n        'Advanced Inventory',\n        'Official Documents & Invoices'\n      ],\n      cta: 'Build Empire',\n      color: 'border-gray-200 border-t-4 border-t-purple-600'\n    }\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-white py-12\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"text-center mb-16\">\n          <h2 className=\"text-base font-semibold text-trini-red tracking-wide uppercase\">The Ascension Model</h2>\n          <p className=\"mt-2 text-3xl leading-8 font-extrabold tracking-tight text-gray-900 sm:text-4xl\">\n            Start Free. Grow Big.\n          </p>\n          <p className=\"mt-4 max-w-2xl text-xl text-gray-500 mx-auto\">\n            We believe every Trinbagonian deserves a website. Our free plan is yours for life. Upgrade only when you need more power.\n          </p>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto\">\n          {tiers.map((tier) => (\n            <div key={tier.name} className={`bg-white rounded-2xl shadow-lg overflow-hidden flex flex-col border ${tier.color} relative transform hover:-translate-y-1 transition-transform`}>\n              {tier.popular && (\n                <div className=\"absolute top-0 inset-x-0 bg-trini-red h-2\"></div>\n              )}\n              <div className=\"p-6 flex-grow\">\n                <h3 className=\"text-lg font-bold text-gray-900 uppercase tracking-wider\">{tier.name}</h3>\n                <div className=\"mt-4 flex items-baseline\">\n                  <span className=\"text-4xl font-extrabold text-gray-900\">TT${tier.price}</span>\n                  <span className=\"ml-1 text-xl font-medium text-gray-500\">/mo</span>\n                </div>\n                <div className=\"mt-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800\">\n                  <CreditCard className=\"mr-1 h-3 w-3\" /> Trans. Fee: {tier.fee}\n                </div>\n                <p className=\"mt-4 text-sm text-gray-500 italic\">{tier.desc}</p>\n\n                <ul className=\"mt-6 space-y-4\">\n                  {tier.features.map((feature) => (\n                    <li key={feature} className=\"flex items-start\">\n                      <div className=\"flex-shrink-0\">\n                        <Check className=\"h-5 w-5 text-green-500\" />\n                      </div>\n                      <p className=\"ml-3 text-sm text-gray-700\">{feature}</p>\n                    </li>\n                  ))}\n                </ul>\n              </div>\n              <div className=\"p-6 bg-gray-50 border-t border-gray-100\">\n                <button\n                  onClick={() => handleSelectPlan(tier.name)}\n                  className={`block w-full text-center px-4 py-3 rounded-md font-bold transition-colors shadow-sm ${tier.popular\n                      ? 'bg-trini-red text-white hover:bg-red-700'\n                      : 'bg-white border border-gray-300 text-gray-700 hover:bg-gray-100'\n                    }`}\n                >\n                  {tier.cta}\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n\n        {/* The Manifesto / Mission Section */}\n        <div className=\"mt-24 bg-gray-900 rounded-3xl p-10 text-white relative overflow-hidden\">\n          <div className=\"absolute top-0 right-0 opacity-10 pointer-events-none\">\n            <Heart className=\"h-64 w-64 text-white\" />\n          </div>\n          <div className=\"relative z-10\">\n            <div className=\"flex flex-col md:flex-row items-start md:items-center gap-6 mb-8\">\n              <div className=\"bg-trini-red p-4 rounded-full\">\n                <Zap className=\"h-8 w-8 text-white\" />\n              </div>\n              <div>\n                <h3 className=\"text-2xl font-bold\">Why is it free?</h3>\n                <p className=\"text-gray-300\">Our Mission Statement</p>\n              </div>\n            </div>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-12\">\n              <div>\n                <p className=\"text-lg leading-relaxed text-gray-300 mb-4\">\n                  The banking system has failed the people of Trinidad and Tobago. High fees, complex requirements, and poor technology have kept local vendors offline for too long.\n                </p>\n                <p className=\"text-lg leading-relaxed text-gray-300\">\n                  TriniBuild is our answer. We built a platform where <strong>anyone</strong> can start. We monetize through our successful partners who scale up to \"Empire\" status. If you stay small, you stay free. That's our promise.\n                </p>\n              </div>\n              <div className=\"bg-white/10 p-6 rounded-xl border border-white/20\">\n                <h4 className=\"font-bold mb-4 flex items-center\"><TrendingUp className=\"h-5 w-5 mr-2\" /> The Ecosystem Power</h4>\n                <ul className=\"space-y-3 text-sm text-gray-300\">\n                  <li>\u2022 We drive traffic to the platform, so you get seen.</li>\n                  <li>\u2022 We handle the technology, so you focus on selling.</li>\n                  <li>\u2022 We verify vendors, so customers trust you.</li>\n                </ul>\n                <Link to=\"/create-store\" className=\"mt-6 inline-block text-trini-red font-bold hover:text-white transition-colors\">\n                  Join the movement &rarr;\n                </Link>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"mt-20\">\n          <h3 className=\"text-2xl font-bold text-gray-900 text-center mb-8\">Common Questions</h3>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto\">\n            {[\n              { q: \"Do I really need no credit card?\", a: \"Yes. You can sign up, build your store, and list 10 items without entering any payment information.\" },\n              { q: \"What happens if I sell more than 10 items?\", a: \"You can upgrade to the Growth plan instantly from your dashboard to unlock more space.\" },\n              { q: \"Can I use my own domain name?\", a: \"Custom domains (e.g., mystore.com) are available on the Empire plan. Free plans use a trinibuild.com/store address.\" },\n              { q: \"How does Cash on Delivery work?\", a: \"Customers order on the site. You get the order details via WhatsApp. You collect cash when you deliver. We invoice you the small transaction fee monthly.\" }\n            ].map((faq, i) => (\n              <div key={i}>\n                <dt className=\"font-bold text-gray-900 flex items-center mb-2\">\n                  <HelpCircle className=\"h-5 w-5 text-gray-400 mr-2\" />\n                  {faq.q}\n                </dt>\n                <dd className=\"text-gray-600 ml-7\">{faq.a}</dd>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n",
  "pages/PromoterOnboarding.tsx": "\nimport React, { useState, useEffect } from 'react';\nimport { CheckCircle, FileText, User, Shield, PenTool, Loader2, ArrowRight, UploadCloud, Lock, Download } from 'lucide-react';\nimport { useNavigate } from 'react-router-dom';\nimport { generatePromoterContract } from '../services/geminiService';\nimport { legalService } from '../services/legalService';\n\nimport { supabase } from '../services/supabaseClient';\n\nexport const PromoterOnboarding: React.FC = () => {\n   const navigate = useNavigate();\n   const [step, setStep] = useState(1);\n   const [loading, setLoading] = useState(false);\n   const [contractText, setContractText] = useState('');\n\n   // Form Data\n   const [formData, setFormData] = useState({\n      fullName: '',\n      businessName: '',\n      email: '',\n      phone: '',\n      idFile: null as File | null\n   });\n\n   // Signature\n   const [signature, setSignature] = useState('');\n\n   // Generate Contract on Step 3 Load\n   useEffect(() => {\n      if (step === 3 && !contractText) {\n         setLoading(true);\n         generatePromoterContract(formData.fullName, formData.businessName)\n            .then(text => {\n               setContractText(text);\n               setLoading(false);\n            });\n      }\n   }, [step, formData.fullName, formData.businessName]);\n\n   const handleNext = () => {\n      setStep(step + 1);\n   };\n\n   const handleFinish = async () => {\n      setLoading(true);\n      try {\n         const { data: { user } } = await supabase.auth.getUser();\n         if (!user) throw new Error(\"Not authenticated\");\n\n         // Upload ID file (Mocking upload for now)\n         // const idFileUrl = await uploadFile(formData.idFile);\n\n         const { error } = await supabase\n            .from('promoter_applications')\n            .insert({\n               user_id: user.id,\n               organization_name: formData.businessName,\n               event_types: [], // Can add field to form later if needed\n               experience_years: '0', // Default or add field\n               status: 'pending'\n            });\n\n         if (error) throw error;\n\n         setLoading(false);\n         setStep(4); // Success\n      } catch (error) {\n         console.error(\"Submission failed\", error);\n         alert(\"Failed to submit application. Please try again.\");\n         setLoading(false);\n      }\n   };\n\n   return (\n      <div className=\"min-h-screen bg-gray-50 py-12 font-sans\">\n         <div className=\"max-w-3xl mx-auto px-4\">\n\n            {/* Progress Header */}\n            <div className=\"mb-8\">\n               <div className=\"flex justify-between items-center mb-4\">\n                  <h1 className=\"text-2xl font-bold text-gray-900\">Promoter Registration</h1>\n                  <span className=\"text-sm font-bold text-trini-red bg-red-50 px-3 py-1 rounded-full\">6% Rate Lock Offer</span>\n               </div>\n               <div className=\"h-2 bg-gray-200 rounded-full\">\n                  <div className=\"h-full bg-trini-black rounded-full transition-all duration-500\" style={{ width: `${(step / 4) * 100}%` }}></div>\n               </div>\n            </div>\n\n            <div className=\"bg-white rounded-xl shadow-xl overflow-hidden border border-gray-200\">\n\n               {/* STEP 1: BASIC INFO */}\n               {step === 1 && (\n                  <div className=\"p-8 animate-in fade-in\">\n                     <h2 className=\"text-xl font-bold mb-6 flex items-center\"><User className=\"mr-2\" /> Organization Details</h2>\n                     <div className=\"space-y-6\">\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                           <div>\n                              <label className=\"block text-sm font-bold text-gray-700 mb-2\">Promoter / Full Name</label>\n                              <input type=\"text\" className=\"w-full border border-gray-300 rounded-lg p-3\" value={formData.fullName} onChange={e => setFormData({ ...formData, fullName: e.target.value })} placeholder=\"John Doe\" />\n                           </div>\n                           <div>\n                              <label className=\"block text-sm font-bold text-gray-700 mb-2\">Business Name</label>\n                              <input type=\"text\" className=\"w-full border border-gray-300 rounded-lg p-3\" value={formData.businessName} onChange={e => setFormData({ ...formData, businessName: e.target.value })} placeholder=\"JD Events Ltd.\" />\n                           </div>\n                        </div>\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                           <div>\n                              <label className=\"block text-sm font-bold text-gray-700 mb-2\">Email Address</label>\n                              <input type=\"email\" className=\"w-full border border-gray-300 rounded-lg p-3\" value={formData.email} onChange={e => setFormData({ ...formData, email: e.target.value })} />\n                           </div>\n                           <div>\n                              <label className=\"block text-sm font-bold text-gray-700 mb-2\">Phone Number</label>\n                              <input type=\"tel\" className=\"w-full border border-gray-300 rounded-lg p-3\" value={formData.phone} onChange={e => setFormData({ ...formData, phone: e.target.value })} placeholder=\"+1 (868)\" />\n                           </div>\n                        </div>\n                        <button\n                           disabled={!formData.fullName || !formData.businessName}\n                           onClick={handleNext}\n                           className=\"w-full bg-trini-black text-white py-4 rounded-lg font-bold text-lg hover:bg-gray-800 disabled:opacity-50 flex items-center justify-center\"\n                        >\n                           Continue <ArrowRight className=\"ml-2 h-5 w-5\" />\n                        </button>\n                     </div>\n                  </div>\n               )}\n\n               {/* STEP 2: VERIFICATION */}\n               {step === 2 && (\n                  <div className=\"p-8 animate-in fade-in\">\n                     <h2 className=\"text-xl font-bold mb-6 flex items-center\"><Shield className=\"mr-2\" /> Identity Verification</h2>\n                     <p className=\"text-gray-500 mb-6 text-sm\">To comply with financial regulations and unlock payouts, please upload a valid ID (National ID, Driver's Permit, or Passport).</p>\n\n                     <div className=\"border-2 border-dashed border-gray-300 rounded-xl p-10 text-center hover:bg-gray-50 transition-colors cursor-pointer relative mb-8\">\n                        <input type=\"file\" accept=\"image/*\" onChange={e => e.target.files && setFormData({ ...formData, idFile: e.target.files[0] })} className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\" />\n                        {formData.idFile ? (\n                           <div>\n                              <CheckCircle className=\"h-12 w-12 text-green-500 mx-auto mb-3\" />\n                              <p className=\"font-bold text-gray-900\">{formData.idFile.name}</p>\n                              <p className=\"text-xs text-gray-500\">Ready for AI Scan</p>\n                           </div>\n                        ) : (\n                           <div>\n                              <UploadCloud className=\"h-12 w-12 text-gray-400 mx-auto mb-3\" />\n                              <p className=\"font-medium text-gray-600\">Click to Upload ID</p>\n                              <p className=\"text-xs text-gray-400\">Secure Encryption Enabled</p>\n                           </div>\n                        )}\n                     </div>\n\n                     <div className=\"bg-blue-50 p-4 rounded-lg flex items-start mb-8\">\n                        <Lock className=\"h-5 w-5 text-blue-600 mr-3 flex-shrink-0\" />\n                        <p className=\"text-xs text-blue-800\">Your data is encrypted using AES-256 standards. We use AI to verify identity in real-time to prevent fraud.</p>\n                     </div>\n\n                     <button\n                        disabled={!formData.idFile}\n                        onClick={handleNext}\n                        className=\"w-full bg-trini-black text-white py-4 rounded-lg font-bold text-lg hover:bg-gray-800 disabled:opacity-50 flex items-center justify-center\"\n                     >\n                        Verify & Proceed <ArrowRight className=\"ml-2 h-5 w-5\" />\n                     </button>\n                  </div>\n               )}\n\n               {/* STEP 3: DOCUSIGN CONTRACT */}\n               {step === 3 && (\n                  <div className=\"p-8 animate-in fade-in\">\n                     <h2 className=\"text-xl font-bold mb-2 flex items-center\"><FileText className=\"mr-2\" /> Sign Partnership Agreement</h2>\n                     <p className=\"text-sm text-gray-500 mb-6\">Please review and sign to lock in your 6% promotional rate for 24 months.</p>\n\n                     {loading ? (\n                        <div className=\"h-64 flex items-center justify-center flex-col text-gray-400\">\n                           <Loader2 className=\"h-10 w-10 animate-spin mb-4 text-trini-red\" />\n                           <p>Generating Custom Contract...</p>\n                        </div>\n                     ) : (\n                        <div className=\"space-y-6\">\n                           <div className=\"h-64 overflow-y-auto bg-gray-50 p-6 rounded-lg border border-gray-300 text-xs font-mono text-gray-700 leading-relaxed whitespace-pre-wrap shadow-inner\">\n                              {contractText}\n                           </div>\n\n                           <div className=\"bg-yellow-50 p-4 rounded-lg border border-yellow-200 flex items-start\">\n                              <Shield className=\"h-5 w-5 text-yellow-600 mr-2 mt-0.5\" />\n                              <p className=\"text-sm text-yellow-800\">\n                                 By signing, you acknowledge that you are an <strong>Independent Contractor</strong> and not an employee of TriniBuild. You are responsible for your own taxes and compliance.\n                              </p>\n                           </div>\n\n                           <div className=\"border-t-2 border-gray-200 pt-6\">\n                              <label className=\"block text-sm font-bold text-gray-900 mb-2 uppercase tracking-wide\">Digital Signature</label>\n                              <p className=\"text-xs text-gray-500 mb-2\">Type your full name to sign. This constitutes a legal signature via DocuSign.</p>\n                              <div className=\"relative\">\n                                 <input\n                                    type=\"text\"\n                                    value={signature}\n                                    onChange={(e) => setSignature(e.target.value)}\n                                    className=\"w-full border-b-2 border-black bg-yellow-50 p-4 font-cursive text-2xl text-black focus:outline-none placeholder-gray-300\"\n                                    style={{ fontFamily: '\"Brush Script MT\", cursive' }}\n                                    placeholder=\"Sign Here\"\n                                 />\n                                 <PenTool className=\"absolute right-4 top-4 h-6 w-6 text-gray-400\" />\n                              </div>\n                           </div>\n\n                           <div className=\"flex gap-4\">\n                              <button onClick={() => setStep(2)} className=\"w-1/3 bg-gray-100 text-gray-700 py-3 rounded-lg font-bold hover:bg-gray-200\">Back</button>\n                              <button\n                                 disabled={!signature || signature.length < 3}\n                                 onClick={async () => {\n                                    setLoading(true);\n                                    try {\n                                       await legalService.signDocument('current-user', 'contractor_agreement', signature);\n                                       handleFinish();\n                                    } catch (e) {\n                                       console.error(e);\n                                       setLoading(false);\n                                    }\n                                 }}\n                                 className=\"w-2/3 bg-green-600 text-white py-3 rounded-lg font-bold hover:bg-green-700 disabled:opacity-50 flex items-center justify-center shadow-lg\"\n                              >\n                                 {loading ? <Loader2 className=\"h-5 w-5 animate-spin\" /> : <>Submit & Launch <CheckCircle className=\"ml-2 h-5 w-5\" /></>}\n                              </button>\n                           </div>\n                        </div>\n                     )}\n                  </div>\n               )}\n\n               {/* STEP 4: SUCCESS */}\n               {step === 4 && (\n                  <div className=\"p-12 text-center animate-in zoom-in duration-500\">\n                     <div className=\"w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg\">\n                        <CheckCircle className=\"h-12 w-12 text-green-600\" />\n                     </div>\n                     <h2 className=\"text-3xl font-extrabold text-gray-900 mb-4\">Welcome to the Family!</h2>\n                     <p className=\"text-lg text-gray-600 mb-8\">\n                        Your account is active. Your <span className=\"text-trini-red font-bold\">6% Rate Lock</span> is confirmed.\n                     </p>\n\n                     <div className=\"bg-gray-50 p-4 rounded-lg max-w-md mx-auto mb-8 flex items-center justify-between border border-gray-200\">\n                        <div className=\"text-left\">\n                           <p className=\"text-xs text-gray-500 uppercase font-bold\">Contract</p>\n                           <p className=\"font-bold text-sm truncate w-48\">TriniBuild_Partnership_{formData.fullName.replace(' ', '_')}.pdf</p>\n                        </div>\n                        <button className=\"text-blue-600 text-xs font-bold flex items-center hover:underline\">\n                           <Download className=\"h-4 w-4 mr-1\" /> Download\n                        </button>\n                     </div>\n\n                     <button onClick={() => navigate('/tickets')} className=\"bg-trini-black text-white px-10 py-4 rounded-full font-bold text-lg hover:bg-gray-800 shadow-xl\">\n                        Go to Promoter Dashboard\n                     </button>\n                  </div>\n               )}\n\n            </div>\n         </div>\n      </div>\n   );\n};\n",
  "pages/RealEstate.tsx": "import React, { useState, useEffect } from 'react';\nimport { Home, MapPin, Search, Filter, Bed, Bath, Square, DollarSign, Heart, Calculator, Phone, User, X, Check, Star, Building, ShieldCheck, Camera, Share2, ArrowRight, Map as MapIcon, ChevronDown, ChevronUp } from 'lucide-react';\nimport { RealEstateListing, realEstateService } from '../services/realEstateService';\nimport { ChatWidget } from '../components/ChatWidget';\nimport { AdSpot } from '../components/AdSpot';\n\nexport const RealEstate: React.FC = () => {\n   const [type, setType] = useState<'rent' | 'buy'>('rent');\n   const [priceRange, setPriceRange] = useState(5000);\n   const [selectedProperty, setSelectedProperty] = useState<RealEstateListing | null>(null);\n   const [showPricingModal, setShowPricingModal] = useState(false);\n   const [leadForm, setLeadForm] = useState({ name: '', phone: '', message: '' });\n   const [properties, setProperties] = useState<RealEstateListing[]>([]);\n   const [isLoading, setIsLoading] = useState(true);\n   const [viewMode, setViewMode] = useState<'grid' | 'map'>('grid');\n   const [showFilters, setShowFilters] = useState(false);\n\n   useEffect(() => {\n      const fetchProperties = async () => {\n         setIsLoading(true);\n         try {\n            const data = await realEstateService.getListings();\n            setProperties(data);\n         } catch (error) {\n            console.error(\"Failed to load properties\", error);\n         } finally {\n            setIsLoading(false);\n         }\n      };\n      fetchProperties();\n   }, []);\n\n   const handleSendLead = (e: React.FormEvent) => {\n      e.preventDefault();\n      alert(\"Inquiry Sent! The agent will contact you shortly.\");\n      setLeadForm({ name: '', phone: '', message: '' });\n   };\n\n   const filteredProperties = properties.filter(p => p.type === type && p.price <= (type === 'rent' ? priceRange : priceRange * 1000));\n\n   return (\n      <div className=\"min-h-screen bg-gray-50 font-sans\">\n\n         {/* Premium Hero Section */}\n         <div className=\"relative h-[500px] flex items-center justify-center overflow-hidden\">\n            <div className=\"absolute inset-0 parallax-bg bg-[url('https://images.unsplash.com/photo-1564013799919-ab600027ffc6?q=80&w=2070&auto=format&fit=crop')]\">\n               <div className=\"absolute inset-0 bg-gradient-to-b from-black/60 via-black/40 to-black/80\"></div>\n            </div>\n\n            <div className=\"relative z-10 max-w-5xl w-full px-4 text-center animate-in zoom-in duration-700\">\n               <span className=\"inline-block py-1 px-3 rounded-full bg-green-500/20 border border-green-400/30 text-green-300 text-xs font-bold uppercase tracking-wider mb-4 backdrop-blur-sm\">\n                  TriniBuild Living\n               </span>\n               <h1 className=\"text-5xl md:text-7xl font-extrabold text-white mb-6 tracking-tight drop-shadow-lg\">\n                  Find Your <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-emerald-600\">Sanctuary</span>\n               </h1>\n               <p className=\"text-xl text-gray-200 mb-10 max-w-2xl mx-auto font-light\">\n                  Discover the finest homes, apartments, and commercial spaces across Trinidad & Tobago.\n               </p>\n\n               {/* Search Box */}\n               <div className=\"bg-white/95 backdrop-blur-md p-2 rounded-2xl shadow-2xl max-w-3xl mx-auto flex flex-col md:flex-row gap-2\">\n                  <div className=\"flex bg-gray-100 rounded-xl p-1 flex-shrink-0\">\n                     <button\n                        onClick={() => setType('rent')}\n                        className={`px-6 py-3 rounded-lg font-bold text-sm transition-all ${type === 'rent' ? 'bg-white text-green-700 shadow-sm' : 'text-gray-500 hover:text-gray-900'}`}\n                     >\n                        Rent\n                     </button>\n                     <button\n                        onClick={() => setType('buy')}\n                        className={`px-6 py-3 rounded-lg font-bold text-sm transition-all ${type === 'buy' ? 'bg-white text-blue-700 shadow-sm' : 'text-gray-500 hover:text-gray-900'}`}\n                     >\n                        Buy\n                     </button>\n                  </div>\n                  <div className=\"flex-grow relative\">\n                     <Search className=\"absolute left-4 top-3.5 text-gray-400 h-5 w-5\" />\n                     <input\n                        type=\"text\"\n                        placeholder=\"City, Neighborhood, or Address...\"\n                        className=\"w-full pl-12 pr-4 py-3.5 bg-transparent outline-none text-gray-900 placeholder-gray-500 font-medium\"\n                     />\n                  </div>\n                  <button className=\"bg-green-600 text-white px-8 py-3.5 rounded-xl font-bold hover:bg-green-700 transition-colors shadow-lg flex items-center justify-center\">\n                     Search\n                  </button>\n               </div>\n            </div>\n         </div>\n\n         {/* Main Content */}\n         <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n\n            {/* Ad Spot */}\n            <AdSpot page=\"real_estate\" slot=\"top\" className=\"mb-8\" />\n\n            {/* Controls Bar */}\n            <div className=\"flex flex-col md:flex-row justify-between items-center mb-8 gap-4 sticky top-20 z-30 bg-gray-50/90 backdrop-blur py-4\">\n               <div className=\"flex items-center gap-4\">\n                  <h2 className=\"text-2xl font-bold text-gray-900\">\n                     {type === 'rent' ? 'Rentals' : 'For Sale'}\n                     <span className=\"text-gray-400 font-normal text-lg ml-2\">({filteredProperties.length})</span>\n                  </h2>\n                  <button\n                     onClick={() => setShowFilters(!showFilters)}\n                     className=\"md:hidden flex items-center px-4 py-2 bg-white border border-gray-200 rounded-lg text-sm font-bold shadow-sm\"\n                  >\n                     <Filter className=\"h-4 w-4 mr-2\" /> Filters\n                  </button>\n               </div>\n\n               <div className=\"flex items-center gap-2 bg-white p-1 rounded-lg border border-gray-200 shadow-sm\">\n                  <button\n                     onClick={() => setViewMode('grid')}\n                     className={`p-2 rounded-md transition-colors ${viewMode === 'grid' ? 'bg-gray-100 text-gray-900' : 'text-gray-400 hover:text-gray-600'}`}\n                  >\n                     <Square className=\"h-5 w-5\" />\n                  </button>\n                  <button\n                     onClick={() => setViewMode('map')}\n                     className={`p-2 rounded-md transition-colors ${viewMode === 'map' ? 'bg-gray-100 text-gray-900' : 'text-gray-400 hover:text-gray-600'}`}\n                  >\n                     <MapIcon className=\"h-5 w-5\" />\n                  </button>\n               </div>\n            </div>\n\n            <div className=\"flex flex-col lg:flex-row gap-8\">\n\n               {/* Filters Sidebar (Desktop: Always visible, Mobile: Toggle) */}\n               <div className={`w-full lg:w-72 flex-shrink-0 space-y-8 ${showFilters ? 'block' : 'hidden lg:block'}`}>\n\n                  {/* Landlord CTA */}\n                  <div className=\"bg-gradient-to-br from-green-900 to-emerald-800 rounded-2xl p-6 text-white text-center shadow-xl relative overflow-hidden group\">\n                     <div className=\"absolute top-0 right-0 w-24 h-24 bg-white/10 rounded-full -mr-10 -mt-10 blur-2xl group-hover:bg-white/20 transition-all\"></div>\n                     <h3 className=\"font-bold text-lg mb-2 relative z-10\">List Your Property</h3>\n                     <p className=\"text-sm text-green-100 mb-4 relative z-10\">Reach thousands of potential tenants instantly.</p>\n                     <button onClick={() => setShowPricingModal(true)} className=\"w-full bg-white text-green-900 font-bold py-3 rounded-xl hover:bg-green-50 transition-colors shadow-lg relative z-10\">\n                        Post a Listing\n                     </button>\n                  </div>\n\n                  {/* Filter Panel */}\n                  <div className=\"bg-white p-6 rounded-2xl shadow-sm border border-gray-200 sticky top-40\">\n                     <div className=\"flex items-center justify-between mb-6\">\n                        <h3 className=\"font-bold text-gray-900\">Filters</h3>\n                        <button onClick={() => { setPriceRange(5000); setType('rent'); }} className=\"text-xs text-green-600 font-bold hover:underline\">Reset</button>\n                     </div>\n\n                     <div className=\"space-y-8\">\n                        <div>\n                           <div className=\"flex justify-between text-sm font-medium text-gray-700 mb-2\">\n                              <span>Max Price</span>\n                              <span className=\"text-green-600 font-bold\">\n                                 ${type === 'rent' ? priceRange.toLocaleString() : (priceRange * 1000).toLocaleString()}\n                              </span>\n                           </div>\n                           <input\n                              type=\"range\"\n                              min=\"1000\"\n                              max={type === 'rent' ? 20000 : 5000}\n                              step=\"100\"\n                              value={priceRange}\n                              onChange={(e) => setPriceRange(Number(e.target.value))}\n                              className=\"w-full h-2 bg-gray-100 rounded-lg appearance-none cursor-pointer accent-green-600\"\n                           />\n                        </div>\n\n                        <div>\n                           <label className=\"block text-sm font-bold text-gray-900 mb-3\">Property Type</label>\n                           <div className=\"space-y-3\">\n                              {['House', 'Apartment', 'Condo', 'Land', 'Commercial'].map(t => (\n                                 <label key={t} className=\"flex items-center cursor-pointer group\">\n                                    <div className=\"relative flex items-center\">\n                                       <input type=\"checkbox\" className=\"peer h-5 w-5 rounded border-gray-300 text-green-600 focus:ring-green-500 transition-all\" />\n                                    </div>\n                                    <span className=\"ml-3 text-sm text-gray-600 group-hover:text-gray-900 transition-colors\">{t}</span>\n                                 </label>\n                              ))}\n                           </div>\n                        </div>\n\n                        <div>\n                           <label className=\"block text-sm font-bold text-gray-900 mb-3\">Bedrooms</label>\n                           <div className=\"grid grid-cols-4 gap-2\">\n                              {['Any', '1+', '2+', '3+'].map(b => (\n                                 <button key={b} className={`py-2 border rounded-lg text-sm font-medium transition-all ${b === 'Any' ? 'bg-green-50 border-green-200 text-green-700' : 'border-gray-200 text-gray-600 hover:border-gray-300'}`}>\n                                    {b}\n                                 </button>\n                              ))}\n                           </div>\n                        </div>\n                     </div>\n                  </div>\n\n                  {/* Mortgage Calculator Widget */}\n                  {type === 'buy' && (\n                     <div className=\"bg-blue-900 text-white p-6 rounded-2xl shadow-lg\">\n                        <div className=\"flex items-center mb-4\">\n                           <Calculator className=\"h-5 w-5 mr-2 text-blue-300\" />\n                           <h3 className=\"font-bold\">Mortgage Estimator</h3>\n                        </div>\n                        <div className=\"space-y-3 text-sm\">\n                           <div className=\"flex justify-between\">\n                              <span className=\"text-blue-200\">Price</span>\n                              <span className=\"font-medium\">$1.5M</span>\n                           </div>\n                           <div className=\"flex justify-between\">\n                              <span className=\"text-blue-200\">Down (10%)</span>\n                              <span className=\"font-medium\">$150k</span>\n                           </div>\n                           <div className=\"flex justify-between\">\n                              <span className=\"text-blue-200\">Rate</span>\n                              <span className=\"font-medium\">5.5%</span>\n                           </div>\n                           <div className=\"border-t border-blue-700 pt-3 mt-3 flex justify-between items-center\">\n                              <span className=\"text-blue-200\">Monthly</span>\n                              <span className=\"text-xl font-bold text-green-400\">$7,665</span>\n                           </div>\n                        </div>\n                     </div>\n                  )}\n               </div>\n\n               {/* Listings Grid */}\n               <div className=\"flex-grow\">\n                  {isLoading ? (\n                     <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                        {[1, 2, 3, 4].map(i => (\n                           <div key={i} className=\"bg-white rounded-xl h-96 animate-pulse\"></div>\n                        ))}\n                     </div>\n                  ) : viewMode === 'map' ? (\n                     <div className=\"bg-gray-200 rounded-2xl h-[600px] flex items-center justify-center relative overflow-hidden border border-gray-300\">\n                        <div className=\"absolute inset-0 bg-[url('https://mt1.google.com/vt/lyrs=m&x=1325&y=3143&z=13')] bg-cover opacity-50 grayscale\"></div>\n                        <div className=\"bg-white p-6 rounded-xl shadow-xl z-10 text-center max-w-sm mx-4\">\n                           <MapIcon className=\"h-12 w-12 text-green-600 mx-auto mb-4\" />\n                           <h3 className=\"text-xl font-bold text-gray-900 mb-2\">Interactive Map View</h3>\n                           <p className=\"text-gray-500 mb-6\">Explore properties visually across Trinidad & Tobago.</p>\n                           <button onClick={() => setViewMode('grid')} className=\"bg-gray-900 text-white px-6 py-2 rounded-full font-bold text-sm\">\n                              Switch to List View\n                           </button>\n                        </div>\n                     </div>\n                  ) : (\n                     <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\n                        {filteredProperties.map(property => (\n                           <div\n                              key={property.id}\n                              className=\"group bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-xl transition-all duration-300 cursor-pointer flex flex-col\"\n                              onClick={() => setSelectedProperty(property)}\n                           >\n                              <div className=\"h-64 relative overflow-hidden\">\n                                 <img src={property.images[0]} alt={property.title} className=\"w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700\" />\n                                 <div className=\"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300\"></div>\n\n                                 <button className=\"absolute top-4 right-4 bg-white/20 backdrop-blur-md p-2 rounded-full text-white hover:bg-white hover:text-red-500 transition-all z-10\">\n                                    <Heart className=\"h-5 w-5\" />\n                                 </button>\n\n                                 <div className=\"absolute bottom-4 left-4 flex gap-2\">\n                                    <span className={`px-3 py-1 rounded-lg text-xs font-bold uppercase tracking-wide shadow-sm ${property.type === 'rent' ? 'bg-green-500 text-white' : 'bg-blue-600 text-white'}`}>\n                                       {property.type === 'rent' ? 'For Rent' : 'For Sale'}\n                                    </span>\n                                    {property.isFeatured && (\n                                       <span className=\"bg-yellow-400 text-black px-3 py-1 rounded-lg text-xs font-bold flex items-center shadow-sm\">\n                                          <Star className=\"h-3 w-3 mr-1 fill-current\" /> Featured\n                                       </span>\n                                    )}\n                                 </div>\n                              </div>\n\n                              <div className=\"p-6 flex-grow flex flex-col\">\n                                 <div className=\"flex justify-between items-start mb-3\">\n                                    <h3 className=\"font-bold text-gray-900 text-lg leading-tight group-hover:text-green-700 transition-colors line-clamp-2\">{property.title}</h3>\n                                 </div>\n\n                                 <div className=\"flex items-baseline mb-4\">\n                                    <span className=\"text-2xl font-extrabold text-gray-900\">\n                                       ${property.price.toLocaleString()}\n                                    </span>\n                                    {property.type === 'rent' && <span className=\"text-sm text-gray-500 ml-1 font-medium\">/mo</span>}\n                                 </div>\n\n                                 <div className=\"flex items-center text-gray-500 text-sm mb-6\">\n                                    <MapPin className=\"h-4 w-4 mr-1.5 flex-shrink-0 text-gray-400\" />\n                                    <span className=\"truncate\">{property.location}</span>\n                                 </div>\n\n                                 <div className=\"flex items-center justify-between border-t border-gray-100 pt-4 mt-auto\">\n                                    <div className=\"flex gap-4 text-sm font-medium text-gray-600\">\n                                       <span className=\"flex items-center\"><Bed className=\"h-4 w-4 mr-1.5 text-gray-400\" /> {property.beds}</span>\n                                       <span className=\"flex items-center\"><Bath className=\"h-4 w-4 mr-1.5 text-gray-400\" /> {property.baths}</span>\n                                       <span className=\"flex items-center\"><Square className=\"h-4 w-4 mr-1.5 text-gray-400\" /> {property.sqft}</span>\n                                    </div>\n                                 </div>\n                              </div>\n                           </div>\n                        ))}\n                     </div>\n                  )}\n               </div>\n            </div>\n         </div>\n\n         {/* Property Detail Modal */}\n         {selectedProperty && (\n            <div className=\"fixed inset-0 z-[60] flex items-center justify-center p-4 sm:p-6\">\n               <div className=\"absolute inset-0 bg-black/80 backdrop-blur-sm animate-in fade-in duration-300\" onClick={() => setSelectedProperty(null)}></div>\n               <div className=\"bg-white rounded-3xl shadow-2xl w-full max-w-6xl max-h-[95vh] overflow-hidden relative z-10 flex flex-col md:flex-row animate-in zoom-in-95 duration-300\">\n                  <button\n                     onClick={() => setSelectedProperty(null)}\n                     className=\"absolute top-4 right-4 bg-black/20 hover:bg-black/40 p-2 rounded-full text-white z-20 transition-colors backdrop-blur-md\"\n                  >\n                     <X className=\"h-6 w-6\" />\n                  </button>\n\n                  {/* Image Side (Mobile Top / Desktop Left) */}\n                  <div className=\"w-full md:w-3/5 h-64 md:h-auto bg-gray-900 relative group\">\n                     <img src={selectedProperty.images[0]} alt={selectedProperty.title} className=\"w-full h-full object-cover\" />\n                     <div className=\"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-60\"></div>\n\n                     <div className=\"absolute bottom-8 left-8 right-8 text-white\">\n                        <h2 className=\"text-3xl md:text-4xl font-bold mb-2 leading-tight\">{selectedProperty.title}</h2>\n                        <p className=\"text-lg opacity-90 flex items-center\">\n                           <MapPin className=\"h-5 w-5 mr-2\" /> {selectedProperty.location}\n                        </p>\n                     </div>\n\n                     <div className=\"absolute top-8 left-8 flex gap-2\">\n                        <button className=\"bg-white/20 backdrop-blur-md hover:bg-white/30 text-white px-4 py-2 rounded-full text-sm font-bold flex items-center transition-colors border border-white/10\">\n                           <Camera className=\"h-4 w-4 mr-2\" /> View Photos\n                        </button>\n                        <button className=\"bg-white/20 backdrop-blur-md hover:bg-white/30 text-white px-4 py-2 rounded-full text-sm font-bold flex items-center transition-colors border border-white/10\">\n                           <MapIcon className=\"h-4 w-4 mr-2\" /> Map\n                        </button>\n                     </div>\n                  </div>\n\n                  {/* Details Side */}\n                  <div className=\"w-full md:w-2/5 overflow-y-auto bg-white flex flex-col\">\n                     <div className=\"p-8 flex-grow\">\n                        <div className=\"flex justify-between items-start mb-6\">\n                           <div>\n                              <p className=\"text-sm text-gray-500 font-bold uppercase tracking-wide mb-1\">{selectedProperty.type === 'rent' ? 'Monthly Rent' : 'Listing Price'}</p>\n                              <div className=\"flex items-baseline\">\n                                 <span className=\"text-4xl font-extrabold text-gray-900\">${selectedProperty.price.toLocaleString()}</span>\n                                 {selectedProperty.type === 'rent' && <span className=\"text-lg text-gray-500 ml-1\">/mo</span>}\n                              </div>\n                           </div>\n                           <div className=\"flex gap-2\">\n                              <button className=\"p-3 rounded-full bg-gray-50 hover:bg-red-50 text-gray-400 hover:text-red-500 transition-colors\"><Heart className=\"h-5 w-5\" /></button>\n                              <button className=\"p-3 rounded-full bg-gray-50 hover:bg-blue-50 text-gray-400 hover:text-blue-500 transition-colors\"><Share2 className=\"h-5 w-5\" /></button>\n                           </div>\n                        </div>\n\n                        <div className=\"grid grid-cols-3 gap-4 mb-8\">\n                           <div className=\"bg-gray-50 rounded-xl p-4 text-center border border-gray-100\">\n                              <Bed className=\"h-6 w-6 mx-auto mb-2 text-green-600\" />\n                              <span className=\"block font-bold text-gray-900 text-lg\">{selectedProperty.beds}</span>\n                              <span className=\"text-xs text-gray-500 uppercase font-bold\">Beds</span>\n                           </div>\n                           <div className=\"bg-gray-50 rounded-xl p-4 text-center border border-gray-100\">\n                              <Bath className=\"h-6 w-6 mx-auto mb-2 text-green-600\" />\n                              <span className=\"block font-bold text-gray-900 text-lg\">{selectedProperty.baths}</span>\n                              <span className=\"text-xs text-gray-500 uppercase font-bold\">Baths</span>\n                           </div>\n                           <div className=\"bg-gray-50 rounded-xl p-4 text-center border border-gray-100\">\n                              <Square className=\"h-6 w-6 mx-auto mb-2 text-green-600\" />\n                              <span className=\"block font-bold text-gray-900 text-lg\">{selectedProperty.sqft}</span>\n                              <span className=\"text-xs text-gray-500 uppercase font-bold\">Sq Ft</span>\n                           </div>\n                        </div>\n\n                        <div className=\"mb-8\">\n                           <h3 className=\"font-bold text-gray-900 mb-3 text-lg\">Description</h3>\n                           <p className=\"text-gray-600 leading-relaxed\">{selectedProperty.description}</p>\n                        </div>\n\n                        <div className=\"mb-8\">\n                           <h3 className=\"font-bold text-gray-900 mb-4 text-lg\">Amenities</h3>\n                           <div className=\"grid grid-cols-2 gap-3\">\n                              {selectedProperty.amenities.map(amenity => (\n                                 <div key={amenity} className=\"flex items-center text-sm text-gray-700 bg-gray-50 px-3 py-2 rounded-lg\">\n                                    <Check className=\"h-4 w-4 text-green-500 mr-2 flex-shrink-0\" /> {amenity}\n                                 </div>\n                              ))}\n                           </div>\n                        </div>\n                     </div>\n\n                     {/* Agent / Lead Gen Footer */}\n                     <div className=\"bg-gray-50 p-8 border-t border-gray-200\">\n                        <div className=\"flex items-center mb-6\">\n                           <div className=\"relative\">\n                              <img src={selectedProperty.agent.photo} className=\"w-14 h-14 rounded-full mr-4 object-cover border-2 border-white shadow-md\" alt=\"Agent\" />\n                              {selectedProperty.agent.isPremium && (\n                                 <div className=\"absolute -bottom-1 -right-1 bg-blue-500 text-white p-1 rounded-full border-2 border-white\">\n                                    <ShieldCheck className=\"h-3 w-3\" />\n                                 </div>\n                              )}\n                           </div>\n                           <div>\n                              <p className=\"font-bold text-gray-900 text-lg\">{selectedProperty.agent.name}</p>\n                              <p className=\"text-sm text-gray-500\">Listing Agent</p>\n                           </div>\n                        </div>\n\n                        <form onSubmit={handleSendLead} className=\"space-y-3\">\n                           <div className=\"grid grid-cols-2 gap-3\">\n                              <input\n                                 type=\"text\" required\n                                 placeholder=\"Name\"\n                                 value={leadForm.name}\n                                 onChange={(e) => setLeadForm({ ...leadForm, name: e.target.value })}\n                                 className=\"w-full p-3 text-sm border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 outline-none\"\n                              />\n                              <input\n                                 type=\"tel\" required\n                                 placeholder=\"Phone\"\n                                 value={leadForm.phone}\n                                 onChange={(e) => setLeadForm({ ...leadForm, phone: e.target.value })}\n                                 className=\"w-full p-3 text-sm border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 outline-none\"\n                              />\n                           </div>\n                           <textarea\n                              rows={2}\n                              placeholder=\"I'm interested in this property...\"\n                              value={leadForm.message}\n                              onChange={(e) => setLeadForm({ ...leadForm, message: e.target.value })}\n                              className=\"w-full p-3 text-sm border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 outline-none resize-none\"\n                           ></textarea>\n                           <button className=\"w-full bg-green-600 text-white font-bold py-4 rounded-xl hover:bg-green-700 shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-0.5\">\n                              Schedule Viewing\n                           </button>\n                        </form>\n                     </div>\n                  </div>\n               </div>\n            </div>\n         )}\n\n         {/* Pricing / Post Listing Modal */}\n         {showPricingModal && (\n            <div className=\"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/90 backdrop-blur-sm animate-in fade-in\">\n               <div className=\"bg-white rounded-2xl max-w-4xl w-full overflow-hidden relative\">\n                  <button\n                     onClick={() => setShowPricingModal(false)}\n                     className=\"absolute top-4 right-4 p-2 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-600\"\n                  >\n                     <X className=\"h-6 w-6\" />\n                  </button>\n\n                  <div className=\"bg-green-900 text-white p-8 text-center\">\n                     <h2 className=\"text-3xl font-bold mb-2\">List Your Property</h2>\n                     <p className=\"text-green-100\">Reach thousands of tenants and buyers in Trinidad & Tobago daily.</p>\n                  </div>\n\n                  <div className=\"p-8 grid grid-cols-1 md:grid-cols-3 gap-8\">\n                     {/* Free Tier */}\n                     <div className=\"border border-gray-200 rounded-xl p-6 text-center hover:border-gray-400 transition-colors\">\n                        <h3 className=\"text-xl font-bold text-gray-900\">Owner Basic</h3>\n                        <div className=\"my-4 text-3xl font-extrabold\">Free</div>\n                        <p className=\"text-xs text-gray-500 mb-6\">Perfect for single property owners.</p>\n                        <ul className=\"space-y-3 text-sm text-gray-600 text-left mb-8\">\n                           <li className=\"flex items-center\"><Check className=\"h-4 w-4 text-green-500 mr-2\" /> 1 Active Listing</li>\n                           <li className=\"flex items-center\"><Check className=\"h-4 w-4 text-green-500 mr-2\" /> 3 Photos Max</li>\n                           <li className=\"flex items-center\"><Check className=\"h-4 w-4 text-green-500 mr-2\" /> Standard Support</li>\n                        </ul>\n                        <button onClick={() => { alert('Redirecting to basic listing form...'); setShowPricingModal(false); }} className=\"w-full py-3 rounded-lg border-2 border-green-600 text-green-700 font-bold hover:bg-green-50\">\n                           Start Free\n                        </button>\n                     </div>\n\n                     {/* Pro Agent - The Upsell */}\n                     <div className=\"border-2 border-green-500 rounded-xl p-6 text-center relative transform scale-105 shadow-xl bg-white\">\n                        <div className=\"absolute top-0 inset-x-0 bg-green-500 text-white text-xs font-bold py-1 uppercase tracking-wide\">Best Value</div>\n                        <h3 className=\"text-xl font-bold text-gray-900 mt-2\">Agent Pro</h3>\n                        <div className=\"my-4 text-3xl font-extrabold\">TT$499<span className=\"text-sm font-normal text-gray-500\">/mo</span></div>\n                        <p className=\"text-xs text-gray-500 mb-6\">For serious real estate agents.</p>\n                        <ul className=\"space-y-3 text-sm text-gray-600 text-left mb-8\">\n                           <li className=\"flex items-center\"><Check className=\"h-4 w-4 text-green-500 mr-2\" /> 10 Active Listings</li>\n                           <li className=\"flex items-center\"><Check className=\"h-4 w-4 text-green-500 mr-2\" /> Unlimited Photos</li>\n                           <li className=\"flex items-center\"><Check className=\"h-4 w-4 text-green-500 mr-2\" /> <strong>Verified Badge</strong></li>\n                           <li className=\"flex items-center\"><Check className=\"h-4 w-4 text-green-500 mr-2\" /> Lead Dashboard</li>\n                        </ul>\n                        <button onClick={() => { alert('Redirecting to payment...'); setShowPricingModal(false); }} className=\"w-full py-3 rounded-lg bg-green-600 text-white font-bold hover:bg-green-700 shadow-lg\">\n                           Go Pro\n                        </button>\n                     </div>\n\n                     {/* Agency Elite */}\n                     <div className=\"border border-gray-200 rounded-xl p-6 text-center hover:border-gray-400 transition-colors bg-gray-50\">\n                        <h3 className=\"text-xl font-bold text-gray-900\">Agency Elite</h3>\n                        <div className=\"my-4 text-3xl font-extrabold\">TT$999<span className=\"text-sm font-normal text-gray-500\">/mo</span></div>\n                        <p className=\"text-xs text-gray-500 mb-6\">Dominate the market.</p>\n                        <ul className=\"space-y-3 text-sm text-gray-600 text-left mb-8\">\n                           <li className=\"flex items-center\"><Check className=\"h-4 w-4 text-green-500 mr-2\" /> <strong>Unlimited</strong> Listings</li>\n                           <li className=\"flex items-center\"><Check className=\"h-4 w-4 text-green-500 mr-2\" /> Homepage Feature</li>\n                           <li className=\"flex items-center\"><Check className=\"h-4 w-4 text-green-500 mr-2\" /> CRM Integration</li>\n                           <li className=\"flex items-center\"><Check className=\"h-4 w-4 text-green-500 mr-2\" /> Priority Support</li>\n                        </ul>\n                        <button onClick={() => { alert('Contacting sales...'); setShowPricingModal(false); }} className=\"w-full py-3 rounded-lg bg-gray-800 text-white font-bold hover:bg-gray-900\">\n                           Contact Sales\n                        </button>\n                     </div>\n                  </div>\n               </div>\n            </div>\n         )}\n\n         {/* AI Assistant Widget */}\n         <ChatWidget mode=\"real_estate\" />\n      </div>\n   );\n};\n",
  "pages/Rides.tsx": "\nimport React, { useState, useEffect, useRef } from 'react';\nimport { MapPin, Car, Truck, Bike, Clock, CreditCard, Navigation, CheckCircle, Loader2, Star, Shield, Banknote, Crosshair, AlertCircle } from 'lucide-react';\nimport { ChatWidget } from '../components/ChatWidget';\nimport { AdSpot } from '../components/AdSpot';\nimport { MapContainer, TileLayer, Marker, Popup, useMap } from 'react-leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\n\n// Fix Leaflet icon issue\nimport icon from 'leaflet/dist/images/marker-icon.png';\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png';\n\nlet DefaultIcon = L.icon({\n  iconUrl: icon,\n  shadowUrl: iconShadow,\n  iconSize: [25, 41],\n  iconAnchor: [12, 41]\n});\n\nL.Marker.prototype.options.icon = DefaultIcon;\n\n// Custom Icons\nconst carIcon = new L.Icon({\n  iconUrl: 'https://cdn-icons-png.flaticon.com/512/3097/3097180.png', // Placeholder car icon\n  iconSize: [32, 32],\n  iconAnchor: [16, 16],\n});\n\nconst userIcon = new L.Icon({\n  iconUrl: 'https://cdn-icons-png.flaticon.com/512/1077/1077114.png', // Placeholder user icon\n  iconSize: [32, 32],\n  iconAnchor: [16, 32],\n});\n\n// Component to update map center\nconst MapUpdater = ({ center }: { center: [number, number] }) => {\n  const map = useMap();\n  useEffect(() => {\n    map.setView(center, map.getZoom());\n  }, [center, map]);\n  return null;\n};\n\nexport const Rides: React.FC = () => {\n  const [bookingState, setBookingState] = useState<'idle' | 'searching' | 'found' | 'arriving' | 'in_progress'>('idle');\n  const [pickup, setPickup] = useState('');\n  const [dropoff, setDropoff] = useState('');\n  const [selectedType, setSelectedType] = useState('standard');\n  const [paymentType, setPaymentType] = useState<'cash' | 'card'>('cash');\n\n  // Map State\n  const [center, setCenter] = useState<[number, number]>([10.652, -61.514]); // Port of Spain\n  const [userLocation, setUserLocation] = useState<[number, number] | null>(null);\n  const [driverLocation, setDriverLocation] = useState<[number, number] | null>(null);\n  const [rideStats, setRideStats] = useState<{ distance: string, duration: string } | null>(null);\n\n  const rideTypes = [\n    { id: 'standard', name: 'TriniRide', icon: Car, price: 25, time: '5 min', desc: 'Affordable daily rides' },\n    { id: 'taxi', name: 'H-Taxi', icon: Shield, price: 35, time: '8 min', desc: 'Registered H-Cars' },\n    { id: 'courier', name: 'Courier', icon: Bike, price: 20, time: '10 min', desc: 'Package delivery' },\n    { id: 'truck', name: 'Moving', icon: Truck, price: 150, time: '25 min', desc: 'Pickup trucks & vans' },\n  ];\n\n  useEffect(() => {\n    // Try to get user location on load\n    getUserLocation();\n  }, []);\n\n  const getUserLocation = () => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          const pos: [number, number] = [position.coords.latitude, position.coords.longitude];\n          setCenter(pos);\n          setUserLocation(pos);\n          setPickup(\"Current Location\");\n        },\n        () => console.log(\"GPS permission denied\")\n      );\n    }\n  };\n\n  const handleBook = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!pickup || !dropoff) return;\n\n    setBookingState('searching');\n\n    // Simulate Route Calculation\n    setTimeout(() => {\n      setRideStats({ distance: \"4.2 km\", duration: \"12 mins\" });\n    }, 1000);\n\n    setTimeout(() => {\n      setBookingState('found');\n\n      // Save Ride to History\n      const newRide = {\n        id: `ride-${Date.now()}`,\n        pickup,\n        dropoff,\n        type: rideTypes.find(r => r.id === selectedType)?.name,\n        price: rideTypes.find(r => r.id === selectedType)?.price,\n        date: new Date().toISOString(),\n        status: 'completed'\n      };\n\n      const history = JSON.parse(localStorage.getItem('ride_history') || '[]');\n      localStorage.setItem('ride_history', JSON.stringify([newRide, ...history].slice(0, 5)));\n\n      startDriverSimulation();\n    }, 2500);\n  };\n\n  const startDriverSimulation = () => {\n    // Start driver slightly offset from center\n    const startLat = center[0] - 0.005;\n    const startLng = center[1] - 0.005;\n    setDriverLocation([startLat, startLng]);\n\n    let step = 0;\n    const maxSteps = 100;\n    const deltaLat = (center[0] - startLat) / maxSteps;\n    const deltaLng = (center[1] - startLng) / maxSteps;\n\n    const interval = setInterval(() => {\n      step++;\n      if (step <= maxSteps) {\n        setDriverLocation(prev => {\n          if (!prev) return [startLat, startLng];\n          return [startLat + (deltaLat * step), startLng + (deltaLng * step)];\n        });\n      } else {\n        clearInterval(interval);\n        setBookingState('arriving');\n      }\n    }, 50); // Update every 50ms\n  };\n\n  return (\n    <div className=\"min-h-screen flex flex-col lg:flex-row\">\n      {/* Left Panel - Booking Form */}\n      <div className=\"w-full lg:w-[450px] bg-white p-6 lg:p-8 shadow-xl z-10 flex flex-col h-auto lg:h-[calc(100vh-4rem)] overflow-y-auto\">\n        <div className=\"mb-6\">\n          <h1 className=\"text-3xl font-extrabold text-gray-900\">TriniBuild <span className=\"text-yellow-500\">Go</span></h1>\n          <p className=\"text-gray-500 mt-2\">Safe rides & fast logistics across T&T.</p>\n        </div>\n\n        <AdSpot page=\"rides\" slot=\"top\" className=\"mb-6\" />\n\n        {bookingState === 'found' || bookingState === 'arriving' ? (\n          <div className=\"flex-grow flex flex-col animate-in fade-in slide-in-from-bottom-4\">\n            <div className={`border rounded-xl p-6 mb-6 text-center transition-colors ${bookingState === 'arriving' ? 'bg-green-50 border-green-200' : 'bg-blue-50 border-blue-200'}`}>\n              <div className={`w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 ${bookingState === 'arriving' ? 'bg-green-100' : 'bg-blue-100'}`}>\n                <CheckCircle className={`h-8 w-8 ${bookingState === 'arriving' ? 'text-green-600' : 'text-blue-600'}`} />\n              </div>\n              <h2 className={`text-xl font-bold ${bookingState === 'arriving' ? 'text-green-800' : 'text-blue-800'}`}>\n                {bookingState === 'arriving' ? 'Driver has Arrived!' : 'Driver Found!'}\n              </h2>\n              <p className=\"text-gray-600\">\n                {bookingState === 'arriving' ? 'Please meet David at the pickup point.' : 'Your driver is en route.'}\n              </p>\n              {rideStats && (\n                <div className=\"mt-3 flex justify-center gap-4 text-sm font-bold text-gray-700\">\n                  <span>{rideStats.distance}</span>\n                  <span>\u2022</span>\n                  <span>{rideStats.duration}</span>\n                </div>\n              )}\n            </div>\n\n            <div className=\"bg-white border border-gray-200 rounded-xl p-4 mb-6 shadow-sm\">\n              <div className=\"flex items-center\">\n                <div className=\"h-14 w-14 bg-gray-200 rounded-full overflow-hidden\">\n                  <img src=\"https://images.unsplash.com/photo-1542596594-649edbc13630?q=80&w=200&auto=format&fit=crop\" alt=\"Driver\" className=\"h-full w-full object-cover\" />\n                </div>\n                <div className=\"ml-4\">\n                  <h3 className=\"font-bold text-gray-900\">David R.</h3>\n                  <div className=\"flex items-center text-xs text-gray-500\">\n                    <Star className=\"h-3 w-3 text-yellow-400 fill-current mr-1\" /> 4.9 \u2022 White Nissan Tiida\n                  </div>\n                  <div className=\"mt-1 bg-gray-100 text-gray-800 text-xs font-mono px-2 py-0.5 rounded w-fit\">\n                    PDE 4521\n                  </div>\n                </div>\n                <div className=\"ml-auto\">\n                  <button className=\"bg-green-100 text-green-700 p-2 rounded-full block hover:bg-green-200\">\n                    <Navigation className=\"h-5 w-5\" />\n                  </button>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-gray-50 p-4 rounded-lg mb-6 flex justify-between items-center\">\n              <span className=\"text-sm text-gray-600 font-medium\">Payment Method</span>\n              <span className=\"text-sm font-bold text-gray-900 flex items-center\">\n                {paymentType === 'cash' ? <Banknote className=\"h-4 w-4 mr-1 text-green-600\" /> : <CreditCard className=\"h-4 w-4 mr-1 text-blue-600\" />}\n                {paymentType === 'cash' ? 'Cash' : 'Card'}\n              </span>\n            </div>\n\n            <div className=\"mt-auto\">\n              <button\n                onClick={() => {\n                  setBookingState('idle');\n                  setDriverLocation(null);\n                }}\n                className=\"w-full bg-gray-100 text-gray-700 py-4 rounded-lg font-bold hover:bg-gray-200\"\n              >\n                Cancel Ride\n              </button>\n            </div>\n          </div>\n        ) : (\n          <form onSubmit={handleBook} className=\"flex-grow flex flex-col\">\n            <div className=\"space-y-4 mb-8\">\n              <div className=\"relative\">\n                <label className=\"text-xs font-bold text-gray-500 uppercase ml-1 bg-white px-1\">Pickup</label>\n                <div className=\"flex items-center border border-gray-300 rounded-lg px-3 py-3 bg-white focus-within:ring-2 focus-within:ring-yellow-400 focus-within:border-transparent transition-all\">\n                  <MapPin className=\"h-5 w-5 text-green-500 mr-3 flex-shrink-0\" />\n                  <input\n                    type=\"text\"\n                    placeholder=\"Current Location\"\n                    className=\"bg-transparent w-full outline-none text-gray-900 placeholder-gray-400\"\n                    value={pickup}\n                    onChange={(e) => setPickup(e.target.value)}\n                  />\n                  <button type=\"button\" onClick={getUserLocation} className=\"text-xs text-gray-400 font-bold hover:text-yellow-500 flex items-center\">\n                    <Crosshair className=\"h-3 w-3 mr-1\" /> GPS\n                  </button>\n                </div>\n              </div>\n\n              <div className=\"relative\">\n                <label className=\"text-xs font-bold text-gray-500 uppercase ml-1 bg-white px-1\">Dropoff</label>\n                <div className=\"flex items-center border border-gray-300 rounded-lg px-3 py-3 bg-white focus-within:ring-2 focus-within:ring-yellow-400 focus-within:border-transparent transition-all\">\n                  <MapPin className=\"h-5 w-5 text-red-500 mr-3 flex-shrink-0\" />\n                  <input\n                    type=\"text\"\n                    placeholder=\"Where to?\"\n                    className=\"bg-transparent w-full outline-none text-gray-900 placeholder-gray-400\"\n                    value={dropoff}\n                    onChange={(e) => setDropoff(e.target.value)}\n                  />\n                </div>\n              </div>\n            </div>\n\n            <div className=\"mb-8\">\n              <label className=\"text-xs font-bold text-gray-500 uppercase ml-1 mb-2 block\">Choose Ride</label>\n              <div className=\"space-y-3\">\n                {rideTypes.map((type) => (\n                  <div\n                    key={type.id}\n                    onClick={() => setSelectedType(type.id)}\n                    className={`flex items-center p-3 rounded-xl border cursor-pointer transition-all ${selectedType === type.id\n                      ? 'border-yellow-400 bg-yellow-50 shadow-sm'\n                      : 'border-gray-200 hover:border-gray-300'\n                      }`}\n                  >\n                    <div className={`p-2 rounded-full mr-4 ${selectedType === type.id ? 'bg-white text-yellow-600' : 'bg-gray-100 text-gray-500'}`}>\n                      <type.icon className=\"h-6 w-6\" />\n                    </div>\n                    <div className=\"flex-grow\">\n                      <h3 className=\"font-bold text-gray-900\">{type.name}</h3>\n                      <p className=\"text-xs text-gray-500\">{type.desc}</p>\n                    </div>\n                    <div className=\"text-right\">\n                      <div className=\"font-bold text-gray-900\">TT${type.price}</div>\n                      <div className=\"text-xs text-gray-500\">{type.time}</div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            <div className=\"mt-auto\">\n              <div className=\"flex items-center justify-between text-sm text-gray-500 mb-4\">\n                <div className=\"flex bg-gray-100 p-1 rounded-lg\">\n                  <button\n                    type=\"button\"\n                    onClick={() => setPaymentType('cash')}\n                    className={`px-3 py-1 rounded-md text-xs font-bold flex items-center transition-all ${paymentType === 'cash' ? 'bg-white shadow-sm text-green-700' : 'text-gray-500 hover:text-gray-700'}`}\n                  >\n                    <Banknote className=\"h-3 w-3 mr-1\" /> Cash\n                  </button>\n                  <button\n                    type=\"button\"\n                    onClick={() => setPaymentType('card')}\n                    className={`px-3 py-1 rounded-md text-xs font-bold flex items-center transition-all ${paymentType === 'card' ? 'bg-white shadow-sm text-blue-700' : 'text-gray-500 hover:text-gray-700'}`}\n                  >\n                    <CreditCard className=\"h-3 w-3 mr-1\" /> Card\n                  </button>\n                </div>\n                <span className=\"flex items-center\"><Clock className=\"h-4 w-4 mr-1\" /> Now</span>\n              </div>\n              <button\n                type=\"submit\"\n                disabled={!pickup || !dropoff || bookingState === 'searching'}\n                className=\"w-full bg-trini-black text-white py-4 rounded-lg font-bold text-lg hover:bg-gray-800 disabled:opacity-50 shadow-lg flex items-center justify-center transition-all\"\n              >\n                {bookingState === 'searching' ? (\n                  <>\n                    <Loader2 className=\"h-5 w-5 animate-spin mr-2\" /> Finding Driver...\n                  </>\n                ) : (\n                  'Confirm Ride'\n                )}\n              </button>\n            </div>\n          </form>\n        )}\n\n        {/* Recent Rides (Only show when idle) */}\n        {bookingState === 'idle' && (\n          <div className=\"mt-8 border-t border-gray-100 pt-6\">\n            <h3 className=\"text-sm font-bold text-gray-500 uppercase mb-4\">Recent Activity</h3>\n            <div className=\"space-y-3\">\n              {JSON.parse(localStorage.getItem('ride_history') || '[]').length > 0 ? (\n                JSON.parse(localStorage.getItem('ride_history') || '[]').map((ride: any) => (\n                  <div key={ride.id} className=\"flex items-center justify-between text-sm\">\n                    <div className=\"flex items-center text-gray-700\">\n                      <Clock className=\"h-4 w-4 mr-2 text-gray-400\" />\n                      <span className=\"truncate max-w-[150px]\">{ride.dropoff}</span>\n                    </div>\n                    <span className=\"font-bold text-gray-900\">TT${ride.price}</span>\n                  </div>\n                ))\n              ) : (\n                <p className=\"text-xs text-gray-400 italic\">No recent rides.</p>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Right Panel - Functional Map */}\n      <div className=\"flex-grow bg-gray-200 relative min-h-[300px] lg:min-h-0 z-0\">\n        <MapContainer center={center} zoom={13} style={{ height: '100%', width: '100%' }}>\n          <TileLayer\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n            attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n          />\n          <MapUpdater center={center} />\n\n          {userLocation && (\n            <Marker position={userLocation} icon={userIcon}>\n              <Popup>You are here</Popup>\n            </Marker>\n          )}\n\n          {driverLocation && (\n            <Marker position={driverLocation} icon={carIcon}>\n              <Popup>Driver</Popup>\n            </Marker>\n          )}\n        </MapContainer>\n\n        {bookingState === 'found' && (\n          <div className=\"absolute top-4 right-4 bg-white/90 backdrop-blur p-3 rounded-lg shadow-lg z-[1000] animate-in slide-in-from-top-2\">\n            <div className=\"flex items-center gap-2\">\n              <span className=\"relative flex h-3 w-3\">\n                <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75\"></span>\n                <span className=\"relative inline-flex rounded-full h-3 w-3 bg-green-500\"></span>\n              </span>\n              <span className=\"font-bold text-sm text-gray-800\">Live Tracking Active</span>\n            </div>\n          </div>\n        )}\n      </div>\n      <ChatWidget mode=\"rides\" />\n    </div >\n  );\n};\n",
  "pages/Settings.tsx": "import React, { useState, useEffect } from 'react';\nimport { Save, Key, Shield, CheckCircle, RotateCcw, Loader2, AlertCircle, Zap, Map as MapIcon } from 'lucide-react';\nimport { testApiKey } from '../services/geminiService';\n\ndeclare global {\n  interface Window {\n    gm_authFailure?: () => void;\n    google: any;\n    mapTestCallback?: () => void;\n  }\n}\n\nconst DEFAULT_MAPS_KEY = 'AIzaSyAbjOn5lpjfYw6Ig3M-KWU1y0JP5z0LbPM';\n\nexport const Settings: React.FC = () => {\n  const [keys, setKeys] = useState({\n    gemini: '',\n    googleMaps: '',\n    whatsappToken: '',\n    paypalClient: ''\n  });\n  const [saved, setSaved] = useState(false);\n\n  // Testing States\n  const [testingGemini, setTestingGemini] = useState(false);\n  const [geminiStatus, setGeminiStatus] = useState<'success' | 'error' | null>(null);\n\n  const [testingMaps, setTestingMaps] = useState(false);\n  const [mapsStatus, setMapsStatus] = useState<'success' | 'error' | 'reload_needed' | null>(null);\n\n  useEffect(() => {\n    setKeys({\n      gemini: localStorage.getItem('gemini_api_key') || '',\n      googleMaps: localStorage.getItem('google_maps_api_key') || DEFAULT_MAPS_KEY,\n      whatsappToken: localStorage.getItem('whatsapp_api_token') || '',\n      paypalClient: localStorage.getItem('paypal_client_id') || ''\n    });\n  }, []);\n\n  const handleSave = (e: React.FormEvent) => {\n    e.preventDefault();\n    localStorage.setItem('gemini_api_key', keys.gemini);\n    localStorage.setItem('google_maps_api_key', keys.googleMaps);\n    localStorage.setItem('whatsapp_api_token', keys.whatsappToken);\n    localStorage.setItem('paypal_client_id', keys.paypalClient);\n\n    setSaved(true);\n    setTimeout(() => setSaved(false), 3000);\n\n    if (window.confirm(\"Settings saved. Reload app to apply changes?\")) {\n      window.location.reload();\n    }\n  };\n\n  const handleTestGemini = async () => {\n    if (!keys.gemini && !process.env.API_KEY) {\n      alert(\"Please enter a key first.\");\n      return;\n    }\n    // Temp save for test\n    if (keys.gemini) localStorage.setItem('gemini_api_key', keys.gemini);\n\n    setTestingGemini(true);\n    setGeminiStatus(null);\n\n    const success = await testApiKey();\n    setGeminiStatus(success ? 'success' : 'error');\n    setTestingGemini(false);\n  };\n\n  const handleTestMapsConnection = () => {\n    if (!keys.googleMaps) {\n      alert(\"Please enter a Google Maps API Key.\");\n      return;\n    }\n\n    // If Google Maps is already loaded, we can't easily re-test without reload\n    if (window.google && window.google.maps) {\n      setMapsStatus('reload_needed');\n      return;\n    }\n\n    setTestingMaps(true);\n    setMapsStatus(null);\n\n    // 1. Define specific callbacks for this test\n    const cleanup = () => {\n      // @ts-ignore\n      delete window.mapTestCallback;\n      // Restore original auth failure if it existed, or delete\n      // We don't want to break the Directory page if user navigates away\n    };\n\n    // Success Handler\n    window.mapTestCallback = () => {\n      setMapsStatus('success');\n      setTestingMaps(false);\n      cleanup();\n    };\n\n    // Failure Handler (Overriding global for the duration of this test)\n    const originalAuthFailure = window.gm_authFailure;\n    window.gm_authFailure = () => {\n      setMapsStatus('error');\n      setTestingMaps(false);\n      cleanup();\n      if (originalAuthFailure) window.gm_authFailure = originalAuthFailure;\n    };\n\n    // 2. Inject Script\n    const script = document.createElement('script');\n    script.src = `https://maps.googleapis.com/maps/api/js?key=${keys.googleMaps}&callback=mapTestCallback`;\n    script.async = true;\n    script.defer = true;\n    script.onerror = () => {\n      setMapsStatus('error');\n      setTestingMaps(false);\n      cleanup();\n    };\n\n    document.head.appendChild(script);\n  };\n\n  const handleReset = () => {\n    if (window.confirm(\"Are you sure you want to clear all stored keys?\")) {\n      localStorage.clear();\n      setKeys({ gemini: '', googleMaps: '', whatsappToken: '', paypalClient: '' });\n      setGeminiStatus(null);\n      setMapsStatus(null);\n      window.location.reload();\n    }\n  };\n\n  return (\n    <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-10\">\n      <div className=\"mb-8\">\n        <h1 className=\"text-2xl font-bold text-gray-900 flex items-center\">\n          <Shield className=\"h-6 w-6 mr-2 text-trini-red\" />\n          Platform Settings & API Keys\n        </h1>\n        <p className=\"text-gray-500 mt-2\">\n          Manage the external service connections for TriniBuild. Keys are stored locally in your browser for this session.\n        </p>\n      </div>\n\n      <div className=\"bg-white shadow rounded-lg overflow-hidden border border-gray-200\">\n        <div className=\"p-6 space-y-6\">\n          <form onSubmit={handleSave}>\n            {/* Gemini API */}\n            <div className=\"mb-6\">\n              <label className=\"block text-sm font-bold text-gray-700 mb-2 flex items-center justify-between\">\n                <div className=\"flex items-center\">\n                  <Key className=\"h-4 w-4 mr-2 text-blue-500\" />\n                  AI Service API Key (Optional)\n                </div>\n                <button\n                  type=\"button\"\n                  onClick={handleTestGemini}\n                  disabled={testingGemini}\n                  className=\"text-xs flex items-center px-2 py-1 bg-blue-50 text-blue-700 rounded border border-blue-100 hover:bg-blue-100\"\n                >\n                  {testingGemini ? <Loader2 className=\"h-3 w-3 animate-spin mr-1\" /> : <Zap className=\"h-3 w-3 mr-1\" />}\n                  Test Connection\n                </button>\n              </label>\n              <div className=\"relative\">\n                <input\n                  type=\"password\"\n                  value={keys.gemini}\n                  onChange={(e) => {\n                    setKeys({ ...keys, gemini: e.target.value });\n                    setGeminiStatus(null);\n                  }}\n                  placeholder=\"AIzaSy...\"\n                  className={`w-full border rounded-md p-3 font-mono text-sm focus:ring-trini-teal focus:border-trini-teal ${geminiStatus === 'success' ? 'border-green-500 bg-green-50' :\n                      geminiStatus === 'error' ? 'border-red-500 bg-red-50' : 'border-gray-300'\n                    }`}\n                />\n                {geminiStatus === 'success' && (\n                  <span className=\"absolute right-3 top-3 text-green-600 text-xs font-bold flex items-center\">\n                    <CheckCircle className=\"h-4 w-4 mr-1\" /> Connected\n                  </span>\n                )}\n                {geminiStatus === 'error' && (\n                  <span className=\"absolute right-3 top-3 text-red-600 text-xs font-bold flex items-center\">\n                    <AlertCircle className=\"h-4 w-4 mr-1\" /> Invalid Key\n                  </span>\n                )}\n              </div>\n              <p className=\"text-xs text-gray-500 mt-1\">Required for Store Creator, Chatbot, and Vision AI.</p>\n            </div>\n\n            {/* Maps API */}\n            <div className=\"mb-6\">\n              <label className=\"block text-sm font-bold text-gray-700 mb-2 flex items-center justify-between\">\n                <div className=\"flex items-center\">\n                  <Key className=\"h-4 w-4 mr-2 text-green-500\" />\n                  Google Maps JavaScript API Key\n                </div>\n                <button\n                  type=\"button\"\n                  onClick={handleTestMapsConnection}\n                  disabled={testingMaps}\n                  className=\"text-xs flex items-center px-2 py-1 bg-green-50 text-green-700 rounded border border-green-100 hover:bg-green-100\"\n                >\n                  {testingMaps ? <Loader2 className=\"h-3 w-3 animate-spin mr-1\" /> : <MapIcon className=\"h-3 w-3 mr-1\" />}\n                  Test Key\n                </button>\n              </label>\n              <div className=\"relative\">\n                <input\n                  type=\"password\"\n                  value={keys.googleMaps}\n                  onChange={(e) => {\n                    setKeys({ ...keys, googleMaps: e.target.value });\n                    setMapsStatus(null);\n                  }}\n                  placeholder=\"AIzaSy...\"\n                  className={`w-full border rounded-md p-3 font-mono text-sm focus:ring-trini-teal focus:border-trini-teal ${mapsStatus === 'success' ? 'border-green-500 bg-green-50' :\n                      mapsStatus === 'error' ? 'border-red-500 bg-red-50' : 'border-gray-300'\n                    }`}\n                />\n                {mapsStatus === 'success' && (\n                  <span className=\"absolute right-3 top-3 text-green-600 text-xs font-bold flex items-center\">\n                    <CheckCircle className=\"h-4 w-4 mr-1\" /> Valid\n                  </span>\n                )}\n                {mapsStatus === 'error' && (\n                  <span className=\"absolute right-3 top-3 text-red-600 text-xs font-bold flex items-center\">\n                    <AlertCircle className=\"h-4 w-4 mr-1\" /> Failed / Auth Error\n                  </span>\n                )}\n                {mapsStatus === 'reload_needed' && (\n                  <span className=\"absolute right-3 top-3 text-orange-600 text-xs font-bold flex items-center\">\n                    <AlertCircle className=\"h-4 w-4 mr-1\" /> Save & Reload Page\n                  </span>\n                )}\n              </div>\n              <p className=\"text-xs text-gray-500 mt-1\">\n                Required for Directory Map. If invalid, app falls back to TriniBuild AI Grounding.\n                {mapsStatus === 'reload_needed' && <span className=\"text-orange-600 font-bold ml-1\"> (Maps already loaded, please reload page to test new key)</span>}\n              </p>\n            </div>\n\n            {/* WhatsApp */}\n            <div className=\"mb-6\">\n              <label className=\"block text-sm font-bold text-gray-700 mb-2 flex items-center\">\n                <Key className=\"h-4 w-4 mr-2 text-green-600\" />\n                WhatsApp Business Token (Optional)\n              </label>\n              <input\n                type=\"password\"\n                value={keys.whatsappToken}\n                onChange={(e) => setKeys({ ...keys, whatsappToken: e.target.value })}\n                placeholder=\"EAAG...\"\n                className=\"w-full border border-gray-300 rounded-md p-3 font-mono text-sm focus:ring-trini-teal focus:border-trini-teal\"\n              />\n            </div>\n\n            <div className=\"flex items-center justify-between pt-6 border-t border-gray-100\">\n              <button\n                type=\"button\"\n                onClick={handleReset}\n                className=\"text-red-600 text-sm font-medium hover:text-red-800 flex items-center\"\n              >\n                <RotateCcw className=\"h-4 w-4 mr-1\" /> Clear All Keys\n              </button>\n\n              <button\n                type=\"submit\"\n                className=\"bg-trini-black text-white px-6 py-3 rounded-md font-bold hover:bg-gray-800 flex items-center shadow-lg\"\n              >\n                {saved ? <CheckCircle className=\"h-5 w-5 mr-2 text-green-400\" /> : <Save className=\"h-5 w-5 mr-2\" />}\n                {saved ? 'Settings Saved' : 'Save Settings'}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};",
  "pages/StoreBotSettings.tsx": "import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Bot, Save, ArrowLeft, MessageSquare, Sparkles } from 'lucide-react';\nimport { supabase } from '../services/supabaseClient';\nimport { authService, User } from '../services/authService';\n\nexport const StoreBotSettings: React.FC = () => {\n    const navigate = useNavigate();\n    const [user, setUser] = useState<User | null>(null);\n    const [loading, setLoading] = useState(true);\n    const [saving, setSaving] = useState(false);\n    const [storeId, setStoreId] = useState<string | null>(null);\n\n    const [settings, setSettings] = useState({\n        bot_name: 'TriniBuild Support Bot',\n        bot_persona: 'support_bot',\n        bot_system_prompt: ''\n    });\n\n    useEffect(() => {\n        const checkUser = async () => {\n            const currentUser = await authService.getCurrentUser();\n            if (currentUser) {\n                setUser(currentUser);\n                fetchStoreSettings(currentUser.id);\n            } else {\n                setLoading(false);\n            }\n        };\n        checkUser();\n    }, []);\n\n    const fetchStoreSettings = async (userId: string) => {\n        try {\n            const { data: store, error } = await supabase\n                .from('stores')\n                .select('id, bot_name, bot_persona, bot_system_prompt')\n                .eq('owner_id', userId)\n                .single();\n\n            if (error) throw error;\n\n            if (store) {\n                setStoreId(store.id);\n                setSettings({\n                    bot_name: store.bot_name || 'TriniBuild Support Bot',\n                    bot_persona: store.bot_persona || 'support_bot',\n                    bot_system_prompt: store.bot_system_prompt || ''\n                });\n            }\n        } catch (error) {\n            console.error('Error fetching store settings:', error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleSave = async () => {\n        if (!storeId) return;\n        setSaving(true);\n\n        try {\n            const { error } = await supabase\n                .from('stores')\n                .update({\n                    bot_name: settings.bot_name,\n                    bot_persona: settings.bot_persona,\n                    bot_system_prompt: settings.bot_system_prompt\n                })\n                .eq('id', storeId);\n\n            if (error) throw error;\n            alert('Bot settings saved successfully!');\n        } catch (error) {\n            console.error('Error saving settings:', error);\n            alert('Failed to save settings');\n        } finally {\n            setSaving(false);\n        }\n    };\n\n    if (loading) {\n        return <div className=\"min-h-screen flex items-center justify-center\">Loading...</div>;\n    }\n\n    if (!storeId) {\n        return (\n            <div className=\"min-h-screen flex flex-col items-center justify-center p-4\">\n                <h2 className=\"text-2xl font-bold mb-4\">No Store Found</h2>\n                <p className=\"text-gray-600 mb-6\">You need to create a store before you can configure a bot.</p>\n                <button\n                    onClick={() => navigate('/create-store')}\n                    className=\"bg-trini-red text-white px-6 py-2 rounded-full\"\n                >\n                    Create Store\n                </button>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"max-w-4xl mx-auto px-4 py-8\">\n            <button\n                onClick={() => navigate('/dashboard')}\n                className=\"flex items-center text-gray-600 hover:text-trini-red mb-6 transition-colors\"\n            >\n                <ArrowLeft className=\"h-4 w-4 mr-2\" />\n                Back to Dashboard\n            </button>\n\n            <div className=\"bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-100\">\n                <div className=\"bg-gradient-to-r from-trini-black to-gray-800 p-8 text-white\">\n                    <div className=\"flex items-center gap-4 mb-4\">\n                        <div className=\"bg-white/20 p-3 rounded-xl backdrop-blur-sm\">\n                            <Bot className=\"h-8 w-8 text-trini-teal\" />\n                        </div>\n                        <div>\n                            <h1 className=\"text-2xl font-bold\">AI Bot Configuration</h1>\n                            <p className=\"text-gray-300\">Customize your store's AI assistant</p>\n                        </div>\n                    </div>\n                </div>\n\n                <div className=\"p-8 space-y-8\">\n                    {/* Bot Identity */}\n                    <section className=\"space-y-4\">\n                        <h2 className=\"text-lg font-semibold flex items-center gap-2 text-gray-800\">\n                            <MessageSquare className=\"h-5 w-5 text-trini-red\" />\n                            Bot Identity\n                        </h2>\n\n                        <div className=\"grid md:grid-cols-2 gap-6\">\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Bot Name</label>\n                                <input\n                                    type=\"text\"\n                                    value={settings.bot_name}\n                                    onChange={(e) => setSettings({ ...settings, bot_name: e.target.value })}\n                                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-trini-red/20 focus:border-trini-red outline-none transition-all\"\n                                    placeholder=\"e.g. Rasta Pasta Bot\"\n                                />\n                            </div>\n\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Persona Type</label>\n                                <select\n                                    value={settings.bot_persona}\n                                    onChange={(e) => setSettings({ ...settings, bot_persona: e.target.value })}\n                                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-trini-red/20 focus:border-trini-red outline-none transition-all\"\n                                >\n                                    <option value=\"support_bot\">Support Assistant (Standard)</option>\n                                    <option value=\"sales_agent\">Sales Agent (Persuasive)</option>\n                                    <option value=\"custom\">Custom Persona</option>\n                                </select>\n                            </div>\n                        </div>\n                    </section>\n\n                    {/* Custom Instructions */}\n                    <section className=\"space-y-4\">\n                        <div className=\"flex items-center justify-between\">\n                            <h2 className=\"text-lg font-semibold flex items-center gap-2 text-gray-800\">\n                                <Sparkles className=\"h-5 w-5 text-yellow-500\" />\n                                System Instructions\n                            </h2>\n                            <span className=\"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full border border-yellow-200\">\n                                Advanced\n                            </span>\n                        </div>\n\n                        <p className=\"text-sm text-gray-500\">\n                            Define exactly how your bot should behave. This overrides the default persona instructions.\n                        </p>\n\n                        <textarea\n                            value={settings.bot_system_prompt}\n                            onChange={(e) => setSettings({ ...settings, bot_system_prompt: e.target.value })}\n                            rows={6}\n                            className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-trini-red/20 focus:border-trini-red outline-none transition-all font-mono text-sm\"\n                            placeholder=\"You are a helpful assistant for [Store Name]. You speak with a heavy Trinidadian accent and use local slang. You should focus on selling [Product Category]...\"\n                        />\n                    </section>\n\n                    {/* Save Button */}\n                    <div className=\"pt-6 border-t border-gray-100 flex justify-end\">\n                        <button\n                            onClick={handleSave}\n                            disabled={saving}\n                            className=\"bg-trini-red text-white px-8 py-3 rounded-full font-semibold hover:bg-red-700 transform hover:scale-105 transition-all flex items-center gap-2 shadow-lg disabled:opacity-50 disabled:scale-100\"\n                        >\n                            {saving ? (\n                                <>Saving...</>\n                            ) : (\n                                <>\n                                    <Save className=\"h-5 w-5\" />\n                                    Save Configuration\n                                </>\n                            )}\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n",
  "pages/StoreCreator.tsx": "import React, { useState, useEffect } from 'react';\nimport { Wand2, Loader2, CheckCircle, MapPin, Store, ArrowRight, Zap, LayoutTemplate, ShieldCheck, Smartphone, Monitor, RefreshCw, Palette, CreditCard, Camera, Star, Lock, Award, TrendingUp, FileSignature, X } from 'lucide-react';\nimport { generateStoreProfile } from '../services/geminiService';\nimport { Business } from '../types';\nimport { useSearchParams, useNavigate, Link } from 'react-router-dom';\nimport { legalService } from '../services/legalService';\nimport { storeService } from '../services/storeService';\n\n// Placeholder logo URL\nconst LOGO_URL = \"https://trinibuild.com/wp-content/uploads/2023/05/TriniBuild-Logo.png\";\n\nexport const StoreCreator: React.FC = () => {\n   const [searchParams] = useSearchParams();\n   const navigate = useNavigate();\n   const [step, setStep] = useState(1);\n   const [formData, setFormData] = useState({\n      name: '',\n      type: '',\n      address: '',\n      placeId: '',\n      vibe: 'Modern' // New field for visual style\n   });\n   const [loading, setLoading] = useState(false);\n   const [generatedStore, setGeneratedStore] = useState<Partial<Business> | null>(null);\n   const [claimMode, setClaimMode] = useState(false);\n   const [viewMode, setViewMode] = useState<'desktop' | 'mobile'>('desktop');\n   const [imageSeed, setImageSeed] = useState(1); // To force image refresh\n\n   // Legal State\n   const [showLegalModal, setShowLegalModal] = useState(false);\n   const [isSigning, setIsSigning] = useState(false);\n   const [hasSigned, setHasSigned] = useState(false);\n\n   // Check for claim parameters or saved draft on load\n   useEffect(() => {\n      const claimName = searchParams.get('claim_name');\n      const claimAddress = searchParams.get('claim_address');\n      const claimPlaceId = searchParams.get('claim_place_id');\n\n      // Check if already signed\n      if (legalService.hasSigned('current-user', 'contractor_agreement')) {\n         setHasSigned(true);\n      }\n\n      // 1. Priority: URL Params (from Onboarding or Claim flow)\n      if (claimName) {\n         setFormData(prev => ({\n            ...prev,\n            name: decodeURIComponent(claimName),\n            address: claimAddress ? decodeURIComponent(claimAddress) : prev.address,\n            placeId: claimPlaceId || prev.placeId\n         }));\n         setClaimMode(true);\n      }\n      // 2. Fallback: Saved Draft from Onboarding\n      else {\n         const draftName = localStorage.getItem('draft_business_name');\n         if (draftName) {\n            setFormData(prev => ({ ...prev, name: draftName }));\n         }\n\n         // Load any other saved form state\n         const savedForm = localStorage.getItem('store_creator_form');\n         if (savedForm) {\n            try {\n               const parsed = JSON.parse(savedForm);\n               setFormData(prev => ({ ...prev, ...parsed }));\n            } catch (e) {\n               console.error(\"Failed to parse saved form\", e);\n            }\n         }\n      }\n   }, [searchParams]);\n\n   // Auto-save form progress\n   useEffect(() => {\n      if (formData.name || formData.type) {\n         localStorage.setItem('store_creator_form', JSON.stringify(formData));\n      }\n   }, [formData]);\n\n   const handleGenerate = async () => {\n      if (!formData.name || !formData.type) return;\n\n      setLoading(true);\n      try {\n         const result = await generateStoreProfile(formData.name, formData.type);\n         setGeneratedStore(result);\n         setStep(2);\n      } catch (error) {\n         console.error(\"Generation failed\", error);\n         alert(\"Failed to generate store. Please check your API key or try again.\");\n      } finally {\n         setLoading(false);\n      }\n   };\n\n   // ... inside component\n\n   const saveStoreData = async () => {\n      if (generatedStore) {\n         const storeData = {\n            businessName: formData.name,\n            description: generatedStore.description || '',\n            location: formData.address || 'Trinidad',\n            whatsapp: '18680000000', // Default or ask user\n            // vibe: formData.vibe, // Not in Store interface yet, maybe put in description or metadata\n         };\n\n         try {\n            const newStore = await storeService.createStore(storeData);\n            if (newStore) {\n               // We can still save to local storage for immediate access if needed, \n               // but Dashboard now fetches from API.\n               // localStorage.setItem('trinibuild_active_store', JSON.stringify(newStore));\n\n               // If we generated products, we should add them too\n               if (generatedStore.products) {\n                  for (const prod of generatedStore.products) {\n                     await storeService.addProduct(newStore.id, {\n                        title: prod.name,\n                        description: prod.description,\n                        price: prod.price,\n                        images: [prod.image], // Note: generatedStore has 'image', Product has 'images'\n                        category: 'General'\n                     });\n                  }\n               }\n            }\n         } catch (e) {\n            console.error(\"Failed to create store\", e);\n            alert(\"Failed to create store. Please try again.\");\n            throw e; // Stop progression\n         }\n      }\n   };\n\n   const handleComplete = async () => {\n      if (!hasSigned) {\n         setShowLegalModal(true);\n         return;\n      }\n      await saveStoreData();\n      // Trigger Celebration Mode\n      setStep(3);\n   };\n\n   const handleSign = async () => {\n      setIsSigning(true);\n      try {\n         await legalService.signDocument('current-user', 'contractor_agreement', 'Signed via StoreCreator');\n         setHasSigned(true);\n         setShowLegalModal(false);\n         await saveStoreData();\n         setStep(3);\n      } catch (error) {\n         console.error(\"Signing failed\", error);\n      } finally {\n         setIsSigning(false);\n      }\n   };\n\n   const handleTakeOffer = () => {\n      alert(\"Redirecting to payment gateway... (Mock)\");\n      navigate('/dashboard');\n   };\n\n   const handleSkipOffer = () => {\n      navigate('/dashboard');\n   };\n\n   // Helper to generate AI image URL on the fly\n   const getAiImageUrl = (prompt: string, type: 'product' | 'atmosphere' = 'product') => {\n      const basePrompt = `${prompt} ${formData.type} ${formData.vibe} style high quality photography`;\n      const dims = type === 'product' ? 'width=800&height=600' : 'width=1200&height=800'; // 4:3 for products, 3:2 for atmosphere\n      const encodedPrompt = encodeURIComponent(basePrompt);\n      return `https://image.pollinations.ai/prompt/${encodedPrompt}?${dims}&nologo=true&seed=${imageSeed + prompt.length}`;\n   };\n\n   return (\n      <div className=\"min-h-screen bg-gray-50 py-12 font-sans relative overflow-x-hidden\">\n         <div className=\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8\">\n\n            {/* Branding Header (Hidden in Step 3+) */}\n            {step < 3 && (\n               <div className=\"text-center mb-10\">\n                  <div className=\"inline-block mb-6\">\n                     <img\n                        src={LOGO_URL}\n                        alt=\"TriniBuild\"\n                        className=\"h-16 mx-auto object-contain\"\n                        onError={(e) => {\n                           e.currentTarget.style.display = 'none';\n                           e.currentTarget.parentElement!.innerHTML = '<span class=\"font-extrabold text-4xl text-gray-900\">Trini<span class=\"text-trini-red\">Build</span></span>';\n                        }}\n                     />\n                  </div>\n                  <h1 className=\"text-4xl font-extrabold text-gray-900 mb-4\">\n                     {claimMode ? 'Claim Your Business Listing' : 'Launch Your Free Store'}\n                  </h1>\n                  <p className=\"text-lg text-gray-600 max-w-2xl mx-auto\">\n                     {claimMode\n                        ? `Take control of your presence on Trinidad's largest directory.`\n                        : 'Join the ecosystem. 10 Free listings included forever.'}\n                  </p>\n               </div>\n            )}\n\n            {/* Progress Bar (Hidden in Step 3+) */}\n            {step < 3 && (\n               <div className=\"mb-12 relative\">\n                  <div className=\"absolute top-1/2 left-0 w-full h-1 bg-gray-200 -z-10 rounded-full\"></div>\n                  <div className=\"flex justify-between max-w-2xl mx-auto\">\n                     {[\n                        { num: 1, label: \"Identity & Style\", active: step >= 1 },\n                        { num: 2, label: \"AI Preview\", active: step >= 2 || loading },\n                        { num: 3, label: \"Launch\", active: step === 3 }\n                     ].map((s, idx) => (\n                        <div key={idx} className=\"flex flex-col items-center bg-gray-50 px-4\">\n                           <div className={`w-10 h-10 rounded-full flex items-center justify-center font-bold text-white mb-2 transition-colors shadow-lg ${s.active ? 'bg-trini-red' : 'bg-gray-300'}`}>\n                              {s.active ? <CheckCircle className=\"h-5 w-5\" /> : s.num}\n                           </div>\n                           <span className={`text-xs font-bold uppercase tracking-wide ${s.active ? 'text-trini-red' : 'text-gray-400'}`}>\n                              {s.label}\n                           </span>\n                        </div>\n                     ))}\n                  </div>\n               </div>\n            )}\n\n            <div className={`bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-200 relative transition-all duration-500 ${step >= 3 ? 'fixed inset-0 z-50 rounded-none m-0 border-0' : ''}`}>\n               {/* Step 1: Input Form */}\n               {step === 1 && (\n                  <div className=\"grid grid-cols-1 md:grid-cols-2\">\n                     <div className=\"p-8 md:p-12 flex flex-col justify-center\">\n\n                        {claimMode && (\n                           <div className=\"bg-blue-50 border border-blue-100 p-4 rounded-lg mb-6 flex items-start animate-in fade-in slide-in-from-top-2\">\n                              <ShieldCheck className=\"h-5 w-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0\" />\n                              <div>\n                                 <p className=\"text-sm font-bold text-blue-800\">Claiming: {formData.name}</p>\n                                 {formData.address && <p className=\"text-xs text-blue-600 mt-1\">{formData.address}</p>}\n                              </div>\n                           </div>\n                        )}\n\n                        <div className=\"space-y-6\">\n                           <div>\n                              <label className=\"block text-sm font-bold text-gray-900 mb-2 uppercase tracking-wide bg-white w-fit px-1\">Business Name</label>\n                              <input\n                                 type=\"text\"\n                                 className=\"w-full border-2 border-gray-300 rounded-lg p-4 focus:ring-2 focus:ring-trini-red focus:border-trini-red bg-white text-gray-900 text-lg font-medium placeholder-gray-400 transition-all\"\n                                 placeholder=\"e.g. Aunty May's Roti Shop\"\n                                 value={formData.name}\n                                 onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                                 readOnly={claimMode}\n                              />\n                           </div>\n\n                           <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                              <div>\n                                 <label className=\"block text-sm font-bold text-gray-900 mb-2 uppercase tracking-wide bg-white w-fit px-1\">Category</label>\n                                 <div className=\"relative\">\n                                    <select\n                                       className=\"w-full border-2 border-gray-300 rounded-lg p-4 focus:ring-2 focus:ring-trini-red focus:border-trini-red bg-white text-gray-900 text-base font-medium appearance-none cursor-pointer hover:border-gray-400 transition-all\"\n                                       value={formData.type}\n                                       onChange={(e) => setFormData({ ...formData, type: e.target.value })}\n                                    >\n                                       <option value=\"\" disabled className=\"text-gray-400\">Select...</option>\n                                       <optgroup label=\"Food & Hospitality\">\n                                          <option value=\"Restaurant\">\ud83c\udf54 Restaurant</option>\n                                          <option value=\"Fast Food\">\ud83c\udf5f Fast Food</option>\n                                          <option value=\"Cafe\">\u2615 Caf\u00e9</option>\n                                          <option value=\"Bar\">\ud83c\udf7a Bar</option>\n                                          <option value=\"Grocery\">\ud83d\uded2 Grocery</option>\n                                       </optgroup>\n                                       <optgroup label=\"Retail\">\n                                          <option value=\"Fashion\">\ud83d\udc57 Fashion</option>\n                                          <option value=\"Electronics\">\ud83d\udcf1 Tech</option>\n                                          <option value=\"Home Garden\">\ud83c\udfe1 Home</option>\n                                          <option value=\"Hardware\">\ud83d\udd28 Hardware</option>\n                                       </optgroup>\n                                       <optgroup label=\"Services\">\n                                          <option value=\"Beauty\">\ud83d\udc87\u200d\u2640\ufe0f Beauty</option>\n                                          <option value=\"Automotive\">\ud83d\udd27 Auto</option>\n                                          <option value=\"Professional\">\ud83d\udcbc Pro Services</option>\n                                       </optgroup>\n                                    </select>\n                                 </div>\n                              </div>\n\n                              <div>\n                                 <label className=\"block text-sm font-bold text-gray-900 mb-2 uppercase tracking-wide bg-white w-fit px-1\">Store Vibe</label>\n                                 <div className=\"relative\">\n                                    <select\n                                       className=\"w-full border-2 border-gray-300 rounded-lg p-4 focus:ring-2 focus:ring-trini-red focus:border-trini-red bg-white text-gray-900 text-base font-medium appearance-none cursor-pointer hover:border-gray-400 transition-all\"\n                                       value={formData.vibe}\n                                       onChange={(e) => setFormData({ ...formData, vibe: e.target.value })}\n                                    >\n                                       <option value=\"Modern\">\u2728 Modern & Clean</option>\n                                       <option value=\"Rustic\">\ud83e\udeb5 Rustic & Cozy</option>\n                                       <option value=\"Vibrant\">\ud83c\udfa8 Vibrant & Bold</option>\n                                       <option value=\"Luxury\">\ud83d\udc8e Luxury & Elegant</option>\n                                       <option value=\"Corporate\">\ud83c\udfe2 Corporate</option>\n                                    </select>\n                                    <Palette className=\"absolute right-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400 pointer-events-none\" />\n                                 </div>\n                              </div>\n                           </div>\n\n                           <button\n                              onClick={handleGenerate}\n                              disabled={loading || !formData.name || !formData.type}\n                              className=\"w-full flex justify-center items-center py-4 px-6 border border-transparent rounded-xl shadow-lg text-lg font-bold text-white bg-gradient-to-r from-trini-red to-red-700 hover:from-red-700 hover:to-trini-red focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all transform hover:-translate-y-1 mt-6\"\n                           >\n                              {loading ? (\n                                 <>\n                                    <Loader2 className=\"animate-spin -ml-1 mr-2 h-6 w-6\" />\n                                    Generating Website...\n                                 </>\n                              ) : (\n                                 <>\n                                    {claimMode ? 'Verify & Build' : 'Build Free Store'} <Wand2 className=\"ml-2 h-5 w-5\" />\n                                 </>\n                              )}\n                           </button>\n                           <div className=\"flex items-center justify-center text-xs text-gray-500 font-bold mt-3\">\n                              <CreditCard className=\"h-3 w-3 mr-1 text-green-500\" /> No Credit Card Required\n                           </div>\n                        </div>\n                     </div>\n\n                     {/* Value Prop Box */}\n                     <div className=\"bg-gray-900 text-white p-12 hidden md:flex flex-col justify-center relative overflow-hidden\">\n                        <div className=\"absolute top-0 right-0 p-4 opacity-10\">\n                           <Store className=\"h-64 w-64\" />\n                        </div>\n                        <h3 className=\"text-2xl font-bold mb-8 relative z-10\">We build it for you.</h3>\n                        <div className=\"space-y-6 relative z-10\">\n                           {[\n                              { title: \"Smart Imagery\", desc: \"Our AI selects product photos based on your specific industry.\", icon: Zap },\n                              { title: \"Local Copywriting\", desc: \"Descriptions written with Trinidadian consumers in mind.\", icon: LayoutTemplate },\n                              { title: \"Mobile Optimized\", desc: \"Looks perfect on every phone, tablet, and desktop.\", icon: Smartphone }\n                           ].map((feat, i) => (\n                              <div key={i} className=\"flex\">\n                                 <div className=\"bg-white/10 p-3 rounded-lg h-fit\">\n                                    <feat.icon className=\"h-6 w-6 text-trini-red\" />\n                                 </div>\n                                 <div className=\"ml-4\">\n                                    <h4 className=\"font-bold text-lg\">{feat.title}</h4>\n                                    <p className=\"text-gray-400 text-sm mt-1\">{feat.desc}</p>\n                                 </div>\n                              </div>\n                           ))}\n                        </div>\n                     </div>\n                  </div>\n               )}\n\n               {/* Step 2: AI Result Preview (Code unchanged, just context) */}\n               {step === 2 && generatedStore && (\n                  <div className=\"flex flex-col h-full\">\n                     {/* ... (Same preview code as before) ... */}\n                     {/* Shortened for brevity in this output, assuming content preserved */}\n                     {/* Preview Control Bar */}\n                     <div className=\"bg-white border-b border-gray-200 px-6 py-3 flex items-center justify-between sticky top-0 z-30 shadow-sm\">\n                        <div className=\"flex items-center\">\n                           <div className=\"bg-green-100 text-green-700 p-1.5 rounded-full mr-3\">\n                              <CheckCircle className=\"h-5 w-5\" />\n                           </div>\n                           <div>\n                              <h2 className=\"text-sm font-bold text-gray-900\">Your New Website Draft</h2>\n                              <p className=\"text-xs text-gray-500 hidden sm:block\">10 Free Listings Included \u2022 {formData.vibe} Design</p>\n                           </div>\n                        </div>\n\n                        <div className=\"flex items-center gap-4\">\n                           <div className=\"bg-gray-100 p-1 rounded-lg flex\">\n                              <button onClick={() => setViewMode('desktop')} className={`p-2 rounded-md transition-all ${viewMode === 'desktop' ? 'bg-white shadow text-trini-red' : 'text-gray-500 hover:text-gray-700'}`} title=\"Desktop View\"><Monitor className=\"h-5 w-5\" /></button>\n                              <button onClick={() => setViewMode('mobile')} className={`p-2 rounded-md transition-all ${viewMode === 'mobile' ? 'bg-white shadow text-trini-red' : 'text-gray-500 hover:text-gray-700'}`} title=\"Mobile View\"><Smartphone className=\"h-5 w-5\" /></button>\n                           </div>\n                           <button onClick={() => setImageSeed(prev => prev + 1)} className=\"text-xs flex items-center font-bold text-gray-500 hover:text-trini-red transition-colors\" title=\"Regenerate Images\"><RefreshCw className=\"h-4 w-4 mr-1\" /> New Images</button>\n                        </div>\n                     </div>\n\n                     <div className=\"flex-grow p-8 bg-gray-100 flex justify-center overflow-y-auto max-h-[80vh] custom-scrollbar\">\n                        <div className={`bg-white rounded-xl shadow-2xl border border-gray-300 overflow-hidden transition-all duration-500 ${viewMode === 'mobile' ? 'w-[375px]' : 'w-full max-w-5xl'}`}>\n                           <div className=\"bg-gray-50 px-4 py-3 border-b border-gray-200 flex items-center gap-2\">\n                              <div className=\"flex gap-1.5\"><div className=\"w-3 h-3 rounded-full bg-red-400\"></div><div className=\"w-3 h-3 rounded-full bg-yellow-400\"></div><div className=\"w-3 h-3 rounded-full bg-green-400\"></div></div>\n                              <div className=\"flex-grow mx-4 bg-white border border-gray-200 rounded-md h-7 text-xs flex items-center px-3 text-gray-500 font-mono overflow-hidden\"><ShieldCheck className=\"h-3 w-3 mr-1 text-green-500\" />trinibuild.com/store/{formData.name.toLowerCase().replace(/[^a-z0-9]/g, '-')}</div>\n                           </div>\n                           <div className={`min-h-[500px] ${formData.vibe === 'Luxury' ? 'font-serif' : 'font-sans'}`}>\n                              <div className={`p-8 text-white relative overflow-hidden ${formData.vibe === 'Vibrant' ? 'bg-gradient-to-r from-pink-500 via-red-500 to-yellow-500' : formData.vibe === 'Rustic' ? 'bg-[#4a3b32]' : formData.vibe === 'Luxury' ? 'bg-black' : 'bg-white text-gray-900 border-b border-gray-100'}`}>\n                                 <div className=\"relative z-10 flex flex-col items-center text-center\">\n                                    <div className={`w-20 h-20 rounded-full flex items-center justify-center text-2xl font-bold mb-4 shadow-lg ${formData.vibe === 'Modern' ? 'bg-trini-black text-white' : 'bg-white text-gray-900'}`}>{formData.name.substring(0, 2).toUpperCase()}</div>\n                                    <h2 className={`text-3xl font-extrabold mb-1 ${formData.vibe === 'Modern' ? 'text-gray-900' : 'text-white'}`}>{formData.name}</h2>\n                                    <p className={`font-medium opacity-90 ${formData.vibe === 'Modern' ? 'text-trini-teal' : 'text-white/80'}`}>{formData.type} \u2022 {formData.vibe} Style</p>\n                                 </div>\n                              </div>\n                              <div className=\"p-8\">\n                                 <div className={`p-4 rounded-lg border-l-4 mb-10 ${formData.vibe === 'Vibrant' ? 'bg-yellow-50 border-yellow-400 text-yellow-900' : 'bg-gray-50 border-trini-teal text-gray-600'}`}><p className=\"italic text-lg\">\"{generatedStore.description}\"</p></div>\n                                 <div className=\"mb-10\">\n                                    <h3 className=\"text-sm font-bold text-gray-400 uppercase tracking-wider mb-4 flex items-center\"><Camera className=\"h-4 w-4 mr-2 text-blue-500\" /> Store Atmosphere</h3>\n                                    <div className=\"grid grid-cols-3 gap-3\">\n                                       {['Interior', 'Storefront', 'Action'].map((scene, idx) => (\n                                          <div key={idx} className=\"aspect-video rounded-lg overflow-hidden bg-gray-200 relative group\">\n                                             <img src={getAiImageUrl(`${formData.type} ${scene}`, 'atmosphere')} className=\"w-full h-full object-cover\" alt={scene} />\n                                          </div>\n                                       ))}\n                                    </div>\n                                 </div>\n                                 <h3 className=\"text-sm font-bold text-gray-400 uppercase tracking-wider mb-6 flex items-center\"><Zap className=\"h-4 w-4 mr-2 text-yellow-500\" /> Featured Products</h3>\n                                 <div className={`grid gap-6 ${viewMode === 'mobile' ? 'grid-cols-1' : 'grid-cols-3'}`}>\n                                    {generatedStore.products?.slice(0, 3).map((prod, idx) => (\n                                       <div key={idx} className=\"bg-white rounded-xl border border-gray-100 overflow-hidden hover:shadow-xl transition-all duration-300 group\">\n                                          <div className=\"aspect-[4/3] bg-white relative overflow-hidden p-4 flex items-center justify-center\">\n                                             <img src={getAiImageUrl(prod.name, 'product')} alt={prod.name} className=\"max-w-full max-h-full object-contain transform group-hover:scale-105 transition-transform duration-700\" />\n                                          </div>\n                                          <div className=\"p-4 bg-gray-50/50 border-t border-gray-100\">\n                                             <h4 className=\"font-bold text-gray-900 mb-1 leading-tight\">{prod.name}</h4>\n                                             <div className=\"absolute top-2 right-2 bg-black/70 backdrop-blur text-white text-xs font-bold px-2 py-1 rounded border border-white/20 shadow-sm\">TT${prod.price}</div>\n                                          </div>\n                                       </div>\n                                    ))}\n                                 </div>\n                              </div>\n                           </div>\n                        </div>\n                     </div>\n\n                     <div className=\"bg-white border-t border-gray-200 p-4 flex flex-col sm:flex-row gap-4 justify-center items-center z-30 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)]\">\n                        <button onClick={() => setStep(1)} className=\"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 font-bold w-full sm:w-auto\">Back to Edit</button>\n                        <button onClick={handleComplete} className=\"px-8 py-3 bg-trini-red text-white rounded-lg hover:bg-red-700 shadow-xl font-bold flex items-center justify-center text-lg transform hover:scale-105 transition-all w-full sm:w-auto animate-pulse-subtle\">{claimMode ? 'Confirm Claim' : 'Claim to Go Live'} <ArrowRight className=\"ml-2 h-5 w-5\" /></button>\n                     </div>\n                  </div>\n               )}\n\n               {/* Step 3: Celebration Mode (Transition to Step 4) */}\n               {step === 3 && (\n                  <div className=\"fixed inset-0 z-[100] bg-white flex flex-col items-center justify-center text-center p-6 overflow-hidden\">\n                     <style>{`\n                   @keyframes firework { 0% { transform: translate(var(--x), var(--initialY)); width: var(--initialSize); opacity: 1; } 50% { width: 0.5rem; opacity: 1; } 100% { width: var(--finalSize); opacity: 0; } }\n                   .firework, .firework::before, .firework::after { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 0.5rem; aspect-ratio: 1; background: radial-gradient(circle, #ff0 0.2rem, #0000 0) 50% 0% / 100% 100%, radial-gradient(circle, #ff0 0.2rem, #0000 0) 0% 50% / 100% 100%, radial-gradient(circle, #ff0 0.2rem, #0000 0) 50% 100% / 100% 100%, radial-gradient(circle, #ff0 0.2rem, #0000 0) 100% 50% / 100% 100%; background-size: 0.5rem 0.5rem; background-repeat: no-repeat; animation: firework 2s infinite; }\n                   .firework::before { transform: translate(-50%, -50%) rotate(45deg); } .firework::after { transform: translate(-50%, -50%) rotate(-45deg); }\n                   .confetti { position: absolute; width: 10px; height: 10px; background-color: #f00; animation: fall linear forwards; } @keyframes fall { to { transform: translateY(100vh) rotate(720deg); } }\n                `}</style>\n                     <div className=\"absolute inset-0 pointer-events-none\">\n                        {[...Array(3)].map((_, i) => (<div key={i} className=\"firework\" style={{ left: `${20 + Math.random() * 60}%`, top: `${20 + Math.random() * 60}%`, animationDelay: `${i * 0.5}s`, '--x': '-50%', '--initialY': '-50%', '--initialSize': '0.5rem', '--finalSize': '30rem' } as any}></div>))}\n                        {[...Array(50)].map((_, i) => (<div key={i} className=\"confetti\" style={{ left: `${Math.random() * 100}%`, top: `-10%`, backgroundColor: ['#CE1126', '#FCD116', '#000000', '#008080'][Math.floor(Math.random() * 4)], animationDuration: `${2 + Math.random() * 3}s`, animationDelay: `${Math.random() * 2}s` }}></div>))}\n                     </div>\n                     <div className=\"relative z-10 animate-in zoom-in duration-700\">\n                        <div className=\"bg-white p-10 rounded-3xl shadow-2xl border-4 border-trini-red max-w-2xl mx-auto\">\n                           <div className=\"w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-8 shadow-lg\"><Star className=\"h-12 w-12 text-green-600 fill-current animate-spin-slow\" /></div>\n                           <h1 className=\"text-4xl md:text-6xl font-extrabold text-gray-900 mb-6 leading-tight\">Welcome to <span className=\"text-trini-red\">TriniBuild</span></h1>\n                           <p className=\"text-xl md:text-2xl text-gray-600 mb-10 font-medium\">Your digital empire starts now. <br /><span className=\"text-trini-black font-bold\">Welcome to the ecosystem.</span></p>\n                           <button onClick={() => setStep(4)} className=\"bg-trini-red text-white px-10 py-5 rounded-full font-bold text-xl shadow-xl hover:bg-red-700 hover:scale-105 transition-all animate-pulse-subtle\">Continue to Dashboard</button>\n                        </div>\n                     </div>\n                  </div>\n               )}\n\n               {/* Step 4: THE UPSELL (One Time Offer) */}\n               {step === 4 && (\n                  <div className=\"fixed inset-0 z-[100] bg-gray-900 flex flex-col items-center justify-center p-4\">\n                     <div className=\"max-w-3xl w-full bg-white rounded-2xl shadow-2xl overflow-hidden animate-in slide-in-from-bottom-8 duration-500\">\n                        <div className=\"bg-gradient-to-r from-yellow-500 to-yellow-600 p-6 text-center relative overflow-hidden\">\n                           <div className=\"absolute top-0 left-0 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-20\"></div>\n                           <span className=\"inline-block bg-black/20 text-white text-xs font-bold px-3 py-1 rounded-full uppercase tracking-widest mb-2\">One Time Offer</span>\n                           <h2 className=\"text-3xl md:text-4xl font-extrabold text-white relative z-10\">Wait! Fast Track Your Success</h2>\n                           <p className=\"text-yellow-50 mt-2 font-medium relative z-10\">Don't start from zero. Start as a leader.</p>\n                        </div>\n\n                        <div className=\"p-8 md:p-12\">\n                           <div className=\"flex flex-col md:flex-row gap-8 items-center\">\n                              <div className=\"flex-1 space-y-6\">\n                                 <div className=\"flex items-start\">\n                                    <div className=\"bg-green-100 p-3 rounded-full mr-4\"><ShieldCheck className=\"h-6 w-6 text-green-600\" /></div>\n                                    <div><h4 className=\"font-bold text-lg text-gray-900\">Verified Business Badge</h4><p className=\"text-sm text-gray-500\">Instantly build trust. Verified stores get 3x more clicks.</p></div>\n                                 </div>\n                                 <div className=\"flex items-start\">\n                                    <div className=\"bg-purple-100 p-3 rounded-full mr-4\"><TrendingUp className=\"h-6 w-6 text-purple-600\" /></div>\n                                    <div><h4 className=\"font-bold text-lg text-gray-900\">24h Homepage Boost</h4><p className=\"text-sm text-gray-500\">Get featured on the front page of TriniBuild for 24 hours.</p></div>\n                                 </div>\n                                 <div className=\"flex items-start\">\n                                    <div className=\"bg-blue-100 p-3 rounded-full mr-4\"><Lock className=\"h-6 w-6 text-blue-600\" /></div>\n                                    <div><h4 className=\"font-bold text-lg text-gray-900\">Unlock AI Analytics</h4><p className=\"text-sm text-gray-500\">See who is visiting your store from day one.</p></div>\n                                 </div>\n                              </div>\n\n                              <div className=\"flex-1 bg-gray-50 p-6 rounded-xl border-2 border-yellow-400 text-center w-full\">\n                                 <p className=\"text-sm text-gray-500 font-bold uppercase line-through\">Regular Price: $199</p>\n                                 <div className=\"text-5xl font-extrabold text-gray-900 my-2\">TT$49</div>\n                                 <p className=\"text-xs text-red-500 font-bold uppercase mb-6\">One-time payment \u2022 75% OFF</p>\n                                 <button onClick={handleTakeOffer} className=\"w-full bg-yellow-500 text-black py-4 rounded-lg font-extrabold text-lg hover:bg-yellow-400 shadow-lg transform hover:scale-105 transition-all mb-3\">\n                                    Yes! I want to grow faster\n                                 </button>\n                                 <button onClick={handleSkipOffer} className=\"text-sm text-gray-400 font-medium hover:text-gray-600 underline\">\n                                    No thanks, I'll stay on the slow path\n                                 </button>\n                              </div>\n                           </div>\n                        </div>\n                        <div className=\"bg-gray-50 px-8 py-4 text-center text-xs text-gray-400\">\n                           This offer is only available during signup. Secure payment via Credit Card or Bank Transfer.\n                        </div>\n                     </div>\n                  </div>\n               )}\n\n            </div>\n\n            {/* Legal Modal */}\n            {showLegalModal && (\n               <div className=\"fixed inset-0 z-[200] bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in\">\n                  <div className=\"bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden\">\n                     <div className=\"p-6 border-b border-gray-100 flex justify-between items-center\">\n                        <h3 className=\"text-xl font-bold text-gray-900\">One Last Step</h3>\n                        <button onClick={() => setShowLegalModal(false)} className=\"text-gray-400 hover:text-gray-600\">\n                           <X className=\"h-6 w-6\" />\n                        </button>\n                     </div>\n                     <div className=\"p-6\">\n                        <div className=\"bg-blue-50 p-4 rounded-lg border border-blue-100 mb-6 flex items-start\">\n                           <FileSignature className=\"h-5 w-5 text-blue-600 mr-3 mt-0.5 flex-shrink-0\" />\n                           <p className=\"text-sm text-blue-800\">\n                              To launch your store, you must sign the <strong>Independent Contractor Agreement</strong>. This confirms you are a business owner, not an employee.\n                           </p>\n                        </div>\n\n                        <div className=\"space-y-3 mb-6\">\n                           <Link to=\"/contractor-agreement\" target=\"_blank\" className=\"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50\">\n                              <span className=\"text-sm font-medium text-gray-700\">Read Agreement</span>\n                              <ArrowRight className=\"h-4 w-4 text-gray-400\" />\n                           </Link>\n                        </div>\n\n                        <button\n                           onClick={handleSign}\n                           disabled={isSigning}\n                           className=\"w-full bg-trini-black text-white py-4 rounded-xl font-bold text-lg hover:bg-gray-800 disabled:opacity-70 flex items-center justify-center\"\n                        >\n                           {isSigning ? <Loader2 className=\"h-5 w-5 animate-spin\" /> : 'Sign & Launch Store'}\n                        </button>\n                     </div>\n                  </div>\n               </div>\n            )}\n\n            <div className=\"text-center mt-8\">\n               <p className=\"text-sm text-gray-500\">Need help? <Link to=\"/contact\" className=\"text-trini-red font-bold hover:underline\">Chat with Support</Link></p>\n            </div>\n         </div>\n      </div>\n   );\n};\n",
  "pages/Storefront.tsx": "import React, { useState, useMemo, useEffect } from 'react';\nimport { ShoppingCart, Search, Menu, X, Star, MessageCircle, Phone, Mail, MapPin, Facebook, Instagram, Twitter, Plus, Minus, Trash2, ChevronRight, Banknote, CreditCard, Clock, Gift, Calendar, Truck, AlertCircle, CheckCircle, Lock } from 'lucide-react';\nimport { useParams } from 'react-router-dom';\nimport { storeService, Store } from '../services/storeService';\nimport { orderService, CreateOrderData } from '../services/orderService';\n\nexport const Storefront: React.FC = () => {\n  const { id } = useParams();\n  const [storeData, setStoreData] = useState<Store | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n\n  // Checkout State\n  const [checkoutStep, setCheckoutStep] = useState(1); // 1: Details, 2: Schedule, 3: Payment, 4: Success\n  const [isProcessingOrder, setIsProcessingOrder] = useState(false);\n  const [orderId, setOrderId] = useState<string | null>(null);\n\n  // Form State\n  const [shippingDetails, setShippingDetails] = useState({\n    name: '',\n    phone: '',\n    address: '',\n    city: '',\n    notes: ''\n  });\n  const [isPhoneVerified, setIsPhoneVerified] = useState(false);\n  const [phoneOtp, setPhoneOtp] = useState('');\n  const [showOtpInput, setShowOtpInput] = useState(false);\n\n  const [deliveryOption, setDeliveryOption] = useState<'standard' | 'express' | 'pickup'>('standard');\n  const [scheduleOption, setScheduleOption] = useState<'now' | 'later' | 'hold'>('now');\n  const [selectedDate, setSelectedDate] = useState('');\n\n  const [cart, setCart] = useState<any[]>([]);\n  const [isCartOpen, setIsCartOpen] = useState(false);\n  const [paymentMethod, setPaymentMethod] = useState<'COD' | 'BANK' | 'CARD'>('COD');\n\n  useEffect(() => {\n    const fetchStore = async () => {\n      if (!id) {\n        const activeStore = localStorage.getItem('trinibuild_active_store');\n        if (activeStore) {\n          setStoreData(JSON.parse(activeStore));\n          setIsLoading(false);\n          return;\n        }\n        setError(\"No store ID provided.\");\n        setIsLoading(false);\n        return;\n      }\n\n      setIsLoading(true);\n      try {\n        const data = await storeService.getStoreById(id);\n        setStoreData(data);\n      } catch (err) {\n        console.error(\"Failed to load store:\", err);\n        setError(\"Store not found.\");\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    fetchStore();\n  }, [id]);\n\n  // Aggregate cart items\n  const cartItems = useMemo(() => {\n    const items: Record<number, any> = {};\n    cart.forEach(product => {\n      if (items[product.id]) {\n        items[product.id].quantity += 1;\n      } else {\n        items[product.id] = { ...product, quantity: 1 };\n      }\n    });\n    return Object.values(items);\n  }, [cart]);\n\n  const cartTotal = cart.reduce((sum, item) => sum + item.price, 0);\n  const cartCount = cart.length;\n  const loyaltyPoints = Math.floor(cartTotal / 10);\n\n  const handleWhatsAppClick = (productName?: string) => {\n    if (!storeData) return;\n    const text = productName\n      ? `Hi, I'm interested in ordering ${productName} from your store.`\n      : `Hi, I have a question about your store.`;\n    const url = `https://wa.me/${storeData.whatsapp}?text=${encodeURIComponent(text)}`;\n    window.open(url, '_blank');\n  };\n\n  const verifyPhone = () => {\n    // Mock phone verification\n    if (shippingDetails.phone.length < 7) {\n      alert(\"Please enter a valid phone number.\");\n      return;\n    }\n    setShowOtpInput(true);\n    // Simulate sending OTP\n    setTimeout(() => alert(`Your OTP is 1234`), 1000);\n  };\n\n  const confirmOtp = () => {\n    if (phoneOtp === '1234') {\n      setIsPhoneVerified(true);\n      setShowOtpInput(false);\n    } else {\n      alert(\"Invalid OTP\");\n    }\n  };\n\n  const handlePlaceOrder = async () => {\n    if (!storeData) return;\n    setIsProcessingOrder(true);\n\n    try {\n      // Prepare Order Data\n      const orderData: CreateOrderData = {\n        storeId: storeData.id,\n        items: cartItems.map((item: any) => ({\n          productId: item.id.toString(),\n          quantity: item.quantity,\n          price: item.price,\n          name: item.name // Pass name for display in order history\n        })),\n        shippingAddress: {\n          street: shippingDetails.address,\n          city: shippingDetails.city,\n          phone: shippingDetails.phone,\n          name: shippingDetails.name\n        },\n        paymentMethod: 'CASH_ON_DELIVERY', // Hardcoded for now as per requirement\n        deliveryOption: deliveryOption,\n        deliverySlot: scheduleOption === 'later' ? selectedDate : undefined,\n        holdUntil: scheduleOption === 'hold' ? selectedDate : undefined,\n        notes: shippingDetails.notes\n      };\n\n      // Call API\n      const response = await orderService.createOrder(orderData);\n      setOrderId(response.orderNumber || 'ORD-' + Math.floor(Math.random() * 10000));\n      setCheckoutStep(4); // Success Step\n\n    } catch (err) {\n      console.error(\"Order failed:\", err);\n      // Fallback for demo if API fails\n      setOrderId('ORD-' + Math.floor(Math.random() * 10000));\n      setCheckoutStep(4);\n    } finally {\n      setIsProcessingOrder(false);\n    }\n  };\n\n  const openWhatsAppOrder = () => {\n    if (!storeData) return;\n\n    let message = `\ud83c\udd95 *NEW ORDER #${orderId}*\\n`;\n    message += `--------------------------------\\n`;\n    message += `\ud83d\udc64 *Customer:* ${shippingDetails.name}\\n`;\n    message += `\ud83d\udcde *Phone:* ${shippingDetails.phone} ${isPhoneVerified ? '\u2705 Verified' : ''}\\n`;\n    message += `\ud83d\udccd *Address:* ${shippingDetails.address}, ${shippingDetails.city}\\n`;\n    message += `--------------------------------\\n`;\n\n    cartItems.forEach((item: any) => {\n      message += `\u2022 ${item.quantity}x ${item.name} ($${item.price * item.quantity})\\n`;\n    });\n\n    message += `\\n\ud83d\udcb0 *Total: TT$${cartTotal}*\\n`;\n    message += `\ud83d\ude9a *Delivery:* ${deliveryOption.toUpperCase()}\\n`;\n\n    if (scheduleOption === 'later') message += `\ud83d\udcc5 *Scheduled For:* ${selectedDate}\\n`;\n    if (scheduleOption === 'hold') message += `\ud83d\udce6 *Hold Until:* ${selectedDate}\\n`;\n\n    message += `\ud83d\udcb5 *Payment:* Cash on Delivery (COD)\\n`;\n    if (shippingDetails.notes) message += `\ud83d\udcdd *Notes:* ${shippingDetails.notes}\\n`;\n\n    const url = `https://wa.me/${storeData.whatsapp}?text=${encodeURIComponent(message)}`;\n    window.open(url, '_blank');\n\n    // Clear cart and close\n    setCart([]);\n    setIsCartOpen(false);\n    setCheckoutStep(1);\n  };\n\n  const addToCart = (product: any) => {\n    setCart([...cart, product]);\n    setIsCartOpen(true);\n  };\n\n  const removeFromCart = (productId: number) => {\n    const index = cart.findIndex(p => p.id === productId);\n    if (index > -1) {\n      const newCart = [...cart];\n      newCart.splice(index, 1);\n      setCart(newCart);\n    }\n  };\n\n  const clearCartItem = (productId: number) => {\n    setCart(cart.filter(p => p.id !== productId));\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-white\">\n        <div className=\"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-trini-red\"></div>\n      </div>\n    );\n  }\n\n  if (error || !storeData) {\n    return (\n      <div className=\"min-h-screen flex flex-col items-center justify-center bg-white p-4 text-center\">\n        <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">Oops! Store Not Found</h2>\n        <p className=\"text-gray-600 mb-6\">{error || \"The store you are looking for doesn't exist.\"}</p>\n        <a href=\"/directory\" className=\"bg-trini-red text-white px-6 py-3 rounded-full font-bold hover:bg-red-700 transition-colors\">\n          Browse Directory\n        </a>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-white font-sans relative\">\n\n      {/* Fast Loading Top Bar */}\n      <div className=\"bg-trini-red text-white text-xs py-2 px-4 text-center font-bold tracking-wide\">\n        GRAND OPENING SALE! ORDER VIA WHATSAPP FOR FAST DELIVERY \ud83d\ude9a\n      </div>\n\n      {/* Header */}\n      <header className=\"sticky top-0 z-40 bg-white shadow-sm border-b border-gray-100\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center h-16\">\n            {/* Logo Area */}\n            <div className=\"flex items-center\">\n              <div className=\"h-10 w-10 rounded-full overflow-hidden border border-gray-200 mr-3\">\n                <img src={storeData.logo} alt={storeData.name} className=\"h-full w-full object-cover\" />\n              </div>\n              <h1 className=\"text-xl font-bold text-gray-900 hidden sm:block\">{storeData.name}</h1>\n            </div>\n\n            {/* Search Bar (Hidden on small mobile) */}\n            <div className=\"hidden md:flex flex-1 max-w-md mx-8\">\n              <div className=\"relative w-full\">\n                <input\n                  type=\"text\"\n                  placeholder=\"Search products...\"\n                  className=\"w-full pl-10 pr-4 py-2 rounded-full border border-gray-300 focus:outline-none focus:border-trini-red focus:ring-1 focus:ring-trini-red bg-gray-50\"\n                />\n                <Search className=\"absolute left-3 top-2.5 h-4 w-4 text-gray-400\" />\n              </div>\n            </div>\n\n            {/* Actions */}\n            <div className=\"flex items-center space-x-4\">\n              <button onClick={() => handleWhatsAppClick()} className=\"hidden sm:flex items-center text-green-600 hover:text-green-700 font-medium text-sm bg-green-50 px-3 py-1.5 rounded-full transition-colors\">\n                <MessageCircle className=\"h-4 w-4 mr-1\" /> Chat\n              </button>\n\n              <button\n                className=\"relative p-2 text-gray-600 hover:text-trini-red transition-colors\"\n                onClick={() => setIsCartOpen(true)}\n              >\n                <ShoppingCart className=\"h-6 w-6\" />\n                {cartCount > 0 && (\n                  <span className=\"absolute top-0 right-0 h-4 w-4 bg-trini-red text-white text-[10px] font-bold rounded-full flex items-center justify-center animate-bounce\">\n                    {cartCount}\n                  </span>\n                )}\n              </button>\n\n              <button className=\"md:hidden p-2 text-gray-600\" onClick={() => setIsMenuOpen(!isMenuOpen)}>\n                {isMenuOpen ? <X className=\"h-6 w-6\" /> : <Menu className=\"h-6 w-6\" />}\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* Mobile Menu */}\n        {isMenuOpen && (\n          <div className=\"md:hidden bg-white border-t border-gray-100 py-2 px-4 shadow-lg\">\n            <input\n              type=\"text\"\n              placeholder=\"Search...\"\n              className=\"w-full p-2 mb-3 rounded border border-gray-300 text-sm\"\n            />\n            <button onClick={() => handleWhatsAppClick()} className=\"w-full flex items-center justify-center py-2 bg-green-500 text-white rounded-md font-bold mb-2\">\n              <MessageCircle className=\"h-4 w-4 mr-2\" /> WhatsApp Us\n            </button>\n            <div className=\"space-y-2 text-sm text-gray-600\">\n              <p className=\"flex items-center\"><Phone className=\"h-3 w-3 mr-2\" /> {storeData.whatsapp}</p>\n              <p className=\"flex items-center\"><MapPin className=\"h-3 w-3 mr-2\" /> {storeData.location}</p>\n            </div>\n          </div>\n        )}\n      </header>\n\n      {/* Cart Sidebar / Checkout Modal */}\n      {isCartOpen && (\n        <div className=\"fixed inset-0 z-50 overflow-hidden\">\n          <div className=\"absolute inset-0 bg-black/50 backdrop-blur-sm transition-opacity\" onClick={() => setIsCartOpen(false)}></div>\n          <div className=\"absolute inset-y-0 right-0 max-w-full flex\">\n            <div className=\"w-screen max-w-md transform transition-transform bg-white shadow-xl flex flex-col h-full animate-in slide-in-from-right\">\n\n              {/* Header */}\n              <div className=\"flex items-center justify-between px-4 py-6 sm:px-6 border-b border-gray-200\">\n                <h2 className=\"text-lg font-medium text-gray-900\">\n                  {checkoutStep === 1 ? 'Shopping Cart' : checkoutStep === 2 ? 'Delivery Options' : checkoutStep === 3 ? 'Payment' : 'Order Confirmed'}\n                </h2>\n                <button onClick={() => setIsCartOpen(false)} className=\"text-gray-400 hover:text-gray-500\">\n                  <X className=\"h-6 w-6\" />\n                </button>\n              </div>\n\n              {/* Content Area */}\n              <div className=\"flex-1 py-6 overflow-y-auto px-4 sm:px-6\">\n\n                {/* STEP 1: CART & DETAILS */}\n                {checkoutStep === 1 && (\n                  <>\n                    {cartItems.length === 0 ? (\n                      <div className=\"h-full flex flex-col items-center justify-center text-center space-y-4\">\n                        <ShoppingCart className=\"h-16 w-16 text-gray-200\" />\n                        <p className=\"text-gray-500 text-lg\">Your cart is empty</p>\n                        <button onClick={() => setIsCartOpen(false)} className=\"text-trini-red font-bold hover:underline\">Start Shopping</button>\n                      </div>\n                    ) : (\n                      <div className=\"space-y-6\">\n                        {/* Cart Items */}\n                        <ul className=\"-my-6 divide-y divide-gray-200 mb-6\">\n                          {cartItems.map((item: any) => (\n                            <li key={item.id} className=\"py-6 flex\">\n                              <div className=\"flex-shrink-0 w-20 h-20 border border-gray-200 rounded-md overflow-hidden\">\n                                <img src={item.image} alt={item.name} className=\"w-full h-full object-center object-contain\" />\n                              </div>\n                              <div className=\"ml-4 flex-1 flex flex-col\">\n                                <div>\n                                  <div className=\"flex justify-between text-base font-medium text-gray-900\">\n                                    <h3>{item.name}</h3>\n                                    <p className=\"ml-4\">TT${item.price * item.quantity}</p>\n                                  </div>\n                                </div>\n                                <div className=\"flex-1 flex items-end justify-between text-sm\">\n                                  <div className=\"flex items-center border border-gray-300 rounded-md\">\n                                    <button onClick={() => removeFromCart(item.id)} className=\"p-1 px-2 hover:bg-gray-100 text-gray-600\"><Minus className=\"h-3 w-3\" /></button>\n                                    <span className=\"px-2 font-medium\">{item.quantity}</span>\n                                    <button onClick={() => addToCart(item)} className=\"p-1 px-2 hover:bg-gray-100 text-gray-600\"><Plus className=\"h-3 w-3\" /></button>\n                                  </div>\n                                </div>\n                              </div>\n                            </li>\n                          ))}\n                        </ul>\n\n                        {/* Customer Details Form */}\n                        <div className=\"bg-gray-50 p-4 rounded-lg space-y-3\">\n                          <h3 className=\"font-bold text-gray-900\">Shipping Details</h3>\n                          <input\n                            type=\"text\" placeholder=\"Full Name\"\n                            className=\"w-full p-2 border rounded text-sm\"\n                            value={shippingDetails.name}\n                            onChange={e => setShippingDetails({ ...shippingDetails, name: e.target.value })}\n                          />\n                          <div className=\"flex gap-2\">\n                            <input\n                              type=\"tel\" placeholder=\"Phone Number\"\n                              className=\"w-full p-2 border rounded text-sm\"\n                              value={shippingDetails.phone}\n                              onChange={e => setShippingDetails({ ...shippingDetails, phone: e.target.value })}\n                            />\n                            {!isPhoneVerified && (\n                              <button onClick={verifyPhone} className=\"bg-gray-900 text-white px-3 py-2 rounded text-xs font-bold whitespace-nowrap\">\n                                Verify\n                              </button>\n                            )}\n                          </div>\n                          {showOtpInput && (\n                            <div className=\"flex gap-2 animate-in fade-in\">\n                              <input\n                                type=\"text\" placeholder=\"Enter OTP (1234)\"\n                                className=\"w-full p-2 border rounded text-sm\"\n                                value={phoneOtp}\n                                onChange={e => setPhoneOtp(e.target.value)}\n                              />\n                              <button onClick={confirmOtp} className=\"bg-green-600 text-white px-3 py-2 rounded text-xs font-bold\">\n                                Confirm\n                              </button>\n                            </div>\n                          )}\n                          {isPhoneVerified && <div className=\"text-green-600 text-xs font-bold flex items-center\"><CheckCircle className=\"h-3 w-3 mr-1\" /> Phone Verified</div>}\n\n                          <input\n                            type=\"text\" placeholder=\"Street Address\"\n                            className=\"w-full p-2 border rounded text-sm\"\n                            value={shippingDetails.address}\n                            onChange={e => setShippingDetails({ ...shippingDetails, address: e.target.value })}\n                          />\n                          <input\n                            type=\"text\" placeholder=\"City / Area\"\n                            className=\"w-full p-2 border rounded text-sm\"\n                            value={shippingDetails.city}\n                            onChange={e => setShippingDetails({ ...shippingDetails, city: e.target.value })}\n                          />\n                        </div>\n                      </div>\n                    )}\n                  </>\n                )}\n\n                {/* STEP 2: SCHEDULE & DELIVERY */}\n                {checkoutStep === 2 && (\n                  <div className=\"space-y-6\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-3\">Delivery Method</label>\n                      <div className=\"grid grid-cols-1 gap-3\">\n                        <button\n                          onClick={() => setDeliveryOption('standard')}\n                          className={`flex items-center p-3 border rounded-lg ${deliveryOption === 'standard' ? 'border-trini-red bg-red-50' : 'border-gray-200'}`}\n                        >\n                          <Truck className=\"h-5 w-5 text-gray-500 mr-3\" />\n                          <div className=\"text-left\">\n                            <p className=\"font-bold text-sm text-gray-900\">Standard Delivery</p>\n                            <p className=\"text-xs text-gray-500\">2-3 Days \u2022 TT$30.00</p>\n                          </div>\n                        </button>\n                        <button\n                          onClick={() => setDeliveryOption('express')}\n                          className={`flex items-center p-3 border rounded-lg ${deliveryOption === 'express' ? 'border-trini-red bg-red-50' : 'border-gray-200'}`}\n                        >\n                          <Truck className=\"h-5 w-5 text-trini-red mr-3\" />\n                          <div className=\"text-left\">\n                            <p className=\"font-bold text-sm text-gray-900\">Express Delivery</p>\n                            <p className=\"text-xs text-gray-500\">Same Day / Next Day \u2022 TT$50.00</p>\n                          </div>\n                        </button>\n                        <button\n                          onClick={() => setDeliveryOption('pickup')}\n                          className={`flex items-center p-3 border rounded-lg ${deliveryOption === 'pickup' ? 'border-trini-red bg-red-50' : 'border-gray-200'}`}\n                        >\n                          <MapPin className=\"h-5 w-5 text-gray-500 mr-3\" />\n                          <div className=\"text-left\">\n                            <p className=\"font-bold text-sm text-gray-900\">Store Pickup</p>\n                            <p className=\"text-xs text-gray-500\">Free \u2022 Ready in 2 hours</p>\n                          </div>\n                        </button>\n                      </div>\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-3\">When do you want it?</label>\n                      <div className=\"space-y-3\">\n                        <button\n                          onClick={() => setScheduleOption('now')}\n                          className={`w-full flex items-center p-3 border rounded-lg ${scheduleOption === 'now' ? 'border-blue-500 bg-blue-50' : 'border-gray-200'}`}\n                        >\n                          <Clock className=\"h-5 w-5 text-blue-500 mr-3\" />\n                          <span className=\"font-medium text-sm\">As soon as possible</span>\n                        </button>\n\n                        <button\n                          onClick={() => setScheduleOption('later')}\n                          className={`w-full flex items-center p-3 border rounded-lg ${scheduleOption === 'later' ? 'border-blue-500 bg-blue-50' : 'border-gray-200'}`}\n                        >\n                          <Calendar className=\"h-5 w-5 text-blue-500 mr-3\" />\n                          <span className=\"font-medium text-sm\">Schedule for Later</span>\n                        </button>\n\n                        {scheduleOption === 'later' && (\n                          <input\n                            type=\"date\"\n                            className=\"w-full p-2 border rounded text-sm ml-8 w-[calc(100%-2rem)]\"\n                            onChange={(e) => setSelectedDate(e.target.value)}\n                          />\n                        )}\n\n                        <button\n                          onClick={() => setScheduleOption('hold')}\n                          className={`w-full flex items-center p-3 border rounded-lg ${scheduleOption === 'hold' ? 'border-blue-500 bg-blue-50' : 'border-gray-200'}`}\n                        >\n                          <Lock className=\"h-5 w-5 text-blue-500 mr-3\" />\n                          <div className=\"text-left\">\n                            <p className=\"font-medium text-sm\">Hold Package (Vacation Mode)</p>\n                            <p className=\"text-xs text-gray-500\">We'll hold it at our hub until you're back.</p>\n                          </div>\n                        </button>\n\n                        {scheduleOption === 'hold' && (\n                          <div className=\"ml-8\">\n                            <p className=\"text-xs text-gray-500 mb-1\">Hold until:</p>\n                            <input\n                              type=\"date\"\n                              className=\"w-full p-2 border rounded text-sm\"\n                              onChange={(e) => setSelectedDate(e.target.value)}\n                            />\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                {/* STEP 3: PAYMENT */}\n                {checkoutStep === 3 && (\n                  <div className=\"space-y-6\">\n                    <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex items-start\">\n                      <AlertCircle className=\"h-5 w-5 text-yellow-600 mr-3 mt-0.5\" />\n                      <p className=\"text-sm text-yellow-800\">\n                        Online payments are currently disabled for maintenance. Please use Cash on Delivery.\n                      </p>\n                    </div>\n\n                    <div className=\"space-y-3\">\n                      <button\n                        onClick={() => setPaymentMethod('COD')}\n                        className={`w-full flex items-center justify-between p-4 border-2 rounded-xl transition-all ${paymentMethod === 'COD' ? 'border-green-500 bg-green-50' : 'border-gray-200'}`}\n                      >\n                        <div className=\"flex items-center\">\n                          <Banknote className=\"h-6 w-6 text-green-600 mr-3\" />\n                          <div className=\"text-left\">\n                            <p className=\"font-bold text-gray-900\">Cash on Delivery</p>\n                            <p className=\"text-xs text-gray-500\">Pay with Cash or Linx upon delivery</p>\n                          </div>\n                        </div>\n                        {paymentMethod === 'COD' && <CheckCircle className=\"h-5 w-5 text-green-600\" />}\n                      </button>\n\n                      <button disabled className=\"w-full flex items-center justify-between p-4 border rounded-xl border-gray-100 bg-gray-50 opacity-60 cursor-not-allowed relative overflow-hidden\">\n                        <div className=\"flex items-center\">\n                          <CreditCard className=\"h-6 w-6 text-gray-400 mr-3\" />\n                          <div className=\"text-left\">\n                            <p className=\"font-bold text-gray-900\">Credit / Debit Card</p>\n                            <p className=\"text-xs text-gray-500\">WiPay / Stripe</p>\n                          </div>\n                        </div>\n                        <span className=\"bg-gray-200 text-gray-600 text-[10px] font-bold px-2 py-1 rounded uppercase\">Coming Soon</span>\n                      </button>\n\n                      <button disabled className=\"w-full flex items-center justify-between p-4 border rounded-xl border-gray-100 bg-gray-50 opacity-60 cursor-not-allowed\">\n                        <div className=\"flex items-center\">\n                          <div className=\"h-6 w-6 bg-red-100 rounded-full flex items-center justify-center mr-3 text-[10px] font-bold text-red-800\">RB</div>\n                          <div className=\"text-left\">\n                            <p className=\"font-bold text-gray-900\">Republic Bank Transfer</p>\n                            <p className=\"text-xs text-gray-500\">Direct Deposit</p>\n                          </div>\n                        </div>\n                        <span className=\"bg-gray-200 text-gray-600 text-[10px] font-bold px-2 py-1 rounded uppercase\">Coming Soon</span>\n                      </button>\n                    </div>\n\n                    <div className=\"border-t border-gray-200 pt-4 mt-4\">\n                      <div className=\"flex justify-between text-sm mb-2\">\n                        <span className=\"text-gray-500\">Subtotal</span>\n                        <span className=\"font-medium\">TT${cartTotal.toFixed(2)}</span>\n                      </div>\n                      <div className=\"flex justify-between text-sm mb-2\">\n                        <span className=\"text-gray-500\">Delivery</span>\n                        <span className=\"font-medium\">\n                          {deliveryOption === 'pickup' ? 'Free' : deliveryOption === 'express' ? 'TT$50.00' : 'TT$30.00'}\n                        </span>\n                      </div>\n                      <div className=\"flex justify-between text-lg font-bold mt-4\">\n                        <span>Total</span>\n                        <span>TT${(cartTotal + (deliveryOption === 'pickup' ? 0 : deliveryOption === 'express' ? 50 : 30)).toFixed(2)}</span>\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                {/* STEP 4: SUCCESS */}\n                {checkoutStep === 4 && (\n                  <div className=\"h-full flex flex-col items-center justify-center text-center space-y-6 animate-in zoom-in duration-300\">\n                    <div className=\"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center\">\n                      <CheckCircle className=\"h-10 w-10 text-green-600\" />\n                    </div>\n                    <div>\n                      <h2 className=\"text-2xl font-bold text-gray-900\">Order Placed!</h2>\n                      <p className=\"text-gray-500 mt-2\">Order #{orderId}</p>\n                    </div>\n                    <p className=\"text-sm text-gray-600 max-w-xs mx-auto\">\n                      Your order has been securely recorded. Please click below to send the confirmation to the vendor via WhatsApp to start processing.\n                    </p>\n                    <button\n                      onClick={openWhatsAppOrder}\n                      className=\"bg-green-500 text-white px-8 py-3 rounded-full font-bold shadow-lg hover:bg-green-600 transition-transform hover:scale-105 flex items-center\"\n                    >\n                      <MessageCircle className=\"h-5 w-5 mr-2\" /> Track on WhatsApp\n                    </button>\n                  </div>\n                )}\n\n              </div>\n\n              {/* Footer Actions */}\n              {cartItems.length > 0 && checkoutStep < 4 && (\n                <div className=\"border-t border-gray-200 py-6 px-4 sm:px-6 bg-gray-50\">\n                  {checkoutStep === 1 && (\n                    <button\n                      onClick={() => {\n                        if (!shippingDetails.name || !shippingDetails.phone || !shippingDetails.address) {\n                          alert(\"Please fill in all shipping details.\");\n                          return;\n                        }\n                        setCheckoutStep(2);\n                      }}\n                      className=\"w-full flex justify-center items-center px-6 py-4 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-trini-red hover:bg-red-700 transition-colors\"\n                    >\n                      Next: Delivery Options\n                    </button>\n                  )}\n                  {checkoutStep === 2 && (\n                    <div className=\"flex gap-3\">\n                      <button onClick={() => setCheckoutStep(1)} className=\"px-4 py-3 border border-gray-300 rounded-md font-bold text-gray-700\">Back</button>\n                      <button\n                        onClick={() => setCheckoutStep(3)}\n                        className=\"flex-1 flex justify-center items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-trini-red hover:bg-red-700 transition-colors\"\n                      >\n                        Next: Payment\n                      </button>\n                    </div>\n                  )}\n                  {checkoutStep === 3 && (\n                    <div className=\"flex gap-3\">\n                      <button onClick={() => setCheckoutStep(2)} className=\"px-4 py-3 border border-gray-300 rounded-md font-bold text-gray-700\">Back</button>\n                      <button\n                        onClick={handlePlaceOrder}\n                        disabled={isProcessingOrder}\n                        className=\"flex-1 flex justify-center items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-green-600 hover:bg-green-700 transition-colors disabled:opacity-50\"\n                      >\n                        {isProcessingOrder ? 'Processing...' : 'Place Order'}\n                      </button>\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Hero Banner */}\n      <div className=\"relative h-64 md:h-80 bg-gray-900\">\n        <img src={storeData.banner} alt=\"Banner\" className=\"w-full h-full object-cover opacity-60\" />\n        <div className=\"absolute inset-0 flex flex-col items-center justify-center text-center px-4\">\n          <h2 className=\"text-4xl md:text-5xl font-extrabold text-white mb-2 tracking-tight\">{storeData.name}</h2>\n          <p className=\"text-lg text-gray-200 max-w-2xl mb-6 font-light\">{storeData.description}</p>\n          <div className=\"flex gap-3\">\n            <button className=\"bg-white text-gray-900 px-6 py-2 rounded-full font-bold hover:bg-gray-100 transition-colors\">\n              Shop Now\n            </button>\n            <button className=\"bg-trini-teal text-white px-6 py-2 rounded-full font-bold hover:bg-teal-700 transition-colors\">\n              About Us\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Product Grid */}\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 pb-24\">\n        <div className=\"flex justify-between items-end mb-8\">\n          <h3 className=\"text-2xl font-bold text-gray-900\">Featured Products</h3>\n          <span className=\"text-sm text-gray-500\">Showing {storeData.products.length} items</span>\n        </div>\n\n        <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6\">\n          {storeData.products.map((product) => (\n            <div key={product.id} className=\"group bg-white rounded-lg border border-gray-200 overflow-hidden hover:shadow-lg transition-all duration-300\">\n              <div className=\"aspect-[4/3] relative overflow-hidden bg-white p-4 flex items-center justify-center\">\n                <img\n                  src={product.image}\n                  alt={product.name}\n                  className=\"max-w-full max-h-full object-contain transform group-hover:scale-105 transition-transform duration-500\"\n                />\n                <div className=\"absolute top-2 right-2 bg-white/90 backdrop-blur px-2 py-1 rounded text-xs font-bold shadow-sm border border-gray-100\">\n                  {product.category}\n                </div>\n              </div>\n              <div className=\"p-4 bg-gray-50/50 border-t border-gray-100\">\n                <h4 className=\"text-gray-900 font-bold mb-1 truncate text-sm\">{product.name}</h4>\n                <div className=\"flex items-center mb-3\">\n                  <div className=\"flex text-yellow-400 text-xs\">\n                    {[1, 2, 3, 4, 5].map(i => <Star key={i} className=\"h-3 w-3 fill-current\" />)}\n                  </div>\n                  <span className=\"text-xs text-gray-400 ml-1\">(12)</span>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-lg font-extrabold text-trini-teal\">TT${product.price}</span>\n                  <button\n                    onClick={() => addToCart(product)}\n                    className=\"bg-gray-900 text-white p-2 rounded-full hover:bg-trini-red transition-colors shadow-md\"\n                    title=\"Add to Cart\"\n                  >\n                    <Plus className=\"h-4 w-4\" />\n                  </button>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </main>\n\n      {/* Footer */}\n      <footer className=\"bg-gray-50 border-t border-gray-200 pt-12 pb-8 mb-20 md:mb-0\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8 mb-8\">\n            <div>\n              <h4 className=\"font-bold text-gray-900 mb-4\">Contact Us</h4>\n              <ul className=\"space-y-2 text-sm text-gray-600\">\n                <li className=\"flex items-center\"><MapPin className=\"h-4 w-4 mr-2 text-gray-400\" /> {storeData.location}</li>\n                <li className=\"flex items-center\"><Phone className=\"h-4 w-4 mr-2 text-gray-400\" /> {storeData.whatsapp}</li>\n                <li className=\"flex items-center\"><Mail className=\"h-4 w-4 mr-2 text-gray-400\" /> {storeData.email}</li>\n              </ul>\n            </div>\n            <div>\n              <h4 className=\"font-bold text-gray-900 mb-4\">Opening Hours</h4>\n              <p className=\"text-sm text-gray-600\">{storeData.hours}</p>\n              <p className=\"text-sm text-gray-600 mt-2\">Sunday: Closed</p>\n            </div>\n            <div>\n              <h4 className=\"font-bold text-gray-900 mb-4\">Follow Us</h4>\n              <div className=\"flex space-x-4\">\n                <button className=\"bg-white p-2 rounded-full shadow-sm hover:text-blue-600 transition-colors\"><Facebook className=\"h-5 w-5\" /></button>\n                <button className=\"bg-white p-2 rounded-full shadow-sm hover:text-pink-600 transition-colors\"><Instagram className=\"h-5 w-5\" /></button>\n                <button className=\"bg-white p-2 rounded-full shadow-sm hover:text-blue-400 transition-colors\"><Twitter className=\"h-5 w-5\" /></button>\n              </div>\n            </div>\n          </div>\n          <div className=\"text-center text-xs text-gray-400 border-t border-gray-200 pt-8\">\n            <p>Powered by TriniBuild E-Commerce Engine</p>\n          </div>\n        </div>\n      </footer>\n\n      {/* Sticky Bottom Bar for Cart (Mobile) */}\n      {cartItems.length > 0 && !isCartOpen && (\n        <div className=\"fixed bottom-4 left-4 right-4 md:hidden z-40\">\n          <button\n            onClick={() => setIsCartOpen(true)}\n            className=\"w-full bg-trini-black text-white p-4 rounded-lg shadow-2xl flex items-center justify-between\"\n          >\n            <div className=\"flex items-center\">\n              <div className=\"bg-trini-red w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm mr-3\">\n                {cartCount}\n              </div>\n              <span className=\"font-medium\">View Cart</span>\n            </div>\n            <div className=\"font-bold flex items-center\">\n              TT${cartTotal} <ChevronRight className=\"h-5 w-5 ml-2\" />\n            </div>\n          </button>\n        </div>\n      )}\n\n      {/* Floating WhatsApp Button (Desktop/Non-Cart mode) */}\n      {/* AI Assistant Widget */}\n      <ChatWidget mode=\"vendor\" vendorContext={{ name: storeData.name }} />\n\n    </div>\n  );\n};\n",
  "pages/Tickets.tsx": "\nimport React, { useState, useEffect } from 'react';\nimport { Ticket, Calendar, MapPin, Search, Filter, CreditCard, ShieldCheck, Users, QrCode, Share2, Gift, TrendingUp, DollarSign, Lock, RefreshCw, X, Check, AlertTriangle, ScanLine, UserPlus, Settings, Banknote, Landmark, Link as LinkIcon, Camera, PlusCircle, Image as ImageIcon, Copy, Trash2, Plus } from 'lucide-react';\nimport { CarnivalEvent, TicketOrder, TicketTier, PromoterWorker, BankDetails, CommitteeMember } from '../types';\nimport { BarChart, Bar, XAxis, YAxis, Tooltip as RechartsTooltip, ResponsiveContainer, PieChart, Pie, Cell } from 'recharts';\nimport { AdSpot } from '../components/AdSpot';\n\nexport const Tickets: React.FC = () => {\n   // Navigation State\n   const [view, setView] = useState<'browse' | 'wallet' | 'crew' | 'rewards' | 'promoter' | 'scanner'>('browse');\n   const [promoterView, setPromoterView] = useState<'overview' | 'events' | 'staff' | 'committee' | 'financials'>('overview');\n   const [currency, setCurrency] = useState<'TTD' | 'USD'>('TTD');\n\n   // Data States\n   const [selectedEvent, setSelectedEvent] = useState<CarnivalEvent | null>(null);\n   const [checkoutTier, setCheckoutTier] = useState<TicketTier | null>(null);\n   const [ticketQuantity, setTicketQuantity] = useState(1);\n   const [filterCategory, setFilterCategory] = useState('All');\n\n   // Promoter Data States\n   const [workers, setWorkers] = useState<PromoterWorker[]>([\n      { id: 'w1', name: 'Jason M.', email: 'jason@gate.com', role: 'Scanner', scansPerformed: 450, status: 'Active', lastActive: '2 mins ago' },\n      { id: 'w2', name: 'Sarah L.', email: 'sarah@gate.com', role: 'Scanner', scansPerformed: 320, status: 'Active', lastActive: '5 mins ago' },\n   ]);\n\n   const [committee, setCommittee] = useState<CommitteeMember[]>([\n      { id: 'c1', name: 'Sarah Jenkins', code: 'SARAH2026', ticketsSold: 45, commissionEarned: 450, link: 'trinibuild.com/t/SARAH2026' },\n      { id: 'c2', name: 'Mark Roberts', code: 'MARKVIP', ticketsSold: 22, commissionEarned: 220, link: 'trinibuild.com/t/MARKVIP' },\n   ]);\n\n   const [bankInfo, setBankInfo] = useState<BankDetails>({\n      bankName: '',\n      accountNumber: '',\n      accountType: 'Chequing',\n      holderName: ''\n   });\n\n   // Modals\n   const [showWorkerModal, setShowWorkerModal] = useState(false);\n   const [showEventModal, setShowEventModal] = useState(false);\n   const [showCommitteeModal, setShowCommitteeModal] = useState(false);\n\n   // Forms\n   const [newWorker, setNewWorker] = useState({ name: '', email: '', role: 'Scanner' });\n   const [newCommittee, setNewCommittee] = useState({ name: '', email: '' });\n\n   // Event Creation State\n   const [newEvent, setNewEvent] = useState<Partial<CarnivalEvent>>({\n      title: '',\n      location: '',\n      category: 'Concert',\n      description: '',\n      date: '',\n      time: ''\n   });\n   const [tempTiers, setTempTiers] = useState<TicketTier[]>([]);\n   const [newTierInput, setNewTierInput] = useState({ name: '', price: '', qty: '' });\n   const [amenities, setAmenities] = useState({ cooler: false, food: false, drinks: false });\n\n   // Scanner State\n   const [scanResult, setScanResult] = useState<'scanning' | 'valid' | 'invalid' | 'duplicate'>('scanning');\n\n   // Mock Data\n   const [events, setEvents] = useState<CarnivalEvent[]>([\n      {\n         id: '1',\n         title: 'Soca Monarch Finals 2026',\n         organizer: 'Caribbean Prestige',\n         date: 'Feb 12, 2026',\n         time: '8:00 PM',\n         location: 'Hasely Crawford Stadium',\n         image: 'https://images.unsplash.com/photo-1492684223066-81342ee5ff30?q=80&w=1000&auto=format&fit=crop',\n         category: 'Concert',\n         isVerified: true,\n         description: \"The biggest night in Soca music. See the kings and queens of Carnival battle for the crown.\",\n         tiers: [\n            { id: 't1', name: 'General', price: 300, currency: 'TTD', available: 5000, perks: ['Grand Stand Access'] },\n            { id: 't2', name: 'VIP', price: 800, currency: 'TTD', available: 500, perks: ['Front Stage', 'Free Drinks', 'Fast Entry'] }\n         ]\n      },\n      {\n         id: '2',\n         title: 'Sunny Side Up: Premium Breakfast',\n         organizer: 'SSU Team',\n         date: 'Feb 14, 2026',\n         time: '4:00 AM',\n         location: 'Diamond Vale, Diego Martin',\n         image: 'https://images.unsplash.com/photo-1514525253440-b393452e3726?q=80&w=1000&auto=format&fit=crop',\n         category: 'Breakfast',\n         isVerified: true,\n         description: \"The original premium breakfast party. Extensive menu, top DJs, and the best vibes to start your morning.\",\n         tiers: [\n            { id: 't3', name: 'Early Bird', price: 600, currency: 'TTD', available: 0, perks: ['All Inclusive'] },\n            { id: 't4', name: 'Regular', price: 750, currency: 'TTD', available: 200, perks: ['All Inclusive'] }\n         ]\n      },\n      {\n         id: '3',\n         title: 'Silent Morning Boat Ride',\n         organizer: 'Back to Basics',\n         date: 'Feb 13, 2026',\n         time: '9:00 AM',\n         location: 'Harbour Master, POS',\n         image: 'https://images.unsplash.com/photo-1544551763-46a42a463658?q=80&w=1000&auto=format&fit=crop',\n         category: 'Boat Ride',\n         isVerified: true,\n         description: \"Coolers allowed. The legendary boat ride experience.\",\n         tiers: [\n            { id: 't5', name: 'Male', price: 400, currency: 'TTD', available: 50, perks: ['Cooler Allowed'] },\n            { id: 't6', name: 'Female', price: 350, currency: 'TTD', available: 100, perks: ['Cooler Allowed'] }\n         ]\n      }\n   ]);\n\n   // Load Events from LocalStorage\n   useEffect(() => {\n      const storedEvents = localStorage.getItem('trinibuild_events');\n      if (storedEvents) {\n         setEvents(JSON.parse(storedEvents));\n      }\n   }, []);\n\n   const saveEventsToLocal = (newEvents: CarnivalEvent[]) => {\n      localStorage.setItem('trinibuild_events', JSON.stringify(newEvents));\n   };\n\n   const [myTickets, setMyTickets] = useState<TicketOrder[]>([\n      {\n         id: 'ord-123',\n         eventId: '1',\n         eventTitle: 'Soca Monarch Finals 2026',\n         tierName: 'VIP',\n         quantity: 2,\n         totalPaid: 1728, // Including 8% fees\n         purchaseDate: 'Oct 15, 2025',\n         status: 'valid',\n         secureCode: 'X7K9-M2P4',\n         ownerName: 'Ray Kunjal'\n      }\n   ]);\n\n   // Load Tickets from LocalStorage\n   useEffect(() => {\n      const storedTickets = localStorage.getItem('trinibuild_tickets');\n      if (storedTickets) {\n         setMyTickets(JSON.parse(storedTickets));\n      }\n   }, []);\n\n   const saveTicketsToLocal = (newTickets: TicketOrder[]) => {\n      localStorage.setItem('trinibuild_tickets', JSON.stringify(newTickets));\n   };\n\n   // Exchange Rate\n   const TTD_TO_USD = 0.15;\n\n   const formatPrice = (amount: number) => {\n      if (currency === 'USD') {\n         return `US$${(amount * TTD_TO_USD).toFixed(2)}`;\n      }\n      return `TT$${amount}`;\n   };\n\n   // Filter Logic\n   const filteredEvents = filterCategory === 'All'\n      ? events\n      : events.filter(e => e.category === filterCategory);\n\n   const categories = ['All', 'All Inclusive', 'Breakfast', 'Cooler', 'Concert', 'Boat Ride', 'J\\'Ouvert'];\n\n   // Secure QR Logic\n   const [qrRotation, setQrRotation] = useState(0);\n   useEffect(() => {\n      const interval = setInterval(() => {\n         setQrRotation(prev => prev + 1);\n      }, 2000); // Rotate \"security token\" visually\n      return () => clearInterval(interval);\n   }, []);\n\n   const handlePurchase = () => {\n      if (!selectedEvent || !checkoutTier) return;\n\n      // Calculate Fees - 8%\n      const subtotal = checkoutTier.price * ticketQuantity;\n      const serviceFee = subtotal * 0.08;\n      const total = subtotal + serviceFee;\n\n      alert(`Processing payment of ${formatPrice(total)} via PayPal Secure Gateway...`);\n\n      // Mock Success\n      setTimeout(() => {\n         const newTicket: TicketOrder = {\n            id: `ord-${Date.now()}`,\n            eventId: selectedEvent.id,\n            eventTitle: selectedEvent.title,\n            tierName: checkoutTier.name,\n            quantity: ticketQuantity,\n            totalPaid: total,\n            purchaseDate: new Date().toLocaleDateString(),\n            status: 'valid',\n            secureCode: `SEC-${Math.floor(Math.random() * 10000)}`,\n            ownerName: 'You'\n         };\n         const updatedTickets = [...myTickets, newTicket];\n         setMyTickets(updatedTickets);\n         saveTicketsToLocal(updatedTickets);\n         setView('wallet');\n         setSelectedEvent(null);\n         setCheckoutTier(null);\n      }, 1500);\n   };\n\n   // --- PROMOTER ACTIONS ---\n\n   const handleAddWorker = () => {\n      const worker: PromoterWorker = {\n         id: `w${Date.now()}`,\n         name: newWorker.name,\n         email: newWorker.email,\n         role: newWorker.role as any,\n         scansPerformed: 0,\n         status: 'Active',\n         lastActive: 'Never'\n      };\n      setWorkers([...workers, worker]);\n      setShowWorkerModal(false);\n      setNewWorker({ name: '', email: '', role: 'Scanner' });\n   };\n\n   const handleAddTier = () => {\n      if (newTierInput.name && newTierInput.price) {\n         setTempTiers([...tempTiers, {\n            id: `tier-${Date.now()}`,\n            name: newTierInput.name,\n            price: Number(newTierInput.price),\n            currency: 'TTD',\n            available: Number(newTierInput.qty) || 100,\n            perks: []\n         }]);\n         setNewTierInput({ name: '', price: '', qty: '' });\n      }\n   };\n\n   const handleRemoveTier = (id: string) => {\n      setTempTiers(tempTiers.filter(t => t.id !== id));\n   };\n\n   const handleSaveEvent = () => {\n      const ev: CarnivalEvent = {\n         id: `evt-${Date.now()}`,\n         title: newEvent.title || 'New Event',\n         organizer: 'My Promotion',\n         date: newEvent.date || 'TBD',\n         time: newEvent.time || 'TBD',\n         location: newEvent.location || 'TBD',\n         image: 'https://images.unsplash.com/photo-1533174072545-e8d4aa97edf9?q=80&w=1000',\n         category: newEvent.category as any,\n         description: newEvent.description || '',\n         isVerified: true,\n         tiers: tempTiers.length > 0 ? tempTiers : [\n            { id: 't-gen', name: 'General Admission', price: 300, currency: 'TTD', available: 100, perks: [] }\n         ]\n      };\n      const updatedEvents = [ev, ...events];\n      setEvents(updatedEvents);\n      saveEventsToLocal(updatedEvents);\n      setShowEventModal(false);\n      setTempTiers([]);\n      setNewEvent({ title: '', location: '', category: 'Concert' });\n      alert(\"Event Published Successfully!\");\n   };\n\n   const handleAddCommittee = () => {\n      if (newCommittee.name) {\n         const code = newCommittee.name.substring(0, 3).toUpperCase() + Math.floor(Math.random() * 999);\n         setCommittee([...committee, {\n            id: `c-${Date.now()}`,\n            name: newCommittee.name,\n            code: code,\n            ticketsSold: 0,\n            commissionEarned: 0,\n            link: `trinibuild.com/t/${code}`\n         }]);\n         setShowCommitteeModal(false);\n         setNewCommittee({ name: '', email: '' });\n      }\n   };\n\n   const simulateScan = () => {\n      setScanResult('scanning');\n      setTimeout(() => {\n         const res = Math.random() > 0.7 ? 'invalid' : (Math.random() > 0.8 ? 'duplicate' : 'valid');\n         setScanResult(res);\n      }, 1500);\n   };\n\n   return (\n      <div className=\"min-h-screen bg-gray-50 pb-20 font-sans\">\n         {/* Top Nav */}\n         <div className=\"bg-trini-black text-white sticky top-16 z-30 shadow-lg\">\n            <div className=\"max-w-7xl mx-auto px-4\">\n               <div className=\"flex items-center justify-between h-16\">\n                  <div className=\"flex items-center gap-2\">\n                     <Ticket className=\"h-6 w-6 text-trini-red\" />\n                     <span className=\"font-bold text-lg tracking-tight\">TriniBuild <span className=\"text-trini-red\">E-Tick</span></span>\n                  </div>\n\n                  <div className=\"flex bg-gray-800 rounded-lg p-1\">\n                     <button onClick={() => setCurrency('TTD')} className={`px-3 py-1 rounded-md text-xs font-bold transition-all ${currency === 'TTD' ? 'bg-white text-black' : 'text-gray-400'}`}>TTD</button>\n                     <button onClick={() => setCurrency('USD')} className={`px-3 py-1 rounded-md text-xs font-bold transition-all ${currency === 'USD' ? 'bg-white text-black' : 'text-gray-400'}`}>USD</button>\n                  </div>\n               </div>\n\n               {/* Sub Menu */}\n               <div className=\"flex overflow-x-auto space-x-6 pb-0 hide-scrollbar\">\n                  {[\n                     { id: 'browse', label: 'Events', icon: Calendar },\n                     { id: 'wallet', label: 'My Tickets', icon: QrCode },\n                     { id: 'crew', label: 'Crew', icon: Users },\n                     { id: 'promoter', label: 'Promoter', icon: TrendingUp },\n                     { id: 'scanner', label: 'Gate Scanner', icon: ScanLine },\n                  ].map(item => (\n                     <button\n                        key={item.id}\n                        onClick={() => setView(item.id as any)}\n                        className={`flex items-center pb-3 border-b-2 px-2 transition-all whitespace-nowrap ${view === item.id ? 'border-trini-red text-white font-bold' : 'border-transparent text-gray-400 hover:text-gray-200'}`}\n                     >\n                        <item.icon className=\"h-4 w-4 mr-2\" />\n                        {item.label}\n                     </button>\n                  ))}\n               </div>\n            </div>\n         </div>\n\n         <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n\n            {/* Ad Spot */}\n            <AdSpot page=\"tickets\" slot=\"top\" className=\"mb-8\" />\n\n            {/* VIEW: BROWSE EVENTS */}\n            {view === 'browse' && (\n               <div className=\"animate-in fade-in duration-500\">\n                  <div className=\"flex flex-col md:flex-row justify-between items-center mb-8 gap-4\">\n                     <div className=\"relative w-full md:w-96\">\n                        <Search className=\"absolute left-3 top-3 h-5 w-5 text-gray-400\" />\n                        <input type=\"text\" placeholder=\"Search fete, artiste, or venue...\" className=\"w-full pl-10 p-3 rounded-full border border-gray-300 focus:ring-trini-red focus:border-trini-red\" />\n                     </div>\n                     <div className=\"flex gap-2 overflow-x-auto w-full md:w-auto pb-2\">\n                        {categories.map(cat => (\n                           <button\n                              key={cat}\n                              onClick={() => setFilterCategory(cat)}\n                              className={`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors ${filterCategory === cat ? 'bg-trini-red text-white shadow-md' : 'bg-white text-gray-600 border border-gray-200 hover:bg-gray-50'}`}\n                           >\n                              {cat}\n                           </button>\n                        ))}\n                     </div>\n                  </div>\n\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\n                     {filteredEvents.map(event => (\n                        <div key={event.id} className=\"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-xl transition-all group\">\n                           <div className=\"h-48 relative overflow-hidden\">\n                              <img src={event.image} alt={event.title} className=\"w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700\" />\n                              <div className=\"absolute top-3 right-3 bg-white/90 backdrop-blur px-2 py-1 rounded text-xs font-bold uppercase\">\n                                 {event.category}\n                              </div>\n                              {event.isVerified && (\n                                 <div className=\"absolute bottom-3 left-3 bg-green-500 text-white px-2 py-1 rounded-full text-xs font-bold flex items-center shadow-sm\">\n                                    <ShieldCheck className=\"h-3 w-3 mr-1\" /> Verified\n                                 </div>\n                              )}\n                           </div>\n                           <div className=\"p-6\">\n                              <div className=\"flex justify-between items-start mb-2\">\n                                 <h3 className=\"font-bold text-lg text-gray-900 leading-tight group-hover:text-trini-red transition-colors\">{event.title}</h3>\n                              </div>\n                              <p className=\"text-sm text-gray-500 mb-4\">{event.organizer}</p>\n\n                              <div className=\"space-y-2 text-sm text-gray-600 mb-6\">\n                                 <div className=\"flex items-center\"><Calendar className=\"h-4 w-4 mr-2 text-trini-red\" /> {event.date} \u2022 {event.time}</div>\n                                 <div className=\"flex items-center\"><MapPin className=\"h-4 w-4 mr-2 text-trini-red\" /> {event.location}</div>\n                              </div>\n\n                              <div className=\"flex items-center justify-between pt-4 border-t border-gray-100\">\n                                 <div>\n                                    <p className=\"text-xs text-gray-500 uppercase font-bold\">Starting At</p>\n                                    <p className=\"text-xl font-extrabold text-gray-900\">{formatPrice(Math.min(...event.tiers.map(t => t.price)))}</p>\n                                 </div>\n                                 <button\n                                    onClick={() => setSelectedEvent(event)}\n                                    className=\"bg-trini-black text-white px-6 py-2 rounded-lg font-bold hover:bg-gray-800 transition-colors\"\n                                 >\n                                    Buy Tickets\n                                 </button>\n                              </div>\n                           </div>\n                        </div>\n                     ))}\n                  </div>\n               </div>\n            )}\n\n            {/* VIEW: WALLET (My Tickets) */}\n            {view === 'wallet' && (\n               <div className=\"max-w-3xl mx-auto animate-in slide-in-from-right duration-500\">\n                  <h2 className=\"text-2xl font-bold text-gray-900 mb-6\">My Ticket Wallet</h2>\n                  {myTickets.length > 0 ? (\n                     <div className=\"space-y-6\">\n                        {myTickets.map(ticket => (\n                           <div key={ticket.id} className=\"bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-200 flex flex-col md:flex-row\">\n                              <div className=\"bg-trini-black p-6 text-white flex flex-col justify-center items-center md:w-1/3 text-center relative overflow-hidden\">\n                                 {/* Live QR Simulation */}\n                                 <div className=\"relative z-10 bg-white p-3 rounded-xl mb-3\">\n                                    <QrCode className=\"h-32 w-32 text-black opacity-90\" style={{ transform: `rotate(${qrRotation % 2 === 0 ? 0 : 0}deg)` }} />\n                                    <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\n                                       <div className=\"w-full h-1 bg-trini-red opacity-50 animate-[scan_2s_linear_infinite]\"></div>\n                                    </div>\n                                 </div>\n                                 <div className=\"flex items-center gap-2 text-xs font-mono bg-gray-800 px-3 py-1 rounded\">\n                                    <Lock className=\"h-3 w-3\" />\n                                    {ticket.secureCode}\n                                 </div>\n                                 <p className=\"text-[10px] text-gray-400 mt-2 animate-pulse\">Code refreshes every 60s</p>\n                              </div>\n\n                              <div className=\"p-6 md:w-2/3 flex flex-col justify-between\">\n                                 <div>\n                                    <div className=\"flex justify-between items-start\">\n                                       <div>\n                                          <h3 className=\"font-bold text-xl text-gray-900\">{ticket.eventTitle}</h3>\n                                          <span className=\"inline-block bg-purple-100 text-purple-700 text-xs font-bold px-2 py-0.5 rounded mt-1\">{ticket.tierName} Access</span>\n                                       </div>\n                                       <span className=\"bg-green-100 text-green-800 text-xs font-bold px-2 py-1 rounded-full flex items-center\">\n                                          <Check className=\"h-3 w-3 mr-1\" /> Valid\n                                       </span>\n                                    </div>\n                                    <div className=\"mt-4 grid grid-cols-2 gap-4 text-sm\">\n                                       <div>\n                                          <p className=\"text-gray-500 text-xs uppercase\">Quantity</p>\n                                          <p className=\"font-bold\">{ticket.quantity} Tickets</p>\n                                       </div>\n                                       <div>\n                                          <p className=\"text-gray-500 text-xs uppercase\">Holder</p>\n                                          <p className=\"font-bold\">{ticket.ownerName}</p>\n                                       </div>\n                                    </div>\n                                 </div>\n\n                                 <div className=\"mt-6 flex gap-3\">\n                                    <button className=\"flex-1 border border-gray-300 text-gray-700 py-2 rounded-lg font-bold hover:bg-gray-50 flex items-center justify-center text-sm\">\n                                       <Share2 className=\"h-4 w-4 mr-2\" /> Transfer\n                                    </button>\n                                    <button className=\"flex-1 bg-trini-red text-white py-2 rounded-lg font-bold hover:bg-red-700 text-sm\">\n                                       View Details\n                                    </button>\n                                 </div>\n                              </div>\n                           </div>\n                        ))}\n                     </div>\n                  ) : (\n                     <div className=\"text-center py-20 bg-white rounded-xl border-2 border-dashed border-gray-200\">\n                        <Ticket className=\"h-16 w-16 text-gray-300 mx-auto mb-4\" />\n                        <p className=\"text-gray-500 font-medium\">No tickets yet.</p>\n                        <button onClick={() => setView('browse')} className=\"mt-4 text-trini-red font-bold hover:underline\">\n                           Find an Event\n                        </button>\n                     </div>\n                  )}\n               </div>\n            )}\n\n            {/* VIEW: PROMOTER DASHBOARD */}\n            {view === 'promoter' && (\n               <div className=\"animate-in fade-in duration-500\">\n                  {/* Promoter Sub Nav */}\n                  <div className=\"flex gap-4 mb-8 border-b border-gray-200 pb-1 overflow-x-auto\">\n                     <button onClick={() => setPromoterView('overview')} className={`pb-3 text-sm font-bold px-2 whitespace-nowrap ${promoterView === 'overview' ? 'border-b-2 border-trini-red text-trini-red' : 'text-gray-500'}`}>Overview</button>\n                     <button onClick={() => setPromoterView('events')} className={`pb-3 text-sm font-bold px-2 whitespace-nowrap ${promoterView === 'events' ? 'border-b-2 border-trini-red text-trini-red' : 'text-gray-500'}`}>Events</button>\n                     <button onClick={() => setPromoterView('committee')} className={`pb-3 text-sm font-bold px-2 whitespace-nowrap ${promoterView === 'committee' ? 'border-b-2 border-trini-red text-trini-red' : 'text-gray-500'}`}>Committee</button>\n                     <button onClick={() => setPromoterView('staff')} className={`pb-3 text-sm font-bold px-2 whitespace-nowrap ${promoterView === 'staff' ? 'border-b-2 border-trini-red text-trini-red' : 'text-gray-500'}`}>Staff</button>\n                     <button onClick={() => setPromoterView('financials')} className={`pb-3 text-sm font-bold px-2 whitespace-nowrap ${promoterView === 'financials' ? 'border-b-2 border-trini-red text-trini-red' : 'text-gray-500'}`}>Financials</button>\n                  </div>\n\n                  {promoterView === 'overview' && (\n                     <>\n                        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\n                           <div className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-200\">\n                              <p className=\"text-xs text-gray-500 uppercase font-bold\">Tickets Scanned</p>\n                              <h3 className=\"text-3xl font-extrabold text-gray-900 mt-2\">782</h3>\n                              <div className=\"w-full bg-gray-100 rounded-full h-2 mt-3\"><div className=\"bg-green-500 h-2 rounded-full\" style={{ width: '63%' }}></div></div>\n                           </div>\n                           <div className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-200\">\n                              <p className=\"text-xs text-gray-500 uppercase font-bold\">Sales Revenue</p>\n                              <h3 className=\"text-3xl font-extrabold text-gray-900 mt-2\">TT$ 45,200</h3>\n                           </div>\n                           <div className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-200\">\n                              <p className=\"text-xs text-gray-500 uppercase font-bold\">Committee Sales</p>\n                              <h3 className=\"text-3xl font-extrabold text-gray-900 mt-2\">145</h3>\n                           </div>\n                        </div>\n                     </>\n                  )}\n\n                  {promoterView === 'events' && (\n                     <div className=\"animate-in slide-in-from-right-4\">\n                        <div className=\"flex justify-between items-center mb-6\">\n                           <h2 className=\"text-xl font-bold text-gray-900\">My Events</h2>\n                           <button onClick={() => setShowEventModal(true)} className=\"bg-trini-black text-white px-4 py-2 rounded-lg font-bold flex items-center text-sm shadow-lg hover:bg-gray-800\">\n                              <PlusCircle className=\"h-4 w-4 mr-2\" /> Create Event\n                           </button>\n                        </div>\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                           {events.slice(0, 2).map(ev => (\n                              <div key={ev.id} className=\"bg-white p-4 rounded-xl border border-gray-200 flex gap-4 hover:shadow-md transition-all\">\n                                 <img src={ev.image} className=\"w-24 h-24 object-cover rounded-lg bg-gray-100\" />\n                                 <div className=\"flex-grow\">\n                                    <h3 className=\"font-bold text-gray-900\">{ev.title}</h3>\n                                    <p className=\"text-xs text-gray-500 mb-2\">{ev.date} @ {ev.location}</p>\n                                    <div className=\"flex gap-2 mt-2\">\n                                       <button className=\"text-xs bg-gray-100 px-2 py-1 rounded font-bold hover:bg-gray-200\">Edit</button>\n                                       <button className=\"text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded font-bold hover:bg-blue-100\">Manage Tickets</button>\n                                    </div>\n                                 </div>\n                                 <div className=\"flex flex-col items-end justify-center\">\n                                    <span className=\"text-2xl font-bold text-gray-900\">{ev.tiers.reduce((acc, t) => acc + t.available, 0)}</span>\n                                    <span className=\"text-xs text-gray-500\">Left</span>\n                                 </div>\n                              </div>\n                           ))}\n                        </div>\n                     </div>\n                  )}\n\n                  {promoterView === 'committee' && (\n                     <div className=\"animate-in slide-in-from-right-4\">\n                        <div className=\"flex justify-between items-center mb-6\">\n                           <div>\n                              <h2 className=\"text-xl font-bold text-gray-900\">Committee Management</h2>\n                              <p className=\"text-sm text-gray-500\">Track affiliate sales and commissions.</p>\n                           </div>\n                           <button onClick={() => setShowCommitteeModal(true)} className=\"bg-purple-600 text-white px-4 py-2 rounded-lg font-bold flex items-center text-sm hover:bg-purple-700 shadow-md\">\n                              <UserPlus className=\"h-4 w-4 mr-2\" /> Add Member\n                           </button>\n                        </div>\n                        <div className=\"bg-white rounded-xl border border-gray-200 overflow-hidden shadow-sm\">\n                           <table className=\"min-w-full divide-y divide-gray-200\">\n                              <thead className=\"bg-gray-50\">\n                                 <tr>\n                                    <th className=\"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase\">Name</th>\n                                    <th className=\"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase\">Code</th>\n                                    <th className=\"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase\">Sold</th>\n                                    <th className=\"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase\">Earned</th>\n                                    <th className=\"px-6 py-3 text-right text-xs font-bold text-gray-500 uppercase\">Link</th>\n                                 </tr>\n                              </thead>\n                              <tbody className=\"divide-y divide-gray-200\">\n                                 {committee.map(c => (\n                                    <tr key={c.id} className=\"hover:bg-gray-50\">\n                                       <td className=\"px-6 py-4 font-bold text-gray-900\">{c.name}</td>\n                                       <td className=\"px-6 py-4 font-mono text-sm text-purple-600 bg-purple-50 w-fit px-2 rounded\">{c.code}</td>\n                                       <td className=\"px-6 py-4\">{c.ticketsSold}</td>\n                                       <td className=\"px-6 py-4 text-green-600 font-bold\">TT${c.commissionEarned}</td>\n                                       <td className=\"px-6 py-4 text-right\">\n                                          <button className=\"text-blue-600 hover:underline text-xs flex items-center justify-end ml-auto font-bold\" onClick={() => alert(`Copied: ${c.link}`)}>\n                                             Copy <Copy className=\"h-3 w-3 ml-1\" />\n                                          </button>\n                                       </td>\n                                    </tr>\n                                 ))}\n                              </tbody>\n                           </table>\n                        </div>\n                     </div>\n                  )}\n\n                  {promoterView === 'staff' && (\n                     <div className=\"animate-in slide-in-from-right-4\">\n                        <div className=\"flex justify-between items-center mb-6\">\n                           <h2 className=\"text-xl font-bold text-gray-900\">Staff</h2>\n                           <button onClick={() => setShowWorkerModal(true)} className=\"bg-trini-black text-white px-4 py-2 rounded-lg font-bold text-sm shadow-md\">Add Worker</button>\n                        </div>\n                        <div className=\"bg-white rounded-xl border border-gray-200 overflow-hidden shadow-sm\">\n                           <table className=\"min-w-full divide-y divide-gray-200\">\n                              <thead className=\"bg-gray-50\"><tr><th className=\"px-6 py-3 text-left text-xs font-bold text-gray-500\">Name</th><th className=\"px-6 py-3 text-left text-xs font-bold text-gray-500\">Role</th><th className=\"px-6 py-3 text-left text-xs font-bold text-gray-500\">Status</th></tr></thead>\n                              <tbody className=\"divide-y divide-gray-200\">\n                                 {workers.map(w => <tr key={w.id} className=\"hover:bg-gray-50\"><td className=\"px-6 py-4 font-bold\">{w.name}</td><td className=\"px-6 py-4\">{w.role}</td><td className=\"px-6 py-4\"><span className=\"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full font-bold\">{w.status}</span></td></tr>)}\n                              </tbody>\n                           </table>\n                        </div>\n                     </div>\n                  )}\n               </div>\n            )}\n\n            {/* VIEW: SCANNER APP SIMULATION */}\n            {view === 'scanner' && (\n               <div className=\"max-w-md mx-auto bg-black min-h-[650px] rounded-3xl relative overflow-hidden border-8 border-gray-800 shadow-2xl\">\n                  {/* Header Overlay */}\n                  <div className=\"absolute top-0 left-0 right-0 bg-black/50 backdrop-blur-sm p-4 z-20 flex justify-between text-white\">\n                     <div className=\"text-xs font-bold\">\n                        <p className=\"text-gray-400 uppercase\">Event</p>\n                        <p>Soca Monarch 2026</p>\n                     </div>\n                     <div className=\"text-right text-xs font-bold\">\n                        <p className=\"text-gray-400 uppercase\">Gate 1</p>\n                        <p className=\"text-green-400 flex items-center justify-end\"><span className=\"w-2 h-2 bg-green-400 rounded-full mr-1 animate-pulse\"></span> Live</p>\n                     </div>\n                  </div>\n\n                  {/* Capacity HUD */}\n                  <div className=\"absolute top-16 left-4 right-4 bg-black/60 backdrop-blur-md rounded-lg p-3 z-20 border border-white/10\">\n                     <div className=\"flex justify-between text-xs font-bold text-white mb-1\">\n                        <span>Entry Count</span>\n                        <span>452 / 1000</span>\n                     </div>\n                     <div className=\"w-full bg-gray-700 rounded-full h-2\">\n                        <div className=\"bg-trini-red h-2 rounded-full transition-all duration-500\" style={{ width: '45%' }}></div>\n                     </div>\n                  </div>\n\n                  {/* Camera View */}\n                  <div className=\"absolute inset-0 bg-gray-900\">\n                     <img src=\"https://images.unsplash.com/photo-1550989460-0adf9ea622e2?q=80&w=1000&auto=format&fit=crop\" className=\"w-full h-full object-cover opacity-40\" />\n                     <div className=\"absolute inset-0 flex items-center justify-center\">\n                        <div className=\"w-64 h-64 border-2 border-white/50 rounded-lg relative\">\n                           <div className=\"absolute top-0 left-0 w-6 h-6 border-t-4 border-l-4 border-green-500\"></div>\n                           <div className=\"absolute top-0 right-0 w-6 h-6 border-t-4 border-r-4 border-green-500\"></div>\n                           <div className=\"absolute bottom-0 left-0 w-6 h-6 border-b-4 border-l-4 border-green-500\"></div>\n                           <div className=\"absolute bottom-0 right-0 w-6 h-6 border-b-4 border-r-4 border-green-500\"></div>\n                           <div className=\"absolute top-1/2 left-0 w-full h-0.5 bg-red-500 animate-pulse shadow-[0_0_10px_rgba(255,0,0,0.8)]\"></div>\n                        </div>\n                     </div>\n                  </div>\n\n                  {/* Scanner UI Overlay */}\n                  <div className=\"absolute bottom-0 left-0 right-0 bg-white rounded-t-3xl p-6 animate-in slide-in-from-bottom-10 z-30\">\n                     {scanResult === 'scanning' && (\n                        <div className=\"text-center\">\n                           <p className=\"text-gray-500 mb-4 font-medium\">Point camera at ticket code</p>\n                           <button onClick={simulateScan} className=\"w-full bg-trini-black text-white py-4 rounded-xl font-bold text-lg shadow-lg hover:bg-gray-800 active:scale-95 transition-all\">\n                              Simulate Scan\n                           </button>\n                        </div>\n                     )}\n                     {scanResult === 'valid' && (\n                        <div className=\"text-center\">\n                           <div className=\"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4 animate-bounce\">\n                              <Check className=\"h-12 w-12 text-green-600\" />\n                           </div>\n                           <h2 className=\"text-3xl font-extrabold text-green-600 mb-1\">VALID</h2>\n                           <p className=\"text-gray-900 font-bold text-xl\">VIP Access</p>\n                           <p className=\"text-gray-500 text-sm mb-6\">Ray Kunjal</p>\n                           <button onClick={() => setScanResult('scanning')} className=\"w-full bg-gray-900 text-white py-3 rounded-xl font-bold shadow-lg\">Scan Next</button>\n                        </div>\n                     )}\n                     {scanResult === 'duplicate' && (\n                        <div className=\"text-center\">\n                           <div className=\"w-20 h-20 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                              <AlertTriangle className=\"h-12 w-12 text-orange-600\" />\n                           </div>\n                           <h2 className=\"text-2xl font-extrabold text-orange-600 mb-1\">ALREADY USED</h2>\n                           <p className=\"text-gray-500 text-sm font-mono bg-gray-100 inline-block px-2 py-1 rounded mb-6\">Scanned: 10:42 PM (Gate 1)</p>\n                           <button onClick={() => setScanResult('scanning')} className=\"w-full bg-gray-900 text-white py-3 rounded-xl font-bold shadow-lg\">Scan Next</button>\n                        </div>\n                     )}\n                     {scanResult === 'invalid' && (\n                        <div className=\"text-center\">\n                           <div className=\"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                              <X className=\"h-12 w-12 text-red-600\" />\n                           </div>\n                           <h2 className=\"text-3xl font-extrabold text-red-600 mb-2\">INVALID</h2>\n                           <p className=\"text-gray-500 text-sm mb-6\">Ticket ID not found in database.</p>\n                           <button onClick={() => setScanResult('scanning')} className=\"w-full bg-gray-900 text-white py-3 rounded-xl font-bold shadow-lg\">Scan Next</button>\n                        </div>\n                     )}\n                  </div>\n               </div>\n            )}\n\n            {/* CREATE EVENT MODAL */}\n            {showEventModal && (\n               <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4\">\n                  <div className=\"bg-white rounded-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto flex flex-col shadow-2xl animate-in zoom-in-95 duration-200\">\n                     <div className=\"p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50\">\n                        <h2 className=\"text-2xl font-bold text-gray-900\">Create New Event</h2>\n                        <button onClick={() => setShowEventModal(false)} className=\"text-gray-400 hover:text-gray-600\"><X /></button>\n                     </div>\n\n                     <div className=\"p-8 space-y-6\">\n                        {/* Basic Info */}\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                           <div className=\"col-span-2\">\n                              <label className=\"block text-sm font-bold text-gray-700 mb-1\">Event Title</label>\n                              <input type=\"text\" className=\"w-full border border-gray-300 p-3 rounded-lg focus:ring-2 focus:ring-trini-red focus:border-trini-red\" placeholder=\"e.g. Sun Nation 2026\" value={newEvent.title} onChange={e => setNewEvent({ ...newEvent, title: e.target.value })} />\n                           </div>\n                           <div>\n                              <label className=\"block text-sm font-bold text-gray-700 mb-1\">Date</label>\n                              <input type=\"date\" className=\"w-full border border-gray-300 p-3 rounded-lg\" value={newEvent.date} onChange={e => setNewEvent({ ...newEvent, date: e.target.value })} />\n                           </div>\n                           <div>\n                              <label className=\"block text-sm font-bold text-gray-700 mb-1\">Time</label>\n                              <input type=\"time\" className=\"w-full border border-gray-300 p-3 rounded-lg\" value={newEvent.time} onChange={e => setNewEvent({ ...newEvent, time: e.target.value })} />\n                           </div>\n                           <div className=\"col-span-2\">\n                              <label className=\"block text-sm font-bold text-gray-700 mb-1\">Location</label>\n                              <input type=\"text\" className=\"w-full border border-gray-300 p-3 rounded-lg\" placeholder=\"e.g. O2 Park, Chaguaramas\" value={newEvent.location} onChange={e => setNewEvent({ ...newEvent, location: e.target.value })} />\n                           </div>\n                        </div>\n\n                        {/* Amenities Toggles */}\n                        <div>\n                           <label className=\"block text-sm font-bold text-gray-700 mb-2\">Event Type</label>\n                           <div className=\"flex gap-4\">\n                              {['Cooler Allowed', 'Food Inclusive', 'Drinks Inclusive'].map(am => (\n                                 <label key={am} className=\"flex items-center cursor-pointer bg-gray-50 px-4 py-2 rounded-lg border border-gray-200 hover:bg-gray-100\">\n                                    <input type=\"checkbox\" className=\"mr-2 rounded text-trini-red focus:ring-trini-red\" />\n                                    <span className=\"text-sm font-medium text-gray-700\">{am}</span>\n                                 </label>\n                              ))}\n                           </div>\n                        </div>\n\n                        {/* Ticket Tiers Builder */}\n                        <div className=\"bg-gray-50 p-6 rounded-xl border border-gray-200\">\n                           <h3 className=\"font-bold text-gray-900 mb-4 flex items-center\"><Ticket className=\"mr-2 h-4 w-4\" /> Ticket Tiers</h3>\n\n                           {tempTiers.length > 0 && (\n                              <div className=\"space-y-2 mb-4\">\n                                 {tempTiers.map(tier => (\n                                    <div key={tier.id} className=\"flex items-center justify-between bg-white p-3 rounded border border-gray-200 shadow-sm\">\n                                       <div>\n                                          <span className=\"font-bold text-gray-800\">{tier.name}</span>\n                                          <span className=\"text-xs text-gray-500 ml-2\">({tier.available} qty)</span>\n                                       </div>\n                                       <div className=\"flex items-center\">\n                                          <span className=\"font-bold text-green-600 mr-4\">TT${tier.price}</span>\n                                          <button onClick={() => handleRemoveTier(tier.id)} className=\"text-red-400 hover:text-red-600\"><Trash2 className=\"h-4 w-4\" /></button>\n                                       </div>\n                                    </div>\n                                 ))}\n                              </div>\n                           )}\n\n                           <div className=\"grid grid-cols-3 gap-3 items-end\">\n                              <div className=\"col-span-1\">\n                                 <label className=\"text-xs font-bold text-gray-500 uppercase mb-1 block\">Name</label>\n                                 <input type=\"text\" placeholder=\"e.g. Early Bird\" className=\"w-full border p-2 rounded text-sm\" value={newTierInput.name} onChange={e => setNewTierInput({ ...newTierInput, name: e.target.value })} />\n                              </div>\n                              <div className=\"col-span-1\">\n                                 <label className=\"text-xs font-bold text-gray-500 uppercase mb-1 block\">Price (TTD)</label>\n                                 <input type=\"number\" placeholder=\"0.00\" className=\"w-full border p-2 rounded text-sm\" value={newTierInput.price} onChange={e => setNewTierInput({ ...newTierInput, price: e.target.value })} />\n                              </div>\n                              <div className=\"col-span-1 flex gap-2\">\n                                 <div className=\"flex-grow\">\n                                    <label className=\"text-xs font-bold text-gray-500 uppercase mb-1 block\">Qty</label>\n                                    <input type=\"number\" placeholder=\"100\" className=\"w-full border p-2 rounded text-sm\" value={newTierInput.qty} onChange={e => setNewTierInput({ ...newTierInput, qty: e.target.value })} />\n                                 </div>\n                                 <button onClick={handleAddTier} className=\"bg-trini-black text-white p-2 rounded hover:bg-gray-800 h-[38px] w-[38px] flex items-center justify-center\"><Plus className=\"h-5 w-5\" /></button>\n                              </div>\n                           </div>\n                        </div>\n\n                        <div className=\"flex justify-end gap-3 pt-4 border-t border-gray-100\">\n                           <button onClick={() => setShowEventModal(false)} className=\"px-6 py-3 rounded-lg bg-gray-100 font-bold text-gray-600 hover:bg-gray-200\">Cancel</button>\n                           <button onClick={handleSaveEvent} className=\"px-8 py-3 rounded-lg bg-trini-red text-white font-bold hover:bg-red-700 shadow-lg\">Publish Event</button>\n                        </div>\n                     </div>\n                  </div>\n               </div>\n            )}\n\n            {/* COMMITTEE MEMBER MODAL */}\n            {showCommitteeModal && (\n               <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4\">\n                  <div className=\"bg-white rounded-xl w-full max-w-md p-8 shadow-2xl\">\n                     <h3 className=\"text-xl font-bold mb-6\">Add Committee Member</h3>\n                     <div className=\"space-y-4\">\n                        <div>\n                           <label className=\"block text-sm font-bold text-gray-700 mb-1\">Full Name</label>\n                           <input\n                              type=\"text\" placeholder=\"e.g. Sarah James\"\n                              className=\"w-full border border-gray-300 p-3 rounded-lg\"\n                              value={newCommittee.name}\n                              onChange={(e) => setNewCommittee({ ...newCommittee, name: e.target.value })}\n                           />\n                        </div>\n                        <div>\n                           <label className=\"block text-sm font-bold text-gray-700 mb-1\">Email (Optional)</label>\n                           <input\n                              type=\"email\" placeholder=\"sarah@example.com\"\n                              className=\"w-full border border-gray-300 p-3 rounded-lg\"\n                              value={newCommittee.email}\n                              onChange={(e) => setNewCommittee({ ...newCommittee, email: e.target.value })}\n                           />\n                        </div>\n\n                        <div className=\"bg-purple-50 p-4 rounded-lg border border-purple-100 text-sm text-purple-800\">\n                           <p className=\"font-bold mb-1\">Auto-Generated Link</p>\n                           <p>A unique tracking code will be created for this member to share on WhatsApp/Instagram.</p>\n                        </div>\n\n                        <button onClick={handleAddCommittee} className=\"w-full bg-purple-600 text-white font-bold py-3 rounded-lg hover:bg-purple-700 mt-4 shadow-lg\">\n                           Create & Copy Link\n                        </button>\n                     </div>\n                  </div>\n               </div>\n            )}\n\n            {/* WORKER MODAL */}\n            {showWorkerModal && (\n               <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4\">\n                  <div className=\"bg-white rounded-xl w-full max-w-md p-8 shadow-2xl\">\n                     <h3 className=\"text-xl font-bold mb-6\">Add Staff Member</h3>\n                     <div className=\"space-y-4\">\n                        <div>\n                           <label className=\"block text-sm font-bold text-gray-700 mb-1\">Name</label>\n                           <input\n                              type=\"text\"\n                              className=\"w-full border border-gray-300 p-3 rounded-lg\"\n                              value={newWorker.name}\n                              onChange={(e) => setNewWorker({ ...newWorker, name: e.target.value })}\n                           />\n                        </div>\n                        <div>\n                           <label className=\"block text-sm font-bold text-gray-700 mb-1\">Email</label>\n                           <input\n                              type=\"email\"\n                              className=\"w-full border border-gray-300 p-3 rounded-lg\"\n                              value={newWorker.email}\n                              onChange={(e) => setNewWorker({ ...newWorker, email: e.target.value })}\n                           />\n                        </div>\n                        <div>\n                           <label className=\"block text-sm font-bold text-gray-700 mb-1\">Role</label>\n                           <select\n                              className=\"w-full border border-gray-300 p-3 rounded-lg\"\n                              value={newWorker.role}\n                              onChange={(e) => setNewWorker({ ...newWorker, role: e.target.value })}\n                           >\n                              <option value=\"Scanner\">Gate Scanner</option>\n                              <option value=\"Admin\">Event Admin</option>\n                              <option value=\"Box Office\">Box Office</option>\n                           </select>\n                        </div>\n                        <button onClick={handleAddWorker} className=\"w-full bg-trini-black text-white font-bold py-3 rounded-lg hover:bg-gray-800 mt-4 shadow-lg\">\n                           Add Staff\n                        </button>\n                     </div>\n                  </div>\n               </div>\n            )}\n\n         </div>\n      </div>\n   );\n};\n",
  "pages/UserProfile.tsx": "\nimport React, { useState } from 'react';\nimport { User, Package, Car, Ticket, Heart, CreditCard, Settings, LogOut, MapPin, Clock, ChevronRight, Shield } from 'lucide-react';\nimport { Link } from 'react-router-dom';\n\nexport const UserProfile: React.FC = () => {\n  const [activeTab, setActiveTab] = useState('overview');\n\n  const orders = [\n    { id: '#ORD-9921', store: \"Aunty May's Roti Shop\", items: \"2x Boneless Goat, 1x Apple J\", total: 98, status: 'Delivered', date: 'Oct 12, 2025' },\n    { id: '#ORD-9904', store: \"Tech Giants TT\", items: \"Samsung Charger Type-C\", total: 150, status: 'Processing', date: 'Oct 14, 2025' },\n  ];\n\n  const rides = [\n    { id: 'R-221', type: 'TriniRide', from: 'Port of Spain', to: 'Maraval', cost: 35, date: 'Oct 10, 2025', rating: 5 },\n    { id: 'R-198', type: 'H-Taxi', from: 'City Gate', to: 'Chaguanas', cost: 25, date: 'Oct 08, 2025', rating: 4 },\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 py-8 font-sans\">\n      <div className=\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex flex-col md:flex-row gap-8\">\n          \n          {/* Sidebar */}\n          <div className=\"w-full md:w-72 flex-shrink-0\">\n            <div className=\"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden\">\n              <div className=\"p-6 text-center border-b border-gray-100 bg-trini-black text-white\">\n                <div className=\"w-20 h-20 bg-gray-700 rounded-full mx-auto mb-3 flex items-center justify-center border-4 border-trini-red\">\n                   <User className=\"h-10 w-10 text-white\" />\n                </div>\n                <h2 className=\"font-bold text-xl\">Ray Kunjal</h2>\n                <p className=\"text-gray-400 text-sm\">Member since 2024</p>\n                <div className=\"mt-3 inline-flex items-center px-3 py-1 rounded-full bg-yellow-500/20 text-yellow-400 text-xs font-bold border border-yellow-500/50\">\n                   <Shield className=\"h-3 w-3 mr-1\" /> Gold Member\n                </div>\n              </div>\n              \n              <nav className=\"p-4 space-y-1\">\n                {[\n                  { id: 'overview', label: 'Overview', icon: User },\n                  { id: 'orders', label: 'My Orders', icon: Package },\n                  { id: 'rides', label: 'Ride History', icon: Car },\n                  { id: 'wallet', label: 'Wallet & Credits', icon: CreditCard },\n                  { id: 'saved', label: 'Saved Items', icon: Heart },\n                  { id: 'settings', label: 'Account Settings', icon: Settings },\n                ].map(item => (\n                  <button\n                    key={item.id}\n                    onClick={() => setActiveTab(item.id)}\n                    className={`w-full flex items-center px-4 py-3 rounded-lg transition-colors font-medium text-sm ${\n                      activeTab === item.id ? 'bg-red-50 text-trini-red' : 'text-gray-600 hover:bg-gray-50'\n                    }`}\n                  >\n                    <item.icon className=\"h-4 w-4 mr-3\" /> {item.label}\n                  </button>\n                ))}\n                <button className=\"w-full flex items-center px-4 py-3 rounded-lg transition-colors font-medium text-sm text-red-600 hover:bg-red-50 mt-4\">\n                   <LogOut className=\"h-4 w-4 mr-3\" /> Log Out\n                </button>\n              </nav>\n            </div>\n          </div>\n\n          {/* Content Area */}\n          <div className=\"flex-grow\">\n            \n            {activeTab === 'overview' && (\n               <div className=\"space-y-6 animate-in fade-in\">\n                  {/* Stats Grid */}\n                  <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                     <div className=\"bg-white p-4 rounded-xl shadow-sm border border-gray-200\">\n                        <p className=\"text-xs text-gray-500 uppercase font-bold\">Total Spent</p>\n                        <p className=\"text-2xl font-extrabold text-gray-900 mt-1\">TT$ 1,240</p>\n                     </div>\n                     <div className=\"bg-white p-4 rounded-xl shadow-sm border border-gray-200\">\n                        <p className=\"text-xs text-gray-500 uppercase font-bold\">Orders</p>\n                        <p className=\"text-2xl font-extrabold text-gray-900 mt-1\">12</p>\n                     </div>\n                     <div className=\"bg-white p-4 rounded-xl shadow-sm border border-gray-200\">\n                        <p className=\"text-xs text-gray-500 uppercase font-bold\">Rides Taken</p>\n                        <p className=\"text-2xl font-extrabold text-gray-900 mt-1\">28</p>\n                     </div>\n                     <div className=\"bg-white p-4 rounded-xl shadow-sm border border-gray-200\">\n                        <p className=\"text-xs text-gray-500 uppercase font-bold\">Points</p>\n                        <p className=\"text-2xl font-extrabold text-purple-600 mt-1\">450</p>\n                     </div>\n                  </div>\n\n                  {/* Recent Activity */}\n                  <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\n                     <h3 className=\"font-bold text-lg text-gray-900 mb-4\">Recent Activity</h3>\n                     <div className=\"space-y-4\">\n                        {orders.slice(0,1).map(order => (\n                           <div key={order.id} className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\">\n                              <div className=\"flex items-center\">\n                                 <div className=\"bg-green-100 p-2 rounded-full mr-4 text-green-600\"><Package className=\"h-5 w-5\" /></div>\n                                 <div>\n                                    <p className=\"font-bold text-gray-900\">{order.store}</p>\n                                    <p className=\"text-xs text-gray-500\">{order.date}</p>\n                                 </div>\n                              </div>\n                              <div className=\"text-right\">\n                                 <p className=\"font-bold\">TT${order.total}</p>\n                                 <p className=\"text-xs text-green-600 font-bold\">{order.status}</p>\n                              </div>\n                           </div>\n                        ))}\n                        {rides.slice(0,1).map(ride => (\n                           <div key={ride.id} className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\">\n                              <div className=\"flex items-center\">\n                                 <div className=\"bg-yellow-100 p-2 rounded-full mr-4 text-yellow-600\"><Car className=\"h-5 w-5\" /></div>\n                                 <div>\n                                    <p className=\"font-bold text-gray-900\">Ride to {ride.to}</p>\n                                    <p className=\"text-xs text-gray-500\">{ride.date}</p>\n                                 </div>\n                              </div>\n                              <div className=\"text-right\">\n                                 <p className=\"font-bold\">TT${ride.cost}</p>\n                                 <p className=\"text-xs text-gray-500\">{ride.type}</p>\n                              </div>\n                           </div>\n                        ))}\n                     </div>\n                  </div>\n               </div>\n            )}\n\n            {activeTab === 'orders' && (\n               <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden animate-in fade-in\">\n                  <div className=\"p-6 border-b border-gray-200\">\n                     <h3 className=\"font-bold text-lg\">Order History</h3>\n                  </div>\n                  <div className=\"divide-y divide-gray-100\">\n                     {orders.map(order => (\n                        <div key={order.id} className=\"p-6 hover:bg-gray-50 transition-colors\">\n                           <div className=\"flex justify-between items-start mb-2\">\n                              <div className=\"flex items-center\">\n                                 <span className=\"text-sm font-mono text-gray-500 mr-3\">{order.id}</span>\n                                 <span className={`text-xs font-bold px-2 py-1 rounded-full ${order.status === 'Delivered' ? 'bg-green-100 text-green-700' : 'bg-blue-100 text-blue-700'}`}>\n                                    {order.status}\n                                 </span>\n                              </div>\n                              <span className=\"text-sm text-gray-500\">{order.date}</span>\n                           </div>\n                           <div className=\"flex justify-between items-center\">\n                              <div>\n                                 <h4 className=\"font-bold text-gray-900\">{order.store}</h4>\n                                 <p className=\"text-sm text-gray-600\">{order.items}</p>\n                              </div>\n                              <p className=\"font-extrabold text-lg\">TT${order.total}</p>\n                           </div>\n                           <div className=\"mt-4 flex gap-2\">\n                              <button className=\"text-sm font-bold text-trini-red hover:underline\">View Details</button>\n                              <span className=\"text-gray-300\">|</span>\n                              <button className=\"text-sm font-bold text-gray-500 hover:text-gray-900\">Reorder</button>\n                           </div>\n                        </div>\n                     ))}\n                  </div>\n               </div>\n            )}\n\n            {activeTab === 'wallet' && (\n               <div className=\"space-y-6 animate-in fade-in\">\n                  <div className=\"bg-gradient-to-r from-gray-900 to-gray-800 rounded-xl p-8 text-white shadow-lg relative overflow-hidden\">\n                     <div className=\"absolute top-0 right-0 p-8 opacity-10\"><CreditCard className=\"h-32 w-32\" /></div>\n                     <p className=\"text-gray-400 text-sm uppercase font-bold mb-1\">TriniBuild Credits</p>\n                     <h2 className=\"text-4xl font-extrabold mb-6\">TT$ 45.00</h2>\n                     <div className=\"flex gap-4 relative z-10\">\n                        <button className=\"bg-white text-black px-6 py-2 rounded-lg font-bold hover:bg-gray-100 transition-colors text-sm\">Top Up</button>\n                        <button className=\"bg-white/10 text-white px-6 py-2 rounded-lg font-bold hover:bg-white/20 transition-colors text-sm border border-white/20\">Send Gift</button>\n                     </div>\n                  </div>\n                  \n                  <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\n                     <h3 className=\"font-bold text-lg mb-4\">Saved Payment Methods</h3>\n                     <div className=\"flex items-center justify-between p-4 border border-gray-200 rounded-lg mb-3\">\n                        <div className=\"flex items-center\">\n                           <div className=\"bg-blue-50 p-2 rounded mr-3\"><CreditCard className=\"h-5 w-5 text-blue-600\" /></div>\n                           <div>\n                              <p className=\"font-bold text-sm\">Visa ending in 4242</p>\n                              <p className=\"text-xs text-gray-500\">Expires 12/28</p>\n                           </div>\n                        </div>\n                        <span className=\"bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded\">Default</span>\n                     </div>\n                     <button className=\"w-full border-2 border-dashed border-gray-300 rounded-lg p-3 text-gray-500 font-bold hover:bg-gray-50 text-sm\">\n                        + Add New Card\n                     </button>\n                  </div>\n               </div>\n            )}\n\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n",
  "pages/landing/JobsLanding.tsx": "\nimport React from 'react';\nimport { Briefcase, Search, CheckCircle, Star, ArrowRight, Play } from 'lucide-react';\nimport { Link } from 'react-router-dom';\n\nexport const JobsLanding: React.FC = () => {\n  return (\n    <div className=\"min-h-screen bg-white font-sans\">\n      {/* HERO */}\n      <div className=\"bg-purple-900 text-white py-24 relative overflow-hidden\">\n         <div className=\"absolute top-0 right-0 w-1/2 h-full bg-purple-800 transform skew-x-12 translate-x-20\"></div>\n         <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 flex flex-col lg:flex-row items-center\">\n            <div className=\"flex-1 mb-10 lg:mb-0\">\n               <h1 className=\"text-5xl md:text-6xl font-extrabold mb-6 leading-tight\">\n                  Stop Searching.<br/>\n                  <span className=\"text-purple-300\">Start Working.</span>\n               </h1>\n               <p className=\"text-xl text-purple-100 mb-8 max-w-xl\">\n                  TriniWorks connects skilled professionals with the businesses and homeowners who need them most. No middleman, just connection.\n               </p>\n               <div className=\"flex gap-4\">\n                  <Link to=\"/work/profile\" className=\"bg-white text-purple-900 px-8 py-3 rounded-lg font-bold hover:bg-purple-50 transition-colors shadow-lg\">\n                     I want to Work\n                  </Link>\n                  <Link to=\"/jobs\" className=\"bg-purple-700 text-white px-8 py-3 rounded-lg font-bold hover:bg-purple-600 transition-colors shadow-lg\">\n                     I need to Hire\n                  </Link>\n               </div>\n            </div>\n            <div className=\"flex-1 w-full max-w-lg\">\n               <div className=\"bg-white rounded-2xl p-6 shadow-2xl text-gray-900\">\n                  <div className=\"flex items-center mb-6\">\n                     <img src=\"https://images.unsplash.com/photo-1567532939604-b6b5b0db2604?q=80&w=200&auto=format&fit=crop\" className=\"w-16 h-16 rounded-full mr-4 border-4 border-purple-100 object-cover\" alt=\"Pro\" />\n                     <div>\n                        <h3 className=\"font-bold text-lg\">Amanda K.</h3>\n                        <p className=\"text-purple-600 text-sm font-bold\">Graphic Designer</p>\n                        <div className=\"flex text-yellow-400 text-xs\">\u2605\u2605\u2605\u2605\u2605 (42 Reviews)</div>\n                     </div>\n                  </div>\n                  <p className=\"text-gray-600 italic mb-4\">\"Within 24 hours of creating my profile, I landed a contract with a major retailer in POS. This platform actually works.\"</p>\n                  <div className=\"border-t border-gray-100 pt-4 flex justify-between items-center\">\n                     <span className=\"text-xs text-gray-400\">Member since 2025</span>\n                     <span className=\"text-green-600 font-bold text-sm\">Verified Pro \u2705</span>\n                  </div>\n               </div>\n            </div>\n         </div>\n      </div>\n\n      {/* VIDEO EXPLAINER */}\n      <div className=\"py-20 bg-gray-50\">\n         <div className=\"max-w-4xl mx-auto px-4 text-center\">\n            <h2 className=\"text-3xl font-bold text-gray-900 mb-12\">How TriniWorks Changes the Game</h2>\n            <div className=\"aspect-video bg-black rounded-2xl shadow-2xl overflow-hidden relative group cursor-pointer mx-auto mb-12\">\n               <div className=\"absolute inset-0 flex items-center justify-center\">\n                  <Play className=\"w-20 h-20 text-white opacity-80 group-hover:scale-110 transition-transform\" />\n               </div>\n               <img src=\"https://images.unsplash.com/photo-1521737604893-d14cc237f11d?q=80&w=2000&auto=format&fit=crop\" className=\"w-full h-full object-cover opacity-60\" alt=\"Video thumbnail\" />\n            </div>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8 text-left\">\n               <div>\n                  <div className=\"bg-purple-100 w-12 h-12 rounded-lg flex items-center justify-center mb-4 text-purple-700\">\n                     <Search className=\"h-6 w-6\" />\n                  </div>\n                  <h3 className=\"font-bold text-lg mb-2\">Smart Matching</h3>\n                  <p className=\"text-gray-600 text-sm\">Our AI matches your skills to jobs instantly. No more scrolling through irrelevant ads.</p>\n               </div>\n               <div>\n                  <div className=\"bg-purple-100 w-12 h-12 rounded-lg flex items-center justify-center mb-4 text-purple-700\">\n                     <CheckCircle className=\"h-6 w-6\" />\n                  </div>\n                  <h3 className=\"font-bold text-lg mb-2\">Verified Trust</h3>\n                  <p className=\"text-gray-600 text-sm\">Both employers and workers are verified. Reviews keep the community safe and professional.</p>\n               </div>\n               <div>\n                  <div className=\"bg-purple-100 w-12 h-12 rounded-lg flex items-center justify-center mb-4 text-purple-700\">\n                     <Briefcase className=\"h-6 w-6\" />\n                  </div>\n                  <h3 className=\"font-bold text-lg mb-2\">Zero Friction</h3>\n                  <p className=\"text-gray-600 text-sm\">Apply with one click. Chat directly. Get hired faster than ever before.</p>\n               </div>\n            </div>\n         </div>\n      </div>\n\n      {/* CATEGORIES */}\n      <div className=\"py-20 bg-white\">\n         <div className=\"max-w-6xl mx-auto px-4\">\n            <h2 className=\"text-2xl font-bold text-gray-900 mb-8 text-center\">Popular Categories</h2>\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n               {['Construction', 'Plumbing', 'Web Design', 'Accounting', 'Cleaning', 'Driving', 'Catering', 'Education'].map(cat => (\n                  <Link key={cat} to=\"/jobs\" className=\"bg-gray-50 p-4 rounded-xl text-center hover:bg-purple-50 hover:text-purple-700 transition-colors font-medium text-gray-700\">\n                     {cat}\n                  </Link>\n               ))}\n            </div>\n            <div className=\"mt-12 text-center\">\n               <Link to=\"/work/profile\" className=\"inline-flex items-center text-purple-700 font-bold text-lg hover:underline\">\n                  Create your professional profile <ArrowRight className=\"ml-2 h-5 w-5\" />\n               </Link>\n            </div>\n         </div>\n      </div>\n    </div>\n  );\n};\n",
  "pages/landing/LivingLanding.tsx": "\nimport React from 'react';\nimport { ArrowRight, Home, MapPin, Search, ShieldCheck } from 'lucide-react';\nimport { Link } from 'react-router-dom';\n\nexport const LivingLanding: React.FC = () => {\n  return (\n    <div className=\"min-h-screen bg-white font-sans\">\n      {/* Hero */}\n      <div className=\"relative h-[80vh] flex items-center justify-center overflow-hidden\">\n        <div className=\"absolute inset-0 bg-gray-900\">\n           <img src=\"https://images.unsplash.com/photo-1512917774080-9991f1c4c750?q=80&w=2000&auto=format&fit=crop\" className=\"w-full h-full object-cover opacity-40\" alt=\"Luxury Home\" />\n        </div>\n        <div className=\"relative z-10 text-center px-4 max-w-4xl\">\n           <span className=\"bg-blue-500/20 text-blue-200 border border-blue-500/50 px-4 py-1 rounded-full text-sm font-bold uppercase tracking-widest mb-6 inline-block\">TriniBuild Living</span>\n           <h1 className=\"text-5xl md:text-7xl font-extrabold text-white mb-6 leading-tight\">\n              Find your place <br/>in <span className=\"text-blue-400\">Paradise.</span>\n           </h1>\n           <p className=\"text-xl text-gray-300 mb-10 max-w-2xl mx-auto\">\n              The most trusted real estate marketplace in Trinidad & Tobago. Verified listings, AI valuations, and direct agent connections.\n           </p>\n           <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n              <Link to=\"/real-estate\" className=\"bg-blue-600 text-white px-8 py-4 rounded-full font-bold text-lg hover:bg-blue-700 transition-all shadow-lg flex items-center justify-center\">\n                 Browse Listings <Search className=\"ml-2 h-5 w-5\" />\n              </Link>\n              <Link to=\"/real-estate\" className=\"bg-white text-gray-900 px-8 py-4 rounded-full font-bold text-lg hover:bg-gray-100 transition-all flex items-center justify-center\">\n                 List Property\n              </Link>\n           </div>\n        </div>\n      </div>\n      \n      {/* Features */}\n      <div className=\"py-20 bg-gray-50\">\n         <div className=\"max-w-6xl mx-auto px-4\">\n            <div className=\"text-center mb-16\">\n               <h2 className=\"text-3xl font-bold text-gray-900\">Why TriniBuild Living?</h2>\n            </div>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n               <div className=\"bg-white p-8 rounded-2xl shadow-sm border border-gray-100 text-center\">\n                  <div className=\"bg-blue-50 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-6 text-blue-600\">\n                     <ShieldCheck className=\"h-8 w-8\" />\n                  </div>\n                  <h3 className=\"text-xl font-bold mb-2\">Verified Agents</h3>\n                  <p className=\"text-gray-500\">No more fake listings or scams. We verify every agent.</p>\n               </div>\n               <div className=\"bg-white p-8 rounded-2xl shadow-sm border border-gray-100 text-center\">\n                  <div className=\"bg-blue-50 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-6 text-blue-600\">\n                     <MapPin className=\"h-8 w-8\" />\n                  </div>\n                  <h3 className=\"text-xl font-bold mb-2\">Map Search</h3>\n                  <p className=\"text-gray-500\">Search by neighborhood, street, or radius.</p>\n               </div>\n               <div className=\"bg-white p-8 rounded-2xl shadow-sm border border-gray-100 text-center\">\n                  <div className=\"bg-blue-50 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-6 text-blue-600\">\n                     <Home className=\"h-8 w-8\" />\n                  </div>\n                  <h3 className=\"text-xl font-bold mb-2\">Smart Alerts</h3>\n                  <p className=\"text-gray-500\">Get notified the second a matching property hits the market.</p>\n               </div>\n            </div>\n         </div>\n      </div>\n    </div>\n  );\n};\n",
  "pages/landing/MarketplaceLanding.tsx": "\nimport React from 'react';\nimport { Check, ArrowRight, Play, ShieldCheck, TrendingUp, ShoppingBag, Zap, XCircle } from 'lucide-react';\nimport { Link } from 'react-router-dom';\n\nexport const MarketplaceLanding: React.FC = () => {\n  return (\n    <div className=\"min-h-screen bg-white font-sans\">\n      {/* HERO SECTION: Pattern Interrupt */}\n      <div className=\"relative bg-gray-900 text-white overflow-hidden\">\n        <div className=\"absolute inset-0 opacity-20 bg-[url('https://images.unsplash.com/photo-1472851294608-4155f2118c04?q=80&w=2070&auto=format&fit=crop')] bg-cover bg-center\" />\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24 relative z-10 flex flex-col lg:flex-row items-center gap-12\">\n          <div className=\"flex-1 text-center lg:text-left\">\n            <span className=\"inline-block py-1 px-3 rounded-full bg-trini-red/20 text-trini-red font-bold text-sm mb-6 border border-trini-red/50 animate-pulse\">\n              \u26a0\ufe0f The Banking System Failed You.\n            </span>\n            <h1 className=\"text-4xl md:text-6xl font-extrabold leading-tight mb-6\">\n              We Built A <span className=\"text-trini-red\">Free Digital Store</span> For Every Vendor.\n            </h1>\n            <p className=\"text-xl text-gray-300 mb-8 max-w-2xl\">\n              Most vendors can't afford a $5,000 website. So we made it free. Get 10 listings, accept Cash on Delivery, and join the ecosystem today. No credit card required.\n            </p>\n            <div className=\"flex flex-col sm:flex-row gap-4 justify-center lg:justify-start\">\n              <Link to=\"/create-store\" className=\"bg-trini-red text-white px-8 py-4 rounded-full font-bold text-lg hover:bg-red-700 transition-all shadow-lg hover:shadow-red-900/50 flex items-center justify-center\">\n                Claim Free Store Now <ArrowRight className=\"ml-2 h-5 w-5\" />\n              </Link>\n              <button className=\"bg-white/10 backdrop-blur-md border border-white/20 text-white px-8 py-4 rounded-full font-bold text-lg hover:bg-white/20 transition-all flex items-center justify-center\">\n                <Play className=\"mr-2 h-5 w-5 fill-current\" /> Why We Do This\n              </button>\n            </div>\n          </div>\n          <div className=\"flex-1 w-full max-w-lg\">\n            <div className=\"relative rounded-2xl overflow-hidden shadow-2xl border border-gray-700 group\">\n               <div className=\"absolute inset-0 bg-black/40 group-hover:bg-black/20 transition-all z-10 flex items-center justify-center cursor-pointer\">\n                  <div className=\"w-20 h-20 bg-trini-red rounded-full flex items-center justify-center shadow-xl pl-1 transform group-hover:scale-110 transition-transform\">\n                     <Play className=\"h-10 w-10 text-white fill-current\" />\n                  </div>\n               </div>\n               <img src=\"https://images.unsplash.com/photo-1556742049-0cfed4f7a07d?q=80&w=1000&auto=format&fit=crop\" alt=\"Platform Demo\" className=\"w-full h-[400px] object-cover\" />\n            </div>\n            <p className=\"text-center text-gray-400 text-sm mt-4 font-bold\">See how the AI builds your site in 60 seconds.</p>\n          </div>\n        </div>\n      </div>\n\n      {/* AGITATION: The Old Way vs New Way */}\n      <div className=\"py-20 bg-gray-50\">\n        <div className=\"max-w-6xl mx-auto px-4\">\n          <div className=\"text-center mb-16\">\n            <h2 className=\"text-3xl font-bold text-gray-900 mb-4\">Why is it so hard to get online in Trinidad?</h2>\n            <p className=\"text-lg text-gray-600\">The traditional system is designed to keep you out. TriniBuild is designed to let you in.</p>\n          </div>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\n             {/* The Old Way */}\n             <div className=\"bg-white p-8 rounded-2xl shadow-sm border border-gray-200 opacity-70 hover:opacity-100 transition-opacity\">\n                <h3 className=\"text-xl font-bold text-gray-500 mb-6 flex items-center uppercase tracking-wide\">\n                   <XCircle className=\"h-6 w-6 mr-2\" /> The Old Way\n                </h3>\n                <ul className=\"space-y-4\">\n                   <li className=\"flex items-start text-gray-600\">\n                      <span className=\"font-bold text-gray-900 mr-2 min-w-[80px]\">Cost:</span>\n                      TT$ 5,000+ for a basic website.\n                   </li>\n                   <li className=\"flex items-start text-gray-600\">\n                      <span className=\"font-bold text-gray-900 mr-2 min-w-[80px]\">Time:</span>\n                      Weeks of back-and-forth with developers.\n                   </li>\n                   <li className=\"flex items-start text-gray-600\">\n                      <span className=\"font-bold text-gray-900 mr-2 min-w-[80px]\">Payments:</span>\n                      Wait months for bank approval to take cards.\n                   </li>\n                   <li className=\"flex items-start text-gray-600\">\n                      <span className=\"font-bold text-gray-900 mr-2 min-w-[80px]\">Result:</span>\n                      A site nobody visits because you have no traffic.\n                   </li>\n                </ul>\n             </div>\n\n             {/* The TriniBuild Way */}\n             <div className=\"bg-white p-8 rounded-2xl shadow-xl border-2 border-trini-red relative overflow-hidden\">\n                <div className=\"absolute top-0 right-0 bg-trini-red text-white text-xs font-bold px-3 py-1 rounded-bl-lg\">\n                   THE ECOSYSTEM\n                </div>\n                <h3 className=\"text-xl font-bold text-trini-red mb-6 flex items-center uppercase tracking-wide\">\n                   <Check className=\"h-6 w-6 mr-2\" /> The TriniBuild Way\n                </h3>\n                <ul className=\"space-y-4\">\n                   <li className=\"flex items-start text-gray-800\">\n                      <span className=\"font-bold text-gray-900 mr-2 min-w-[80px]\">Cost:</span>\n                      <span className=\"bg-green-100 text-green-800 px-2 rounded font-bold\">FREE FOREVER</span> (10 Listings).\n                   </li>\n                   <li className=\"flex items-start text-gray-800\">\n                      <span className=\"font-bold text-gray-900 mr-2 min-w-[80px]\">Time:</span>\n                      60 Seconds with our AI Store Creator.\n                   </li>\n                   <li className=\"flex items-start text-gray-800\">\n                      <span className=\"font-bold text-gray-900 mr-2 min-w-[80px]\">Payments:</span>\n                      Cash on Delivery (COD) + WhatsApp Checkout instantly.\n                   </li>\n                   <li className=\"flex items-start text-gray-800\">\n                      <span className=\"font-bold text-gray-900 mr-2 min-w-[80px]\">Result:</span>\n                      Instant access to our directory traffic.\n                   </li>\n                </ul>\n             </div>\n          </div>\n        </div>\n      </div>\n\n      {/* SOLUTION: The Shift */}\n      <div className=\"py-24 bg-white\">\n         <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center\">\n               <div>\n                  <h2 className=\"text-4xl font-extrabold text-gray-900 mb-6\">\n                     Built for Profit. <br/>Built for <span className=\"text-trini-red underline decoration-4 decoration-yellow-400\">Trinidadians.</span>\n                  </h2>\n                  <p className=\"text-lg text-gray-600 mb-6\">\n                     We don't just give you a website. We give you a traffic engine. By joining TriniBuild, you tap into a network of thousands of local buyers searching for products right now.\n                  </p>\n                  <ul className=\"space-y-4\">\n                     {[\n                        \"AI-Generated Product Listings (Upload a photo, we write the copy)\",\n                        \"WhatsApp Checkout with Automated Invoicing\",\n                        \"Integrated Delivery Network (TriniBuild Go)\",\n                        \"Cash on Delivery Management System\"\n                     ].map((item, i) => (\n                        <li key={i} className=\"flex items-center text-gray-800 font-medium\">\n                           <div className=\"bg-green-100 p-1 rounded-full mr-3\">\n                              <Check className=\"h-4 w-4 text-green-600\" />\n                           </div>\n                           {item}\n                        </li>\n                     ))}\n                  </ul>\n                  <div className=\"mt-10\">\n                     <Link to=\"/create-store\" className=\"text-trini-red font-bold text-lg flex items-center hover:underline\">\n                        Start building for free <ArrowRight className=\"ml-2 h-5 w-5\" />\n                     </Link>\n                  </div>\n               </div>\n               <div className=\"relative\">\n                  <div className=\"absolute -inset-4 bg-gradient-to-r from-trini-red to-yellow-500 rounded-full opacity-20 blur-3xl animate-pulse\"></div>\n                  <img src=\"https://images.unsplash.com/photo-1607082348824-0a96f2a4b9da?q=80&w=2070&auto=format&fit=crop\" alt=\"Dashboard\" className=\"relative rounded-2xl shadow-2xl border border-gray-100\" />\n               </div>\n            </div>\n         </div>\n      </div>\n\n      {/* PRICING TEASER */}\n      <div className=\"bg-trini-black text-white py-20 text-center\">\n         <div className=\"max-w-4xl mx-auto px-4\">\n            <h2 className=\"text-3xl font-bold mb-6\">Our Ascension Model</h2>\n            <p className=\"text-gray-400 mb-8 text-lg\">\n               We are a for-profit brand, but we believe entry should be free. <br/>\n               Start with the <strong className=\"text-white\">Community Plan</strong>. Ascend to <strong className=\"text-white\">Growth</strong> only when you have too many sales to handle.\n            </p>\n            <Link to=\"/pricing\" className=\"inline-block bg-white text-trini-black font-bold px-8 py-3 rounded-full hover:bg-gray-200 transition-colors\">\n               View the Ecosystem Plans\n            </Link>\n         </div>\n      </div>\n\n      {/* FINAL CTA */}\n      <div className=\"py-20 text-center bg-gray-50\">\n         <h2 className=\"text-3xl font-bold text-gray-900 mb-6\">Don't let the banks win.</h2>\n         <p className=\"text-gray-600 mb-8\">Claim your spot in the digital economy today.</p>\n         <Link to=\"/create-store\" className=\"inline-block bg-trini-red text-white px-12 py-5 rounded-full font-extrabold text-xl hover:scale-105 transition-transform shadow-2xl\">\n            Claim Your Free Store Now\n         </Link>\n         <p className=\"mt-4 text-xs text-gray-500 font-bold uppercase\">No Credit Card Required \u2022 10 Free Listings</p>\n      </div>\n    </div>\n  );\n};\n",
  "pages/landing/RidesLanding.tsx": "import React from 'react';\nimport { ArrowRight, Car, Shield, Clock, DollarSign, Play } from 'lucide-react';\nimport { Link } from 'react-router-dom';\n\nexport const RidesLanding: React.FC = () => {\n  return (\n    <div className=\"min-h-screen bg-white font-sans\">\n      {/* HERO */}\n      <div className=\"relative bg-trini-black text-white h-[90vh] flex items-center overflow-hidden\">\n         {/* Video Background Placeholder */}\n         <div className=\"absolute inset-0 z-0 opacity-40\">\n            <img src=\"https://images.unsplash.com/photo-1449965408869-eaa3f722e40d?q=80&w=2070&auto=format&fit=crop\" className=\"w-full h-full object-cover\" alt=\"Driving\" />\n         </div>\n         <div className=\"absolute inset-0 bg-gradient-to-r from-black via-black/80 to-transparent z-10\"></div>\n         \n         <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-20 w-full\">\n            <div className=\"max-w-2xl\">\n               <h1 className=\"text-5xl md:text-7xl font-extrabold mb-6 leading-tight\">\n                  Drive on <br/><span className=\"text-yellow-500\">Your Terms.</span>\n               </h1>\n               <p className=\"text-xl text-gray-300 mb-10\">\n                  Whether you have a car, a van, or a bike. Turn your vehicle into a revenue machine with TriniBuild Go. The lowest commissions in the Caribbean.\n               </p>\n               <div className=\"flex flex-col sm:flex-row gap-4\">\n                  <Link to=\"/drive/signup\" className=\"bg-yellow-500 text-black px-8 py-4 rounded-full font-bold text-lg hover:bg-yellow-400 transition-colors shadow-lg flex items-center justify-center\">\n                     Start Driving <Car className=\"ml-2 h-5 w-5\" />\n                  </Link>\n                  <Link to=\"/rides\" className=\"bg-transparent border-2 border-white text-white px-8 py-4 rounded-full font-bold text-lg hover:bg-white hover:text-black transition-colors flex items-center justify-center\">\n                     Book a Ride\n                  </Link>\n               </div>\n            </div>\n         </div>\n      </div>\n\n      {/* VIDEO SALES LETTER SECTION */}\n      <div className=\"bg-yellow-50 py-20\">\n         <div className=\"max-w-5xl mx-auto px-4\">\n            <div className=\"bg-white rounded-2xl shadow-2xl overflow-hidden border border-gray-200 flex flex-col md:flex-row\">\n               <div className=\"md:w-1/2 bg-gray-100 relative group cursor-pointer\">\n                  <img src=\"https://images.unsplash.com/photo-1617788138017-80ad40651399?q=80&w=1000&auto=format&fit=crop\" className=\"w-full h-full object-cover\" alt=\"Driver Video\" />\n                  <div className=\"absolute inset-0 flex items-center justify-center bg-black/30 group-hover:bg-black/10 transition-all\">\n                     <div className=\"bg-white rounded-full p-4 shadow-lg\">\n                        <Play className=\"h-8 w-8 text-trini-black ml-1\" />\n                     </div>\n                  </div>\n               </div>\n               <div className=\"md:w-1/2 p-10 flex flex-col justify-center\">\n                  <h2 className=\"text-3xl font-bold text-gray-900 mb-4\">Why drive with us?</h2>\n                  <p className=\"text-gray-600 mb-6\">\n                     Other apps take 25-30% of your hard-earned money. TriniBuild Go is built differently. We believe the person behind the wheel deserves the lion's share.\n                  </p>\n                  <ul className=\"space-y-4 mb-8\">\n                     <li className=\"flex items-center font-bold text-gray-800\">\n                        <DollarSign className=\"h-5 w-5 text-green-600 mr-3\" /> Keep 85% of every fare\n                     </li>\n                     <li className=\"flex items-center font-bold text-gray-800\">\n                        <Clock className=\"h-5 w-5 text-blue-600 mr-3\" /> Instant Payouts (Daily)\n                     </li>\n                     <li className=\"flex items-center font-bold text-gray-800\">\n                        <Shield className=\"h-5 w-5 text-red-600 mr-3\" /> Verified Rider ID System\n                     </li>\n                  </ul>\n                  <Link to=\"/drive/signup\" className=\"text-yellow-600 font-bold text-lg hover:underline flex items-center\">\n                     See Driver Requirements <ArrowRight className=\"ml-2 h-5 w-5\" />\n                  </Link>\n               </div>\n            </div>\n         </div>\n      </div>\n\n      {/* FOR RIDERS */}\n      <div className=\"py-24 bg-white text-center\">\n         <div className=\"max-w-4xl mx-auto px-4\">\n            <h2 className=\"text-4xl font-extrabold text-gray-900 mb-6\">Need a lift?</h2>\n            <p className=\"text-xl text-gray-500 mb-10\">\n               From Port of Spain to Point Fortin. Safe, tracked, and reliable transport at the tap of a button.\n            </p>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n               <div className=\"p-6 rounded-xl bg-gray-50 hover:bg-white hover:shadow-xl transition-all border border-gray-100\">\n                  <div className=\"bg-yellow-100 w-14 h-14 rounded-full flex items-center justify-center mx-auto mb-4 text-yellow-700\">\n                     <Car className=\"h-8 w-8\" />\n                  </div>\n                  <h3 className=\"font-bold text-lg mb-2\">Standard Rides</h3>\n                  <p className=\"text-sm text-gray-500\">Affordable daily commute.</p>\n               </div>\n               <div className=\"p-6 rounded-xl bg-gray-50 hover:bg-white hover:shadow-xl transition-all border border-gray-100\">\n                  <div className=\"bg-blue-100 w-14 h-14 rounded-full flex items-center justify-center mx-auto mb-4 text-blue-700\">\n                     <Shield className=\"h-8 w-8\" />\n                  </div>\n                  <h3 className=\"font-bold text-lg mb-2\">H-Taxi Verified</h3>\n                  <p className=\"text-sm text-gray-500\">Registered H-cars only.</p>\n               </div>\n               <div className=\"p-6 rounded-xl bg-gray-50 hover:bg-white hover:shadow-xl transition-all border border-gray-100\">\n                  <div className=\"bg-green-100 w-14 h-14 rounded-full flex items-center justify-center mx-auto mb-4 text-green-700\">\n                     <DollarSign className=\"h-8 w-8\" />\n                  </div>\n                  <h3 className=\"font-bold text-lg mb-2\">Cash or Card</h3>\n                  <p className=\"text-sm text-gray-500\">Pay how you want.</p>\n               </div>\n            </div>\n            <div className=\"mt-12\">\n               <Link to=\"/rides\" className=\"bg-gray-900 text-white px-10 py-4 rounded-full font-bold hover:bg-gray-800 shadow-lg\">\n                  Book Now\n               </Link>\n            </div>\n         </div>\n      </div>\n    </div>\n  );\n};\n",
  "pages/landing/TicketsLanding.tsx": "\nimport React from 'react';\nimport { ArrowRight, ShieldCheck, Zap, DollarSign, Server, Lock, X, Check, Users, TrendingUp, Brain } from 'lucide-react';\nimport { Link } from 'react-router-dom';\n\nexport const TicketsLanding: React.FC = () => {\n  return (\n    <div className=\"min-h-screen bg-black text-white font-sans selection:bg-trini-red selection:text-white\">\n      \n      {/* SECTION 1: THE HOOK (Above the Fold) */}\n      <div className=\"relative h-screen max-h-[900px] flex items-center justify-center overflow-hidden\">\n        {/* Background Effects */}\n        <div className=\"absolute inset-0 z-0\">\n           <div className=\"absolute inset-0 bg-gradient-to-b from-black/70 via-black/80 to-black z-10\"></div>\n           <img \n             src=\"https://images.unsplash.com/photo-1492684223066-81342ee5ff30?q=80&w=2070&auto=format&fit=crop\" \n             alt=\"Concert Crowd\" \n             className=\"w-full h-full object-cover opacity-50\"\n           />\n        </div>\n\n        <div className=\"relative z-20 max-w-5xl mx-auto px-4 text-center animate-in fade-in slide-in-from-bottom-8 duration-700\">\n           <div className=\"inline-flex items-center gap-2 border border-purple-500/50 bg-purple-500/10 px-4 py-1.5 rounded-full text-purple-400 text-xs font-bold uppercase tracking-widest mb-8\">\n              <Brain className=\"h-3 w-3\" />\n              The Caribbean's First AI-Powered Platform\n           </div>\n           \n           <h1 className=\"text-5xl md:text-7xl font-extrabold tracking-tight mb-6 leading-tight\">\n              Did their site crash again? <br/>\n              <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-trini-red to-orange-600\">We stay online.</span>\n           </h1>\n           \n           <p className=\"text-xl text-gray-300 mb-10 max-w-2xl mx-auto leading-relaxed\">\n              Stop losing sales to \"Server Overload\" screens. TriniBuild E-Tick uses <strong>advanced AI infrastructure</strong> to handle 100,000+ users instantly. \n              <strong> Zero crashes. Instant payouts.</strong>\n           </p>\n           \n           <div className=\"flex flex-col sm:flex-row items-center justify-center gap-4\">\n              <Link \n                to=\"/tickets/onboarding\" \n                className=\"w-full sm:w-auto bg-trini-red text-white px-8 py-4 rounded-full font-extrabold text-lg hover:bg-red-600 hover:scale-105 transition-all shadow-[0_0_40px_rgba(206,17,38,0.4)] flex items-center justify-center\"\n              >\n                Switch & Lock 6% Rate <ArrowRight className=\"ml-2 h-5 w-5\" />\n              </Link>\n              <Link \n                to=\"/tickets\" \n                className=\"w-full sm:w-auto bg-transparent border border-white/20 text-white px-8 py-4 rounded-full font-bold text-lg hover:bg-white/10 transition-all\"\n              >\n                View Demo Event\n              </Link>\n           </div>\n           <p className=\"mt-6 text-xs text-gray-500 uppercase font-bold tracking-widest\">\n              Trusted by 50+ Promoters \u2022 24/7 Local Support\n           </p>\n        </div>\n      </div>\n\n      {/* SECTION 2: THE PAIN (Comparison) */}\n      <div className=\"py-24 bg-gray-900 border-y border-gray-800\">\n         <div className=\"max-w-6xl mx-auto px-4\">\n            <div className=\"text-center mb-16\">\n               <h2 className=\"text-3xl md:text-4xl font-bold mb-4\">Why Promoters Are Leaving The Others.</h2>\n               <p className=\"text-gray-400\">The industry standard isn't good enough anymore.</p>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-12 items-center\">\n               {/* The Old Way */}\n               <div className=\"bg-red-900/10 border border-red-900/30 rounded-2xl p-8 opacity-70 hover:opacity-100 transition-opacity\">\n                  <h3 className=\"text-red-500 font-bold text-xl mb-6 flex items-center uppercase tracking-wide\">\n                     <X className=\"h-6 w-6 mr-2\" /> The \"Other\" Platforms\n                  </h3>\n                  <ul className=\"space-y-6\">\n                     <li className=\"flex items-start text-gray-400\">\n                        <div className=\"bg-red-900/20 p-1 rounded mr-3 mt-1\"><X className=\"h-4 w-4 text-red-500\" /></div>\n                        <div>\n                           <strong className=\"block text-white\">Site Crashes on Launch</strong>\n                           Users get frustrated, refresh the page, and give up. You lose momentum.\n                        </div>\n                     </li>\n                     <li className=\"flex items-start text-gray-400\">\n                        <div className=\"bg-red-900/20 p-1 rounded mr-3 mt-1\"><X className=\"h-4 w-4 text-red-500\" /></div>\n                        <div>\n                           <strong className=\"block text-white\">\"Weekly\" Payouts</strong>\n                           They hold your money for weeks. You need cash to pay vendors <em>now</em>.\n                        </div>\n                     </li>\n                     <li className=\"flex items-start text-gray-400\">\n                        <div className=\"bg-red-900/20 p-1 rounded mr-3 mt-1\"><X className=\"h-4 w-4 text-red-500\" /></div>\n                        <div>\n                           <strong className=\"block text-white\">Static QR Codes</strong>\n                           Screenshots get shared. One ticket enters 5 people. You lose revenue.\n                        </div>\n                     </li>\n                  </ul>\n               </div>\n\n               {/* The TriniBuild Way */}\n               <div className=\"bg-green-900/10 border border-green-500/30 rounded-2xl p-8 relative overflow-hidden shadow-2xl transform hover:-translate-y-2 transition-transform duration-300\">\n                  <div className=\"absolute top-0 right-0 bg-green-500 text-black text-xs font-bold px-3 py-1 rounded-bl-lg\">\n                     SUPERIOR TECH\n                  </div>\n                  <h3 className=\"text-green-400 font-bold text-xl mb-6 flex items-center uppercase tracking-wide\">\n                     <Check className=\"h-6 w-6 mr-2\" /> The TriniBuild E-Tick\n                  </h3>\n                  <ul className=\"space-y-6\">\n                     <li className=\"flex items-start text-gray-300\">\n                        <div className=\"bg-green-500/20 p-1 rounded mr-3 mt-1\"><Server className=\"h-4 w-4 text-green-400\" /></div>\n                        <div>\n                           <strong className=\"block text-white\">Google Cloud Scaling</strong>\n                           Auto-scales to handle 100k users in seconds. We never go down.\n                        </div>\n                     </li>\n                     <li className=\"flex items-start text-gray-300\">\n                        <div className=\"bg-green-500/20 p-1 rounded mr-3 mt-1\"><DollarSign className=\"h-4 w-4 text-green-400\" /></div>\n                        <div>\n                           <strong className=\"block text-white\">Daily Instant Payouts</strong>\n                           Request your funds anytime. Wired to Republic/Scotia/FCB same-day.\n                        </div>\n                     </li>\n                     <li className=\"flex items-start text-gray-300\">\n                        <div className=\"bg-green-500/20 p-1 rounded mr-3 mt-1\"><Lock className=\"h-4 w-4 text-green-400\" /></div>\n                        <div>\n                           <strong className=\"block text-white\">Dynamic AI Security</strong>\n                           QR codes rotate every 60s. Device fingerprinting stops scalper bots.\n                        </div>\n                     </li>\n                  </ul>\n               </div>\n            </div>\n         </div>\n      </div>\n\n      {/* SECTION 3: FEATURES GRID */}\n      <div className=\"py-24 bg-black\">\n         <div className=\"max-w-7xl mx-auto px-4\">\n            <div className=\"text-center max-w-3xl mx-auto mb-20\">\n               <h2 className=\"text-3xl md:text-5xl font-extrabold mb-6\">Infusing AI into <br/><span className=\"text-trini-red\">Caribbean Culture.</span></h2>\n               <p className=\"text-gray-400 text-lg\">\n                  We engineered AI specifically for our unique event landscape. From massive Carnivals to intimate workshops, our tech adapts to your vibe, all year round.\n               </p>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n               <div className=\"bg-gray-900 p-8 rounded-3xl border border-gray-800 hover:border-trini-red transition-colors group\">\n                  <div className=\"w-14 h-14 bg-gray-800 rounded-2xl flex items-center justify-center mb-6 group-hover:bg-trini-red transition-colors\">\n                     <Zap className=\"h-8 w-8 text-white\" />\n                  </div>\n                  <h3 className=\"text-xl font-bold mb-3 text-white\">Offline-First Scanning</h3>\n                  <p className=\"text-gray-400 leading-relaxed\">\n                     Internet bad in Chaguaramas? No problem. Our scanners sync locally so the line keeps moving even without data.\n                  </p>\n               </div>\n               <div className=\"bg-gray-900 p-8 rounded-3xl border border-gray-800 hover:border-trini-red transition-colors group\">\n                  <div className=\"w-14 h-14 bg-gray-800 rounded-2xl flex items-center justify-center mb-6 group-hover:bg-trini-red transition-colors\">\n                     <Users className=\"h-8 w-8 text-white\" />\n                  </div>\n                  <h3 className=\"text-xl font-bold mb-3 text-white\">Committee Links</h3>\n                  <p className=\"text-gray-400 leading-relaxed\">\n                     Ditch the physical ticket books. Give committee members unique links and track their sales automatically.\n                  </p>\n               </div>\n               <div className=\"bg-gray-900 p-8 rounded-3xl border border-gray-800 hover:border-trini-red transition-colors group\">\n                  <div className=\"w-14 h-14 bg-gray-800 rounded-2xl flex items-center justify-center mb-6 group-hover:bg-trini-red transition-colors\">\n                     <TrendingUp className=\"h-8 w-8 text-white\" />\n                  </div>\n                  <h3 className=\"text-xl font-bold mb-3 text-white\">Predictive Analytics</h3>\n                  <p className=\"text-gray-400 leading-relaxed\">\n                     Our AI predicts Male/Female ratios and peak entry times, helping you staff your gates and bars perfectly.\n                  </p>\n               </div>\n            </div>\n         </div>\n      </div>\n\n      {/* SECTION 4: SOCIAL PROOF / TRUST */}\n      <div className=\"py-20 border-t border-gray-900 bg-gradient-to-b from-black to-gray-900\">\n         <div className=\"max-w-5xl mx-auto px-4 text-center\">\n            <h2 className=\"text-2xl font-bold text-gray-500 mb-10 uppercase tracking-widest\">Secure Payments Supported By</h2>\n            <div className=\"flex flex-wrap justify-center gap-8 md:gap-16 opacity-60 grayscale hover:grayscale-0 transition-all duration-500\">\n               {/* Mock Logos for Trust */}\n               <div className=\"flex items-center gap-2 text-xl font-bold\"><ShieldCheck className=\"h-8 w-8\" /> VISA Secure</div>\n               <div className=\"flex items-center gap-2 text-xl font-bold\"><Lock className=\"h-8 w-8\" /> MasterCard ID</div>\n               <div className=\"flex items-center gap-2 text-xl font-bold\"><DollarSign className=\"h-8 w-8\" /> WiPay</div>\n               <div className=\"flex items-center gap-2 text-xl font-bold\"><Server className=\"h-8 w-8\" /> PayPal</div>\n            </div>\n         </div>\n      </div>\n\n      {/* SECTION 5: FINAL CTA (The Offer) */}\n      <div className=\"relative py-24 overflow-hidden\">\n         <div className=\"absolute inset-0 bg-trini-red/10\"></div>\n         <div className=\"max-w-4xl mx-auto px-4 text-center relative z-10\">\n            <h2 className=\"text-4xl md:text-6xl font-extrabold text-white mb-6\">\n               Stop paying 10% fees.\n            </h2>\n            <p className=\"text-xl text-gray-300 mb-10\">\n               Join the TriniBuild Founder's Club today. Lock in a <strong>6% fee rate</strong> for 1 year. <br/>\n               Not just for Carnival\u2014use it for every event you host.\n            </p>\n            <Link \n               to=\"/tickets/onboarding\" \n               className=\"inline-flex items-center bg-white text-black px-12 py-5 rounded-full font-extrabold text-xl hover:bg-gray-200 transition-all transform hover:scale-105 shadow-2xl\"\n            >\n               Lock My 6% Rate <ArrowRight className=\"ml-3 h-6 w-6\" />\n            </Link>\n            <p className=\"mt-6 text-sm text-gray-500\">\n               No setup fees. Cancel anytime. \n            </p>\n         </div>\n      </div>\n\n    </div>\n  );\n};\n",
  "scripts/bundle_project.py": "import os\nimport json\n\n# Configuration\nPROJECT_ROOT = r\"c:\\Users\\RAY\\OneDrive\\Documents\\Trinibuild\"\nOUTPUT_FILE = r\"c:\\Users\\RAY\\OneDrive\\Documents\\Trinibuild\\trinibuild_project_bundle.json\"\n\n# Directories to ignore\nIGNORE_DIRS = {\n    'node_modules', '.git', '.vercel', '.vite', 'dist', 'build', '__pycache__', \n    'coverage', '.idea', '.vscode', 'trinibuild-google-ai-studio-', 'temp_app',\n    'TRINI ANTIGRAVITY' # Looks like a backup or nested folder\n}\n\n# File extensions to include (source code and config)\nINCLUDE_EXTENSIONS = {\n    '.js', '.jsx', '.ts', '.tsx', '.css', '.html', '.json', '.md', '.py', '.txt', '.sql', '.yml', '.yaml'\n}\n\n# Files to specifically ignore\nIGNORE_FILES = {\n    'package-lock.json', 'yarn.lock', 'pnpm-lock.yaml', 'trinibuild_project_bundle.json', 'session.json'\n}\n\ndef is_text_file(filename):\n    return any(filename.endswith(ext) for ext in INCLUDE_EXTENSIONS)\n\ndef bundle_project():\n    project_data = {}\n    \n    print(f\"Scanning project at {PROJECT_ROOT}...\")\n\n    for root, dirs, files in os.walk(PROJECT_ROOT):\n        # Modify dirs in-place to skip ignored directories\n        dirs[:] = [d for d in dirs if d not in IGNORE_DIRS]\n        \n        for file in files:\n            if file in IGNORE_FILES:\n                continue\n                \n            if not is_text_file(file):\n                continue\n\n            full_path = os.path.join(root, file)\n            rel_path = os.path.relpath(full_path, PROJECT_ROOT)\n            \n            # Normalize path separators to forward slashes for consistency\n            rel_path = rel_path.replace('\\\\', '/')\n\n            try:\n                with open(full_path, 'r', encoding='utf-8') as f:\n                    content = f.read()\n                    project_data[rel_path] = content\n            except Exception as e:\n                print(f\"Skipping {rel_path}: {e}\")\n\n    print(f\"Bundled {len(project_data)} files.\")\n    \n    with open(OUTPUT_FILE, 'w', encoding='utf-8') as f:\n        json.dump(project_data, f, indent=2)\n        \n    print(f\"Project bundle saved to {OUTPUT_FILE}\")\n\nif __name__ == \"__main__\":\n    bundle_project()\n",
  "scripts/manual-login.js": "import puppeteer from 'puppeteer';\nimport fs from 'fs';\nimport readline from 'readline';\n\nconst SESSION_FILE = 'session.json';\n\nconst rl = readline.createInterface({\n    input: process.stdin,\n    output: process.stdout\n});\n\n(async () => {\n    const browser = await puppeteer.launch({\n        headless: false,\n        defaultViewport: null,\n        args: ['--start-maximized']\n    });\n\n    const page = await browser.newPage();\n\n    const argUrl = process.argv[2];\n\n    const processUrl = async (url) => {\n        if (!url) {\n            console.log('No URL provided. Exiting.');\n            await browser.close();\n            rl.close();\n            return;\n        }\n\n        if (!url.startsWith('http')) {\n            url = 'https://' + url;\n        }\n\n        console.log(`Navigating to ${url}...`);\n        await page.goto(url, { waitUntil: 'networkidle2' });\n\n        console.log('Please log in manually in the browser window.');\n        console.log('After you have successfully logged in, press ENTER in this terminal to save the session.');\n\n        rl.question('', async () => {\n            console.log('Saving session...');\n\n            // Get cookies\n            const cookies = await page.cookies();\n\n            // Get localStorage\n            const localStorageData = await page.evaluate(() => {\n                const json = {};\n                for (let i = 0; i < localStorage.length; i++) {\n                    const key = localStorage.key(i);\n                    json[key] = localStorage.getItem(key);\n                }\n                return json;\n            });\n\n            const session = {\n                cookies,\n                localStorage: localStorageData,\n                url: page.url() // Save the current URL as a reference\n            };\n\n            fs.writeFileSync(SESSION_FILE, JSON.stringify(session, null, 2));\n            console.log(`Session saved to ${SESSION_FILE}`);\n\n            await browser.close();\n            rl.close();\n        });\n    };\n\n    if (argUrl) {\n        await processUrl(argUrl);\n    } else {\n        // Ask user for URL\n        rl.question('Enter the URL to log in to: ', processUrl);\n    }\n})();\n",
  "scripts/test-session.js": "import puppeteer from 'puppeteer';\nimport fs from 'fs';\n\nconst SESSION_FILE = 'session.json';\n\n(async () => {\n    if (!fs.existsSync(SESSION_FILE)) {\n        console.error(`Session file ${SESSION_FILE} not found. Run manual-login.js first.`);\n        process.exit(1);\n    }\n\n    const session = JSON.parse(fs.readFileSync(SESSION_FILE, 'utf8'));\n\n    const browser = await puppeteer.launch({\n        headless: false,\n        defaultViewport: null,\n        args: ['--start-maximized']\n    });\n\n    const page = await browser.newPage();\n\n    // Set cookies\n    if (session.cookies && session.cookies.length > 0) {\n        console.log('Restoring cookies...');\n        await page.setCookie(...session.cookies);\n    }\n\n    // Navigate to the target URL (or the one saved in session)\n    const url = session.url || 'https://google.com'; // Default fallback\n    console.log(`Navigating to ${url}...`);\n\n    // We need to navigate to the domain before setting localStorage\n    // So we go to the URL first, but we might need to reload to apply localStorage if it's critical for rendering\n    // Alternatively, we can go to the domain, set localStorage, and then reload.\n\n    await page.goto(url, { waitUntil: 'networkidle2' });\n\n    // Set localStorage\n    if (session.localStorage) {\n        console.log('Restoring localStorage...');\n        await page.evaluate((data) => {\n            for (const key in data) {\n                localStorage.setItem(key, data[key]);\n            }\n        }, session.localStorage);\n\n        // Reload to ensure localStorage is picked up by the app\n        console.log('Reloading page to apply localStorage...');\n        await page.reload({ waitUntil: 'networkidle2' });\n    }\n\n    console.log('Session restored. Browser will remain open for verification.');\n\n    // Keep browser open for a bit or until closed manually\n    // await browser.close(); \n})();\n",
  "services/adService.ts": "\n// services/adService.ts\n\nexport interface AdCampaign {\n  id: string;\n  clientName: string;\n  videoUrl: string;\n  targetUrl: string;\n  placements: ('home' | 'marketplace' | 'rides' | 'jobs' | 'tickets' | 'real_estate')[];\n  isPaidClient: boolean; // \"Boost\" feature for paid customers\n  active: boolean;\n  views: number;\n  clicks: number;\n}\n\nconst CAMPAIGNS_KEY = 'trinibuild_ad_campaigns';\n\nconst DEFAULT_CAMPAIGNS: AdCampaign[] = [\n  {\n    id: 'c1',\n    clientName: 'Massy Motors',\n    videoUrl: 'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4',\n    targetUrl: '/rides',\n    placements: ['home', 'rides'],\n    isPaidClient: true,\n    active: true,\n    views: 1250,\n    clicks: 45\n  },\n  {\n    id: 'c2',\n    clientName: 'Republic Bank',\n    videoUrl: 'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4',\n    targetUrl: '/real-estate',\n    placements: ['home', 'real_estate', 'jobs'],\n    isPaidClient: true,\n    active: true,\n    views: 980,\n    clicks: 32\n  },\n  {\n    id: 'c3',\n    clientName: 'KFC Trinidad',\n    videoUrl: 'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerBlazes.mp4',\n    targetUrl: '/directory',\n    placements: ['marketplace', 'tickets'],\n    isPaidClient: false,\n    active: true,\n    views: 450,\n    clicks: 12\n  }\n];\n\n// Initialize campaigns if empty\nif (!localStorage.getItem(CAMPAIGNS_KEY)) {\n  localStorage.setItem(CAMPAIGNS_KEY, JSON.stringify(DEFAULT_CAMPAIGNS));\n}\n\nexport const getCampaigns = (): AdCampaign[] => {\n  const stored = localStorage.getItem(CAMPAIGNS_KEY);\n  return stored ? JSON.parse(stored) : DEFAULT_CAMPAIGNS;\n};\n\nexport const saveCampaign = (campaign: AdCampaign): void => {\n  const campaigns = getCampaigns();\n  const index = campaigns.findIndex(c => c.id === campaign.id);\n  if (index >= 0) {\n    campaigns[index] = campaign;\n  } else {\n    campaigns.push(campaign);\n  }\n  localStorage.setItem(CAMPAIGNS_KEY, JSON.stringify(campaigns));\n};\n\nexport const deleteCampaign = (id: string): void => {\n  const campaigns = getCampaigns().filter(c => c.id !== id);\n  localStorage.setItem(CAMPAIGNS_KEY, JSON.stringify(campaigns));\n};\n\nexport const getAdsForPage = (page: string): AdCampaign[] => {\n  const campaigns = getCampaigns();\n\n  // Filter by page placement and active status\n  const relevantAds = campaigns.filter(c =>\n    c.active && c.placements.includes(page as any)\n  );\n\n  // Sort: Paid Clients First (Traffic Boost), then random shuffle for fairness among same tier\n  // For this demo, we'll just sort by isPaidClient\n  return relevantAds.sort((a, b) => {\n    if (a.isPaidClient && !b.isPaidClient) return -1;\n    if (!a.isPaidClient && b.isPaidClient) return 1;\n    return 0;\n  });\n};\n\nexport const recordImpression = (id: string) => {\n  const campaigns = getCampaigns();\n  const campaign = campaigns.find(c => c.id === id);\n  if (campaign) {\n    campaign.views += 1;\n    saveCampaign(campaign);\n  }\n};\n\nexport const recordClick = (id: string) => {\n  const campaigns = getCampaigns();\n  const campaign = campaigns.find(c => c.id === id);\n  if (campaign) {\n    campaign.clicks += 1;\n    saveCampaign(campaign);\n  }\n};\n\n// Legacy support for dashboard stats\nexport const getTrafficStats = () => {\n  const campaigns = getCampaigns();\n  const totalViews = campaigns.reduce((sum, c) => sum + c.views, 0);\n  const totalClicks = campaigns.reduce((sum, c) => sum + c.clicks, 0);\n\n  return {\n    totalVisits: totalViews * 1.5, // Mock multiplier\n    adImpressions: totalViews,\n    videoViews: totalViews,\n    ctr: totalViews > 0 ? ((totalClicks / totalViews) * 100).toFixed(1) : 0,\n    sources: [\n      { name: 'Organic Search', value: 45 },\n      { name: 'Direct', value: 25 },\n      { name: 'Social', value: 20 },\n      { name: 'Referral', value: 10 },\n    ],\n    distribution: [\n      { section: 'Directory', percentage: 40, revenue: 1200 },\n      { section: 'Marketplace', percentage: 35, revenue: 2400 },\n      { section: 'Jobs', percentage: 15, revenue: 450 },\n      { section: 'Blog', percentage: 10, revenue: 120 },\n    ]\n  };\n};\n\n// Legacy types for compatibility if needed elsewhere\nexport interface AdConfig {\n  topVideo: { url: string; active: boolean; title: string; link: string; };\n  midVideo: { url: string; active: boolean; title: string; link: string; };\n  adSenseEnabled: boolean;\n  featuredDestination: { name: string; url: string; active: boolean; };\n}\nexport const getAdConfig = (): AdConfig => {\n  // Return a dummy config to satisfy legacy calls in AdminDashboard until we fully migrate\n  return {\n    topVideo: { url: '', active: false, title: '', link: '' },\n    midVideo: { url: '', active: false, title: '', link: '' },\n    adSenseEnabled: true,\n    featuredDestination: { name: '', url: '', active: false }\n  };\n};\nexport const saveAdConfig = (config: AdConfig) => { };\n",
  "services/ai.ts": "import { supabase } from './supabaseClient';\n\nconst AI_SERVER_URL = import.meta.env.VITE_AI_SERVER_URL || 'http://localhost:8000';\n\nexport interface AIResponse {\n    content: string;\n    model_used: string;\n    processing_time_ms?: number;\n}\n\nexport interface JobLetterRequest {\n    applicant_name: string;\n    position: string;\n    company_name: string;\n    skills: string[];\n    experience_years: number;\n    tone: 'professional' | 'enthusiastic' | 'confident';\n}\n\nexport interface ListingDescriptionRequest {\n    title: string;\n    category: string;\n    features: string[];\n    condition: string;\n    price?: number;\n    tone: 'persuasive' | 'neutral' | 'descriptive' | 'urgent';\n}\n\nexport interface ChatbotRequest {\n    message: string;\n    context?: string;\n    persona?: string;\n    system_prompt?: string;\n}\n\nexport const aiService = {\n    async generateJobLetter(data: JobLetterRequest): Promise<AIResponse> {\n        const response = await fetch(`${AI_SERVER_URL}/generate-job-letter`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(data),\n        });\n\n        if (!response.ok) {\n            throw new Error('Failed to generate job letter');\n        }\n\n        return response.json();\n    },\n\n    async generateListingDescription(data: ListingDescriptionRequest): Promise<AIResponse> {\n        const response = await fetch(`${AI_SERVER_URL}/generate-listing-description`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(data),\n        });\n\n        if (!response.ok) {\n            throw new Error('Failed to generate listing description');\n        }\n\n        return response.json();\n    },\n\n    async chatWithBot(data: ChatbotRequest): Promise<AIResponse> {\n        const response = await fetch(`${AI_SERVER_URL}/chatbot-reply`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(data),\n        });\n\n        if (!response.ok) {\n            throw new Error('Failed to get chatbot reply');\n        }\n\n        return response.json();\n    },\n\n    async getStoreBotSettings(storeId: string) {\n        const { data, error } = await supabase\n            .from('stores')\n            .select('bot_name, bot_persona, bot_system_prompt')\n            .eq('id', storeId)\n            .single();\n\n        if (error) return null;\n        return data;\n    },\n\n    async generateText(prompt: string, system_prompt?: string, model?: string): Promise<string> {\n        const response = await fetch(`${AI_SERVER_URL}/generate`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({ prompt, system_prompt, model }),\n        });\n\n        if (!response.ok) {\n            throw new Error('Failed to generate text');\n        }\n\n        const data = await response.json();\n        return data.content;\n    }\n};\n",
  "services/apiClient.ts": "import axios, { AxiosInstance, AxiosRequestConfig, AxiosResponse } from 'axios';\n\n// Define the base URL for the API\nconst API_URL = import.meta.env.VITE_API_URL || 'http://localhost:5000/api';\n\n// Create an Axios instance with default configuration\nconst apiClient: AxiosInstance = axios.create({\n    baseURL: API_URL,\n    headers: {\n        'Content-Type': 'application/json',\n    },\n    timeout: 10000, // 10 seconds timeout\n});\n\n// Request interceptor to add the auth token to headers\napiClient.interceptors.request.use(\n    (config) => {\n        const token = localStorage.getItem('token');\n        if (token) {\n            config.headers.Authorization = `Bearer ${token}`;\n        }\n        return config;\n    },\n    (error) => {\n        return Promise.reject(error);\n    }\n);\n\n// Response interceptor to handle common errors (like 401 Unauthorized)\napiClient.interceptors.response.use(\n    (response: AxiosResponse) => response,\n    async (error) => {\n        const originalRequest = error.config;\n\n        // Handle 401 Unauthorized errors (token expired)\n        if (error.response?.status === 401 && !originalRequest._retry) {\n            originalRequest._retry = true;\n\n            // Here you would typically implement token refresh logic\n            // For now, we'll just clear the token and redirect to login\n            // localStorage.removeItem('token');\n            // window.location.href = '/auth';\n\n            return Promise.reject(error);\n        }\n\n        return Promise.reject(error);\n    }\n);\n\n// Generic GET request\nexport const get = async <T>(url: string, config?: AxiosRequestConfig): Promise<T> => {\n    const response = await apiClient.get<T>(url, config);\n    return response.data;\n};\n\n// Generic POST request\nexport const post = async <T>(url: string, data?: any, config?: AxiosRequestConfig): Promise<T> => {\n    const response = await apiClient.post<T>(url, data, config);\n    return response.data;\n};\n\n// Generic PUT request\nexport const put = async <T>(url: string, data?: any, config?: AxiosRequestConfig): Promise<T> => {\n    const response = await apiClient.put<T>(url, data, config);\n    return response.data;\n};\n\n// Generic DELETE request\nexport const del = async <T>(url: string, config?: AxiosRequestConfig): Promise<T> => {\n    const response = await apiClient.delete<T>(url, config);\n    return response.data;\n};\n\nexport default apiClient;\n",
  "services/authService.ts": "\nimport { supabase } from './supabaseClient';\n\nexport interface User {\n    id: string;\n    email: string;\n    firstName: string;\n    lastName: string;\n    role: string;\n    avatar_url?: string;\n}\n\nexport interface AuthResponse {\n    user: User | null;\n    token: string | null;\n    error?: string;\n}\n\nexport const authService = {\n    // Register a new user\n    register: async (userData: any): Promise<AuthResponse> => {\n        try {\n            const { data, error } = await supabase.auth.signUp({\n                email: userData.email,\n                password: userData.password,\n                options: {\n                    data: {\n                        full_name: `${userData.firstName} ${userData.lastName}`,\n                        role: 'user', // Default role\n                    },\n                },\n            });\n\n            if (error) throw error;\n\n            if (data.user) {\n                const user: User = {\n                    id: data.user.id,\n                    email: data.user.email!,\n                    firstName: userData.firstName,\n                    lastName: userData.lastName,\n                    role: 'user',\n                };\n\n                // Supabase handles session persistence automatically, \n                // but we keep this for compatibility with existing code if needed\n                localStorage.setItem('user', JSON.stringify(user));\n\n                return { user, token: data.session?.access_token || '' };\n            }\n            return { user: null, token: null, error: 'Registration failed' };\n\n        } catch (error: any) {\n            console.error(\"Registration Error:\", error);\n            return { user: null, token: null, error: error.message };\n        }\n    },\n\n    // Login an existing user\n    login: async (credentials: any): Promise<AuthResponse> => {\n        try {\n            const { data, error } = await supabase.auth.signInWithPassword({\n                email: credentials.email,\n                password: credentials.password,\n            });\n\n            if (error) throw error;\n\n            if (data.user) {\n                // Fetch additional profile data if needed\n                const { data: profile } = await supabase\n                    .from('profiles')\n                    .select('*')\n                    .eq('id', data.user.id)\n                    .single();\n\n                const fullName = profile?.full_name || data.user.user_metadata.full_name || '';\n                const [firstName, ...lastNameParts] = fullName.split(' ');\n\n                const user: User = {\n                    id: data.user.id,\n                    email: data.user.email!,\n                    firstName: firstName || '',\n                    lastName: lastNameParts.join(' ') || '',\n                    role: profile?.role || 'user',\n                    avatar_url: profile?.avatar_url\n                };\n\n                localStorage.setItem('user', JSON.stringify(user));\n                return { user, token: data.session?.access_token || '' };\n            }\n            return { user: null, token: null, error: 'Login failed' };\n\n        } catch (error: any) {\n            console.error(\"Login Error:\", error);\n            return { user: null, token: null, error: error.message };\n        }\n    },\n\n    // Logout the user\n    logout: async () => {\n        await supabase.auth.signOut();\n        localStorage.removeItem('user');\n        localStorage.removeItem('token'); // Clear legacy token if any\n        window.location.href = '/auth';\n    },\n\n    // Get current user from local storage (or Supabase session)\n    getCurrentUser: async (): Promise<User | null> => {\n        // First check memory/local storage for speed\n        const localUser = localStorage.getItem('user');\n        if (localUser) return JSON.parse(localUser);\n\n        // Fallback to checking active Supabase session\n        const { data: { session } } = await supabase.auth.getSession();\n        if (session?.user) {\n            const { data: profile } = await supabase\n                .from('profiles')\n                .select('*')\n                .eq('id', session.user.id)\n                .single();\n\n            const fullName = profile?.full_name || session.user.user_metadata.full_name || '';\n            const [firstName, ...lastNameParts] = fullName.split(' ');\n\n            const user: User = {\n                id: session.user.id,\n                email: session.user.email!,\n                firstName: firstName || '',\n                lastName: lastNameParts.join(' ') || '',\n                role: profile?.role || 'user',\n                avatar_url: profile?.avatar_url\n            };\n            localStorage.setItem('user', JSON.stringify(user));\n            return user;\n        }\n        return null;\n    },\n\n    // Check if user is authenticated\n    isAuthenticated: async (): Promise<boolean> => {\n        const { data: { session } } = await supabase.auth.getSession();\n        return !!session;\n    }\n};\n",
  "services/documentService.ts": "import { get } from './apiClient';\n\nexport interface DocumentRequest {\n    type: 'job_letter' | 'proof_of_income' | 'visa_letter' | 'invoice';\n    recipientName?: string;\n    recipientAddress?: string;\n    amount?: number;\n    date?: string;\n    details?: string;\n}\n\nexport const documentService = {\n    generateDocument: async (request: DocumentRequest): Promise<string> => {\n        // In a real app, this would call a backend to generate a PDF.\n        // For now, we simulate the generation delay and return a success message.\n        return new Promise((resolve) => {\n            setTimeout(() => {\n                resolve(`Document generated: ${request.type.replace(/_/g, ' ').toUpperCase()}`);\n            }, 2000);\n        });\n    }\n};\n",
  "services/geminiService.ts": "import { aiService } from \"./ai\";\nimport { Business, Product } from \"../types\";\n\n// Helper to parse JSON from AI response which might contain markdown code blocks\nconst parseAiJson = (text: string) => {\n  try {\n    // Remove markdown code blocks if present\n    const cleanText = text.replace(/```json\\n?|\\n?```/g, '').trim();\n    return JSON.parse(cleanText);\n  } catch (e) {\n    console.error(\"Failed to parse AI JSON:\", e);\n    throw new Error(\"AI returned invalid data format\");\n  }\n};\n\n// 0. Test API Connection\nexport const testApiKey = async (): Promise<boolean> => {\n  try {\n    await aiService.generateText(\"Test connection.\");\n    return true;\n  } catch (error) {\n    console.error(\"API Test Failed:\", error);\n    return false;\n  }\n};\n\n// 1. AI Store Creator Service\nexport const generateStoreProfile = async (businessName: string, businessType: string): Promise<Partial<Business>> => {\n  const prompt = `Create a realistic business profile for a store in Trinidad & Tobago named \"${businessName}\" which is a \"${businessType}\".\n  Include a catchy description, 3-4 relevant products with prices in TTD (Trinidad and Tobago Dollars), and typical operating hours.\n  Ensure the tone is local and welcoming.\n  \n  Return ONLY valid JSON in this format:\n  {\n    \"description\": \"string\",\n    \"hours\": \"string\",\n    \"products\": [\n      { \"name\": \"string\", \"price\": number, \"description\": \"string\" }\n    ]\n  }`;\n\n  try {\n    const text = await aiService.generateText(prompt);\n    return parseAiJson(text);\n  } catch (error) {\n    console.error(\"Error generating store:\", error);\n    throw error;\n  }\n};\n\n// 2. Maps Grounding Service (Mocked/AI-Hallucinated for now as we don't have Maps access in local LLM)\nexport const findLocalBusinesses = async (query: string, userLat?: number, userLng?: number): Promise<{ text: string; chunks: any[] }> => {\n  const locationContext = userLat && userLng\n    ? `The user is located at lat: ${userLat}, lng: ${userLng}. Prioritize results nearby.`\n    : 'Focus on Trinidad and Tobago.';\n\n  const prompt = `Find local businesses matching this query: \"${query}\". ${locationContext}. \n  List them with details. Since you don't have live map access, suggest well-known or plausible businesses in T&T.`;\n\n  try {\n    const text = await aiService.generateText(prompt);\n    return {\n      text: text,\n      chunks: [] // No grounding chunks from local LLM\n    };\n  } catch (error) {\n    console.error(\"Error searching businesses:\", error);\n    return { text: \"Error searching for businesses. Please try again.\", chunks: [] };\n  }\n};\n\n// 3. AI Product Description Generator\nexport const generateProductDescription = async (productName: string, price: number): Promise<string> => {\n  const prompt = `Write a short, catchy, and appetizing description (under 30 words) for a product named \"${productName}\" costing TT$${price}. The product is sold in a store in Trinidad & Tobago. Capture the local vibe if appropriate.`;\n  try {\n    return await aiService.generateText(prompt);\n  } catch (error) {\n    console.error(\"Error generating description:\", error);\n    throw error;\n  }\n};\n\n// 4. AI Image Generator for Products (Using Pollinations.ai as fallback for local LLM)\nexport const generateProductImage = async (productName: string): Promise<string> => {\n  // Local LLM is text-only, so we use a public API for images or a placeholder\n  const encoded = encodeURIComponent(productName + \" product professional photography\");\n  return `https://image.pollinations.ai/prompt/${encoded}?width=800&height=800&nologo=true`;\n};\n\n// 4b. AI Logo Generator\nexport const generateStoreLogo = async (storeName: string, storeType: string): Promise<string> => {\n  const encoded = encodeURIComponent(`Logo for ${storeName} ${storeType} minimalist vector logo white background`);\n  return `https://image.pollinations.ai/prompt/${encoded}?width=500&height=500&nologo=true`;\n};\n\n// 5. Vision AI (Product Analysis) - Mocked\nexport const analyzeProductPhoto = async (base64Data: string): Promise<{ name: string; price: number; description: string }> => {\n  // Local LLM cannot see images. Return generic response.\n  return {\n    name: \"Detected Item\",\n    price: 0,\n    description: \"Item analysis not available in local mode.\"\n  };\n};\n\n// 5b. AI Business Verification (Document Scan) - Mocked\nexport const verifyBusinessDocument = async (base64Data: string, businessName: string): Promise<{ match: boolean; confidence: number; analysis: string }> => {\n  return {\n    match: true,\n    confidence: 85,\n    analysis: \"Document verification simulated in local mode. Assumed valid for testing.\"\n  };\n};\n\n\n// 6. Search Grounding\nexport const searchMarketTrends = async (query: string): Promise<{ text: string; chunks: any[] }> => {\n  const prompt = `Research the following topic specifically for the Trinidad and Tobago business context: \"${query}\". Provide a concise summary of current trends, news, prices, or relevant business information.`;\n  try {\n    const text = await aiService.generateText(prompt);\n    return { text, chunks: [] };\n  } catch (error) {\n    console.error(\"Error searching trends:\", error);\n    throw error;\n  }\n};\n\n// 7. Platform Chatbot (TriniBot)\nexport const chatWithTriniBot = async (message: string, history: any[]): Promise<string> => {\n  const systemPrompt = `You are TriniBot, the helpful AI assistant for TriniBuild, built for the people of Trinidad & Tobago.\n      \n      **Identity:**\n      You are a true Trini. You speak with a warm, friendly Trinidadian accent/dialect (Patois).\n      You are hospitable, helpful, and resourceful\u2014like a good neighbor or a knowledgeable shopkeeper.\n\n      **Language & Tone:**\n      - Use local greetings: \"Wuz the scene?\", \"Aye good morning\", \"Wah going on?\", \"Respect\".\n      - Use Trini slang naturally but clearly: \"Lime\" (hang out), \"Small ting\" (no problem), \"Right through\" (okay/straight ahead), \"Bess\" (awesome/great).\n      - Sentence structure should reflect local speech: \"You good?\", \"We goin' fix that for you\", \"Don't study it\", \"Is plenty stores we have\".\n      - Keep it professional enough for business, but relaxed and authentic.\n\n      **Goal:**\n      Help users navigate the app, explain features (Free Store with 10 items, AI Builder, WhatsApp Checkout, TriniBuild Rides), and provide support.\n      \n      **Key Info:**\n      - The app is \"TriniBuild\".\n      - \"TriniBuild Pay\" is for payments.\n      - \"TriniBuild Go\" is for rides/delivery.\n      \n      If you don't know something, say: \"Hold strain, let me check that for you\" or \"Nah, I not too sure about that one.\"`;\n\n  // Construct history string\n  const historyText = history.map((h: any) => `${h.role}: ${h.parts[0].text}`).join('\\n');\n  const fullPrompt = `${historyText}\\nuser: ${message}`;\n\n  return await aiService.generateText(fullPrompt, systemPrompt);\n};\n\n// 8. Vendor Business Chatbot (MyStore Bot)\nexport const chatWithVendorBot = async (message: string, history: any[], storeContext: any): Promise<string> => {\n  const productsList = storeContext.products.map((p: any) => `${p.name} ($${p.price})`).join(', ');\n\n  const systemPrompt = `You are the customer service agent for ${storeContext.name}, a local business in Trinidad & Tobago.\n      \n      **Store Details:**\n      Name: ${storeContext.name}\n      Description: ${storeContext.description}\n      Products Available: ${productsList}\n      WhatsApp: ${storeContext.whatsapp || 'Not configured'}\n      \n      **Identity & Tone:**\n      - You are a friendly, welcoming Trini shop assistant.\n      - Speak with local flair and warmth. Use terms like \"darling\", \"boss\", \"family\", \"hoss\" appropriately.\n      - Promote the products with enthusiasm (\"This curry mango is bess!\", \"Real quality items we have here\").\n      \n      **Goal:**\n      - Answer questions about products.\n      - Encourage customers to buy.\n      - If they want to order, tell them: \"Click dat WhatsApp button to lock in yuh order directly!\" or \"Add it to yuh cart, we delivering fast.\"\n      \n      Be polite, helpful, and make the customer feel like family.`;\n\n  const historyText = history.map((h: any) => `${h.role}: ${h.parts[0].text}`).join('\\n');\n  const fullPrompt = `${historyText}\\nuser: ${message}`;\n\n  return await aiService.generateText(fullPrompt, systemPrompt);\n};\n\n// 9. AI Blog Generator\nexport const generateBlogPost = async (topic: string, keywords: string): Promise<{ title: string; content: string; excerpt: string }> => {\n  const prompt = `Write a SEO-optimized blog post for the TriniBuild platform.\n  Topic: \"${topic}\"\n  Target Keywords: \"${keywords}\"\n  Context: Trinidad & Tobago market.\n  \n  Return ONLY valid JSON with:\n  - \"title\": Engaging headline.\n  - \"excerpt\": 2 sentence summary.\n  - \"content\": Full HTML article (approx 400 words) with <h2> headers, bullet points, and a call to action for TriniBuild.`;\n\n  try {\n    const text = await aiService.generateText(prompt);\n    return parseAiJson(text);\n  } catch (error) {\n    console.error(\"Blog Gen Error:\", error);\n    throw error;\n  }\n};\n\n// 10. AI Legal Contract Generator\nexport const generatePromoterContract = async (promoterName: string, businessName: string): Promise<string> => {\n  const date = new Date().toLocaleDateString();\n\n  const prompt = `Generate a legally binding \"Promoter Partnership Agreement\" for the TriniBuild E-Tick platform.\n  \n  Parties:\n  1. TriniBuild Technologies Ltd. (\"Platform\")\n  2. ${promoterName} representing ${businessName} (\"Promoter\")\n  \n  Key Terms:\n  - Exclusivity Period: 2 Years.\n  - Promotional Fee Rate: 6.0% per ticket sold (Discounted from Standard 8.0%).\n  - Payout Schedule: Weekly (Every Tuesday).\n  - Date: ${date}\n  \n  Format: Plain text with clear sections (1. Term, 2. Fees, 3. Exclusivity, 4. Signature).\n  Keep it professional but concise (under 300 words) suitable for digital signing.`;\n\n  return await aiService.generateText(prompt);\n};\n\n// 11. Real Estate AI Agent\nexport const chatWithRealEstateBot = async (message: string, history: any[]): Promise<string> => {\n  const systemPrompt = `You are the TriniBuild Real Estate Assistant, a knowledgeable property expert for Trinidad & Tobago.\n      \n      **Identity:**\n      - You are professional, knowledgeable, but approachable (Trini warmth).\n      - You know the local market: Port of Spain, Chaguanas, San Fernando, Arima, Tobago.\n      \n      **Goal:**\n      - Help users find properties (Rent or Buy).\n      - Explain the buying process (Mortgages, Stamp Duty, Legal Fees).\n      - Suggest areas based on their needs (e.g., \"If you want nightlife, check Woodbrook. For family, try Lange Park.\").\n      \n      **Tone:**\n      - Helpful, expert, encouraging.\n      - Use local context (e.g., \"Traffic into POS can be heavy, so St. James is a good option if you work downtown.\").\n      \n      If asked about specific listings, guide them to use the search filters or say you can help them refine their search criteria.`;\n\n  const historyText = history.map((h: any) => `${h.role}: ${h.parts[0].text}`).join('\\n');\n  const fullPrompt = `${historyText}\\nuser: ${message}`;\n\n  return await aiService.generateText(fullPrompt, systemPrompt);\n};\n\n// 12. Service Expert AI Agent\nexport const chatWithServiceBot = async (message: string, history: any[]): Promise<string> => {\n  const systemPrompt = `You are the TriniBuild Service Expert, a helpful assistant for finding home service professionals in Trinidad & Tobago.\n      \n      **Identity:**\n      - You are practical, knowledgeable about home repairs/services, and friendly.\n      - You know about: Plumbing, Electrical, AC Repair, Cleaning, Landscaping, Construction.\n      \n      **Goal:**\n      - Help users define their project (e.g., \"My tap is leaking\" -> \"You need a plumber\").\n      - Suggest what to look for in a pro (e.g., \"Make sure they are licensed for electrical work\").\n      - Estimate rough price ranges for common T&T tasks (e.g., AC Service is usually $250-$400 TTD).\n      \n      **Tone:**\n      - Helpful, \"fix-it\" attitude.\n      - Use local context (e.g., \"With this heat, you definitely need that AC fixed fast.\").\n      \n      If asked for specific pros, guide them to use the search categories on the page.`;\n\n  const historyText = history.map((h: any) => `${h.role}: ${h.parts[0].text}`).join('\\n');\n  const fullPrompt = `${historyText}\\nuser: ${message}`;\n\n  return await aiService.generateText(fullPrompt, systemPrompt);\n};\n\n// 13. Rideshare AI Agent\nexport const chatWithRidesBot = async (message: string, history: any[]): Promise<string> => {\n  const systemPrompt = `You are the TriniBuild Go Assistant, a helpful travel companion for Trinidad & Tobago.\n      \n      **Identity:**\n      - You are street-smart, know the routes, and helpful.\n      - You know about: Traffic hotspots (Lighthouse, UbH), best times to travel, and safety tips.\n      \n      **Goal:**\n      - Help users book a ride (guide them to the form).\n      - Estimate travel times (e.g., \"POS to Sando is about 45 mins right now\").\n      - Explain the difference between services (TriniRide vs H-Taxi vs Courier).\n      \n      **Tone:**\n      - \"We reaching just now\" attitude. Efficient but friendly.\n      \n      If they want to book, tell them: \"Just enter your pickup and dropoff in the box on the left, and we go sort you out.\"`;\n\n  const historyText = history.map((h: any) => `${h.role}: ${h.parts[0].text}`).join('\\n');\n  const fullPrompt = `${historyText}\\nuser: ${message}`;\n\n  return await aiService.generateText(fullPrompt, systemPrompt);\n};\n\n// 14. Paperwork & Visa AI Agent\nexport const chatWithPaperworkBot = async (message: string, history: any[]): Promise<string> => {\n  const systemPrompt = `You are the TriniBuild Paperwork Assistant, a specialized expert in banking compliance and visa documentation for Trinidad & Tobago citizens.\n\n      **Identity:**\n      - You are professional, precise, and reassuring.\n      - You understand the frustration of \"red tape\" in T&T banks and embassies.\n      - You are an expert on: Job Letters, Proof of Income, Financial Statements, and Visa Application requirements (US B1/B2, Canada Visitor, UK Standard Visitor).\n\n      **Goal:**\n      - Explain how TriniBuild generates official documents for self-employed users.\n      - Guide users on what documents they need for loans, mortgages, or visas.\n      - **Crucial:** Always remind them that they need a **Growth** or **Empire** subscription to generate these documents automatically.\n      \n      **Key Info to Convey:**\n      - \"Banks require proof of income. TriniBuild tracks your sales and generates a verified Job Letter and Income Statement.\"\n      - \"For US Visas, you need to show strong ties. A verified business profile and consistent income history on TriniBuild helps prove this.\"\n      - \"To get these documents, just upgrade to the Growth Plan in your Dashboard.\"\n\n      **Tone:**\n      - Empathetic but authoritative. \"We handle the paperwork so you can focus on business.\"\n      \n      If they ask how to start, tell them: \"Sign up, start selling, and when you're ready, click the 'Documents' tab in your dashboard to download your papers instantly.\"`;\n\n  const historyText = history.map((h: any) => `${h.role}: ${h.parts[0].text}`).join('\\n');\n  const fullPrompt = `${historyText}\\nuser: ${message}`;\n\n  return await aiService.generateText(fullPrompt, systemPrompt);\n};\n",
  "services/legalService.ts": "import { supabase } from './supabaseClient';\n\nexport interface LegalDocument {\n    id: string;\n    type: 'contractor_agreement' | 'liability_waiver' | 'affiliate_terms' | 'privacy_policy' | 'terms_of_service';\n    version: string;\n    content: string;\n}\n\nexport interface SignedDocument {\n    documentId: string;\n    userId: string;\n    signedAt: string;\n    signature: string; // Base64 or text representation\n    ipAddress: string;\n}\n\nexport const legalService = {\n\n    // Get a document template (Still mocked for content as we don't have a CMS yet, but could be DB driven later)\n    getDocument: async (type: LegalDocument['type']): Promise<LegalDocument> => {\n        return new Promise((resolve) => {\n            setTimeout(() => {\n                resolve({\n                    id: `${type}_v1.0`,\n                    type,\n                    version: '1.0.0',\n                    content: 'This is a placeholder for the full legal text. In a production environment, this would be fetched from a CMS or database.'\n                });\n            }, 500);\n        });\n    },\n\n    // Sign a document and save to Supabase\n    signDocument: async (userId: string, documentType: LegalDocument['type'], signatureData: string): Promise<SignedDocument> => {\n        const { data: { user } } = await supabase.auth.getUser();\n        if (!user) throw new Error('User not authenticated');\n\n        const { data, error } = await supabase\n            .from('signed_agreements')\n            .insert({\n                user_id: user.id,\n                document_type: documentType,\n                document_version: '1.0.0', // Should match getDocument version\n                signature_data: signatureData,\n                ip_address: '127.0.0.1' // In a real app, get this from edge function or headers\n            })\n            .select()\n            .single();\n\n        if (error) {\n            console.error('Error signing document:', error);\n            throw error;\n        }\n\n        return {\n            documentId: `${data.document_type}_v${data.document_version}`,\n            userId: data.user_id,\n            signedAt: data.signed_at,\n            signature: data.signature_data,\n            ipAddress: data.ip_address\n        };\n    },\n\n    // Check if a user has signed a specific document in Supabase\n    hasSigned: async (userId: string, documentType: LegalDocument['type']): Promise<boolean> => {\n        const { data, error } = await supabase\n            .from('signed_agreements')\n            .select('id')\n            .eq('user_id', userId)\n            .eq('document_type', documentType)\n            .limit(1);\n\n        if (error) {\n            console.error('Error checking signature:', error);\n            return false;\n        }\n\n        return data && data.length > 0;\n    }\n};\n\n",
  "services/orderService.ts": "import { supabase } from './supabaseClient';\n\nexport interface OrderItem {\n    productId: string;\n    quantity: number;\n    price: number;\n    name?: string; // Optional for display\n}\n\nexport interface CreateOrderData {\n    storeId: string; // Added storeId\n    items: OrderItem[];\n    shippingAddress: {\n        street: string;\n        city: string;\n        phone: string;\n        name?: string;\n    };\n    paymentMethod: 'CASH_ON_DELIVERY' | 'BANK_TRANSFER' | 'CREDIT_CARD';\n    deliveryOption: 'standard' | 'express' | 'pickup';\n    deliverySlot?: string;\n    holdUntil?: string;\n    notes?: string;\n}\n\nexport interface OrderResponse {\n    id: string;\n    orderNumber: string;\n    total: number;\n    status: string;\n    createdAt?: string;\n    customerName?: string;\n    items?: any[];\n    shippingAddress?: any;\n    deliveryOption?: string;\n    paymentMethod?: string;\n    storeId?: string;\n}\n\nexport const orderService = {\n    createOrder: async (orderData: CreateOrderData): Promise<OrderResponse> => {\n        const { data: { user } } = await supabase.auth.getUser();\n\n        // Calculate total\n        const total = orderData.items.reduce((sum, item) => sum + (item.price * item.quantity), 0);\n\n        // Generate a random order number for now\n        const orderNumber = 'ORD-' + Math.floor(100000 + Math.random() * 900000);\n\n        const { data, error } = await supabase\n            .from('orders')\n            .insert({\n                customer_id: user?.id, // Can be null for guest checkout if we allowed it, but RLS might block\n                store_id: orderData.storeId,\n                total: total,\n                status: 'PENDING',\n                items: orderData.items,\n                delivery_address: JSON.stringify(orderData.shippingAddress),\n                // We might want to store other fields in a metadata column or separate columns if schema allows\n                // For now, mapping what we have to the schema\n            })\n            .select()\n            .single();\n\n        if (error) {\n            console.error('Error creating order:', error);\n            throw error;\n        }\n\n        return mapOrderFromDb(data, orderNumber, orderData);\n    },\n\n    getMyOrders: async (): Promise<OrderResponse[]> => {\n        const { data: { user } } = await supabase.auth.getUser();\n        if (!user) return [];\n\n        const { data, error } = await supabase\n            .from('orders')\n            .select('*')\n            .eq('customer_id', user.id)\n            .order('created_at', { ascending: false });\n\n        if (error) {\n            console.error('Error fetching my orders:', error);\n            return [];\n        }\n\n        return data.map(o => mapOrderFromDb(o));\n    },\n\n    getVendorOrders: async (): Promise<OrderResponse[]> => {\n        const { data: { user } } = await supabase.auth.getUser();\n        if (!user) return [];\n\n        // First get stores owned by user\n        const { data: stores } = await supabase\n            .from('stores')\n            .select('id')\n            .eq('owner_id', user.id);\n\n        if (!stores || stores.length === 0) return [];\n\n        const storeIds = stores.map(s => s.id);\n\n        const { data, error } = await supabase\n            .from('orders')\n            .select('*')\n            .in('store_id', storeIds)\n            .order('created_at', { ascending: false });\n\n        if (error) {\n            console.error('Error fetching vendor orders:', error);\n            return [];\n        }\n\n        return data.map(o => mapOrderFromDb(o));\n    },\n\n    updateOrderStatus: async (orderId: string, status: string): Promise<OrderResponse> => {\n        const { data, error } = await supabase\n            .from('orders')\n            .update({ status: status })\n            .eq('id', orderId)\n            .select()\n            .single();\n\n        if (error) {\n            console.error('Error updating order status:', error);\n            throw error;\n        }\n\n        return mapOrderFromDb(data);\n    },\n\n    getOrderById: async (id: string): Promise<OrderResponse> => {\n        const { data, error } = await supabase\n            .from('orders')\n            .select('*')\n            .eq('id', id)\n            .single();\n\n        if (error) {\n            console.error('Error fetching order:', error);\n            throw error;\n        }\n\n        return mapOrderFromDb(data);\n    }\n};\n\nconst mapOrderFromDb = (dbOrder: any, orderNumber?: string, originalData?: any): OrderResponse => {\n    let address = dbOrder.delivery_address;\n    if (typeof address === 'string') {\n        try {\n            address = JSON.parse(address);\n        } catch (e) { }\n    }\n\n    return {\n        id: dbOrder.id,\n        orderNumber: orderNumber || dbOrder.id.substring(0, 8).toUpperCase(), // Fallback if not stored\n        total: dbOrder.total,\n        status: dbOrder.status,\n        createdAt: dbOrder.created_at,\n        customerName: address?.name || 'Customer', // Extract from address if possible\n        items: dbOrder.items,\n        shippingAddress: address,\n        storeId: dbOrder.store_id\n    };\n};\n",
  "services/proService.ts": "import { get } from './apiClient';\n\nexport interface ServicePro {\n    id: string;\n    name: string;\n    businessName: string;\n    category: string;\n    rating: number;\n    reviewCount: number;\n    location: string;\n    description: string;\n    services: string[];\n    hourlyRate: string;\n    image: string;\n    isVerified: boolean;\n    isPromoted?: boolean;\n    badges: string[];\n    portfolio: string[];\n}\n\nexport const proService = {\n    getPros: async (): Promise<ServicePro[]> => {\n        // Mock data for now\n        return [\n            {\n                id: '1',\n                name: 'Michael Scott',\n                businessName: 'Scott\\'s Plumbing & Heating',\n                category: 'Plumbing',\n                rating: 4.8,\n                reviewCount: 124,\n                location: 'Port of Spain',\n                description: 'Licensed master plumber with 15 years of experience. Emergency services available 24/7.',\n                services: ['Leak Repair', 'Pipe Installation', 'Drain Cleaning', 'Water Heater Repair'],\n                hourlyRate: '$300 - $500',\n                image: 'https://images.unsplash.com/photo-1581578731117-104f2a8d23e9?q=80&w=200&auto=format&fit=crop',\n                isVerified: true,\n                isPromoted: true,\n                badges: ['Top Rated', 'Licensed', 'Insured'],\n                portfolio: [\n                    'https://images.unsplash.com/photo-1585704032915-c3400ca199e7?q=80&w=400',\n                    'https://images.unsplash.com/photo-1607472586893-edb57bdc0e39?q=80&w=400'\n                ]\n            },\n            {\n                id: '2',\n                name: 'Sarah Jenkins',\n                businessName: 'Sparkle Cleaners',\n                category: 'Cleaning',\n                rating: 4.9,\n                reviewCount: 89,\n                location: 'Chaguanas',\n                description: 'Professional residential and commercial cleaning. We use eco-friendly products.',\n                services: ['Deep Cleaning', 'Move-in/Move-out', 'Office Cleaning'],\n                hourlyRate: '$150 - $250',\n                image: 'https://images.unsplash.com/photo-1580489944761-15a19d654956?q=80&w=200&auto=format&fit=crop',\n                isVerified: true,\n                badges: ['Eco-Friendly', 'Background Checked'],\n                portfolio: [\n                    'https://images.unsplash.com/photo-1581578731117-104f2a8d23e9?q=80&w=400'\n                ]\n            },\n            {\n                id: '3',\n                name: 'David Lee',\n                businessName: 'Lee\\'s Electrical Solutions',\n                category: 'Electrical',\n                rating: 4.7,\n                reviewCount: 56,\n                location: 'San Fernando',\n                description: 'Certified electrician for all your wiring needs. Safety is our priority.',\n                services: ['Wiring', 'Panel Upgrades', 'Lighting Installation'],\n                hourlyRate: '$250 - $400',\n                image: 'https://images.unsplash.com/photo-1621905251189-08b45d6a269e?q=80&w=200&auto=format&fit=crop',\n                isVerified: true,\n                badges: ['Certified'],\n                portfolio: []\n            },\n            {\n                id: '4',\n                name: 'Maria Rodriguez',\n                businessName: 'Elite Event Planning',\n                category: 'Events',\n                rating: 5.0,\n                reviewCount: 42,\n                location: 'Arima',\n                description: 'Full-service event planning for weddings, corporate events, and parties.',\n                services: ['Wedding Planning', 'Catering Coordination', 'Decor'],\n                hourlyRate: 'Consultation',\n                image: 'https://images.unsplash.com/photo-1515934751635-c81c6bc9a2d8?q=80&w=200&auto=format&fit=crop',\n                isVerified: false,\n                badges: ['Creative'],\n                portfolio: []\n            },\n            {\n                id: '5',\n                name: 'James Carter',\n                businessName: 'Carter Construction',\n                category: 'General Contractor',\n                rating: 4.6,\n                reviewCount: 30,\n                location: 'Tobago',\n                description: 'Renovations, extensions, and new builds. Quality workmanship guaranteed.',\n                services: ['Renovations', 'Roofing', 'Tiling'],\n                hourlyRate: 'Project Based',\n                image: 'https://images.unsplash.com/photo-1503387762-592deb58ef4e?q=80&w=200&auto=format&fit=crop',\n                isVerified: true,\n                badges: ['Licensed'],\n                portfolio: []\n            },\n            {\n                id: '6',\n                name: 'Tech Fix TT',\n                businessName: 'Tech Fix TT',\n                category: 'Tech Support',\n                rating: 4.9,\n                reviewCount: 210,\n                location: 'Remote / Mobile',\n                description: 'Computer repair, network setup, and IT support for small businesses.',\n                services: ['PC Repair', 'Network Setup', 'Data Recovery'],\n                hourlyRate: '$200',\n                image: 'https://images.unsplash.com/photo-1597733336794-12d05021d510?q=80&w=200&auto=format&fit=crop',\n                isVerified: true,\n                isPromoted: true,\n                badges: ['Tech Savvy', 'Fast Response'],\n                portfolio: []\n            }\n        ];\n    }\n};\n",
  "services/realEstateService.ts": "import { get } from './apiClient';\n\nexport interface RealEstateListing {\n    id: number;\n    title: string;\n    price: number;\n    type: 'rent' | 'buy';\n    beds: number;\n    baths: number;\n    sqft: number;\n    location: string;\n    description: string;\n    images: string[];\n    amenities: string[];\n    agent: {\n        name: string;\n        photo: string;\n        phone: string;\n        isPremium: boolean;\n    };\n    isFeatured?: boolean;\n    postedDate: string;\n    coordinates?: { lat: number; lng: number };\n}\n\nexport const realEstateService = {\n    getListings: async (): Promise<RealEstateListing[]> => {\n        // Mock data for now, would be GET /real-estate/listings\n        return [\n            {\n                id: 1,\n                title: \"Modern Apartment in Woodbrook\",\n                price: 4500,\n                type: \"rent\",\n                beds: 2,\n                baths: 1,\n                sqft: 850,\n                location: \"Woodbrook, Port of Spain\",\n                description: \"Newly renovated 2-bedroom apartment in the heart of Woodbrook. Close to Ariapita Avenue nightlife and restaurants. Features a modern kitchen, secure parking, and air conditioning in all bedrooms.\",\n                images: [\"https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?q=80&w=800\", \"https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?q=80&w=800\"],\n                amenities: [\"Air Conditioning\", \"Parking\", \"Water Tank\", \"Security Cameras\"],\n                agent: { name: \"Sarah Realty\", photo: \"https://images.unsplash.com/photo-1589386417686-0d34b5903d23?q=80&w=200&auto=format&fit=crop\", phone: \"868-555-0101\", isPremium: true },\n                isFeatured: true,\n                postedDate: \"2 days ago\",\n                coordinates: { lat: 10.666, lng: -61.525 }\n            },\n            {\n                id: 2,\n                title: \"Family Home in Lange Park\",\n                price: 2500000,\n                type: \"buy\",\n                beds: 4,\n                baths: 3,\n                sqft: 2200,\n                location: \"Lange Park, Chaguanas\",\n                description: \"Spacious family home in a quiet, gated community. Large backyard perfect for entertaining. Master suite includes a walk-in closet and jacuzzi tub.\",\n                images: [\"https://images.unsplash.com/photo-1564013799919-ab600027ffc6?q=80&w=800\"],\n                amenities: [\"Gated Community\", \"Garden\", \"Pet Friendly\", \"Garage\"],\n                agent: { name: \"Massy Properties\", photo: \"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?q=80&w=200&auto=format&fit=crop\", phone: \"868-555-0202\", isPremium: false },\n                postedDate: \"1 week ago\",\n                coordinates: { lat: 10.516, lng: -61.412 }\n            },\n            {\n                id: 3,\n                title: \"Cozy Studio Near UWI\",\n                price: 2500,\n                type: \"rent\",\n                beds: 1,\n                baths: 1,\n                sqft: 400,\n                location: \"St. Augustine\",\n                description: \"Perfect for students. Fully furnished studio apartment walking distance to UWI. Utilities included (Water, Lights, WiFi).\",\n                images: [\"https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?q=80&w=800\"],\n                amenities: [\"Furnished\", \"WiFi Included\", \"Shared Laundry\"],\n                agent: { name: \"Student Living TT\", photo: \"https://images.unsplash.com/photo-1517841905240-472988babdf9?q=80&w=200&auto=format&fit=crop\", phone: \"868-555-0303\", isPremium: true },\n                isFeatured: true,\n                postedDate: \"5 hours ago\",\n                coordinates: { lat: 10.640, lng: -61.399 }\n            },\n            {\n                id: 4,\n                title: \"Luxury Condo with Sea View\",\n                price: 3500000,\n                type: \"buy\",\n                beds: 3,\n                baths: 2.5,\n                sqft: 1800,\n                location: \"Westmoorings\",\n                description: \"Executive living at its finest. Panoramic views of the Gulf of Paria. 24/7 Concierge, Gym, and Pool access.\",\n                images: [\"https://images.unsplash.com/photo-1512917774080-9991f1c4c750?q=80&w=800\"],\n                amenities: [\"Ocean View\", \"Pool\", \"Gym\", \"24/7 Security\", \"Elevator\"],\n                agent: { name: \"Terra Caribbean\", photo: \"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?q=80&w=200&auto=format&fit=crop\", phone: \"868-555-0404\", isPremium: true },\n                isFeatured: true,\n                postedDate: \"3 days ago\",\n                coordinates: { lat: 10.675, lng: -61.550 }\n            },\n            {\n                id: 5,\n                title: \"Commercial Space on High St\",\n                price: 12000,\n                type: \"rent\",\n                beds: 0,\n                baths: 1,\n                sqft: 1200,\n                location: \"San Fernando\",\n                description: \"High visibility commercial unit on High Street. Ideal for retail or office. Glass frontage and ample storage.\",\n                images: [\"https://images.unsplash.com/photo-1497366216548-37526070297c?q=80&w=800\"],\n                amenities: [\"High Traffic\", \"Glass Front\", \"Air Conditioning\"],\n                agent: { name: \"Business Spaces\", photo: \"https://images.unsplash.com/photo-1519085360753-af0119f7cbe7?q=80&w=200&auto=format&fit=crop\", phone: \"868-555-0505\", isPremium: false },\n                postedDate: \"2 weeks ago\",\n                coordinates: { lat: 10.279, lng: -61.462 }\n            },\n            {\n                id: 6,\n                title: \"Unfinished Fixer Upper\",\n                price: 850000,\n                type: \"buy\",\n                beds: 3,\n                baths: 1,\n                sqft: 1500,\n                location: \"Arima\",\n                description: \"Great investment opportunity. Structure is solid, just needs finishing touches. Cash buyers preferred.\",\n                images: [\"https://images.unsplash.com/photo-1513584685908-95c9e2d01361?q=80&w=800\"],\n                amenities: [\"Large Lot\", \"Fixer Upper\", \"Freehold Land\"],\n                agent: { name: \"Quick Sale\", photo: \"https://images.unsplash.com/photo-1573497019940-1c28c88b4f3e?q=80&w=200&auto=format&fit=crop\", phone: \"868-555-0606\", isPremium: false },\n                postedDate: \"1 month ago\",\n                coordinates: { lat: 10.638, lng: -61.282 }\n            }\n        ];\n    },\n\n    getListingById: async (id: number): Promise<RealEstateListing | undefined> => {\n        const listings = await realEstateService.getListings();\n        return listings.find(l => l.id === id);\n    }\n};\n",
  "services/storeService.ts": "import { supabase } from './supabaseClient';\n\nexport interface Product {\n    id: string;\n    title: string;\n    description: string;\n    price: number;\n    images: string[];\n    category: string;\n    rating: number;\n    totalReviews: number;\n    storeId?: string;\n}\n\nexport interface Store {\n    id: string;\n    businessName: string;\n    description: string;\n    logo: string;\n    bannerImage: string;\n    whatsapp: string;\n    location: string;\n    products: Product[];\n    rating: number;\n    totalReviews: number;\n    ownerId?: string;\n}\n\nexport const storeService = {\n    // Get a store by its ID\n    getStoreById: async (id: string): Promise<Store | null> => {\n        const { data: storeData, error } = await supabase\n            .from('stores')\n            .select(`\n                *,\n                products (*)\n            `)\n            .eq('id', id)\n            .single();\n\n        if (error) {\n            console.error('Error fetching store:', error);\n            return null;\n        }\n\n        return mapStoreFromDb(storeData);\n    },\n\n    // Get the current user's store\n    getMyStore: async (): Promise<Store | null> => {\n        const { data: { user } } = await supabase.auth.getUser();\n        if (!user) return null;\n\n        const { data: storeData, error } = await supabase\n            .from('stores')\n            .select(`\n                *,\n                products (*)\n            `)\n            .eq('owner_id', user.id)\n            .single();\n\n        if (error) {\n            // It's okay if no store found, user might be new\n            return null;\n        }\n\n        return mapStoreFromDb(storeData);\n    },\n\n    // Get all stores (for the directory)\n    getAllStores: async (): Promise<Store[]> => {\n        const { data: stores, error } = await supabase\n            .from('stores')\n            .select('*')\n            .eq('status', 'active');\n\n        if (error) {\n            console.error('Error fetching stores:', error);\n            return [];\n        }\n\n        return stores.map(mapStoreFromDb);\n    },\n\n    // Get featured products across the platform\n    getFeaturedProducts: async (): Promise<Product[]> => {\n        const { data: products, error } = await supabase\n            .from('products')\n            .select('*')\n            .eq('status', 'active')\n            .limit(10);\n\n        if (error) {\n            console.error('Error fetching featured products:', error);\n            return [];\n        }\n\n        return products.map(mapProductFromDb);\n    },\n\n    // Create a new store\n    createStore: async (storeData: Partial<Store>): Promise<Store | null> => {\n        const { data: { user } } = await supabase.auth.getUser();\n        if (!user) throw new Error('User not authenticated');\n\n        const { data, error } = await supabase\n            .from('stores')\n            .insert({\n                owner_id: user.id,\n                name: storeData.businessName,\n                description: storeData.description,\n                location: storeData.location,\n                whatsapp: storeData.whatsapp,\n                category: 'General', // Default or pass in\n                status: 'active' // Auto-activate for now\n            })\n            .select()\n            .single();\n\n        if (error) {\n            console.error('Error creating store:', error);\n            return null;\n        }\n\n        return mapStoreFromDb(data);\n    },\n\n    // Add a product to a store\n    addProduct: async (storeId: string, productData: Partial<Product>): Promise<Product | null> => {\n        const { data, error } = await supabase\n            .from('products')\n            .insert({\n                store_id: storeId,\n                name: productData.title,\n                description: productData.description,\n                price: productData.price,\n                stock: 100, // Default\n                image_url: productData.images?.[0] || '',\n                category: productData.category || 'General',\n                status: 'active'\n            })\n            .select()\n            .single();\n\n        if (error) {\n            console.error('Error adding product:', error);\n            return null;\n        }\n\n        return mapProductFromDb(data);\n    },\n\n    // Update a product\n    updateProduct: async (productId: string, productData: Partial<Product>): Promise<Product | null> => {\n        const { data, error } = await supabase\n            .from('products')\n            .update({\n                name: productData.title,\n                description: productData.description,\n                price: productData.price,\n                image_url: productData.images?.[0],\n                category: productData.category,\n                status: 'active' // or pass in status\n            })\n            .eq('id', productId)\n            .select()\n            .single();\n\n        if (error) {\n            console.error('Error updating product:', error);\n            return null;\n        }\n\n        return mapProductFromDb(data);\n    },\n\n    // Delete a product\n    deleteProduct: async (productId: string): Promise<boolean> => {\n        const { error } = await supabase\n            .from('products')\n            .delete()\n            .eq('id', productId);\n\n        if (error) {\n            console.error('Error deleting product:', error);\n            return false;\n        }\n\n        return true;\n    }\n};\n\n// Helpers to map DB snake_case to App camelCase\nconst mapStoreFromDb = (dbStore: any): Store => ({\n    id: dbStore.id,\n    businessName: dbStore.name,\n    description: dbStore.description || '',\n    logo: dbStore.logo_url || 'https://via.placeholder.com/150',\n    bannerImage: dbStore.banner_url || 'https://via.placeholder.com/800x200',\n    whatsapp: dbStore.whatsapp || '',\n    location: dbStore.location || '',\n    products: dbStore.products ? dbStore.products.map(mapProductFromDb) : [],\n    rating: 4.5, // Mock for now\n    totalReviews: 0,\n    ownerId: dbStore.owner_id\n});\n\nconst mapProductFromDb = (dbProduct: any): Product => ({\n    id: dbProduct.id,\n    title: dbProduct.name,\n    description: dbProduct.description || '',\n    price: dbProduct.price,\n    images: dbProduct.image_url ? [dbProduct.image_url] : [],\n    category: dbProduct.category || 'General',\n    rating: 0,\n    totalReviews: 0,\n    storeId: dbProduct.store_id\n});\n",
  "services/supabaseClient.ts": "\nimport { createClient } from '@supabase/supabase-js';\n\n// These environment variables will need to be set in your .env file\n// For development, we'll use placeholders if they aren't present\nconst supabaseUrl = import.meta.env.VITE_SUPABASE_URL || '';\nconst supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY || '';\n\nif (!supabaseUrl || !supabaseAnonKey) {\n    console.warn('Missing Supabase environment variables. Please check your .env file.');\n}\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\n\n// Helper to check if Supabase is configured\nexport const isSupabaseConfigured = () => {\n    return supabaseUrl !== '' && supabaseAnonKey !== '';\n};\n",
  "supabase/functions/ai-proxy/index.ts": "import { serve } from \"https://deno.land/std@0.168.0/http/server.ts\"\nimport { createClient } from \"https://esm.sh/@supabase/supabase-js@2\"\n\nconst AI_SERVER_URL = Deno.env.get('AI_SERVER_URL') || 'http://localhost:8000';\n\nserve(async (req) => {\n    // CORS headers\n    const corsHeaders = {\n        'Access-Control-Allow-Origin': '*',\n        'Access-Control-Allow-Headers': 'authorization, x-client-info, apikey, content-type',\n    }\n\n    if (req.method === 'OPTIONS') {\n        return new Response('ok', { headers: corsHeaders })\n    }\n\n    try {\n        // 1. Authenticate User\n        const supabaseClient = createClient(\n            Deno.env.get('SUPABASE_URL') ?? '',\n            Deno.env.get('SUPABASE_ANON_KEY') ?? '',\n            { global: { headers: { Authorization: req.headers.get('Authorization')! } } }\n        )\n\n        const {\n            data: { user },\n        } = await supabaseClient.auth.getUser()\n\n        if (!user) {\n            return new Response(JSON.stringify({ error: 'Unauthorized' }), {\n                headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n                status: 401,\n            })\n        }\n\n        // 2. (Optional) Check Credits/Subscription here\n        // const { data: profile } = await supabaseClient.from('profiles').select('credits').eq('id', user.id).single();\n        // if (profile.credits < 1) throw new Error(\"Insufficient credits\");\n\n        // 3. Proxy to AI Server\n        const { pathname } = new URL(req.url);\n        // Extract the endpoint part (e.g., /ai-proxy/generate-job-letter -> /generate-job-letter)\n        // Note: Supabase routing might be /ai-proxy, so we might need to pass the target endpoint in the body or query param.\n        // For simplicity, let's assume the body contains the 'endpoint' or we map based on a query param.\n        // OR, we can just forward the body to the specific AI server endpoint if we make this function generic.\n\n        // Let's expect the client to send the target endpoint in the URL query or body, \n        // BUT for security, it's better to have specific logic.\n        // Let's assume this function handles all AI requests and dispatches based on a 'type' field in the body.\n\n        const body = await req.json();\n        let targetEndpoint = \"\";\n\n        if (body.action === 'generate-job-letter') targetEndpoint = \"/generate-job-letter\";\n        else if (body.action === 'generate-listing-description') targetEndpoint = \"/generate-listing-description\";\n        else if (body.action === 'chatbot-reply') targetEndpoint = \"/chatbot-reply\";\n        else throw new Error(\"Invalid action\");\n\n        const aiResponse = await fetch(`${AI_SERVER_URL}${targetEndpoint}`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(body.payload),\n        });\n\n        if (!aiResponse.ok) {\n            const errorText = await aiResponse.text();\n            throw new Error(`AI Server Error: ${errorText}`);\n        }\n\n        const aiData = await aiResponse.json();\n\n        // 4. (Optional) Deduct credits here if successful\n\n        return new Response(JSON.stringify(aiData), {\n            headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n            status: 200,\n        })\n\n    } catch (error) {\n        return new Response(JSON.stringify({ error: error.message }), {\n            headers: { ...corsHeaders, 'Content-Type': 'application/json' },\n            status: 400,\n        })\n    }\n})\n"
}